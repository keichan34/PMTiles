var U2=Object.defineProperty,V2=Object.defineProperties;var $2=Object.getOwnPropertyDescriptors;var bd=Object.getOwnPropertySymbols;var tv=Object.prototype.hasOwnProperty,nv=Object.prototype.propertyIsEnumerable;var ev=(e,n,s)=>n in e?U2(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,ri=(e,n)=>{for(var s in n||(n={}))tv.call(n,s)&&ev(e,s,n[s]);if(bd)for(var s of bd(n))nv.call(n,s)&&ev(e,s,n[s]);return e},ka=(e,n)=>V2(e,$2(n));var pn=(e,n)=>{var s={};for(var h in e)tv.call(e,h)&&n.indexOf(h)<0&&(s[h]=e[h]);if(e!=null&&bd)for(var h of bd(e))n.indexOf(h)<0&&nv.call(e,h)&&(s[h]=e[h]);return s};function Z2(e,n){return n.forEach(function(s){s&&typeof s!="string"&&!Array.isArray(s)&&Object.keys(s).forEach(function(h){if(h!=="default"&&!(h in e)){var g=Object.getOwnPropertyDescriptor(s,h);Object.defineProperty(e,h,g.get?g:{enumerable:!0,get:function(){return s[h]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const j2=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const v of g)if(v.type==="childList")for(const S of v.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&h(S)}).observe(document,{childList:!0,subtree:!0});function s(g){const v={};return g.integrity&&(v.integrity=g.integrity),g.referrerpolicy&&(v.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?v.credentials="include":g.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function h(g){if(g.ep)return;g.ep=!0;const v=s(g);fetch(g.href,v)}};j2();var Yx=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},re={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh=Symbol.for("react.element"),G2=Symbol.for("react.portal"),W2=Symbol.for("react.fragment"),q2=Symbol.for("react.strict_mode"),H2=Symbol.for("react.profiler"),X2=Symbol.for("react.provider"),K2=Symbol.for("react.context"),Y2=Symbol.for("react.forward_ref"),J2=Symbol.for("react.suspense"),Q2=Symbol.for("react.memo"),eS=Symbol.for("react.lazy"),iv=Symbol.iterator;function tS(e){return e===null||typeof e!="object"?null:(e=iv&&e[iv]||e["@@iterator"],typeof e=="function"?e:null)}var Jx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qx=Object.assign,e0={};function Ec(e,n,s){this.props=e,this.context=n,this.refs=e0,this.updater=s||Jx}Ec.prototype.isReactComponent={};Ec.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Ec.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function t0(){}t0.prototype=Ec.prototype;function Mg(e,n,s){this.props=e,this.context=n,this.refs=e0,this.updater=s||Jx}var Lg=Mg.prototype=new t0;Lg.constructor=Mg;Qx(Lg,Ec.prototype);Lg.isPureReactComponent=!0;var rv=Array.isArray,n0=Object.prototype.hasOwnProperty,Dg={current:null},i0={key:!0,ref:!0,__self:!0,__source:!0};function r0(e,n,s){var h,g={},v=null,S=null;if(n!=null)for(h in n.ref!==void 0&&(S=n.ref),n.key!==void 0&&(v=""+n.key),n)n0.call(n,h)&&!i0.hasOwnProperty(h)&&(g[h]=n[h]);var u=arguments.length-2;if(u===1)g.children=s;else if(1<u){for(var A=Array(u),V=0;V<u;V++)A[V]=arguments[V+2];g.children=A}if(e&&e.defaultProps)for(h in u=e.defaultProps,u)g[h]===void 0&&(g[h]=u[h]);return{$$typeof:Wh,type:e,key:v,ref:S,props:g,_owner:Dg.current}}function nS(e,n){return{$$typeof:Wh,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function Rg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wh}function iS(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return n[s]})}var ov=/\/+/g;function Wf(e,n){return typeof e=="object"&&e!==null&&e.key!=null?iS(""+e.key):n.toString(36)}function Kd(e,n,s,h,g){var v=typeof e;(v==="undefined"||v==="boolean")&&(e=null);var S=!1;if(e===null)S=!0;else switch(v){case"string":case"number":S=!0;break;case"object":switch(e.$$typeof){case Wh:case G2:S=!0}}if(S)return S=e,g=g(S),e=h===""?"."+Wf(S,0):h,rv(g)?(s="",e!=null&&(s=e.replace(ov,"$&/")+"/"),Kd(g,n,s,"",function(V){return V})):g!=null&&(Rg(g)&&(g=nS(g,s+(!g.key||S&&S.key===g.key?"":(""+g.key).replace(ov,"$&/")+"/")+e)),n.push(g)),1;if(S=0,h=h===""?".":h+":",rv(e))for(var u=0;u<e.length;u++){v=e[u];var A=h+Wf(v,u);S+=Kd(v,n,s,A,g)}else if(A=tS(e),typeof A=="function")for(e=A.call(e),u=0;!(v=e.next()).done;)v=v.value,A=h+Wf(v,u++),S+=Kd(v,n,s,A,g);else if(v==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return S}function Sd(e,n,s){if(e==null)return e;var h=[],g=0;return Kd(e,h,"","",function(v){return n.call(s,v,g++)}),h}function rS(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Zr={current:null},Yd={transition:null},oS={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:Yd,ReactCurrentOwner:Dg};dn.Children={map:Sd,forEach:function(e,n,s){Sd(e,function(){n.apply(this,arguments)},s)},count:function(e){var n=0;return Sd(e,function(){n++}),n},toArray:function(e){return Sd(e,function(n){return n})||[]},only:function(e){if(!Rg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};dn.Component=Ec;dn.Fragment=W2;dn.Profiler=H2;dn.PureComponent=Mg;dn.StrictMode=q2;dn.Suspense=J2;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oS;dn.cloneElement=function(e,n,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var h=Qx({},e.props),g=e.key,v=e.ref,S=e._owner;if(n!=null){if(n.ref!==void 0&&(v=n.ref,S=Dg.current),n.key!==void 0&&(g=""+n.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(A in n)n0.call(n,A)&&!i0.hasOwnProperty(A)&&(h[A]=n[A]===void 0&&u!==void 0?u[A]:n[A])}var A=arguments.length-2;if(A===1)h.children=s;else if(1<A){u=Array(A);for(var V=0;V<A;V++)u[V]=arguments[V+2];h.children=u}return{$$typeof:Wh,type:e.type,key:g,ref:v,props:h,_owner:S}};dn.createContext=function(e){return e={$$typeof:K2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:X2,_context:e},e.Consumer=e};dn.createElement=r0;dn.createFactory=function(e){var n=r0.bind(null,e);return n.type=e,n};dn.createRef=function(){return{current:null}};dn.forwardRef=function(e){return{$$typeof:Y2,render:e}};dn.isValidElement=Rg;dn.lazy=function(e){return{$$typeof:eS,_payload:{_status:-1,_result:e},_init:rS}};dn.memo=function(e,n){return{$$typeof:Q2,type:e,compare:n===void 0?null:n}};dn.startTransition=function(e){var n=Yd.transition;Yd.transition={};try{e()}finally{Yd.transition=n}};dn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};dn.useCallback=function(e,n){return Zr.current.useCallback(e,n)};dn.useContext=function(e){return Zr.current.useContext(e)};dn.useDebugValue=function(){};dn.useDeferredValue=function(e){return Zr.current.useDeferredValue(e)};dn.useEffect=function(e,n){return Zr.current.useEffect(e,n)};dn.useId=function(){return Zr.current.useId()};dn.useImperativeHandle=function(e,n,s){return Zr.current.useImperativeHandle(e,n,s)};dn.useInsertionEffect=function(e,n){return Zr.current.useInsertionEffect(e,n)};dn.useLayoutEffect=function(e,n){return Zr.current.useLayoutEffect(e,n)};dn.useMemo=function(e,n){return Zr.current.useMemo(e,n)};dn.useReducer=function(e,n,s){return Zr.current.useReducer(e,n,s)};dn.useRef=function(e){return Zr.current.useRef(e)};dn.useState=function(e){return Zr.current.useState(e)};dn.useSyncExternalStore=function(e,n,s){return Zr.current.useSyncExternalStore(e,n,s)};dn.useTransition=function(){return Zr.current.useTransition()};dn.version="18.1.0";re.exports=dn;var tn=re.exports,sS=Z2({__proto__:null,default:tn},[re.exports]),Pm={},Bg={exports:{}},Eo={},o0={exports:{}},s0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(Oe,gt){var Ye=Oe.length;Oe.push(gt);e:for(;0<Ye;){var Pt=Ye-1>>>1,jt=Oe[Pt];if(0<g(jt,gt))Oe[Pt]=gt,Oe[Ye]=jt,Ye=Pt;else break e}}function s(Oe){return Oe.length===0?null:Oe[0]}function h(Oe){if(Oe.length===0)return null;var gt=Oe[0],Ye=Oe.pop();if(Ye!==gt){Oe[0]=Ye;e:for(var Pt=0,jt=Oe.length,fn=jt>>>1;Pt<fn;){var Wt=2*(Pt+1)-1,qt=Oe[Wt],At=Wt+1,zn=Oe[At];if(0>g(qt,Ye))At<jt&&0>g(zn,qt)?(Oe[Pt]=zn,Oe[At]=Ye,Pt=At):(Oe[Pt]=qt,Oe[Wt]=Ye,Pt=Wt);else if(At<jt&&0>g(zn,Ye))Oe[Pt]=zn,Oe[At]=Ye,Pt=At;else break e}}return gt}function g(Oe,gt){var Ye=Oe.sortIndex-gt.sortIndex;return Ye!==0?Ye:Oe.id-gt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var S=Date,u=S.now();e.unstable_now=function(){return S.now()-u}}var A=[],V=[],W=1,Y=null,U=3,de=!1,ye=!1,me=!1,ze=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Oe){for(var gt=s(V);gt!==null;){if(gt.callback===null)h(V);else if(gt.startTime<=Oe)h(V),gt.sortIndex=gt.expirationTime,n(A,gt);else break;gt=s(V)}}function Ee(Oe){if(me=!1,te(Oe),!ye)if(s(A)!==null)ye=!0,ut(De);else{var gt=s(V);gt!==null&&Dn(Ee,gt.startTime-Oe)}}function De(Oe,gt){ye=!1,me&&(me=!1,ie(We),We=-1),de=!0;var Ye=U;try{for(te(gt),Y=s(A);Y!==null&&(!(Y.expirationTime>gt)||Oe&&!Ct());){var Pt=Y.callback;if(typeof Pt=="function"){Y.callback=null,U=Y.priorityLevel;var jt=Pt(Y.expirationTime<=gt);gt=e.unstable_now(),typeof jt=="function"?Y.callback=jt:Y===s(A)&&h(A),te(gt)}else h(A);Y=s(A)}if(Y!==null)var fn=!0;else{var Wt=s(V);Wt!==null&&Dn(Ee,Wt.startTime-gt),fn=!1}return fn}finally{Y=null,U=Ye,de=!1}}var je=!1,Ue=null,We=-1,ht=5,ft=-1;function Ct(){return!(e.unstable_now()-ft<ht)}function Ut(){if(Ue!==null){var Oe=e.unstable_now();ft=Oe;var gt=!0;try{gt=Ue(!0,Oe)}finally{gt?jn():(je=!1,Ue=null)}}else je=!1}var jn;if(typeof ee=="function")jn=function(){ee(Ut)};else if(typeof MessageChannel!="undefined"){var Zt=new MessageChannel,Sn=Zt.port2;Zt.port1.onmessage=Ut,jn=function(){Sn.postMessage(null)}}else jn=function(){ze(Ut,0)};function ut(Oe){Ue=Oe,je||(je=!0,jn())}function Dn(Oe,gt){We=ze(function(){Oe(e.unstable_now())},gt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Oe){Oe.callback=null},e.unstable_continueExecution=function(){ye||de||(ye=!0,ut(De))},e.unstable_forceFrameRate=function(Oe){0>Oe||125<Oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<Oe?Math.floor(1e3/Oe):5},e.unstable_getCurrentPriorityLevel=function(){return U},e.unstable_getFirstCallbackNode=function(){return s(A)},e.unstable_next=function(Oe){switch(U){case 1:case 2:case 3:var gt=3;break;default:gt=U}var Ye=U;U=gt;try{return Oe()}finally{U=Ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Oe,gt){switch(Oe){case 1:case 2:case 3:case 4:case 5:break;default:Oe=3}var Ye=U;U=Oe;try{return gt()}finally{U=Ye}},e.unstable_scheduleCallback=function(Oe,gt,Ye){var Pt=e.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?Pt+Ye:Pt):Ye=Pt,Oe){case 1:var jt=-1;break;case 2:jt=250;break;case 5:jt=1073741823;break;case 4:jt=1e4;break;default:jt=5e3}return jt=Ye+jt,Oe={id:W++,callback:gt,priorityLevel:Oe,startTime:Ye,expirationTime:jt,sortIndex:-1},Ye>Pt?(Oe.sortIndex=Ye,n(V,Oe),s(A)===null&&Oe===s(V)&&(me?(ie(We),We=-1):me=!0,Dn(Ee,Ye-Pt))):(Oe.sortIndex=jt,n(A,Oe),ye||de||(ye=!0,ut(De))),Oe},e.unstable_shouldYield=Ct,e.unstable_wrapCallback=function(Oe){var gt=U;return function(){var Ye=U;U=gt;try{return Oe.apply(this,arguments)}finally{U=Ye}}}})(s0);o0.exports=s0;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=re.exports,So=o0.exports;function Xe(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l0=new Set,kh={};function yu(e,n){_c(e,n),_c(e+"Capture",n)}function _c(e,n){for(kh[e]=n,e=0;e<n.length;e++)l0.add(n[e])}var Ba=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),km=Object.prototype.hasOwnProperty,aS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sv={},av={};function lS(e){return km.call(av,e)?!0:km.call(sv,e)?!1:aS.test(e)?av[e]=!0:(sv[e]=!0,!1)}function uS(e,n,s,h){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return h?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cS(e,n,s,h){if(n===null||typeof n=="undefined"||uS(e,n,s,h))return!0;if(h)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function jr(e,n,s,h,g,v,S){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=v,this.removeEmptyString=S}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ar[e]=new jr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];ar[n]=new jr(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ar[e]=new jr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ar[e]=new jr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ar[e]=new jr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ar[e]=new jr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ar[e]=new jr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ar[e]=new jr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ar[e]=new jr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fg=/[\-:]([a-z])/g;function Og(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Fg,Og);ar[n]=new jr(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Fg,Og);ar[n]=new jr(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Fg,Og);ar[n]=new jr(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ar[e]=new jr(e,1,!1,e.toLowerCase(),null,!1,!1)});ar.xlinkHref=new jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ar[e]=new jr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ng(e,n,s,h){var g=ar.hasOwnProperty(n)?ar[n]:null;(g!==null?g.type!==0:h||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(cS(n,s,g,h)&&(s=null),h||g===null?lS(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):g.mustUseProperty?e[g.propertyName]=s===null?g.type===3?!1:"":s:(n=g.attributeName,h=g.attributeNamespace,s===null?e.removeAttribute(n):(g=g.type,s=g===3||g===4&&s===!0?"":""+s,h?e.setAttributeNS(h,n,s):e.setAttribute(n,s))))}var Ua=a0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ed=Symbol.for("react.element"),Yu=Symbol.for("react.portal"),Ju=Symbol.for("react.fragment"),Ug=Symbol.for("react.strict_mode"),Cm=Symbol.for("react.profiler"),u0=Symbol.for("react.provider"),c0=Symbol.for("react.context"),Vg=Symbol.for("react.forward_ref"),Im=Symbol.for("react.suspense"),zm=Symbol.for("react.suspense_list"),$g=Symbol.for("react.memo"),ul=Symbol.for("react.lazy"),h0=Symbol.for("react.offscreen"),lv=Symbol.iterator;function eh(e){return e===null||typeof e!="object"?null:(e=lv&&e[lv]||e["@@iterator"],typeof e=="function"?e:null)}var fi=Object.assign,qf;function hh(e){if(qf===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);qf=n&&n[1]||""}return`
`+qf+e}var Hf=!1;function Xf(e,n){if(!e||Hf)return"";Hf=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(V){var h=V}Reflect.construct(e,[],n)}else{try{n.call()}catch(V){h=V}e.call(n.prototype)}else{try{throw Error()}catch(V){h=V}e()}}catch(V){if(V&&h&&typeof V.stack=="string"){for(var g=V.stack.split(`
`),v=h.stack.split(`
`),S=g.length-1,u=v.length-1;1<=S&&0<=u&&g[S]!==v[u];)u--;for(;1<=S&&0<=u;S--,u--)if(g[S]!==v[u]){if(S!==1||u!==1)do if(S--,u--,0>u||g[S]!==v[u]){var A=`
`+g[S].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=S&&0<=u);break}}}finally{Hf=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?hh(e):""}function hS(e){switch(e.tag){case 5:return hh(e.type);case 16:return hh("Lazy");case 13:return hh("Suspense");case 19:return hh("SuspenseList");case 0:case 2:case 15:return e=Xf(e.type,!1),e;case 11:return e=Xf(e.type.render,!1),e;case 1:return e=Xf(e.type,!0),e;default:return""}}function Am(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ju:return"Fragment";case Yu:return"Portal";case Cm:return"Profiler";case Ug:return"StrictMode";case Im:return"Suspense";case zm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case c0:return(e.displayName||"Context")+".Consumer";case u0:return(e._context.displayName||"Context")+".Provider";case Vg:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $g:return n=e.displayName||null,n!==null?n:Am(e.type)||"Memo";case ul:n=e._payload,e=e._init;try{return Am(e(n))}catch{}}return null}function dS(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Am(n);case 8:return n===Ug?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function bl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function d0(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function pS(e){var n=d0(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),h=""+e[n];if(!e.hasOwnProperty(n)&&typeof s!="undefined"&&typeof s.get=="function"&&typeof s.set=="function"){var g=s.get,v=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return g.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Td(e){e._valueTracker||(e._valueTracker=pS(e))}function p0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return e&&(h=d0(e)?e.checked?"true":"false":e.value),e=h,e!==s?(n.setValue(e),!0):!1}function up(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mm(e,n){var s=n.checked;return fi({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s!=null?s:e._wrapperState.initialChecked})}function uv(e,n){var s=n.defaultValue==null?"":n.defaultValue,h=n.checked!=null?n.checked:n.defaultChecked;s=bl(n.value!=null?n.value:s),e._wrapperState={initialChecked:h,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function f0(e,n){n=n.checked,n!=null&&Ng(e,"checked",n,!1)}function Lm(e,n){f0(e,n);var s=bl(n.value),h=n.type;if(s!=null)h==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Dm(e,n.type,s):n.hasOwnProperty("defaultValue")&&Dm(e,n.type,bl(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function cv(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var h=n.type;if(!(h!=="submit"&&h!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Dm(e,n,s){(n!=="number"||up(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var dh=Array.isArray;function cc(e,n,s,h){if(e=e.options,n){n={};for(var g=0;g<s.length;g++)n["$"+s[g]]=!0;for(s=0;s<e.length;s++)g=n.hasOwnProperty("$"+e[s].value),e[s].selected!==g&&(e[s].selected=g),g&&h&&(e[s].defaultSelected=!0)}else{for(s=""+bl(s),n=null,g=0;g<e.length;g++){if(e[g].value===s){e[g].selected=!0,h&&(e[g].defaultSelected=!0);return}n!==null||e[g].disabled||(n=e[g])}n!==null&&(n.selected=!0)}}function Rm(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return fi({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hv(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(Xe(92));if(dh(s)){if(1<s.length)throw Error(Xe(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:bl(s)}}function m0(e,n){var s=bl(n.value),h=bl(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),h!=null&&(e.defaultValue=""+h)}function dv(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function g0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bm(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?g0(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pd,_0=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(n,s,h,g){MSApp.execUnsafeLocalFunction(function(){return e(n,s,h,g)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Pd=Pd||document.createElement("div"),Pd.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Pd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Ch(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fS=["Webkit","ms","Moz","O"];Object.keys(gh).forEach(function(e){fS.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),gh[n]=gh[e]})});function y0(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||gh.hasOwnProperty(e)&&gh[e]?(""+n).trim():n+"px"}function v0(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var h=s.indexOf("--")===0,g=y0(s,n[s],h);s==="float"&&(s="cssFloat"),h?e.setProperty(s,g):e[s]=g}}var mS=fi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fm(e,n){if(n){if(mS[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Xe(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Xe(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Xe(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Xe(62))}}function Om(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nm=null;function Zg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Um=null,hc=null,dc=null;function pv(e){if(e=Xh(e)){if(typeof Um!="function")throw Error(Xe(280));var n=e.stateNode;n&&(n=jp(n),Um(e.stateNode,e.type,n))}}function x0(e){hc?dc?dc.push(e):dc=[e]:hc=e}function w0(){if(hc){var e=hc,n=dc;if(dc=hc=null,pv(e),n)for(e=0;e<n.length;e++)pv(n[e])}}function b0(e,n){return e(n)}function S0(){}var Kf=!1;function E0(e,n,s){if(Kf)return e(n,s);Kf=!0;try{return b0(e,n,s)}finally{Kf=!1,(hc!==null||dc!==null)&&(S0(),w0())}}function Ih(e,n){var s=e.stateNode;if(s===null)return null;var h=jp(s);if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Xe(231,n,typeof s));return s}var Vm=!1;if(Ba)try{var th={};Object.defineProperty(th,"passive",{get:function(){Vm=!0}}),window.addEventListener("test",th,th),window.removeEventListener("test",th,th)}catch{Vm=!1}function gS(e,n,s,h,g,v,S,u,A){var V=Array.prototype.slice.call(arguments,3);try{n.apply(s,V)}catch(W){this.onError(W)}}var _h=!1,cp=null,hp=!1,$m=null,_S={onError:function(e){_h=!0,cp=e}};function yS(e,n,s,h,g,v,S,u,A){_h=!1,cp=null,gS.apply(_S,arguments)}function vS(e,n,s,h,g,v,S,u,A){if(yS.apply(this,arguments),_h){if(_h){var V=cp;_h=!1,cp=null}else throw Error(Xe(198));hp||(hp=!0,$m=V)}}function vu(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function T0(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function fv(e){if(vu(e)!==e)throw Error(Xe(188))}function xS(e){var n=e.alternate;if(!n){if(n=vu(e),n===null)throw Error(Xe(188));return n!==e?null:e}for(var s=e,h=n;;){var g=s.return;if(g===null)break;var v=g.alternate;if(v===null){if(h=g.return,h!==null){s=h;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===s)return fv(g),e;if(v===h)return fv(g),n;v=v.sibling}throw Error(Xe(188))}if(s.return!==h.return)s=g,h=v;else{for(var S=!1,u=g.child;u;){if(u===s){S=!0,s=g,h=v;break}if(u===h){S=!0,h=g,s=v;break}u=u.sibling}if(!S){for(u=v.child;u;){if(u===s){S=!0,s=v,h=g;break}if(u===h){S=!0,h=v,s=g;break}u=u.sibling}if(!S)throw Error(Xe(189))}}if(s.alternate!==h)throw Error(Xe(190))}if(s.tag!==3)throw Error(Xe(188));return s.stateNode.current===s?e:n}function P0(e){return e=xS(e),e!==null?k0(e):null}function k0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=k0(e);if(n!==null)return n;e=e.sibling}return null}var C0=So.unstable_scheduleCallback,mv=So.unstable_cancelCallback,wS=So.unstable_shouldYield,bS=So.unstable_requestPaint,Ei=So.unstable_now,SS=So.unstable_getCurrentPriorityLevel,jg=So.unstable_ImmediatePriority,I0=So.unstable_UserBlockingPriority,dp=So.unstable_NormalPriority,ES=So.unstable_LowPriority,z0=So.unstable_IdlePriority,Up=null,Ks=null;function TS(e){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(Up,e,void 0,(e.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:CS,PS=Math.log,kS=Math.LN2;function CS(e){return e>>>=0,e===0?32:31-(PS(e)/kS|0)|0}var kd=64,Cd=4194304;function ph(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pp(e,n){var s=e.pendingLanes;if(s===0)return 0;var h=0,g=e.suspendedLanes,v=e.pingedLanes,S=s&268435455;if(S!==0){var u=S&~g;u!==0?h=ph(u):(v&=S,v!==0&&(h=ph(v)))}else S=s&~g,S!==0?h=ph(S):v!==0&&(h=ph(v));if(h===0)return 0;if(n!==0&&n!==h&&(n&g)===0&&(g=h&-h,v=n&-n,g>=v||g===16&&(v&4194240)!==0))return n;if((h&4)!==0&&(h|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=h;0<n;)s=31-xs(n),g=1<<s,h|=e[s],n&=~g;return h}function IS(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zS(e,n){for(var s=e.suspendedLanes,h=e.pingedLanes,g=e.expirationTimes,v=e.pendingLanes;0<v;){var S=31-xs(v),u=1<<S,A=g[S];A===-1?((u&s)===0||(u&h)!==0)&&(g[S]=IS(u,n)):A<=n&&(e.expiredLanes|=u),v&=~u}}function Zm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function A0(){var e=kd;return kd<<=1,(kd&4194240)===0&&(kd=64),e}function Yf(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function qh(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-xs(n),e[n]=s}function AS(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<s;){var g=31-xs(s),v=1<<g;n[g]=0,h[g]=-1,e[g]=-1,s&=~v}}function Gg(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var h=31-xs(s),g=1<<h;g&n|e[h]&n&&(e[h]|=n),s&=~g}}var Ln=0;function M0(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var L0,Wg,D0,R0,B0,jm=!1,Id=[],gl=null,_l=null,yl=null,zh=new Map,Ah=new Map,hl=[],MS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gv(e,n){switch(e){case"focusin":case"focusout":gl=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":yl=null;break;case"pointerover":case"pointerout":zh.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ah.delete(n.pointerId)}}function nh(e,n,s,h,g,v){return e===null||e.nativeEvent!==v?(e={blockedOn:n,domEventName:s,eventSystemFlags:h,nativeEvent:v,targetContainers:[g]},n!==null&&(n=Xh(n),n!==null&&Wg(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,g!==null&&n.indexOf(g)===-1&&n.push(g),e)}function LS(e,n,s,h,g){switch(n){case"focusin":return gl=nh(gl,e,n,s,h,g),!0;case"dragenter":return _l=nh(_l,e,n,s,h,g),!0;case"mouseover":return yl=nh(yl,e,n,s,h,g),!0;case"pointerover":var v=g.pointerId;return zh.set(v,nh(zh.get(v)||null,e,n,s,h,g)),!0;case"gotpointercapture":return v=g.pointerId,Ah.set(v,nh(Ah.get(v)||null,e,n,s,h,g)),!0}return!1}function F0(e){var n=su(e.target);if(n!==null){var s=vu(n);if(s!==null){if(n=s.tag,n===13){if(n=T0(s),n!==null){e.blockedOn=n,B0(e.priority,function(){D0(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jd(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Gm(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var h=new s.constructor(s.type,s);Nm=h,s.target.dispatchEvent(h),Nm=null}else return n=Xh(s),n!==null&&Wg(n),e.blockedOn=s,!1;n.shift()}return!0}function _v(e,n,s){Jd(e)&&s.delete(n)}function DS(){jm=!1,gl!==null&&Jd(gl)&&(gl=null),_l!==null&&Jd(_l)&&(_l=null),yl!==null&&Jd(yl)&&(yl=null),zh.forEach(_v),Ah.forEach(_v)}function ih(e,n){e.blockedOn===n&&(e.blockedOn=null,jm||(jm=!0,So.unstable_scheduleCallback(So.unstable_NormalPriority,DS)))}function Mh(e){function n(g){return ih(g,e)}if(0<Id.length){ih(Id[0],e);for(var s=1;s<Id.length;s++){var h=Id[s];h.blockedOn===e&&(h.blockedOn=null)}}for(gl!==null&&ih(gl,e),_l!==null&&ih(_l,e),yl!==null&&ih(yl,e),zh.forEach(n),Ah.forEach(n),s=0;s<hl.length;s++)h=hl[s],h.blockedOn===e&&(h.blockedOn=null);for(;0<hl.length&&(s=hl[0],s.blockedOn===null);)F0(s),s.blockedOn===null&&hl.shift()}var pc=Ua.ReactCurrentBatchConfig,fp=!0;function RS(e,n,s,h){var g=Ln,v=pc.transition;pc.transition=null;try{Ln=1,qg(e,n,s,h)}finally{Ln=g,pc.transition=v}}function BS(e,n,s,h){var g=Ln,v=pc.transition;pc.transition=null;try{Ln=4,qg(e,n,s,h)}finally{Ln=g,pc.transition=v}}function qg(e,n,s,h){if(fp){var g=Gm(e,n,s,h);if(g===null)am(e,n,h,mp,s),gv(e,h);else if(LS(g,e,n,s,h))h.stopPropagation();else if(gv(e,h),n&4&&-1<MS.indexOf(e)){for(;g!==null;){var v=Xh(g);if(v!==null&&L0(v),v=Gm(e,n,s,h),v===null&&am(e,n,h,mp,s),v===g)break;g=v}g!==null&&h.stopPropagation()}else am(e,n,h,null,s)}}var mp=null;function Gm(e,n,s,h){if(mp=null,e=Zg(h),e=su(e),e!==null)if(n=vu(e),n===null)e=null;else if(s=n.tag,s===13){if(e=T0(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return mp=e,null}function O0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SS()){case jg:return 1;case I0:return 4;case dp:case ES:return 16;case z0:return 536870912;default:return 16}default:return 16}}var fl=null,Hg=null,Qd=null;function N0(){if(Qd)return Qd;var e,n=Hg,s=n.length,h,g="value"in fl?fl.value:fl.textContent,v=g.length;for(e=0;e<s&&n[e]===g[e];e++);var S=s-e;for(h=1;h<=S&&n[s-h]===g[v-h];h++);return Qd=g.slice(e,1<h?1-h:void 0)}function ep(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function zd(){return!0}function yv(){return!1}function To(e){function n(s,h,g,v,S){this._reactName=s,this._targetInst=g,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(s=e[u],this[u]=s?s(v):v[u]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?zd:yv,this.isPropagationStopped=yv,this}return fi(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=zd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=zd)},persist:function(){},isPersistent:zd}),n}var Tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xg=To(Tc),Hh=fi({},Tc,{view:0,detail:0}),FS=To(Hh),Jf,Qf,rh,Vp=fi({},Hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rh&&(rh&&e.type==="mousemove"?(Jf=e.screenX-rh.screenX,Qf=e.screenY-rh.screenY):Qf=Jf=0,rh=e),Jf)},movementY:function(e){return"movementY"in e?e.movementY:Qf}}),vv=To(Vp),OS=fi({},Vp,{dataTransfer:0}),NS=To(OS),US=fi({},Hh,{relatedTarget:0}),em=To(US),VS=fi({},Tc,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=To(VS),ZS=fi({},Tc,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jS=To(ZS),GS=fi({},Tc,{data:0}),xv=To(GS),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XS(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=HS[e])?!!n[e]:!1}function Kg(){return XS}var KS=fi({},Hh,{key:function(e){if(e.key){var n=WS[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ep(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kg,charCode:function(e){return e.type==="keypress"?ep(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ep(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YS=To(KS),JS=fi({},Vp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wv=To(JS),QS=fi({},Hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kg}),eE=To(QS),tE=fi({},Tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),nE=To(tE),iE=fi({},Vp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rE=To(iE),oE=[9,13,27,32],Yg=Ba&&"CompositionEvent"in window,yh=null;Ba&&"documentMode"in document&&(yh=document.documentMode);var sE=Ba&&"TextEvent"in window&&!yh,U0=Ba&&(!Yg||yh&&8<yh&&11>=yh),bv=String.fromCharCode(32),Sv=!1;function V0(e,n){switch(e){case"keyup":return oE.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qu=!1;function aE(e,n){switch(e){case"compositionend":return $0(n);case"keypress":return n.which!==32?null:(Sv=!0,bv);case"textInput":return e=n.data,e===bv&&Sv?null:e;default:return null}}function lE(e,n){if(Qu)return e==="compositionend"||!Yg&&V0(e,n)?(e=N0(),Qd=Hg=fl=null,Qu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return U0&&n.locale!=="ko"?null:n.data;default:return null}}var uE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ev(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!uE[e.type]:n==="textarea"}function Z0(e,n,s,h){x0(h),n=gp(n,"onChange"),0<n.length&&(s=new Xg("onChange","change",null,s,h),e.push({event:s,listeners:n}))}var vh=null,Lh=null;function cE(e){e1(e,0)}function $p(e){var n=nc(e);if(p0(n))return e}function hE(e,n){if(e==="change")return n}var j0=!1;if(Ba){var tm;if(Ba){var nm="oninput"in document;if(!nm){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),nm=typeof Tv.oninput=="function"}tm=nm}else tm=!1;j0=tm&&(!document.documentMode||9<document.documentMode)}function Pv(){vh&&(vh.detachEvent("onpropertychange",G0),Lh=vh=null)}function G0(e){if(e.propertyName==="value"&&$p(Lh)){var n=[];Z0(n,Lh,e,Zg(e)),E0(cE,n)}}function dE(e,n,s){e==="focusin"?(Pv(),vh=n,Lh=s,vh.attachEvent("onpropertychange",G0)):e==="focusout"&&Pv()}function pE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $p(Lh)}function fE(e,n){if(e==="click")return $p(n)}function mE(e,n){if(e==="input"||e==="change")return $p(n)}function gE(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ws=typeof Object.is=="function"?Object.is:gE;function Dh(e,n){if(ws(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++){var g=s[h];if(!km.call(n,g)||!ws(e[g],n[g]))return!1}return!0}function kv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cv(e,n){var s=kv(e);e=0;for(var h;s;){if(s.nodeType===3){if(h=e+s.textContent.length,e<=n&&h>=n)return{node:s,offset:n-e};e=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=kv(s)}}function W0(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?W0(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function q0(){for(var e=window,n=up();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=up(e.document)}return n}function Jg(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function _E(e){var n=q0(),s=e.focusedElem,h=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&W0(s.ownerDocument.documentElement,s)){if(h!==null&&Jg(s)){if(n=h.start,e=h.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var g=s.textContent.length,v=Math.min(h.start,g);h=h.end===void 0?v:Math.min(h.end,g),!e.extend&&v>h&&(g=h,h=v,v=g),g=Cv(s,v);var S=Cv(s,h);g&&S&&(e.rangeCount!==1||e.anchorNode!==g.node||e.anchorOffset!==g.offset||e.focusNode!==S.node||e.focusOffset!==S.offset)&&(n=n.createRange(),n.setStart(g.node,g.offset),e.removeAllRanges(),v>h?(e.addRange(n),e.extend(S.node,S.offset)):(n.setEnd(S.node,S.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yE=Ba&&"documentMode"in document&&11>=document.documentMode,ec=null,Wm=null,xh=null,qm=!1;function Iv(e,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;qm||ec==null||ec!==up(h)||(h=ec,"selectionStart"in h&&Jg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xh&&Dh(xh,h)||(xh=h,h=gp(Wm,"onSelect"),0<h.length&&(n=new Xg("onSelect","select",null,n,s),e.push({event:n,listeners:h}),n.target=ec)))}function Ad(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var tc={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionend:Ad("Transition","TransitionEnd")},im={},H0={};Ba&&(H0=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function Zp(e){if(im[e])return im[e];if(!tc[e])return e;var n=tc[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in H0)return im[e]=n[s];return e}var X0=Zp("animationend"),K0=Zp("animationiteration"),Y0=Zp("animationstart"),J0=Zp("transitionend"),Q0=new Map,zv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pl(e,n){Q0.set(e,n),yu(n,[e])}for(var rm=0;rm<zv.length;rm++){var om=zv[rm],vE=om.toLowerCase(),xE=om[0].toUpperCase()+om.slice(1);Pl(vE,"on"+xE)}Pl(X0,"onAnimationEnd");Pl(K0,"onAnimationIteration");Pl(Y0,"onAnimationStart");Pl("dblclick","onDoubleClick");Pl("focusin","onFocus");Pl("focusout","onBlur");Pl(J0,"onTransitionEnd");_c("onMouseEnter",["mouseout","mouseover"]);_c("onMouseLeave",["mouseout","mouseover"]);_c("onPointerEnter",["pointerout","pointerover"]);_c("onPointerLeave",["pointerout","pointerover"]);yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wE=new Set("cancel close invalid load scroll toggle".split(" ").concat(fh));function Av(e,n,s){var h=e.type||"unknown-event";e.currentTarget=s,vS(h,n,void 0,e),e.currentTarget=null}function e1(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var h=e[s],g=h.event;h=h.listeners;e:{var v=void 0;if(n)for(var S=h.length-1;0<=S;S--){var u=h[S],A=u.instance,V=u.currentTarget;if(u=u.listener,A!==v&&g.isPropagationStopped())break e;Av(g,u,V),v=A}else for(S=0;S<h.length;S++){if(u=h[S],A=u.instance,V=u.currentTarget,u=u.listener,A!==v&&g.isPropagationStopped())break e;Av(g,u,V),v=A}}}if(hp)throw e=$m,hp=!1,$m=null,e}function Jn(e,n){var s=n[Jm];s===void 0&&(s=n[Jm]=new Set);var h=e+"__bubble";s.has(h)||(t1(n,e,2,!1),s.add(h))}function sm(e,n,s){var h=0;n&&(h|=4),t1(s,e,h,n)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Rh(e){if(!e[Md]){e[Md]=!0,l0.forEach(function(s){s!=="selectionchange"&&(wE.has(s)||sm(s,!1,e),sm(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Md]||(n[Md]=!0,sm("selectionchange",!1,n))}}function t1(e,n,s,h){switch(O0(n)){case 1:var g=RS;break;case 4:g=BS;break;default:g=qg}s=g.bind(null,n,s,e),g=void 0,!Vm||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(g=!0),h?g!==void 0?e.addEventListener(n,s,{capture:!0,passive:g}):e.addEventListener(n,s,!0):g!==void 0?e.addEventListener(n,s,{passive:g}):e.addEventListener(n,s,!1)}function am(e,n,s,h,g){var v=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var u=h.stateNode.containerInfo;if(u===g||u.nodeType===8&&u.parentNode===g)break;if(S===4)for(S=h.return;S!==null;){var A=S.tag;if((A===3||A===4)&&(A=S.stateNode.containerInfo,A===g||A.nodeType===8&&A.parentNode===g))return;S=S.return}for(;u!==null;){if(S=su(u),S===null)return;if(A=S.tag,A===5||A===6){h=v=S;continue e}u=u.parentNode}}h=h.return}E0(function(){var V=v,W=Zg(s),Y=[];e:{var U=Q0.get(e);if(U!==void 0){var de=Xg,ye=e;switch(e){case"keypress":if(ep(s)===0)break e;case"keydown":case"keyup":de=YS;break;case"focusin":ye="focus",de=em;break;case"focusout":ye="blur",de=em;break;case"beforeblur":case"afterblur":de=em;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=vv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=NS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=eE;break;case X0:case K0:case Y0:de=$S;break;case J0:de=nE;break;case"scroll":de=FS;break;case"wheel":de=rE;break;case"copy":case"cut":case"paste":de=jS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=wv}var me=(n&4)!==0,ze=!me&&e==="scroll",ie=me?U!==null?U+"Capture":null:U;me=[];for(var ee=V,te;ee!==null;){te=ee;var Ee=te.stateNode;if(te.tag===5&&Ee!==null&&(te=Ee,ie!==null&&(Ee=Ih(ee,ie),Ee!=null&&me.push(Bh(ee,Ee,te)))),ze)break;ee=ee.return}0<me.length&&(U=new de(U,ye,null,s,W),Y.push({event:U,listeners:me}))}}if((n&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",de=e==="mouseout"||e==="pointerout",U&&s!==Nm&&(ye=s.relatedTarget||s.fromElement)&&(su(ye)||ye[Fa]))break e;if((de||U)&&(U=W.window===W?W:(U=W.ownerDocument)?U.defaultView||U.parentWindow:window,de?(ye=s.relatedTarget||s.toElement,de=V,ye=ye?su(ye):null,ye!==null&&(ze=vu(ye),ye!==ze||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(de=null,ye=V),de!==ye)){if(me=vv,Ee="onMouseLeave",ie="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(me=wv,Ee="onPointerLeave",ie="onPointerEnter",ee="pointer"),ze=de==null?U:nc(de),te=ye==null?U:nc(ye),U=new me(Ee,ee+"leave",de,s,W),U.target=ze,U.relatedTarget=te,Ee=null,su(W)===V&&(me=new me(ie,ee+"enter",ye,s,W),me.target=te,me.relatedTarget=ze,Ee=me),ze=Ee,de&&ye)t:{for(me=de,ie=ye,ee=0,te=me;te;te=ju(te))ee++;for(te=0,Ee=ie;Ee;Ee=ju(Ee))te++;for(;0<ee-te;)me=ju(me),ee--;for(;0<te-ee;)ie=ju(ie),te--;for(;ee--;){if(me===ie||ie!==null&&me===ie.alternate)break t;me=ju(me),ie=ju(ie)}me=null}else me=null;de!==null&&Mv(Y,U,de,me,!1),ye!==null&&ze!==null&&Mv(Y,ze,ye,me,!0)}}e:{if(U=V?nc(V):window,de=U.nodeName&&U.nodeName.toLowerCase(),de==="select"||de==="input"&&U.type==="file")var De=hE;else if(Ev(U))if(j0)De=mE;else{De=pE;var je=dE}else(de=U.nodeName)&&de.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(De=fE);if(De&&(De=De(e,V))){Z0(Y,De,s,W);break e}je&&je(e,U,V),e==="focusout"&&(je=U._wrapperState)&&je.controlled&&U.type==="number"&&Dm(U,"number",U.value)}switch(je=V?nc(V):window,e){case"focusin":(Ev(je)||je.contentEditable==="true")&&(ec=je,Wm=V,xh=null);break;case"focusout":xh=Wm=ec=null;break;case"mousedown":qm=!0;break;case"contextmenu":case"mouseup":case"dragend":qm=!1,Iv(Y,s,W);break;case"selectionchange":if(yE)break;case"keydown":case"keyup":Iv(Y,s,W)}var Ue;if(Yg)e:{switch(e){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Qu?V0(e,s)&&(We="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(We="onCompositionStart");We&&(U0&&s.locale!=="ko"&&(Qu||We!=="onCompositionStart"?We==="onCompositionEnd"&&Qu&&(Ue=N0()):(fl=W,Hg="value"in fl?fl.value:fl.textContent,Qu=!0)),je=gp(V,We),0<je.length&&(We=new xv(We,e,null,s,W),Y.push({event:We,listeners:je}),Ue?We.data=Ue:(Ue=$0(s),Ue!==null&&(We.data=Ue)))),(Ue=sE?aE(e,s):lE(e,s))&&(V=gp(V,"onBeforeInput"),0<V.length&&(W=new xv("onBeforeInput","beforeinput",null,s,W),Y.push({event:W,listeners:V}),W.data=Ue))}e1(Y,n)})}function Bh(e,n,s){return{instance:e,listener:n,currentTarget:s}}function gp(e,n){for(var s=n+"Capture",h=[];e!==null;){var g=e,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Ih(e,s),v!=null&&h.unshift(Bh(e,v,g)),v=Ih(e,n),v!=null&&h.push(Bh(e,v,g))),e=e.return}return h}function ju(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mv(e,n,s,h,g){for(var v=n._reactName,S=[];s!==null&&s!==h;){var u=s,A=u.alternate,V=u.stateNode;if(A!==null&&A===h)break;u.tag===5&&V!==null&&(u=V,g?(A=Ih(s,v),A!=null&&S.unshift(Bh(s,A,u))):g||(A=Ih(s,v),A!=null&&S.push(Bh(s,A,u)))),s=s.return}S.length!==0&&e.push({event:n,listeners:S})}var bE=/\r\n?/g,SE=/\u0000|\uFFFD/g;function Lv(e){return(typeof e=="string"?e:""+e).replace(bE,`
`).replace(SE,"")}function Ld(e,n,s){if(n=Lv(n),Lv(e)!==n&&s)throw Error(Xe(425))}function _p(){}var Hm=null,Xm=null;function Km(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ym=typeof setTimeout=="function"?setTimeout:void 0,EE=typeof clearTimeout=="function"?clearTimeout:void 0,Dv=typeof Promise=="function"?Promise:void 0,TE=typeof queueMicrotask=="function"?queueMicrotask:typeof Dv!="undefined"?function(e){return Dv.resolve(null).then(e).catch(PE)}:Ym;function PE(e){setTimeout(function(){throw e})}function lm(e,n){var s=n,h=0;do{var g=s.nextSibling;if(e.removeChild(s),g&&g.nodeType===8)if(s=g.data,s==="/$"){if(h===0){e.removeChild(g),Mh(n);return}h--}else s!=="$"&&s!=="$?"&&s!=="$!"||h++;s=g}while(s);Mh(n)}function Ma(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Rv(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var Pc=Math.random().toString(36).slice(2),Xs="__reactFiber$"+Pc,Fh="__reactProps$"+Pc,Fa="__reactContainer$"+Pc,Jm="__reactEvents$"+Pc,kE="__reactListeners$"+Pc,CE="__reactHandles$"+Pc;function su(e){var n=e[Xs];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Fa]||s[Xs]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Rv(e);e!==null;){if(s=e[Xs])return s;e=Rv(e)}return n}e=s,s=e.parentNode}return null}function Xh(e){return e=e[Xs]||e[Fa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Xe(33))}function jp(e){return e[Fh]||null}var Qm=[],ic=-1;function kl(e){return{current:e}}function Qn(e){0>ic||(e.current=Qm[ic],Qm[ic]=null,ic--)}function Hn(e,n){ic++,Qm[ic]=e.current,e.current=n}var Sl={},br=kl(Sl),ro=kl(!1),du=Sl;function yc(e,n){var s=e.type.contextTypes;if(!s)return Sl;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===n)return h.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in s)g[v]=n[v];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=g),g}function oo(e){return e=e.childContextTypes,e!=null}function yp(){Qn(ro),Qn(br)}function Bv(e,n,s){if(br.current!==Sl)throw Error(Xe(168));Hn(br,n),Hn(ro,s)}function n1(e,n,s){var h=e.stateNode;if(n=n.childContextTypes,typeof h.getChildContext!="function")return s;h=h.getChildContext();for(var g in h)if(!(g in n))throw Error(Xe(108,dS(e)||"Unknown",g));return fi({},s,h)}function vp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sl,du=br.current,Hn(br,e),Hn(ro,ro.current),!0}function Fv(e,n,s){var h=e.stateNode;if(!h)throw Error(Xe(169));s?(e=n1(e,n,du),h.__reactInternalMemoizedMergedChildContext=e,Qn(ro),Qn(br),Hn(br,e)):Qn(ro),Hn(ro,s)}var za=null,Gp=!1,um=!1;function i1(e){za===null?za=[e]:za.push(e)}function IE(e){Gp=!0,i1(e)}function Cl(){if(!um&&za!==null){um=!0;var e=0,n=Ln;try{var s=za;for(Ln=1;e<s.length;e++){var h=s[e];do h=h(!0);while(h!==null)}za=null,Gp=!1}catch(g){throw za!==null&&(za=za.slice(e+1)),C0(jg,Cl),g}finally{Ln=n,um=!1}}return null}var zE=Ua.ReactCurrentBatchConfig;function gs(e,n){if(e&&e.defaultProps){n=fi({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}var xp=kl(null),wp=null,rc=null,Qg=null;function e_(){Qg=rc=wp=null}function t_(e){var n=xp.current;Qn(xp),e._currentValue=n}function eg(e,n,s){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===s)break;e=e.return}}function fc(e,n){wp=e,Qg=rc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&(io=!0),e.firstContext=null)}function Ho(e){var n=e._currentValue;if(Qg!==e)if(e={context:e,memoizedValue:n,next:null},rc===null){if(wp===null)throw Error(Xe(308));rc=e,wp.dependencies={lanes:0,firstContext:e}}else rc=rc.next=e;return n}var vs=null,cl=!1;function n_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r1(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function vl(e,n){var s=e.updateQueue;s!==null&&(s=s.shared,q1(e)?(e=s.interleaved,e===null?(n.next=n,vs===null?vs=[s]:vs.push(s)):(n.next=e.next,e.next=n),s.interleaved=n):(e=s.pending,e===null?n.next=n:(n.next=e.next,e.next=n),s.pending=n))}function tp(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,Gg(e,s)}}function Ov(e,n){var s=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var g=null,v=null;if(s=s.firstBaseUpdate,s!==null){do{var S={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};v===null?g=v=S:v=v.next=S,s=s.next}while(s!==null);v===null?g=v=n:v=v.next=n}else g=v=n;s={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,effects:h.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function bp(e,n,s,h){var g=e.updateQueue;cl=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,u=g.shared.pending;if(u!==null){g.shared.pending=null;var A=u,V=A.next;A.next=null,S===null?v=V:S.next=V,S=A;var W=e.alternate;W!==null&&(W=W.updateQueue,u=W.lastBaseUpdate,u!==S&&(u===null?W.firstBaseUpdate=V:u.next=V,W.lastBaseUpdate=A))}if(v!==null){var Y=g.baseState;S=0,W=V=A=null,u=v;do{var U=u.lane,de=u.eventTime;if((h&U)===U){W!==null&&(W=W.next={eventTime:de,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var ye=e,me=u;switch(U=n,de=s,me.tag){case 1:if(ye=me.payload,typeof ye=="function"){Y=ye.call(de,Y,U);break e}Y=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=me.payload,U=typeof ye=="function"?ye.call(de,Y,U):ye,U==null)break e;Y=fi({},Y,U);break e;case 2:cl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,U=g.effects,U===null?g.effects=[u]:U.push(u))}else de={eventTime:de,lane:U,tag:u.tag,payload:u.payload,callback:u.callback,next:null},W===null?(V=W=de,A=Y):W=W.next=de,S|=U;if(u=u.next,u===null){if(u=g.shared.pending,u===null)break;U=u,u=U.next,U.next=null,g.lastBaseUpdate=U,g.shared.pending=null}}while(1);if(W===null&&(A=Y),g.baseState=A,g.firstBaseUpdate=V,g.lastBaseUpdate=W,n=g.shared.interleaved,n!==null){g=n;do S|=g.lane,g=g.next;while(g!==n)}else v===null&&(g.shared.lanes=0);mu|=S,e.lanes=S,e.memoizedState=Y}}function Nv(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var h=e[n],g=h.callback;if(g!==null){if(h.callback=null,h=s,typeof g!="function")throw Error(Xe(191,g));g.call(h)}}}var o1=new a0.Component().refs;function tg(e,n,s,h){n=e.memoizedState,s=s(h,n),s=s==null?n:fi({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Wp={isMounted:function(e){return(e=e._reactInternals)?vu(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var h=$r(),g=wl(e),v=Ra(h,g);v.payload=n,s!=null&&(v.callback=s),vl(e,v),n=qo(e,g,h),n!==null&&tp(n,e,g)},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var h=$r(),g=wl(e),v=Ra(h,g);v.tag=1,v.payload=n,s!=null&&(v.callback=s),vl(e,v),n=qo(e,g,h),n!==null&&tp(n,e,g)},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=$r(),h=wl(e),g=Ra(s,h);g.tag=2,n!=null&&(g.callback=n),vl(e,g),n=qo(e,h,s),n!==null&&tp(n,e,h)}};function Uv(e,n,s,h,g,v,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,v,S):n.prototype&&n.prototype.isPureReactComponent?!Dh(s,h)||!Dh(g,v):!0}function s1(e,n,s){var h=!1,g=Sl,v=n.contextType;return typeof v=="object"&&v!==null?v=Ho(v):(g=oo(n)?du:br.current,h=n.contextTypes,v=(h=h!=null)?yc(e,g):Sl),n=new n(s,v),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Wp,e.stateNode=n,n._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=v),n}function Vv(e,n,s,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==e&&Wp.enqueueReplaceState(n,n.state,null)}function ng(e,n,s,h){var g=e.stateNode;g.props=s,g.state=e.memoizedState,g.refs=o1,n_(e);var v=n.contextType;typeof v=="object"&&v!==null?g.context=Ho(v):(v=oo(n)?du:br.current,g.context=yc(e,v)),g.state=e.memoizedState,v=n.getDerivedStateFromProps,typeof v=="function"&&(tg(e,n,v,s),g.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(n=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),n!==g.state&&Wp.enqueueReplaceState(g,g.state,null),bp(e,s,g,h),g.state=e.memoizedState),typeof g.componentDidMount=="function"&&(e.flags|=4194308)}var oc=[],sc=0,Sp=null,Ep=0,Zo=[],jo=0,pu=null,La=1,Da="";function nu(e,n){oc[sc++]=Ep,oc[sc++]=Sp,Sp=e,Ep=n}function a1(e,n,s){Zo[jo++]=La,Zo[jo++]=Da,Zo[jo++]=pu,pu=e;var h=La;e=Da;var g=32-xs(h)-1;h&=~(1<<g),s+=1;var v=32-xs(n)+g;if(30<v){var S=g-g%5;v=(h&(1<<S)-1).toString(32),h>>=S,g-=S,La=1<<32-xs(n)+g|s<<g|h,Da=v+e}else La=1<<v|s<<g|h,Da=e}function i_(e){e.return!==null&&(nu(e,1),a1(e,1,0))}function r_(e){for(;e===Sp;)Sp=oc[--sc],oc[sc]=null,Ep=oc[--sc],oc[sc]=null;for(;e===pu;)pu=Zo[--jo],Zo[jo]=null,Da=Zo[--jo],Zo[jo]=null,La=Zo[--jo],Zo[jo]=null}var bo=null,no=null,oi=!1,ys=null;function l1(e,n){var s=Go(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function $v(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,bo=e,no=Ma(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,bo=e,no=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=pu!==null?{id:La,overflow:Da}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=Go(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,bo=e,no=null,!0):!1;default:return!1}}function ig(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rg(e){if(oi){var n=no;if(n){var s=n;if(!$v(e,n)){if(ig(e))throw Error(Xe(418));n=Ma(s.nextSibling);var h=bo;n&&$v(e,n)?l1(h,s):(e.flags=e.flags&-4097|2,oi=!1,bo=e)}}else{if(ig(e))throw Error(Xe(418));e.flags=e.flags&-4097|2,oi=!1,bo=e}}}function Zv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bo=e}function oh(e){if(e!==bo)return!1;if(!oi)return Zv(e),oi=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Km(e.type,e.memoizedProps)),n&&(n=no)){if(ig(e)){for(e=no;e;)e=Ma(e.nextSibling);throw Error(Xe(418))}for(;n;)l1(e,n),n=Ma(n.nextSibling)}if(Zv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Xe(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){no=Ma(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}no=null}}else no=bo?Ma(e.stateNode.nextSibling):null;return!0}function vc(){no=bo=null,oi=!1}function o_(e){ys===null?ys=[e]:ys.push(e)}function sh(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Xe(309));var h=s.stateNode}if(!h)throw Error(Xe(147,e));var g=h,v=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===v?n.ref:(n=function(S){var u=g.refs;u===o1&&(u=g.refs={}),S===null?delete u[v]:u[v]=S},n._stringRef=v,n)}if(typeof e!="string")throw Error(Xe(284));if(!s._owner)throw Error(Xe(290,e))}return e}function Dd(e,n){throw e=Object.prototype.toString.call(n),Error(Xe(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function jv(e){var n=e._init;return n(e._payload)}function u1(e){function n(ie,ee){if(e){var te=ie.deletions;te===null?(ie.deletions=[ee],ie.flags|=16):te.push(ee)}}function s(ie,ee){if(!e)return null;for(;ee!==null;)n(ie,ee),ee=ee.sibling;return null}function h(ie,ee){for(ie=new Map;ee!==null;)ee.key!==null?ie.set(ee.key,ee):ie.set(ee.index,ee),ee=ee.sibling;return ie}function g(ie,ee){return ie=El(ie,ee),ie.index=0,ie.sibling=null,ie}function v(ie,ee,te){return ie.index=te,e?(te=ie.alternate,te!==null?(te=te.index,te<ee?(ie.flags|=2,ee):te):(ie.flags|=2,ee)):(ie.flags|=1048576,ee)}function S(ie){return e&&ie.alternate===null&&(ie.flags|=2),ie}function u(ie,ee,te,Ee){return ee===null||ee.tag!==6?(ee=mm(te,ie.mode,Ee),ee.return=ie,ee):(ee=g(ee,te),ee.return=ie,ee)}function A(ie,ee,te,Ee){var De=te.type;return De===Ju?W(ie,ee,te.props.children,Ee,te.key):ee!==null&&(ee.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ul&&jv(De)===ee.type)?(Ee=g(ee,te.props),Ee.ref=sh(ie,ee,te),Ee.return=ie,Ee):(Ee=sp(te.type,te.key,te.props,null,ie.mode,Ee),Ee.ref=sh(ie,ee,te),Ee.return=ie,Ee)}function V(ie,ee,te,Ee){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==te.containerInfo||ee.stateNode.implementation!==te.implementation?(ee=gm(te,ie.mode,Ee),ee.return=ie,ee):(ee=g(ee,te.children||[]),ee.return=ie,ee)}function W(ie,ee,te,Ee,De){return ee===null||ee.tag!==7?(ee=uu(te,ie.mode,Ee,De),ee.return=ie,ee):(ee=g(ee,te),ee.return=ie,ee)}function Y(ie,ee,te){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=mm(""+ee,ie.mode,te),ee.return=ie,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Ed:return te=sp(ee.type,ee.key,ee.props,null,ie.mode,te),te.ref=sh(ie,null,ee),te.return=ie,te;case Yu:return ee=gm(ee,ie.mode,te),ee.return=ie,ee;case ul:var Ee=ee._init;return Y(ie,Ee(ee._payload),te)}if(dh(ee)||eh(ee))return ee=uu(ee,ie.mode,te,null),ee.return=ie,ee;Dd(ie,ee)}return null}function U(ie,ee,te,Ee){var De=ee!==null?ee.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return De!==null?null:u(ie,ee,""+te,Ee);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Ed:return te.key===De?A(ie,ee,te,Ee):null;case Yu:return te.key===De?V(ie,ee,te,Ee):null;case ul:return De=te._init,U(ie,ee,De(te._payload),Ee)}if(dh(te)||eh(te))return De!==null?null:W(ie,ee,te,Ee,null);Dd(ie,te)}return null}function de(ie,ee,te,Ee,De){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ie=ie.get(te)||null,u(ee,ie,""+Ee,De);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case Ed:return ie=ie.get(Ee.key===null?te:Ee.key)||null,A(ee,ie,Ee,De);case Yu:return ie=ie.get(Ee.key===null?te:Ee.key)||null,V(ee,ie,Ee,De);case ul:var je=Ee._init;return de(ie,ee,te,je(Ee._payload),De)}if(dh(Ee)||eh(Ee))return ie=ie.get(te)||null,W(ee,ie,Ee,De,null);Dd(ee,Ee)}return null}function ye(ie,ee,te,Ee){for(var De=null,je=null,Ue=ee,We=ee=0,ht=null;Ue!==null&&We<te.length;We++){Ue.index>We?(ht=Ue,Ue=null):ht=Ue.sibling;var ft=U(ie,Ue,te[We],Ee);if(ft===null){Ue===null&&(Ue=ht);break}e&&Ue&&ft.alternate===null&&n(ie,Ue),ee=v(ft,ee,We),je===null?De=ft:je.sibling=ft,je=ft,Ue=ht}if(We===te.length)return s(ie,Ue),oi&&nu(ie,We),De;if(Ue===null){for(;We<te.length;We++)Ue=Y(ie,te[We],Ee),Ue!==null&&(ee=v(Ue,ee,We),je===null?De=Ue:je.sibling=Ue,je=Ue);return oi&&nu(ie,We),De}for(Ue=h(ie,Ue);We<te.length;We++)ht=de(Ue,ie,We,te[We],Ee),ht!==null&&(e&&ht.alternate!==null&&Ue.delete(ht.key===null?We:ht.key),ee=v(ht,ee,We),je===null?De=ht:je.sibling=ht,je=ht);return e&&Ue.forEach(function(Ct){return n(ie,Ct)}),oi&&nu(ie,We),De}function me(ie,ee,te,Ee){var De=eh(te);if(typeof De!="function")throw Error(Xe(150));if(te=De.call(te),te==null)throw Error(Xe(151));for(var je=De=null,Ue=ee,We=ee=0,ht=null,ft=te.next();Ue!==null&&!ft.done;We++,ft=te.next()){Ue.index>We?(ht=Ue,Ue=null):ht=Ue.sibling;var Ct=U(ie,Ue,ft.value,Ee);if(Ct===null){Ue===null&&(Ue=ht);break}e&&Ue&&Ct.alternate===null&&n(ie,Ue),ee=v(Ct,ee,We),je===null?De=Ct:je.sibling=Ct,je=Ct,Ue=ht}if(ft.done)return s(ie,Ue),oi&&nu(ie,We),De;if(Ue===null){for(;!ft.done;We++,ft=te.next())ft=Y(ie,ft.value,Ee),ft!==null&&(ee=v(ft,ee,We),je===null?De=ft:je.sibling=ft,je=ft);return oi&&nu(ie,We),De}for(Ue=h(ie,Ue);!ft.done;We++,ft=te.next())ft=de(Ue,ie,We,ft.value,Ee),ft!==null&&(e&&ft.alternate!==null&&Ue.delete(ft.key===null?We:ft.key),ee=v(ft,ee,We),je===null?De=ft:je.sibling=ft,je=ft);return e&&Ue.forEach(function(Ut){return n(ie,Ut)}),oi&&nu(ie,We),De}function ze(ie,ee,te,Ee){if(typeof te=="object"&&te!==null&&te.type===Ju&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case Ed:e:{for(var De=te.key,je=ee;je!==null;){if(je.key===De){if(De=te.type,De===Ju){if(je.tag===7){s(ie,je.sibling),ee=g(je,te.props.children),ee.return=ie,ie=ee;break e}}else if(je.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ul&&jv(De)===je.type){s(ie,je.sibling),ee=g(je,te.props),ee.ref=sh(ie,je,te),ee.return=ie,ie=ee;break e}s(ie,je);break}else n(ie,je);je=je.sibling}te.type===Ju?(ee=uu(te.props.children,ie.mode,Ee,te.key),ee.return=ie,ie=ee):(Ee=sp(te.type,te.key,te.props,null,ie.mode,Ee),Ee.ref=sh(ie,ee,te),Ee.return=ie,ie=Ee)}return S(ie);case Yu:e:{for(je=te.key;ee!==null;){if(ee.key===je)if(ee.tag===4&&ee.stateNode.containerInfo===te.containerInfo&&ee.stateNode.implementation===te.implementation){s(ie,ee.sibling),ee=g(ee,te.children||[]),ee.return=ie,ie=ee;break e}else{s(ie,ee);break}else n(ie,ee);ee=ee.sibling}ee=gm(te,ie.mode,Ee),ee.return=ie,ie=ee}return S(ie);case ul:return je=te._init,ze(ie,ee,je(te._payload),Ee)}if(dh(te))return ye(ie,ee,te,Ee);if(eh(te))return me(ie,ee,te,Ee);Dd(ie,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,ee!==null&&ee.tag===6?(s(ie,ee.sibling),ee=g(ee,te),ee.return=ie,ie=ee):(s(ie,ee),ee=mm(te,ie.mode,Ee),ee.return=ie,ie=ee),S(ie)):s(ie,ee)}return ze}var xc=u1(!0),c1=u1(!1),Kh={},Ys=kl(Kh),Oh=kl(Kh),Nh=kl(Kh);function au(e){if(e===Kh)throw Error(Xe(174));return e}function s_(e,n){switch(Hn(Nh,n),Hn(Oh,e),Hn(Ys,Kh),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Bm(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Bm(n,e)}Qn(Ys),Hn(Ys,n)}function wc(){Qn(Ys),Qn(Oh),Qn(Nh)}function h1(e){au(Nh.current);var n=au(Ys.current),s=Bm(n,e.type);n!==s&&(Hn(Oh,e),Hn(Ys,s))}function a_(e){Oh.current===e&&(Qn(Ys),Qn(Oh))}var di=kl(0);function Tp(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var cm=[];function l_(){for(var e=0;e<cm.length;e++)cm[e]._workInProgressVersionPrimary=null;cm.length=0}var np=Ua.ReactCurrentDispatcher,hm=Ua.ReactCurrentBatchConfig,fu=0,pi=null,Fi=null,Xi=null,Pp=!1,wh=!1,Uh=0,AE=0;function yr(){throw Error(Xe(321))}function u_(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!ws(e[s],n[s]))return!1;return!0}function c_(e,n,s,h,g,v){if(fu=v,pi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,np.current=e===null||e.memoizedState===null?RE:BE,e=s(h,g),wh){v=0;do{if(wh=!1,Uh=0,25<=v)throw Error(Xe(301));v+=1,Xi=Fi=null,n.updateQueue=null,np.current=FE,e=s(h,g)}while(wh)}if(np.current=kp,n=Fi!==null&&Fi.next!==null,fu=0,Xi=Fi=pi=null,Pp=!1,n)throw Error(Xe(300));return e}function h_(){var e=Uh!==0;return Uh=0,e}function Hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xi===null?pi.memoizedState=Xi=e:Xi=Xi.next=e,Xi}function Xo(){if(Fi===null){var e=pi.alternate;e=e!==null?e.memoizedState:null}else e=Fi.next;var n=Xi===null?pi.memoizedState:Xi.next;if(n!==null)Xi=n,Fi=e;else{if(e===null)throw Error(Xe(310));Fi=e,e={memoizedState:Fi.memoizedState,baseState:Fi.baseState,baseQueue:Fi.baseQueue,queue:Fi.queue,next:null},Xi===null?pi.memoizedState=Xi=e:Xi=Xi.next=e}return Xi}function Vh(e,n){return typeof n=="function"?n(e):n}function dm(e){var n=Xo(),s=n.queue;if(s===null)throw Error(Xe(311));s.lastRenderedReducer=e;var h=Fi,g=h.baseQueue,v=s.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}h.baseQueue=g=v,s.pending=null}if(g!==null){v=g.next,h=h.baseState;var u=S=null,A=null,V=v;do{var W=V.lane;if((fu&W)===W)A!==null&&(A=A.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),h=V.hasEagerState?V.eagerState:e(h,V.action);else{var Y={lane:W,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};A===null?(u=A=Y,S=h):A=A.next=Y,pi.lanes|=W,mu|=W}V=V.next}while(V!==null&&V!==v);A===null?S=h:A.next=u,ws(h,n.memoizedState)||(io=!0),n.memoizedState=h,n.baseState=S,n.baseQueue=A,s.lastRenderedState=h}if(e=s.interleaved,e!==null){g=e;do v=g.lane,pi.lanes|=v,mu|=v,g=g.next;while(g!==e)}else g===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function pm(e){var n=Xo(),s=n.queue;if(s===null)throw Error(Xe(311));s.lastRenderedReducer=e;var h=s.dispatch,g=s.pending,v=n.memoizedState;if(g!==null){s.pending=null;var S=g=g.next;do v=e(v,S.action),S=S.next;while(S!==g);ws(v,n.memoizedState)||(io=!0),n.memoizedState=v,n.baseQueue===null&&(n.baseState=v),s.lastRenderedState=v}return[v,h]}function d1(){}function p1(e,n){var s=pi,h=Xo(),g=n(),v=!ws(h.memoizedState,g);if(v&&(h.memoizedState=g,io=!0),h=h.queue,d_(g1.bind(null,s,h,e),[e]),h.getSnapshot!==n||v||Xi!==null&&Xi.memoizedState.tag&1){if(s.flags|=2048,$h(9,m1.bind(null,s,h,g,n),void 0,null),Ni===null)throw Error(Xe(349));(fu&30)!==0||f1(s,n,g)}return g}function f1(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=pi.updateQueue,n===null?(n={lastEffect:null,stores:null},pi.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function m1(e,n,s,h){n.value=s,n.getSnapshot=h,_1(n)&&qo(e,1,-1)}function g1(e,n,s){return s(function(){_1(n)&&qo(e,1,-1)})}function _1(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!ws(e,s)}catch{return!0}}function Gv(e){var n=Hs();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},n.queue=e,e=e.dispatch=DE.bind(null,pi,e),[n.memoizedState,e]}function $h(e,n,s,h){return e={tag:e,create:n,destroy:s,deps:h,next:null},n=pi.updateQueue,n===null?(n={lastEffect:null,stores:null},pi.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(h=s.next,s.next=e,e.next=h,n.lastEffect=e)),e}function y1(){return Xo().memoizedState}function ip(e,n,s,h){var g=Hs();pi.flags|=e,g.memoizedState=$h(1|n,s,void 0,h===void 0?null:h)}function qp(e,n,s,h){var g=Xo();h=h===void 0?null:h;var v=void 0;if(Fi!==null){var S=Fi.memoizedState;if(v=S.destroy,h!==null&&u_(h,S.deps)){g.memoizedState=$h(n,s,v,h);return}}pi.flags|=e,g.memoizedState=$h(1|n,s,v,h)}function Wv(e,n){return ip(8390656,8,e,n)}function d_(e,n){return qp(2048,8,e,n)}function v1(e,n){return qp(4,2,e,n)}function x1(e,n){return qp(4,4,e,n)}function w1(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function b1(e,n,s){return s=s!=null?s.concat([e]):null,qp(4,4,w1.bind(null,n,e),s)}function p_(){}function S1(e,n){var s=Xo();n=n===void 0?null:n;var h=s.memoizedState;return h!==null&&n!==null&&u_(n,h[1])?h[0]:(s.memoizedState=[e,n],e)}function E1(e,n){var s=Xo();n=n===void 0?null:n;var h=s.memoizedState;return h!==null&&n!==null&&u_(n,h[1])?h[0]:(e=e(),s.memoizedState=[e,n],e)}function T1(e,n,s){return(fu&21)===0?(e.baseState&&(e.baseState=!1,io=!0),e.memoizedState=s):(ws(s,n)||(s=A0(),pi.lanes|=s,mu|=s,e.baseState=!0),n)}function ME(e,n){var s=Ln;Ln=s!==0&&4>s?s:4,e(!0);var h=hm.transition;hm.transition={};try{e(!1),n()}finally{Ln=s,hm.transition=h}}function P1(){return Xo().memoizedState}function LE(e,n,s){var h=wl(e);s={lane:h,action:s,hasEagerState:!1,eagerState:null,next:null},k1(e)?C1(n,s):(I1(e,n,s),s=$r(),e=qo(e,h,s),e!==null&&z1(e,n,h))}function DE(e,n,s){var h=wl(e),g={lane:h,action:s,hasEagerState:!1,eagerState:null,next:null};if(k1(e))C1(n,g);else{I1(e,n,g);var v=e.alternate;if(e.lanes===0&&(v===null||v.lanes===0)&&(v=n.lastRenderedReducer,v!==null))try{var S=n.lastRenderedState,u=v(S,s);if(g.hasEagerState=!0,g.eagerState=u,ws(u,S))return}catch{}finally{}s=$r(),e=qo(e,h,s),e!==null&&z1(e,n,h)}}function k1(e){var n=e.alternate;return e===pi||n!==null&&n===pi}function C1(e,n){wh=Pp=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function I1(e,n,s){q1(e)?(e=n.interleaved,e===null?(s.next=s,vs===null?vs=[n]:vs.push(n)):(s.next=e.next,e.next=s),n.interleaved=s):(e=n.pending,e===null?s.next=s:(s.next=e.next,e.next=s),n.pending=s)}function z1(e,n,s){if((s&4194240)!==0){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,Gg(e,s)}}var kp={readContext:Ho,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},RE={readContext:Ho,useCallback:function(e,n){return Hs().memoizedState=[e,n===void 0?null:n],e},useContext:Ho,useEffect:Wv,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,ip(4194308,4,w1.bind(null,n,e),s)},useLayoutEffect:function(e,n){return ip(4194308,4,e,n)},useInsertionEffect:function(e,n){return ip(4,2,e,n)},useMemo:function(e,n){var s=Hs();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var h=Hs();return n=s!==void 0?s(n):n,h.memoizedState=h.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},h.queue=e,e=e.dispatch=LE.bind(null,pi,e),[h.memoizedState,e]},useRef:function(e){var n=Hs();return e={current:e},n.memoizedState=e},useState:Gv,useDebugValue:p_,useDeferredValue:function(e){return Hs().memoizedState=e},useTransition:function(){var e=Gv(!1),n=e[0];return e=ME.bind(null,e[1]),Hs().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var h=pi,g=Hs();if(oi){if(s===void 0)throw Error(Xe(407));s=s()}else{if(s=n(),Ni===null)throw Error(Xe(349));(fu&30)!==0||f1(h,n,s)}g.memoizedState=s;var v={value:s,getSnapshot:n};return g.queue=v,Wv(g1.bind(null,h,v,e),[e]),h.flags|=2048,$h(9,m1.bind(null,h,v,s,n),void 0,null),s},useId:function(){var e=Hs(),n=Ni.identifierPrefix;if(oi){var s=Da,h=La;s=(h&~(1<<32-xs(h)-1)).toString(32)+s,n=":"+n+"R"+s,s=Uh++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=AE++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},BE={readContext:Ho,useCallback:S1,useContext:Ho,useEffect:d_,useImperativeHandle:b1,useInsertionEffect:v1,useLayoutEffect:x1,useMemo:E1,useReducer:dm,useRef:y1,useState:function(){return dm(Vh)},useDebugValue:p_,useDeferredValue:function(e){var n=Xo();return T1(n,Fi.memoizedState,e)},useTransition:function(){var e=dm(Vh)[0],n=Xo().memoizedState;return[e,n]},useMutableSource:d1,useSyncExternalStore:p1,useId:P1,unstable_isNewReconciler:!1},FE={readContext:Ho,useCallback:S1,useContext:Ho,useEffect:d_,useImperativeHandle:b1,useInsertionEffect:v1,useLayoutEffect:x1,useMemo:E1,useReducer:pm,useRef:y1,useState:function(){return pm(Vh)},useDebugValue:p_,useDeferredValue:function(e){var n=Xo();return Fi===null?n.memoizedState=e:T1(n,Fi.memoizedState,e)},useTransition:function(){var e=pm(Vh)[0],n=Xo().memoizedState;return[e,n]},useMutableSource:d1,useSyncExternalStore:p1,useId:P1,unstable_isNewReconciler:!1};function f_(e,n){try{var s="",h=n;do s+=hS(h),h=h.return;while(h);var g=s}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:e,source:n,stack:g}}function og(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var OE=typeof WeakMap=="function"?WeakMap:Map;function A1(e,n,s){s=Ra(-1,s),s.tag=3,s.payload={element:null};var h=n.value;return s.callback=function(){Ip||(Ip=!0,fg=h),og(e,n)},s}function M1(e,n,s){s=Ra(-1,s),s.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var g=n.value;s.payload=function(){return h(g)},s.callback=function(){og(e,n)}}var v=e.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(s.callback=function(){og(e,n),typeof h!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var S=n.stack;this.componentDidCatch(n.value,{componentStack:S!==null?S:""})}),s}function qv(e,n,s){var h=e.pingCache;if(h===null){h=e.pingCache=new OE;var g=new Set;h.set(n,g)}else g=h.get(n),g===void 0&&(g=new Set,h.set(n,g));g.has(s)||(g.add(s),e=YE.bind(null,e,n,s),n.then(e,e))}function Hv(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Xv(e,n,s,h,g){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Ra(-1,1),n.tag=2,vl(s,n))),s.lanes|=1),e):(e.flags|=65536,e.lanes=g,e)}var L1,sg,D1,R1;L1=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};sg=function(){};D1=function(e,n,s,h){var g=e.memoizedProps;if(g!==h){e=n.stateNode,au(Ys.current);var v=null;switch(s){case"input":g=Mm(e,g),h=Mm(e,h),v=[];break;case"select":g=fi({},g,{value:void 0}),h=fi({},h,{value:void 0}),v=[];break;case"textarea":g=Rm(e,g),h=Rm(e,h),v=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=_p)}Fm(s,h);var S;s=null;for(V in g)if(!h.hasOwnProperty(V)&&g.hasOwnProperty(V)&&g[V]!=null)if(V==="style"){var u=g[V];for(S in u)u.hasOwnProperty(S)&&(s||(s={}),s[S]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(kh.hasOwnProperty(V)?v||(v=[]):(v=v||[]).push(V,null));for(V in h){var A=h[V];if(u=g!=null?g[V]:void 0,h.hasOwnProperty(V)&&A!==u&&(A!=null||u!=null))if(V==="style")if(u){for(S in u)!u.hasOwnProperty(S)||A&&A.hasOwnProperty(S)||(s||(s={}),s[S]="");for(S in A)A.hasOwnProperty(S)&&u[S]!==A[S]&&(s||(s={}),s[S]=A[S])}else s||(v||(v=[]),v.push(V,s)),s=A;else V==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,u=u?u.__html:void 0,A!=null&&u!==A&&(v=v||[]).push(V,A)):V==="children"?typeof A!="string"&&typeof A!="number"||(v=v||[]).push(V,""+A):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(kh.hasOwnProperty(V)?(A!=null&&V==="onScroll"&&Jn("scroll",e),v||u===A||(v=[])):(v=v||[]).push(V,A))}s&&(v=v||[]).push("style",s);var V=v;(n.updateQueue=V)&&(n.flags|=4)}};R1=function(e,n,s,h){s!==h&&(n.flags|=4)};function ah(e,n){if(!oi)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function vr(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,h=0;if(n)for(var g=e.child;g!==null;)s|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=e,g=g.sibling;else for(g=e.child;g!==null;)s|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=e,g=g.sibling;return e.subtreeFlags|=h,e.childLanes=s,n}function NE(e,n,s){var h=n.pendingProps;switch(r_(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(n),null;case 1:return oo(n.type)&&yp(),vr(n),null;case 3:return h=n.stateNode,wc(),Qn(ro),Qn(br),l_(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(oh(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ys!==null&&(_g(ys),ys=null))),sg(e,n),vr(n),null;case 5:a_(n);var g=au(Nh.current);if(s=n.type,e!==null&&n.stateNode!=null)D1(e,n,s,h,g),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!h){if(n.stateNode===null)throw Error(Xe(166));return vr(n),null}if(e=au(Ys.current),oh(n)){h=n.stateNode,s=n.type;var v=n.memoizedProps;switch(h[Xs]=n,h[Fh]=v,e=(n.mode&1)!==0,s){case"dialog":Jn("cancel",h),Jn("close",h);break;case"iframe":case"object":case"embed":Jn("load",h);break;case"video":case"audio":for(g=0;g<fh.length;g++)Jn(fh[g],h);break;case"source":Jn("error",h);break;case"img":case"image":case"link":Jn("error",h),Jn("load",h);break;case"details":Jn("toggle",h);break;case"input":uv(h,v),Jn("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!v.multiple},Jn("invalid",h);break;case"textarea":hv(h,v),Jn("invalid",h)}Fm(s,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var u=v[S];S==="children"?typeof u=="string"?h.textContent!==u&&(v.suppressHydrationWarning!==!0&&Ld(h.textContent,u,e),g=["children",u]):typeof u=="number"&&h.textContent!==""+u&&(v.suppressHydrationWarning!==!0&&Ld(h.textContent,u,e),g=["children",""+u]):kh.hasOwnProperty(S)&&u!=null&&S==="onScroll"&&Jn("scroll",h)}switch(s){case"input":Td(h),cv(h,v,!0);break;case"textarea":Td(h),dv(h);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(h.onclick=_p)}h=g,n.updateQueue=h,h!==null&&(n.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=g0(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=S.createElement(s,{is:h.is}):(e=S.createElement(s),s==="select"&&(S=e,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):e=S.createElementNS(e,s),e[Xs]=n,e[Fh]=h,L1(e,n,!1,!1),n.stateNode=e;e:{switch(S=Om(s,h),s){case"dialog":Jn("cancel",e),Jn("close",e),g=h;break;case"iframe":case"object":case"embed":Jn("load",e),g=h;break;case"video":case"audio":for(g=0;g<fh.length;g++)Jn(fh[g],e);g=h;break;case"source":Jn("error",e),g=h;break;case"img":case"image":case"link":Jn("error",e),Jn("load",e),g=h;break;case"details":Jn("toggle",e),g=h;break;case"input":uv(e,h),g=Mm(e,h),Jn("invalid",e);break;case"option":g=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},g=fi({},h,{value:void 0}),Jn("invalid",e);break;case"textarea":hv(e,h),g=Rm(e,h),Jn("invalid",e);break;default:g=h}Fm(s,g),u=g;for(v in u)if(u.hasOwnProperty(v)){var A=u[v];v==="style"?v0(e,A):v==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&_0(e,A)):v==="children"?typeof A=="string"?(s!=="textarea"||A!=="")&&Ch(e,A):typeof A=="number"&&Ch(e,""+A):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(kh.hasOwnProperty(v)?A!=null&&v==="onScroll"&&Jn("scroll",e):A!=null&&Ng(e,v,A,S))}switch(s){case"input":Td(e),cv(e,h,!1);break;case"textarea":Td(e),dv(e);break;case"option":h.value!=null&&e.setAttribute("value",""+bl(h.value));break;case"select":e.multiple=!!h.multiple,v=h.value,v!=null?cc(e,!!h.multiple,v,!1):h.defaultValue!=null&&cc(e,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(e.onclick=_p)}switch(s){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return vr(n),null;case 6:if(e&&n.stateNode!=null)R1(e,n,e.memoizedProps,h);else{if(typeof h!="string"&&n.stateNode===null)throw Error(Xe(166));if(s=au(Nh.current),au(Ys.current),oh(n)){if(h=n.stateNode,s=n.memoizedProps,h[Xs]=n,(v=h.nodeValue!==s)&&(e=bo,e!==null))switch(e.tag){case 3:Ld(h.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ld(h.nodeValue,s,(e.mode&1)!==0)}v&&(n.flags|=4)}else h=(s.nodeType===9?s:s.ownerDocument).createTextNode(h),h[Xs]=n,n.stateNode=h}return vr(n),null;case 13:if(Qn(di),h=n.memoizedState,oi&&no!==null&&(n.mode&1)!==0&&(n.flags&128)===0){for(h=no;h;)h=Ma(h.nextSibling);return vc(),n.flags|=98560,n}if(h!==null&&h.dehydrated!==null){if(h=oh(n),e===null){if(!h)throw Error(Xe(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Xe(317));h[Xs]=n}else vc(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;return vr(n),null}return ys!==null&&(_g(ys),ys=null),(n.flags&128)!==0?(n.lanes=s,n):(h=h!==null,s=!1,e===null?oh(n):s=e.memoizedState!==null,h!==s&&h&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(di.current&1)!==0?Oi===0&&(Oi=3):x_())),n.updateQueue!==null&&(n.flags|=4),vr(n),null);case 4:return wc(),sg(e,n),e===null&&Rh(n.stateNode.containerInfo),vr(n),null;case 10:return t_(n.type._context),vr(n),null;case 17:return oo(n.type)&&yp(),vr(n),null;case 19:if(Qn(di),v=n.memoizedState,v===null)return vr(n),null;if(h=(n.flags&128)!==0,S=v.rendering,S===null)if(h)ah(v,!1);else{if(Oi!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(S=Tp(e),S!==null){for(n.flags|=128,ah(v,!1),h=S.updateQueue,h!==null&&(n.updateQueue=h,n.flags|=4),n.subtreeFlags=0,h=s,s=n.child;s!==null;)v=s,e=h,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=e,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,e=S.dependencies,v.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Hn(di,di.current&1|2),n.child}e=e.sibling}v.tail!==null&&Ei()>bc&&(n.flags|=128,h=!0,ah(v,!1),n.lanes=4194304)}else{if(!h)if(e=Tp(S),e!==null){if(n.flags|=128,h=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),ah(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!oi)return vr(n),null}else 2*Ei()-v.renderingStartTime>bc&&s!==1073741824&&(n.flags|=128,h=!0,ah(v,!1),n.lanes=4194304);v.isBackwards?(S.sibling=n.child,n.child=S):(s=v.last,s!==null?s.sibling=S:n.child=S,v.last=S)}return v.tail!==null?(n=v.tail,v.rendering=n,v.tail=n.sibling,v.renderingStartTime=Ei(),n.sibling=null,s=di.current,Hn(di,h?s&1|2:s&1),n):(vr(n),null);case 22:case 23:return v_(),h=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(n.flags|=8192),h&&(n.mode&1)!==0?(wo&1073741824)!==0&&(vr(n),n.subtreeFlags&6&&(n.flags|=8192)):vr(n),null;case 24:return null;case 25:return null}throw Error(Xe(156,n.tag))}var UE=Ua.ReactCurrentOwner,io=!1;function Vr(e,n,s,h){n.child=e===null?c1(n,null,s,h):xc(n,e.child,s,h)}function Kv(e,n,s,h,g){s=s.render;var v=n.ref;return fc(n,g),h=c_(e,n,s,h,v,g),s=h_(),e!==null&&!io?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~g,Oa(e,n,g)):(oi&&s&&i_(n),n.flags|=1,Vr(e,n,h,g),n.child)}function Yv(e,n,s,h,g){if(e===null){var v=s.type;return typeof v=="function"&&!w_(v)&&v.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=v,B1(e,n,v,h,g)):(e=sp(s.type,null,h,n,n.mode,g),e.ref=n.ref,e.return=n,n.child=e)}if(v=e.child,(e.lanes&g)===0){var S=v.memoizedProps;if(s=s.compare,s=s!==null?s:Dh,s(S,h)&&e.ref===n.ref)return Oa(e,n,g)}return n.flags|=1,e=El(v,h),e.ref=n.ref,e.return=n,n.child=e}function B1(e,n,s,h,g){if(e!==null){var v=e.memoizedProps;if(Dh(v,h)&&e.ref===n.ref)if(io=!1,n.pendingProps=h=v,(e.lanes&g)!==0)(e.flags&131072)!==0&&(io=!0);else return n.lanes=e.lanes,Oa(e,n,g)}return ag(e,n,s,h,g)}function F1(e,n,s){var h=n.pendingProps,g=h.children,v=e!==null?e.memoizedState:null;if(h.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hn(lc,wo),wo|=s;else if((s&1073741824)!==0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=v!==null?v.baseLanes:s,Hn(lc,wo),wo|=h;else return e=v!==null?v.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Hn(lc,wo),wo|=e,null;else v!==null?(h=v.baseLanes|s,n.memoizedState=null):h=s,Hn(lc,wo),wo|=h;return Vr(e,n,g,s),n.child}function O1(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function ag(e,n,s,h,g){var v=oo(s)?du:br.current;return v=yc(n,v),fc(n,g),s=c_(e,n,s,h,v,g),h=h_(),e!==null&&!io?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~g,Oa(e,n,g)):(oi&&h&&i_(n),n.flags|=1,Vr(e,n,s,g),n.child)}function Jv(e,n,s,h,g){if(oo(s)){var v=!0;vp(n)}else v=!1;if(fc(n,g),n.stateNode===null)e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),s1(n,s,h),ng(n,s,h,g),h=!0;else if(e===null){var S=n.stateNode,u=n.memoizedProps;S.props=u;var A=S.context,V=s.contextType;typeof V=="object"&&V!==null?V=Ho(V):(V=oo(s)?du:br.current,V=yc(n,V));var W=s.getDerivedStateFromProps,Y=typeof W=="function"||typeof S.getSnapshotBeforeUpdate=="function";Y||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(u!==h||A!==V)&&Vv(n,S,h,V),cl=!1;var U=n.memoizedState;S.state=U,bp(n,h,S,g),A=n.memoizedState,u!==h||U!==A||ro.current||cl?(typeof W=="function"&&(tg(n,s,W,h),A=n.memoizedState),(u=cl||Uv(n,s,u,h,U,A,V))?(Y||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(n.flags|=4194308)):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=A),S.props=h,S.state=A,S.context=V,h=u):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{S=n.stateNode,r1(e,n),u=n.memoizedProps,V=n.type===n.elementType?u:gs(n.type,u),S.props=V,Y=n.pendingProps,U=S.context,A=s.contextType,typeof A=="object"&&A!==null?A=Ho(A):(A=oo(s)?du:br.current,A=yc(n,A));var de=s.getDerivedStateFromProps;(W=typeof de=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(u!==Y||U!==A)&&Vv(n,S,h,A),cl=!1,U=n.memoizedState,S.state=U,bp(n,h,S,g);var ye=n.memoizedState;u!==Y||U!==ye||ro.current||cl?(typeof de=="function"&&(tg(n,s,de,h),ye=n.memoizedState),(V=cl||Uv(n,s,V,h,U,ye,A)||!1)?(W||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,ye,A),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,ye,A)),typeof S.componentDidUpdate=="function"&&(n.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof S.componentDidUpdate!="function"||u===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=ye),S.props=h,S.state=ye,S.context=A,h=V):(typeof S.componentDidUpdate!="function"||u===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),h=!1)}return lg(e,n,s,h,v,g)}function lg(e,n,s,h,g,v){O1(e,n);var S=(n.flags&128)!==0;if(!h&&!S)return g&&Fv(n,s,!1),Oa(e,n,v);h=n.stateNode,UE.current=n;var u=S&&typeof s.getDerivedStateFromError!="function"?null:h.render();return n.flags|=1,e!==null&&S?(n.child=xc(n,e.child,null,v),n.child=xc(n,null,u,v)):Vr(e,n,u,v),n.memoizedState=h.state,g&&Fv(n,s,!0),n.child}function N1(e){var n=e.stateNode;n.pendingContext?Bv(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Bv(e,n.context,!1),s_(e,n.containerInfo)}function Qv(e,n,s,h,g){return vc(),o_(g),n.flags|=256,Vr(e,n,s,h),n.child}var Rd={dehydrated:null,treeContext:null,retryLane:0};function Bd(e){return{baseLanes:e,cachePool:null,transitions:null}}function ex(e,n){return{baseLanes:e.baseLanes|n,cachePool:null,transitions:e.transitions}}function U1(e,n,s){var h=n.pendingProps,g=di.current,v=!1,S=(n.flags&128)!==0,u;if((u=S)||(u=e!==null&&e.memoizedState===null?!1:(g&2)!==0),u?(v=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(g|=1),Hn(di,g&1),e===null)return rg(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(g=h.children,e=h.fallback,v?(h=n.mode,v=n.child,g={mode:"hidden",children:g},(h&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=g):v=Mp(g,h,0,null),e=uu(e,h,s,null),v.return=n,e.return=n,v.sibling=e,n.child=v,n.child.memoizedState=Bd(s),n.memoizedState=Rd,e):ug(n,g));if(g=e.memoizedState,g!==null){if(u=g.dehydrated,u!==null){if(S)return n.flags&256?(n.flags&=-257,Fd(e,n,s,Error(Xe(422)))):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(v=h.fallback,g=n.mode,h=Mp({mode:"visible",children:h.children},g,0,null),v=uu(v,g,s,null),v.flags|=2,h.return=n,v.return=n,h.sibling=v,n.child=h,(n.mode&1)!==0&&xc(n,e.child,null,s),n.child.memoizedState=Bd(s),n.memoizedState=Rd,v);if((n.mode&1)===0)n=Fd(e,n,s,null);else if(u.data==="$!")n=Fd(e,n,s,Error(Xe(419)));else if(h=(s&e.childLanes)!==0,io||h){if(h=Ni,h!==null){switch(s&-s){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}h=(v&(h.suspendedLanes|s))!==0?0:v,h!==0&&h!==g.retryLane&&(g.retryLane=h,qo(e,h,-1))}x_(),n=Fd(e,n,s,Error(Xe(421)))}else u.data==="$?"?(n.flags|=128,n.child=e.child,n=JE.bind(null,e),u._reactRetry=n,n=null):(s=g.treeContext,no=Ma(u.nextSibling),bo=n,oi=!0,ys=null,s!==null&&(Zo[jo++]=La,Zo[jo++]=Da,Zo[jo++]=pu,La=s.id,Da=s.overflow,pu=n),n=ug(n,n.pendingProps.children),n.flags|=4096);return n}return v?(h=nx(e,n,h.children,h.fallback,s),v=n.child,g=e.child.memoizedState,v.memoizedState=g===null?Bd(s):ex(g,s),v.childLanes=e.childLanes&~s,n.memoizedState=Rd,h):(s=tx(e,n,h.children,s),n.memoizedState=null,s)}return v?(h=nx(e,n,h.children,h.fallback,s),v=n.child,g=e.child.memoizedState,v.memoizedState=g===null?Bd(s):ex(g,s),v.childLanes=e.childLanes&~s,n.memoizedState=Rd,h):(s=tx(e,n,h.children,s),n.memoizedState=null,s)}function ug(e,n){return n=Mp({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function tx(e,n,s,h){var g=e.child;return e=g.sibling,s=El(g,{mode:"visible",children:s}),(n.mode&1)===0&&(s.lanes=h),s.return=n,s.sibling=null,e!==null&&(h=n.deletions,h===null?(n.deletions=[e],n.flags|=16):h.push(e)),n.child=s}function nx(e,n,s,h,g){var v=n.mode;e=e.child;var S=e.sibling,u={mode:"hidden",children:s};return(v&1)===0&&n.child!==e?(s=n.child,s.childLanes=0,s.pendingProps=u,n.deletions=null):(s=El(e,u),s.subtreeFlags=e.subtreeFlags&14680064),S!==null?h=El(S,h):(h=uu(h,v,g,null),h.flags|=2),h.return=n,s.return=n,s.sibling=h,n.child=s,h}function Fd(e,n,s,h){return h!==null&&o_(h),xc(n,e.child,null,s),e=ug(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ix(e,n,s){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),eg(e.return,n,s)}function fm(e,n,s,h,g){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:g}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=s,v.tailMode=g)}function V1(e,n,s){var h=n.pendingProps,g=h.revealOrder,v=h.tail;if(Vr(e,n,h.children,s),h=di.current,(h&2)!==0)h=h&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ix(e,s,n);else if(e.tag===19)ix(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Hn(di,h),(n.mode&1)===0)n.memoizedState=null;else switch(g){case"forwards":for(s=n.child,g=null;s!==null;)e=s.alternate,e!==null&&Tp(e)===null&&(g=s),s=s.sibling;s=g,s===null?(g=n.child,n.child=null):(g=s.sibling,s.sibling=null),fm(n,!1,g,s,v);break;case"backwards":for(s=null,g=n.child,n.child=null;g!==null;){if(e=g.alternate,e!==null&&Tp(e)===null){n.child=g;break}e=g.sibling,g.sibling=s,s=g,g=e}fm(n,!0,s,null,v);break;case"together":fm(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Oa(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),mu|=n.lanes,(s&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(Xe(153));if(n.child!==null){for(e=n.child,s=El(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=El(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function VE(e,n,s){switch(n.tag){case 3:N1(n),vc();break;case 5:h1(n);break;case 1:oo(n.type)&&vp(n);break;case 4:s_(n,n.stateNode.containerInfo);break;case 10:var h=n.type._context,g=n.memoizedProps.value;Hn(xp,h._currentValue),h._currentValue=g;break;case 13:if(h=n.memoizedState,h!==null)return h.dehydrated!==null?(Hn(di,di.current&1),n.flags|=128,null):(s&n.child.childLanes)!==0?U1(e,n,s):(Hn(di,di.current&1),e=Oa(e,n,s),e!==null?e.sibling:null);Hn(di,di.current&1);break;case 19:if(h=(s&n.childLanes)!==0,(e.flags&128)!==0){if(h)return V1(e,n,s);n.flags|=128}if(g=n.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Hn(di,di.current),h)break;return null;case 22:case 23:return n.lanes=0,F1(e,n,s)}return Oa(e,n,s)}function $E(e,n){switch(r_(n),n.tag){case 1:return oo(n.type)&&yp(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return wc(),Qn(ro),Qn(br),l_(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return a_(n),null;case 13:if(Qn(di),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(Xe(340));vc()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Qn(di),null;case 4:return wc(),null;case 10:return t_(n.type._context),null;case 22:case 23:return v_(),null;case 24:return null;default:return null}}var Od=!1,xr=!1,ZE=typeof WeakSet=="function"?WeakSet:Set,yt=null;function ac(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(h){xi(e,n,h)}else s.current=null}function cg(e,n,s){try{s()}catch(h){xi(e,n,h)}}var rx=!1;function jE(e,n){if(Hm=fp,e=q0(),Jg(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var h=s.getSelection&&s.getSelection();if(h&&h.rangeCount!==0){s=h.anchorNode;var g=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{s.nodeType,v.nodeType}catch{s=null;break e}var S=0,u=-1,A=-1,V=0,W=0,Y=e,U=null;t:for(;;){for(var de;Y!==s||g!==0&&Y.nodeType!==3||(u=S+g),Y!==v||h!==0&&Y.nodeType!==3||(A=S+h),Y.nodeType===3&&(S+=Y.nodeValue.length),(de=Y.firstChild)!==null;)U=Y,Y=de;for(;;){if(Y===e)break t;if(U===s&&++V===g&&(u=S),U===v&&++W===h&&(A=S),(de=Y.nextSibling)!==null)break;Y=U,U=Y.parentNode}Y=de}s=u===-1||A===-1?null:{start:u,end:A}}else s=null}s=s||{start:0,end:0}}else s=null;for(Xm={focusedElem:e,selectionRange:s},fp=!1,yt=n;yt!==null;)if(n=yt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,yt=e;else for(;yt!==null;){n=yt;try{var ye=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var me=ye.memoizedProps,ze=ye.memoizedState,ie=n.stateNode,ee=ie.getSnapshotBeforeUpdate(n.elementType===n.type?me:gs(n.type,me),ze);ie.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var te=n.stateNode.containerInfo;if(te.nodeType===1)te.textContent="";else if(te.nodeType===9){var Ee=te.body;Ee!=null&&(Ee.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(De){xi(n,n.return,De)}if(e=n.sibling,e!==null){e.return=n.return,yt=e;break}yt=n.return}return ye=rx,rx=!1,ye}function bh(e,n,s){var h=n.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&e)===e){var v=g.destroy;g.destroy=void 0,v!==void 0&&cg(n,s,v)}g=g.next}while(g!==h)}}function Hp(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var h=s.create;s.destroy=h()}s=s.next}while(s!==n)}}function hg(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function $1(e){var n=e.alternate;n!==null&&(e.alternate=null,$1(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Xs],delete n[Fh],delete n[Jm],delete n[kE],delete n[CE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Z1(e){return e.tag===5||e.tag===3||e.tag===4}function ox(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Z1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dg(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=_p));else if(h!==4&&(e=e.child,e!==null))for(dg(e,n,s),e=e.sibling;e!==null;)dg(e,n,s),e=e.sibling}function pg(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(pg(e,n,s),e=e.sibling;e!==null;)pg(e,n,s),e=e.sibling}var or=null,_s=!1;function ll(e,n,s){for(s=s.child;s!==null;)j1(e,n,s),s=s.sibling}function j1(e,n,s){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(Up,s)}catch{}switch(s.tag){case 5:xr||ac(s,n);case 6:var h=or,g=_s;or=null,ll(e,n,s),or=h,_s=g,or!==null&&(_s?(e=or,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):or.removeChild(s.stateNode));break;case 18:or!==null&&(_s?(e=or,s=s.stateNode,e.nodeType===8?lm(e.parentNode,s):e.nodeType===1&&lm(e,s),Mh(e)):lm(or,s.stateNode));break;case 4:h=or,g=_s,or=s.stateNode.containerInfo,_s=!0,ll(e,n,s),or=h,_s=g;break;case 0:case 11:case 14:case 15:if(!xr&&(h=s.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&cg(s,n,S),g=g.next}while(g!==h)}ll(e,n,s);break;case 1:if(!xr&&(ac(s,n),h=s.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=s.memoizedProps,h.state=s.memoizedState,h.componentWillUnmount()}catch(u){xi(s,n,u)}ll(e,n,s);break;case 21:ll(e,n,s);break;case 22:s.mode&1?(xr=(h=xr)||s.memoizedState!==null,ll(e,n,s),xr=h):ll(e,n,s);break;default:ll(e,n,s)}}function sx(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new ZE),n.forEach(function(h){var g=QE.bind(null,e,h);s.has(h)||(s.add(h),h.then(g,g))})}}function ms(e,n){var s=n.deletions;if(s!==null)for(var h=0;h<s.length;h++){var g=s[h];try{var v=e,S=n,u=S;e:for(;u!==null;){switch(u.tag){case 5:or=u.stateNode,_s=!1;break e;case 3:or=u.stateNode.containerInfo,_s=!0;break e;case 4:or=u.stateNode.containerInfo,_s=!0;break e}u=u.return}if(or===null)throw Error(Xe(160));j1(v,S,g),or=null,_s=!1;var A=g.alternate;A!==null&&(A.return=null),g.return=null}catch(V){xi(g,n,V)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)G1(n,e),n=n.sibling}function G1(e,n){var s=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(n,e),Ws(e),h&4){try{bh(3,e,e.return),Hp(3,e)}catch(ye){xi(e,e.return,ye)}try{bh(5,e,e.return)}catch(ye){xi(e,e.return,ye)}}break;case 1:ms(n,e),Ws(e),h&512&&s!==null&&ac(s,s.return);break;case 5:if(ms(n,e),Ws(e),h&512&&s!==null&&ac(s,s.return),e.flags&32){var g=e.stateNode;try{Ch(g,"")}catch(ye){xi(e,e.return,ye)}}if(h&4&&(g=e.stateNode,g!=null)){var v=e.memoizedProps,S=s!==null?s.memoizedProps:v,u=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{u==="input"&&v.type==="radio"&&v.name!=null&&f0(g,v),Om(u,S);var V=Om(u,v);for(S=0;S<A.length;S+=2){var W=A[S],Y=A[S+1];W==="style"?v0(g,Y):W==="dangerouslySetInnerHTML"?_0(g,Y):W==="children"?Ch(g,Y):Ng(g,W,Y,V)}switch(u){case"input":Lm(g,v);break;case"textarea":m0(g,v);break;case"select":var U=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var de=v.value;de!=null?cc(g,!!v.multiple,de,!1):U!==!!v.multiple&&(v.defaultValue!=null?cc(g,!!v.multiple,v.defaultValue,!0):cc(g,!!v.multiple,v.multiple?[]:"",!1))}g[Fh]=v}catch(ye){xi(e,e.return,ye)}}break;case 6:if(ms(n,e),Ws(e),h&4){if(e.stateNode===null)throw Error(Xe(162));V=e.stateNode,W=e.memoizedProps;try{V.nodeValue=W}catch(ye){xi(e,e.return,ye)}}break;case 3:if(ms(n,e),Ws(e),h&4&&s!==null&&s.memoizedState.isDehydrated)try{Mh(n.containerInfo)}catch(ye){xi(e,e.return,ye)}break;case 4:ms(n,e),Ws(e);break;case 13:ms(n,e),Ws(e),V=e.child,V.flags&8192&&V.memoizedState!==null&&(V.alternate===null||V.alternate.memoizedState===null)&&(__=Ei()),h&4&&sx(e);break;case 22:if(V=s!==null&&s.memoizedState!==null,e.mode&1?(xr=(W=xr)||V,ms(n,e),xr=W):ms(n,e),Ws(e),h&8192){W=e.memoizedState!==null;e:for(Y=null,U=e;;){if(U.tag===5){if(Y===null){Y=U;try{g=U.stateNode,W?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(u=U.stateNode,A=U.memoizedProps.style,S=A!=null&&A.hasOwnProperty("display")?A.display:null,u.style.display=y0("display",S))}catch(ye){xi(e,e.return,ye)}}}else if(U.tag===6){if(Y===null)try{U.stateNode.nodeValue=W?"":U.memoizedProps}catch(ye){xi(e,e.return,ye)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===e)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===e)break e;for(;U.sibling===null;){if(U.return===null||U.return===e)break e;Y===U&&(Y=null),U=U.return}Y===U&&(Y=null),U.sibling.return=U.return,U=U.sibling}if(W&&!V&&(e.mode&1)!==0)for(yt=e,e=e.child;e!==null;){for(V=yt=e;yt!==null;){switch(W=yt,Y=W.child,W.tag){case 0:case 11:case 14:case 15:bh(4,W,W.return);break;case 1:if(ac(W,W.return),v=W.stateNode,typeof v.componentWillUnmount=="function"){U=W,de=W.return;try{g=U,v.props=g.memoizedProps,v.state=g.memoizedState,v.componentWillUnmount()}catch(ye){xi(U,de,ye)}}break;case 5:ac(W,W.return);break;case 22:if(W.memoizedState!==null){lx(V);continue}}Y!==null?(Y.return=W,yt=Y):lx(V)}e=e.sibling}}break;case 19:ms(n,e),Ws(e),h&4&&sx(e);break;case 21:break;default:ms(n,e),Ws(e)}}function Ws(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Z1(s)){var h=s;break e}s=s.return}throw Error(Xe(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(Ch(g,""),h.flags&=-33);var v=ox(e);pg(e,v,g);break;case 3:case 4:var S=h.stateNode.containerInfo,u=ox(e);dg(e,u,S);break;default:throw Error(Xe(161))}}catch(A){xi(e,e.return,A)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function GE(e,n,s){yt=e,W1(e)}function W1(e,n,s){for(var h=(e.mode&1)!==0;yt!==null;){var g=yt,v=g.child;if(g.tag===22&&h){var S=g.memoizedState!==null||Od;if(!S){var u=g.alternate,A=u!==null&&u.memoizedState!==null||xr;u=Od;var V=xr;if(Od=S,(xr=A)&&!V)for(yt=g;yt!==null;)S=yt,A=S.child,S.tag===22&&S.memoizedState!==null?ux(g):A!==null?(A.return=S,yt=A):ux(g);for(;v!==null;)yt=v,W1(v),v=v.sibling;yt=g,Od=u,xr=V}ax(e)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,yt=v):ax(e)}}function ax(e){for(;yt!==null;){var n=yt;if((n.flags&8772)!==0){var s=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:xr||Hp(5,n);break;case 1:var h=n.stateNode;if(n.flags&4&&!xr)if(s===null)h.componentDidMount();else{var g=n.elementType===n.type?s.memoizedProps:gs(n.type,s.memoizedProps);h.componentDidUpdate(g,s.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var v=n.updateQueue;v!==null&&Nv(n,v,h);break;case 3:var S=n.updateQueue;if(S!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}Nv(n,S,s)}break;case 5:var u=n.stateNode;if(s===null&&n.flags&4){s=u;var A=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&s.focus();break;case"img":A.src&&(s.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var V=n.alternate;if(V!==null){var W=V.memoizedState;if(W!==null){var Y=W.dehydrated;Y!==null&&Mh(Y)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(Xe(163))}xr||n.flags&512&&hg(n)}catch(U){xi(n,n.return,U)}}if(n===e){yt=null;break}if(s=n.sibling,s!==null){s.return=n.return,yt=s;break}yt=n.return}}function lx(e){for(;yt!==null;){var n=yt;if(n===e){yt=null;break}var s=n.sibling;if(s!==null){s.return=n.return,yt=s;break}yt=n.return}}function ux(e){for(;yt!==null;){var n=yt;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Hp(4,n)}catch(A){xi(n,s,A)}break;case 1:var h=n.stateNode;if(typeof h.componentDidMount=="function"){var g=n.return;try{h.componentDidMount()}catch(A){xi(n,g,A)}}var v=n.return;try{hg(n)}catch(A){xi(n,v,A)}break;case 5:var S=n.return;try{hg(n)}catch(A){xi(n,S,A)}}}catch(A){xi(n,n.return,A)}if(n===e){yt=null;break}var u=n.sibling;if(u!==null){u.return=n.return,yt=u;break}yt=n.return}}var WE=Math.ceil,Cp=Ua.ReactCurrentDispatcher,m_=Ua.ReactCurrentOwner,Wo=Ua.ReactCurrentBatchConfig,xn=0,Ni=null,zi=null,sr=0,wo=0,lc=kl(0),Oi=0,Zh=null,mu=0,Xp=0,g_=0,Sh=null,to=null,__=0,bc=1/0,Ia=null,Ip=!1,fg=null,xl=null,Nd=!1,ml=null,zp=0,Eh=0,mg=null,rp=-1,op=0;function $r(){return(xn&6)!==0?Ei():rp!==-1?rp:rp=Ei()}function wl(e){return(e.mode&1)===0?1:(xn&2)!==0&&sr!==0?sr&-sr:zE.transition!==null?(op===0&&(op=A0()),op):(e=Ln,e!==0||(e=window.event,e=e===void 0?16:O0(e.type)),e)}function qo(e,n,s){if(50<Eh)throw Eh=0,mg=null,Error(Xe(185));var h=Kp(e,n);return h===null?null:(qh(h,n,s),((xn&2)===0||h!==Ni)&&(h===Ni&&((xn&2)===0&&(Xp|=n),Oi===4&&dl(h,sr)),so(h,s),n===1&&xn===0&&(e.mode&1)===0&&(bc=Ei()+500,Gp&&Cl())),h)}function Kp(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}function q1(e){return(Ni!==null||vs!==null)&&(e.mode&1)!==0&&(xn&2)===0}function so(e,n){var s=e.callbackNode;zS(e,n);var h=pp(e,e===Ni?sr:0);if(h===0)s!==null&&mv(s),e.callbackNode=null,e.callbackPriority=0;else if(n=h&-h,e.callbackPriority!==n){if(s!=null&&mv(s),n===1)e.tag===0?IE(cx.bind(null,e)):i1(cx.bind(null,e)),TE(function(){xn===0&&Cl()}),s=null;else{switch(M0(h)){case 1:s=jg;break;case 4:s=I0;break;case 16:s=dp;break;case 536870912:s=z0;break;default:s=dp}s=tw(s,H1.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function H1(e,n){if(rp=-1,op=0,(xn&6)!==0)throw Error(Xe(327));var s=e.callbackNode;if(mc()&&e.callbackNode!==s)return null;var h=pp(e,e===Ni?sr:0);if(h===0)return null;if((h&30)!==0||(h&e.expiredLanes)!==0||n)n=Ap(e,h);else{n=h;var g=xn;xn|=2;var v=K1();(Ni!==e||sr!==n)&&(Ia=null,bc=Ei()+500,lu(e,n));do try{XE();break}catch(u){X1(e,u)}while(1);e_(),Cp.current=v,xn=g,zi!==null?n=0:(Ni=null,sr=0,n=Oi)}if(n!==0){if(n===2&&(g=Zm(e),g!==0&&(h=g,n=gg(e,g))),n===1)throw s=Zh,lu(e,0),dl(e,h),so(e,Ei()),s;if(n===6)dl(e,h);else{if(g=e.current.alternate,(h&30)===0&&!qE(g)&&(n=Ap(e,h),n===2&&(v=Zm(e),v!==0&&(h=v,n=gg(e,v))),n===1))throw s=Zh,lu(e,0),dl(e,h),so(e,Ei()),s;switch(e.finishedWork=g,e.finishedLanes=h,n){case 0:case 1:throw Error(Xe(345));case 2:iu(e,to,Ia);break;case 3:if(dl(e,h),(h&130023424)===h&&(n=__+500-Ei(),10<n)){if(pp(e,0)!==0)break;if(g=e.suspendedLanes,(g&h)!==h){$r(),e.pingedLanes|=e.suspendedLanes&g;break}e.timeoutHandle=Ym(iu.bind(null,e,to,Ia),n);break}iu(e,to,Ia);break;case 4:if(dl(e,h),(h&4194240)===h)break;for(n=e.eventTimes,g=-1;0<h;){var S=31-xs(h);v=1<<S,S=n[S],S>g&&(g=S),h&=~v}if(h=g,h=Ei()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*WE(h/1960))-h,10<h){e.timeoutHandle=Ym(iu.bind(null,e,to,Ia),h);break}iu(e,to,Ia);break;case 5:iu(e,to,Ia);break;default:throw Error(Xe(329))}}}return so(e,Ei()),e.callbackNode===s?H1.bind(null,e):null}function gg(e,n){var s=Sh;return e.current.memoizedState.isDehydrated&&(lu(e,n).flags|=256),e=Ap(e,n),e!==2&&(n=to,to=s,n!==null&&_g(n)),e}function _g(e){to===null?to=e:to.push.apply(to,e)}function qE(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var h=0;h<s.length;h++){var g=s[h],v=g.getSnapshot;g=g.value;try{if(!ws(v(),g))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dl(e,n){for(n&=~g_,n&=~Xp,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-xs(n),h=1<<s;e[s]=-1,n&=~h}}function cx(e){if((xn&6)!==0)throw Error(Xe(327));mc();var n=pp(e,0);if((n&1)===0)return so(e,Ei()),null;var s=Ap(e,n);if(e.tag!==0&&s===2){var h=Zm(e);h!==0&&(n=h,s=gg(e,h))}if(s===1)throw s=Zh,lu(e,0),dl(e,n),so(e,Ei()),s;if(s===6)throw Error(Xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,iu(e,to,Ia),so(e,Ei()),null}function y_(e,n){var s=xn;xn|=1;try{return e(n)}finally{xn=s,xn===0&&(bc=Ei()+500,Gp&&Cl())}}function gu(e){ml!==null&&ml.tag===0&&(xn&6)===0&&mc();var n=xn;xn|=1;var s=Wo.transition,h=Ln;try{if(Wo.transition=null,Ln=1,e)return e()}finally{Ln=h,Wo.transition=s,xn=n,(xn&6)===0&&Cl()}}function v_(){wo=lc.current,Qn(lc)}function lu(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,EE(s)),zi!==null)for(s=zi.return;s!==null;){var h=s;switch(r_(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&yp();break;case 3:wc(),Qn(ro),Qn(br),l_();break;case 5:a_(h);break;case 4:wc();break;case 13:Qn(di);break;case 19:Qn(di);break;case 10:t_(h.type._context);break;case 22:case 23:v_()}s=s.return}if(Ni=e,zi=e=El(e.current,null),sr=wo=n,Oi=0,Zh=null,g_=Xp=mu=0,to=Sh=null,vs!==null){for(n=0;n<vs.length;n++)if(s=vs[n],h=s.interleaved,h!==null){s.interleaved=null;var g=h.next,v=s.pending;if(v!==null){var S=v.next;v.next=g,h.next=S}s.pending=h}vs=null}return e}function X1(e,n){do{var s=zi;try{if(e_(),np.current=kp,Pp){for(var h=pi.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Pp=!1}if(fu=0,Xi=Fi=pi=null,wh=!1,Uh=0,m_.current=null,s===null||s.return===null){Oi=1,Zh=n,zi=null;break}e:{var v=e,S=s.return,u=s,A=n;if(n=sr,u.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var V=A,W=u,Y=W.tag;if((W.mode&1)===0&&(Y===0||Y===11||Y===15)){var U=W.alternate;U?(W.updateQueue=U.updateQueue,W.memoizedState=U.memoizedState,W.lanes=U.lanes):(W.updateQueue=null,W.memoizedState=null)}var de=Hv(S);if(de!==null){de.flags&=-257,Xv(de,S,u,v,n),de.mode&1&&qv(v,V,n),n=de,A=V;var ye=n.updateQueue;if(ye===null){var me=new Set;me.add(A),n.updateQueue=me}else ye.add(A);break e}else{if((n&1)===0){qv(v,V,n),x_();break e}A=Error(Xe(426))}}else if(oi&&u.mode&1){var ze=Hv(S);if(ze!==null){(ze.flags&65536)===0&&(ze.flags|=256),Xv(ze,S,u,v,n),o_(A);break e}}v=A,Oi!==4&&(Oi=2),Sh===null?Sh=[v]:Sh.push(v),A=f_(A,u),u=S;do{switch(u.tag){case 3:u.flags|=65536,n&=-n,u.lanes|=n;var ie=A1(u,A,n);Ov(u,ie);break e;case 1:v=A;var ee=u.type,te=u.stateNode;if((u.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(xl===null||!xl.has(te)))){u.flags|=65536,n&=-n,u.lanes|=n;var Ee=M1(u,v,n);Ov(u,Ee);break e}}u=u.return}while(u!==null)}J1(s)}catch(De){n=De,zi===s&&s!==null&&(zi=s=s.return);continue}break}while(1)}function K1(){var e=Cp.current;return Cp.current=kp,e===null?kp:e}function x_(){(Oi===0||Oi===3||Oi===2)&&(Oi=4),Ni===null||(mu&268435455)===0&&(Xp&268435455)===0||dl(Ni,sr)}function Ap(e,n){var s=xn;xn|=2;var h=K1();(Ni!==e||sr!==n)&&(Ia=null,lu(e,n));do try{HE();break}catch(g){X1(e,g)}while(1);if(e_(),xn=s,Cp.current=h,zi!==null)throw Error(Xe(261));return Ni=null,sr=0,Oi}function HE(){for(;zi!==null;)Y1(zi)}function XE(){for(;zi!==null&&!wS();)Y1(zi)}function Y1(e){var n=ew(e.alternate,e,wo);e.memoizedProps=e.pendingProps,n===null?J1(e):zi=n,m_.current=null}function J1(e){var n=e;do{var s=n.alternate;if(e=n.return,(n.flags&32768)===0){if(s=NE(s,n,wo),s!==null){zi=s;return}}else{if(s=$E(s,n),s!==null){s.flags&=32767,zi=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oi=6,zi=null;return}}if(n=n.sibling,n!==null){zi=n;return}zi=n=e}while(n!==null);Oi===0&&(Oi=5)}function iu(e,n,s){var h=Ln,g=Wo.transition;try{Wo.transition=null,Ln=1,KE(e,n,s,h)}finally{Wo.transition=g,Ln=h}return null}function KE(e,n,s,h){do mc();while(ml!==null);if((xn&6)!==0)throw Error(Xe(327));s=e.finishedWork;var g=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Xe(177));e.callbackNode=null,e.callbackPriority=0;var v=s.lanes|s.childLanes;if(AS(e,v),e===Ni&&(zi=Ni=null,sr=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Nd||(Nd=!0,tw(dp,function(){return mc(),null})),v=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||v){v=Wo.transition,Wo.transition=null;var S=Ln;Ln=1;var u=xn;xn|=4,m_.current=null,jE(e,s),G1(s,e),_E(Xm),fp=!!Hm,Xm=Hm=null,e.current=s,GE(s),bS(),xn=u,Ln=S,Wo.transition=v}else e.current=s;if(Nd&&(Nd=!1,ml=e,zp=g),v=e.pendingLanes,v===0&&(xl=null),TS(s.stateNode),so(e,Ei()),n!==null)for(h=e.onRecoverableError,s=0;s<n.length;s++)h(n[s]);if(Ip)throw Ip=!1,e=fg,fg=null,e;return(zp&1)!==0&&e.tag!==0&&mc(),v=e.pendingLanes,(v&1)!==0?e===mg?Eh++:(Eh=0,mg=e):Eh=0,Cl(),null}function mc(){if(ml!==null){var e=M0(zp),n=Wo.transition,s=Ln;try{if(Wo.transition=null,Ln=16>e?16:e,ml===null)var h=!1;else{if(e=ml,ml=null,zp=0,(xn&6)!==0)throw Error(Xe(331));var g=xn;for(xn|=4,yt=e.current;yt!==null;){var v=yt,S=v.child;if((yt.flags&16)!==0){var u=v.deletions;if(u!==null){for(var A=0;A<u.length;A++){var V=u[A];for(yt=V;yt!==null;){var W=yt;switch(W.tag){case 0:case 11:case 15:bh(8,W,v)}var Y=W.child;if(Y!==null)Y.return=W,yt=Y;else for(;yt!==null;){W=yt;var U=W.sibling,de=W.return;if($1(W),W===V){yt=null;break}if(U!==null){U.return=de,yt=U;break}yt=de}}}var ye=v.alternate;if(ye!==null){var me=ye.child;if(me!==null){ye.child=null;do{var ze=me.sibling;me.sibling=null,me=ze}while(me!==null)}}yt=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,yt=S;else e:for(;yt!==null;){if(v=yt,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:bh(9,v,v.return)}var ie=v.sibling;if(ie!==null){ie.return=v.return,yt=ie;break e}yt=v.return}}var ee=e.current;for(yt=ee;yt!==null;){S=yt;var te=S.child;if((S.subtreeFlags&2064)!==0&&te!==null)te.return=S,yt=te;else e:for(S=ee;yt!==null;){if(u=yt,(u.flags&2048)!==0)try{switch(u.tag){case 0:case 11:case 15:Hp(9,u)}}catch(De){xi(u,u.return,De)}if(u===S){yt=null;break e}var Ee=u.sibling;if(Ee!==null){Ee.return=u.return,yt=Ee;break e}yt=u.return}}if(xn=g,Cl(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(Up,e)}catch{}h=!0}return h}finally{Ln=s,Wo.transition=n}}return!1}function hx(e,n,s){n=f_(s,n),n=A1(e,n,1),vl(e,n),n=$r(),e=Kp(e,1),e!==null&&(qh(e,1,n),so(e,n))}function xi(e,n,s){if(e.tag===3)hx(e,e,s);else for(;n!==null;){if(n.tag===3){hx(n,e,s);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(xl===null||!xl.has(h))){e=f_(s,e),e=M1(n,e,1),vl(n,e),e=$r(),n=Kp(n,1),n!==null&&(qh(n,1,e),so(n,e));break}}n=n.return}}function YE(e,n,s){var h=e.pingCache;h!==null&&h.delete(n),n=$r(),e.pingedLanes|=e.suspendedLanes&s,Ni===e&&(sr&s)===s&&(Oi===4||Oi===3&&(sr&130023424)===sr&&500>Ei()-__?lu(e,0):g_|=s),so(e,n)}function Q1(e,n){n===0&&((e.mode&1)===0?n=1:(n=Cd,Cd<<=1,(Cd&130023424)===0&&(Cd=4194304)));var s=$r();e=Kp(e,n),e!==null&&(qh(e,n,s),so(e,s))}function JE(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Q1(e,s)}function QE(e,n){var s=0;switch(e.tag){case 13:var h=e.stateNode,g=e.memoizedState;g!==null&&(s=g.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(Xe(314))}h!==null&&h.delete(n),Q1(e,s)}var ew;ew=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||ro.current)io=!0;else{if((e.lanes&s)===0&&(n.flags&128)===0)return io=!1,VE(e,n,s);io=(e.flags&131072)!==0}else io=!1,oi&&(n.flags&1048576)!==0&&a1(n,Ep,n.index);switch(n.lanes=0,n.tag){case 2:var h=n.type;e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps;var g=yc(n,br.current);fc(n,s),g=c_(null,n,h,e,g,s);var v=h_();return n.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,oo(h)?(v=!0,vp(n)):v=!1,n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,n_(n),g.updater=Wp,n.stateNode=g,g._reactInternals=n,ng(n,h,e,s),n=lg(null,n,h,!0,v,s)):(n.tag=0,oi&&v&&i_(n),Vr(null,n,g,s),n=n.child),n;case 16:h=n.elementType;e:{switch(e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),e=n.pendingProps,g=h._init,h=g(h._payload),n.type=h,g=n.tag=tT(h),e=gs(h,e),g){case 0:n=ag(null,n,h,e,s);break e;case 1:n=Jv(null,n,h,e,s);break e;case 11:n=Kv(null,n,h,e,s);break e;case 14:n=Yv(null,n,h,gs(h.type,e),s);break e}throw Error(Xe(306,h,""))}return n;case 0:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:gs(h,g),ag(e,n,h,g,s);case 1:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:gs(h,g),Jv(e,n,h,g,s);case 3:e:{if(N1(n),e===null)throw Error(Xe(387));h=n.pendingProps,v=n.memoizedState,g=v.element,r1(e,n),bp(n,h,null,s);var S=n.memoizedState;if(h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},n.updateQueue.baseState=v,n.memoizedState=v,n.flags&256){g=Error(Xe(423)),n=Qv(e,n,h,s,g);break e}else if(h!==g){g=Error(Xe(424)),n=Qv(e,n,h,s,g);break e}else for(no=Ma(n.stateNode.containerInfo.firstChild),bo=n,oi=!0,ys=null,s=c1(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(vc(),h===g){n=Oa(e,n,s);break e}Vr(e,n,h,s)}n=n.child}return n;case 5:return h1(n),e===null&&rg(n),h=n.type,g=n.pendingProps,v=e!==null?e.memoizedProps:null,S=g.children,Km(h,g)?S=null:v!==null&&Km(h,v)&&(n.flags|=32),O1(e,n),Vr(e,n,S,s),n.child;case 6:return e===null&&rg(n),null;case 13:return U1(e,n,s);case 4:return s_(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=xc(n,null,h,s):Vr(e,n,h,s),n.child;case 11:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:gs(h,g),Kv(e,n,h,g,s);case 7:return Vr(e,n,n.pendingProps,s),n.child;case 8:return Vr(e,n,n.pendingProps.children,s),n.child;case 12:return Vr(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(h=n.type._context,g=n.pendingProps,v=n.memoizedProps,S=g.value,Hn(xp,h._currentValue),h._currentValue=S,v!==null)if(ws(v.value,S)){if(v.children===g.children&&!ro.current){n=Oa(e,n,s);break e}}else for(v=n.child,v!==null&&(v.return=n);v!==null;){var u=v.dependencies;if(u!==null){S=v.child;for(var A=u.firstContext;A!==null;){if(A.context===h){if(v.tag===1){A=Ra(-1,s&-s),A.tag=2;var V=v.updateQueue;if(V!==null){V=V.shared;var W=V.pending;W===null?A.next=A:(A.next=W.next,W.next=A),V.pending=A}}v.lanes|=s,A=v.alternate,A!==null&&(A.lanes|=s),eg(v.return,s,n),u.lanes|=s;break}A=A.next}}else if(v.tag===10)S=v.type===n.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(Xe(341));S.lanes|=s,u=S.alternate,u!==null&&(u.lanes|=s),eg(S,s,n),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===n){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Vr(e,n,g.children,s),n=n.child}return n;case 9:return g=n.type,h=n.pendingProps.children,fc(n,s),g=Ho(g),h=h(g),n.flags|=1,Vr(e,n,h,s),n.child;case 14:return h=n.type,g=gs(h,n.pendingProps),g=gs(h.type,g),Yv(e,n,h,g,s);case 15:return B1(e,n,n.type,n.pendingProps,s);case 17:return h=n.type,g=n.pendingProps,g=n.elementType===h?g:gs(h,g),e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2),n.tag=1,oo(h)?(e=!0,vp(n)):e=!1,fc(n,s),s1(n,h,g),ng(n,h,g,s),lg(null,n,h,!0,e,s);case 19:return V1(e,n,s);case 22:return F1(e,n,s)}throw Error(Xe(156,n.tag))};function tw(e,n){return C0(e,n)}function eT(e,n,s,h){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Go(e,n,s,h){return new eT(e,n,s,h)}function w_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tT(e){if(typeof e=="function")return w_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vg)return 11;if(e===$g)return 14}return 2}function El(e,n){var s=e.alternate;return s===null?(s=Go(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function sp(e,n,s,h,g,v){var S=2;if(h=e,typeof e=="function")w_(e)&&(S=1);else if(typeof e=="string")S=5;else e:switch(e){case Ju:return uu(s.children,g,v,n);case Ug:S=8,g|=8;break;case Cm:return e=Go(12,s,n,g|2),e.elementType=Cm,e.lanes=v,e;case Im:return e=Go(13,s,n,g),e.elementType=Im,e.lanes=v,e;case zm:return e=Go(19,s,n,g),e.elementType=zm,e.lanes=v,e;case h0:return Mp(s,g,v,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case u0:S=10;break e;case c0:S=9;break e;case Vg:S=11;break e;case $g:S=14;break e;case ul:S=16,h=null;break e}throw Error(Xe(130,e==null?e:typeof e,""))}return n=Go(S,s,n,g),n.elementType=e,n.type=h,n.lanes=v,n}function uu(e,n,s,h){return e=Go(7,e,h,n),e.lanes=s,e}function Mp(e,n,s,h){return e=Go(22,e,h,n),e.elementType=h0,e.lanes=s,e.stateNode={},e}function mm(e,n,s){return e=Go(6,e,null,n),e.lanes=s,e}function gm(e,n,s){return n=Go(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function nT(e,n,s,h,g){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yf(0),this.expirationTimes=Yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yf(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function b_(e,n,s,h,g,v,S,u,A){return e=new nT(e,n,s,u,A),n===1?(n=1,v===!0&&(n|=8)):n=0,v=Go(3,null,null,n),e.current=v,v.stateNode=e,v.memoizedState={element:h,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},n_(v),e}function iT(e,n,s){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yu,key:h==null?null:""+h,children:e,containerInfo:n,implementation:s}}function nw(e){if(!e)return Sl;e=e._reactInternals;e:{if(vu(e)!==e||e.tag!==1)throw Error(Xe(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(oo(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Xe(171))}if(e.tag===1){var s=e.type;if(oo(s))return n1(e,s,n)}return n}function iw(e,n,s,h,g,v,S,u,A){return e=b_(s,h,!0,e,g,v,S,u,A),e.context=nw(null),s=e.current,h=$r(),g=wl(s),v=Ra(h,g),v.callback=n!=null?n:null,vl(s,v),e.current.lanes=g,qh(e,g,h),so(e,h),e}function Yp(e,n,s,h){var g=n.current,v=$r(),S=wl(g);return s=nw(s),n.context===null?n.context=s:n.pendingContext=s,n=Ra(v,S),n.payload={element:e},h=h===void 0?null:h,h!==null&&(n.callback=h),vl(g,n),e=qo(g,S,v),e!==null&&tp(e,g,S),S}function Lp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dx(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function S_(e,n){dx(e,n),(e=e.alternate)&&dx(e,n)}function rT(){return null}var rw=typeof reportError=="function"?reportError:function(e){console.error(e)};function E_(e){this._internalRoot=e}Jp.prototype.render=E_.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(Xe(409));Yp(e,n,null,null)};Jp.prototype.unmount=E_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;gu(function(){Yp(null,e,null,null)}),n[Fa]=null}};function Jp(e){this._internalRoot=e}Jp.prototype.unstable_scheduleHydration=function(e){if(e){var n=R0();e={blockedOn:null,target:e,priority:n};for(var s=0;s<hl.length&&n!==0&&n<hl[s].priority;s++);hl.splice(s,0,e),s===0&&F0(e)}};function T_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function px(){}function oT(e,n,s,h,g){if(g){if(typeof h=="function"){var v=h;h=function(){var V=Lp(S);v.call(V)}}var S=iw(n,h,e,0,null,!1,!1,"",px);return e._reactRootContainer=S,e[Fa]=S.current,Rh(e.nodeType===8?e.parentNode:e),gu(),S}for(;g=e.lastChild;)e.removeChild(g);if(typeof h=="function"){var u=h;h=function(){var V=Lp(A);u.call(V)}}var A=b_(e,0,!1,null,null,!1,!1,"",px);return e._reactRootContainer=A,e[Fa]=A.current,Rh(e.nodeType===8?e.parentNode:e),gu(function(){Yp(n,A,s,h)}),A}function ef(e,n,s,h,g){var v=s._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var u=g;g=function(){var A=Lp(S);u.call(A)}}Yp(n,S,e,g)}else S=oT(s,n,e,g,h);return Lp(S)}L0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=ph(n.pendingLanes);s!==0&&(Gg(n,s|1),so(n,Ei()),(xn&6)===0&&(bc=Ei()+500,Cl()))}break;case 13:var h=$r();gu(function(){return qo(e,1,h)}),S_(e,1)}};Wg=function(e){if(e.tag===13){var n=$r();qo(e,134217728,n),S_(e,134217728)}};D0=function(e){if(e.tag===13){var n=$r(),s=wl(e);qo(e,s,n),S_(e,s)}};R0=function(){return Ln};B0=function(e,n){var s=Ln;try{return Ln=e,n()}finally{Ln=s}};Um=function(e,n,s){switch(n){case"input":if(Lm(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==e&&h.form===e.form){var g=jp(h);if(!g)throw Error(Xe(90));p0(h),Lm(h,g)}}}break;case"textarea":m0(e,s);break;case"select":n=s.value,n!=null&&cc(e,!!s.multiple,n,!1)}};b0=y_;S0=gu;var sT={usingClientEntryPoint:!1,Events:[Xh,nc,jp,x0,w0,y_]},lh={findFiberByHostInstance:su,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},aT={bundleType:lh.bundleType,version:lh.version,rendererPackageName:lh.rendererPackageName,rendererConfig:lh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=P0(e),e===null?null:e.stateNode},findFiberByHostInstance:lh.findFiberByHostInstance||rT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{Up=Ud.inject(aT),Ks=Ud}catch{}}Eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sT;Eo.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T_(n))throw Error(Xe(200));return iT(e,n,null,s)};Eo.createRoot=function(e,n){if(!T_(e))throw Error(Xe(299));var s=!1,h="",g=rw;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(g=n.onRecoverableError)),n=b_(e,1,!1,null,null,s,!1,h,g),e[Fa]=n.current,Rh(e.nodeType===8?e.parentNode:e),new E_(n)};Eo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(Xe(188)):(e=Object.keys(e).join(","),Error(Xe(268,e)));return e=P0(n),e=e===null?null:e.stateNode,e};Eo.flushSync=function(e){return gu(e)};Eo.hydrate=function(e,n,s){if(!Qp(n))throw Error(Xe(200));return ef(null,e,n,!0,s)};Eo.hydrateRoot=function(e,n,s){if(!T_(e))throw Error(Xe(405));var h=s!=null&&s.hydratedSources||null,g=!1,v="",S=rw;if(s!=null&&(s.unstable_strictMode===!0&&(g=!0),s.identifierPrefix!==void 0&&(v=s.identifierPrefix),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),n=iw(n,null,e,1,s!=null?s:null,g,!1,v,S),e[Fa]=n.current,Rh(e),h)for(e=0;e<h.length;e++)s=h[e],g=s._getVersion,g=g(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,g]:n.mutableSourceEagerHydrationData.push(s,g);return new Jp(n)};Eo.render=function(e,n,s){if(!Qp(n))throw Error(Xe(200));return ef(null,e,n,!1,s)};Eo.unmountComponentAtNode=function(e){if(!Qp(e))throw Error(Xe(40));return e._reactRootContainer?(gu(function(){ef(null,null,e,!1,function(){e._reactRootContainer=null,e[Fa]=null})}),!0):!1};Eo.unstable_batchedUpdates=y_;Eo.unstable_renderSubtreeIntoContainer=function(e,n,s,h){if(!Qp(s))throw Error(Xe(200));if(e==null||e._reactInternals===void 0)throw Error(Xe(38));return ef(e,n,s,!1,h)};Eo.version="18.1.0-next-22edb9f77-20220426";function ow(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ow)}catch(e){console.error(e)}}ow(),Bg.exports=Eo;var lT=Bg.exports,fx=Bg.exports;Pm.createRoot=fx.createRoot,Pm.hydrateRoot=fx.hydrateRoot;var Bn="colors",Ur="sizes",xt="space",uT={gap:xt,gridGap:xt,columnGap:xt,gridColumnGap:xt,rowGap:xt,gridRowGap:xt,inset:xt,insetBlock:xt,insetBlockEnd:xt,insetBlockStart:xt,insetInline:xt,insetInlineEnd:xt,insetInlineStart:xt,margin:xt,marginTop:xt,marginRight:xt,marginBottom:xt,marginLeft:xt,marginBlock:xt,marginBlockEnd:xt,marginBlockStart:xt,marginInline:xt,marginInlineEnd:xt,marginInlineStart:xt,padding:xt,paddingTop:xt,paddingRight:xt,paddingBottom:xt,paddingLeft:xt,paddingBlock:xt,paddingBlockEnd:xt,paddingBlockStart:xt,paddingInline:xt,paddingInlineEnd:xt,paddingInlineStart:xt,top:xt,right:xt,bottom:xt,left:xt,scrollMargin:xt,scrollMarginTop:xt,scrollMarginRight:xt,scrollMarginBottom:xt,scrollMarginLeft:xt,scrollMarginX:xt,scrollMarginY:xt,scrollMarginBlock:xt,scrollMarginBlockEnd:xt,scrollMarginBlockStart:xt,scrollMarginInline:xt,scrollMarginInlineEnd:xt,scrollMarginInlineStart:xt,scrollPadding:xt,scrollPaddingTop:xt,scrollPaddingRight:xt,scrollPaddingBottom:xt,scrollPaddingLeft:xt,scrollPaddingX:xt,scrollPaddingY:xt,scrollPaddingBlock:xt,scrollPaddingBlockEnd:xt,scrollPaddingBlockStart:xt,scrollPaddingInline:xt,scrollPaddingInlineEnd:xt,scrollPaddingInlineStart:xt,fontSize:"fontSizes",background:Bn,backgroundColor:Bn,backgroundImage:Bn,borderImage:Bn,border:Bn,borderBlock:Bn,borderBlockEnd:Bn,borderBlockStart:Bn,borderBottom:Bn,borderBottomColor:Bn,borderColor:Bn,borderInline:Bn,borderInlineEnd:Bn,borderInlineStart:Bn,borderLeft:Bn,borderLeftColor:Bn,borderRight:Bn,borderRightColor:Bn,borderTop:Bn,borderTopColor:Bn,caretColor:Bn,color:Bn,columnRuleColor:Bn,fill:Bn,outline:Bn,outlineColor:Bn,stroke:Bn,textDecorationColor:Bn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ur,minBlockSize:Ur,maxBlockSize:Ur,inlineSize:Ur,minInlineSize:Ur,maxInlineSize:Ur,width:Ur,minWidth:Ur,maxWidth:Ur,height:Ur,minHeight:Ur,maxHeight:Ur,flexBasis:Ur,gridTemplateColumns:Ur,gridTemplateRows:Ur,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},cT=(e,n)=>typeof n=="function"?{"()":Function.prototype.toString.call(n)}:n,kc=()=>{const e=Object.create(null);return(n,s,...h)=>{const g=(v=>JSON.stringify(v,cT))(n);return g in e?e[g]:e[g]=s(n,...h)}},cu=Symbol.for("sxs.internal"),P_=(e,n)=>Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)),mx=e=>{for(const n in e)return!0;return!1},{hasOwnProperty:hT}=Object.prototype,yg=e=>e.includes("-")?e:e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),dT=/\s+(?![^()]*\))/,Gu=e=>n=>e(...typeof n=="string"?String(n).split(dT):[n]),gx={appearance:e=>({WebkitAppearance:e,appearance:e}),backfaceVisibility:e=>({WebkitBackfaceVisibility:e,backfaceVisibility:e}),backdropFilter:e=>({WebkitBackdropFilter:e,backdropFilter:e}),backgroundClip:e=>({WebkitBackgroundClip:e,backgroundClip:e}),boxDecorationBreak:e=>({WebkitBoxDecorationBreak:e,boxDecorationBreak:e}),clipPath:e=>({WebkitClipPath:e,clipPath:e}),content:e=>({content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:`"${e}"`}),hyphens:e=>({WebkitHyphens:e,hyphens:e}),maskImage:e=>({WebkitMaskImage:e,maskImage:e}),maskSize:e=>({WebkitMaskSize:e,maskSize:e}),tabSize:e=>({MozTabSize:e,tabSize:e}),textSizeAdjust:e=>({WebkitTextSizeAdjust:e,textSizeAdjust:e}),userSelect:e=>({WebkitUserSelect:e,userSelect:e}),marginBlock:Gu((e,n)=>({marginBlockStart:e,marginBlockEnd:n||e})),marginInline:Gu((e,n)=>({marginInlineStart:e,marginInlineEnd:n||e})),maxSize:Gu((e,n)=>({maxBlockSize:e,maxInlineSize:n||e})),minSize:Gu((e,n)=>({minBlockSize:e,minInlineSize:n||e})),paddingBlock:Gu((e,n)=>({paddingBlockStart:e,paddingBlockEnd:n||e})),paddingInline:Gu((e,n)=>({paddingInlineStart:e,paddingInlineEnd:n||e}))},_m=/([\d.]+)([^]*)/,pT=(e,n)=>e.length?e.reduce((s,h)=>(s.push(...n.map(g=>g.includes("&")?g.replace(/&/g,/[ +>|~]/.test(h)&&/&.*&/.test(g)?`:is(${h})`:h):h+" "+g)),s),[]):n,fT=(e,n)=>e in mT&&typeof n=="string"?n.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(s,h,g,v)=>h+(g==="stretch"?`-moz-available${v};${yg(e)}:${h}-webkit-fill-available`:`-moz-fit-content${v};${yg(e)}:${h}fit-content`)+v):String(n),mT={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Na=e=>e?e+"-":"",sw=(e,n,s)=>e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(h,g,v,S,u)=>S=="$"==!!v?h:(g||S=="--"?"calc(":"")+"var(--"+(S==="$"?Na(n)+(u.includes("$")?"":Na(s))+u.replace(/\$/g,"-"):u)+")"+(g||S=="--"?"*"+(g||"")+(v||"1")+")":"")),gT=/\s*,\s*(?![^()]*\))/,_T=Object.prototype.toString,uc=(e,n,s,h,g)=>{let v,S,u;const A=(V,W,Y)=>{let U,de;const ye=me=>{for(U in me){const ee=U.charCodeAt(0)===64,te=ee&&Array.isArray(me[U])?me[U]:[me[U]];for(de of te){const Ee=/[A-Z]/.test(ie=U)?ie:ie.replace(/-[^]/g,je=>je[1].toUpperCase()),De=typeof de=="object"&&de&&de.toString===_T&&(!h.utils[Ee]||!W.length);if(Ee in h.utils&&!De){const je=h.utils[Ee];if(je!==S){S=je,ye(je(de)),S=null;continue}}else if(Ee in gx){const je=gx[Ee];if(je!==u){u=je,ye(je(de)),u=null;continue}}if(ee&&(ze=U.slice(1)in h.media?"@media "+h.media[U.slice(1)]:U,U=ze.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(je,Ue,We,ht,ft,Ct)=>{const Ut=_m.test(Ue),jn=.0625*(Ut?-1:1),[Zt,Sn]=Ut?[ht,Ue]:[Ue,ht];return"("+(We[0]==="="?"":We[0]===">"===Ut?"max-":"min-")+Zt+":"+(We[0]!=="="&&We.length===1?Sn.replace(_m,(ut,Dn,Oe)=>Number(Dn)+jn*(We===">"?1:-1)+Oe):Sn)+(ft?") and ("+(ft[0]===">"?"min-":"max-")+Zt+":"+(ft.length===1?Ct.replace(_m,(ut,Dn,Oe)=>Number(Dn)+jn*(ft===">"?-1:1)+Oe):Ct):"")+")"})),De){const je=ee?Y.concat(U):[...Y],Ue=ee?[...W]:pT(W,U.split(gT));v!==void 0&&g(_x(...v)),v=void 0,A(de,Ue,je)}else v===void 0&&(v=[[],W,Y]),U=ee||U.charCodeAt(0)!==36?U:`--${Na(h.prefix)}${U.slice(1).replace(/\$/g,"-")}`,de=De?de:typeof de=="number"?de&&Ee in yT?String(de)+"px":String(de):sw(fT(Ee,de==null?"":de),h.prefix,h.themeMap[Ee]),v[0].push(`${ee?`${U} `:`${yg(U)}:`}${de}`)}}var ze,ie};ye(V),v!==void 0&&g(_x(...v)),v=void 0};A(e,n,s)},_x=(e,n,s)=>`${s.map(h=>`${h}{`).join("")}${n.length?`${n.join(",")}{`:""}${e.join(";")}${n.length?"}":""}${Array(s.length?s.length+1:0).join("}")}`,yT={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},yx=e=>String.fromCharCode(e+(e>25?39:97)),hu=e=>(n=>{let s,h="";for(s=Math.abs(n);s>52;s=s/52|0)h=yx(s%52)+h;return yx(s%52)+h})(((n,s)=>{let h=s.length;for(;h;)n=33*n^s.charCodeAt(--h);return n})(5381,JSON.stringify(e))>>>0),mh=["themed","global","styled","onevar","resonevar","allvar","inline"],vT=e=>{if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch{return!1}},xT=e=>{let n;const s=()=>{const{cssRules:g}=n.sheet;return[].map.call(g,(v,S)=>{const{cssText:u}=v;let A="";if(u.startsWith("--sxs"))return"";if(g[S-1]&&(A=g[S-1].cssText).startsWith("--sxs")){if(!v.cssRules.length)return"";for(const V in n.rules)if(n.rules[V].group===v)return`--sxs{--sxs:${[...n.rules[V].cache].join(" ")}}${u}`;return v.cssRules.length?`${A}${u}`:""}return u}).join("")},h=()=>{if(n){const{rules:u,sheet:A}=n;if(!A.deleteRule){for(;Object(Object(A.cssRules)[0]).type===3;)A.cssRules.splice(0,1);A.cssRules=[]}for(const V in u)delete u[V]}const g=Object(e).styleSheets||[];for(const u of g)if(vT(u)){for(let A=0,V=u.cssRules;V[A];++A){const W=Object(V[A]);if(W.type!==1)continue;const Y=Object(V[A+1]);if(Y.type!==4)continue;++A;const{cssText:U}=W;if(!U.startsWith("--sxs"))continue;const de=U.slice(14,-3).trim().split(/\s+/),ye=mh[de[0]];ye&&(n||(n={sheet:u,reset:h,rules:{},toString:s}),n.rules[ye]={group:Y,index:A,cache:new Set(de)})}if(n)break}if(!n){const u=(A,V)=>({type:V,cssRules:[],insertRule(W,Y){this.cssRules.splice(Y,0,u(W,{import:3,undefined:1}[(W.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return A==="@media{}"?`@media{${[].map.call(this.cssRules,W=>W.cssText).join("")}}`:A}});n={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:u("","text/css"),rules:{},reset:h,toString:s}}const{sheet:v,rules:S}=n;for(let u=mh.length-1;u>=0;--u){const A=mh[u];if(!S[A]){const V=mh[u+1],W=S[V]?S[V].index:v.cssRules.length;v.insertRule("@media{}",W),v.insertRule(`--sxs{--sxs:${u}}`,W),S[A]={group:v.cssRules[W+1],index:W,cache:new Set([u])}}wT(S[A])}};return h(),n},wT=e=>{const n=e.group;let s=n.cssRules.length;e.apply=h=>{try{n.insertRule(h,s),++s}catch{}}},uh=Symbol(),bT=kc(),vx=(e,n)=>bT(e,()=>(...s)=>{let h={type:null,composers:new Set};for(const g of s)if(g!=null)if(g[cu]){h.type==null&&(h.type=g[cu].type);for(const v of g[cu].composers)h.composers.add(v)}else g.constructor!==Object||g.$$typeof?h.type==null&&(h.type=g):h.composers.add(ST(g,e));return h.type==null&&(h.type="span"),h.composers.size||h.composers.add(["PJLV",{},[],[],{},[]]),ET(e,h,n)}),ST=(v,g)=>{var S=v,{variants:e,compoundVariants:n,defaultVariants:s}=S,h=pn(S,["variants","compoundVariants","defaultVariants"]);const u=`${Na(g.prefix)}c-${hu(h)}`,A=[],V=[],W=Object.create(null),Y=[];for(const me in s)W[me]=String(s[me]);if(typeof e=="object"&&e)for(const me in e){U=W,de=me,hT.call(U,de)||(W[me]="undefined");const ze=e[me];for(const ie in ze){const ee={[me]:String(ie)};String(ie)==="undefined"&&Y.push(me);const te=ze[ie],Ee=[ee,te,!mx(te)];A.push(Ee)}}var U,de;if(typeof n=="object"&&n)for(const me of n){let ye=me,{css:ze}=ye,ie=pn(ye,["css"]);ze=typeof ze=="object"&&ze||{};for(const te in ie)ie[te]=String(ie[te]);const ee=[ie,ze,!mx(ze)];V.push(ee)}return[u,h,A,V,W,Y]},ET=(e,n,s)=>{const[h,g,v,S]=TT(n.composers),u=typeof n.type=="function"||n.type.$$typeof?(Y=>{function U(){for(let de=0;de<U[uh].length;de++){const[ye,me]=U[uh][de];Y.rules[ye].apply(me)}return U[uh]=[],null}return U[uh]=[],U.rules={},mh.forEach(de=>U.rules[de]={apply:ye=>U[uh].push([de,ye])}),U})(s):null,A=(u||s).rules,V=`.${h}${g.length>1?`:where(.${g.slice(1).join(".")})`:""}`,W=Y=>{Y=typeof Y=="object"&&Y||PT;const ie=Y,{css:U}=ie,de=pn(ie,["css"]),ye={};for(const ee in v)if(delete de[ee],ee in Y){let te=Y[ee];typeof te=="object"&&te?ye[ee]=ri({"@initial":v[ee]},te):(te=String(te),ye[ee]=te!=="undefined"||S.has(ee)?te:v[ee])}else ye[ee]=v[ee];const me=new Set([...g]);for(const[ee,te,Ee,De]of n.composers){s.rules.styled.cache.has(ee)||(s.rules.styled.cache.add(ee),uc(te,[`.${ee}`],[],e,We=>{A.styled.apply(We)}));const je=xx(Ee,ye,e.media),Ue=xx(De,ye,e.media,!0);for(const We of je)if(We!==void 0)for(const[ht,ft,Ct]of We){const Ut=`${ee}-${hu(ft)}-${ht}`;me.add(Ut);const jn=(Ct?s.rules.resonevar:s.rules.onevar).cache,Zt=Ct?A.resonevar:A.onevar;jn.has(Ut)||(jn.add(Ut),uc(ft,[`.${Ut}`],[],e,Sn=>{Zt.apply(Sn)}))}for(const We of Ue)if(We!==void 0)for(const[ht,ft]of We){const Ct=`${ee}-${hu(ft)}-${ht}`;me.add(Ct),s.rules.allvar.cache.has(Ct)||(s.rules.allvar.cache.add(Ct),uc(ft,[`.${Ct}`],[],e,Ut=>{A.allvar.apply(Ut)}))}}if(typeof U=="object"&&U){const ee=`${h}-i${hu(U)}-css`;me.add(ee),s.rules.inline.cache.has(ee)||(s.rules.inline.cache.add(ee),uc(U,[`.${ee}`],[],e,te=>{A.inline.apply(te)}))}for(const ee of String(Y.className||"").trim().split(/\s+/))ee&&me.add(ee);const ze=de.className=[...me].join(" ");return{type:n.type,className:ze,selector:V,props:de,toString:()=>ze,deferredInjector:u}};return P_(W,{className:h,selector:V,[cu]:n,toString:()=>(s.rules.styled.cache.has(h)||W(),h)})},TT=e=>{let n="";const s=[],h={},g=[];for(const[v,,,,S,u]of e){n===""&&(n=v),s.push(v),g.push(...u);for(const A in S){const V=S[A];(h[A]===void 0||V!=="undefined"||u.includes(V))&&(h[A]=V)}}return[n,s,h,new Set(g)]},xx=(e,n,s,h)=>{const g=[];e:for(let[v,S,u]of e){if(u)continue;let A,V=0,W=!1;for(A in v){const Y=v[A];let U=n[A];if(U!==Y){if(typeof U!="object"||!U)continue e;{let de,ye,me=0;for(const ze in U){if(Y===String(U[ze])){if(ze!=="@initial"){const ie=ze.slice(1);(ye=ye||[]).push(ie in s?s[ie]:ze.replace(/^@media ?/,"")),W=!0}V+=me,de=!0}++me}if(ye&&ye.length&&(S={["@media "+ye.join(", ")]:S}),!de)continue e}}}(g[V]=g[V]||[]).push([h?"cv":`${A}-${v[A]}`,S,W])}return g},PT={},kT=kc(),CT=(e,n)=>kT(e,()=>(...s)=>{const h=()=>{for(let g of s){g=typeof g=="object"&&g||{};let v=hu(g);if(!n.rules.global.cache.has(v)){if(n.rules.global.cache.add(v),"@import"in g){let S=[].indexOf.call(n.sheet.cssRules,n.rules.themed.group)-1;for(let u of[].concat(g["@import"]))u=u.includes('"')||u.includes("'")?u:`"${u}"`,n.sheet.insertRule(`@import ${u};`,S++);delete g["@import"]}uc(g,[],[],e,S=>{n.rules.global.apply(S)})}}return""};return P_(h,{toString:h})}),IT=kc(),zT=(e,n)=>IT(e,()=>s=>{const h=`${Na(e.prefix)}k-${hu(s)}`,g=()=>{if(!n.rules.global.cache.has(h)){n.rules.global.cache.add(h);const v=[];uc(s,[],[],e,u=>v.push(u));const S=`@keyframes ${h}{${v.join("")}}`;n.rules.global.apply(S)}return h};return P_(g,{get name(){return g()},toString:g})}),AT=class{constructor(e,n,s,h){this.token=e==null?"":String(e),this.value=n==null?"":String(n),this.scale=s==null?"":String(s),this.prefix=h==null?"":String(h)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Na(this.prefix)+Na(this.scale)+this.token}toString(){return this.computedValue}},MT=kc(),LT=(e,n)=>MT(e,()=>(s,h)=>{h=typeof s=="object"&&s||Object(h);const g=`.${s=(s=typeof s=="string"?s:"")||`${Na(e.prefix)}t-${hu(h)}`}`,v={},S=[];for(const A in h){v[A]={};for(const V in h[A]){const W=`--${Na(e.prefix)}${A}-${V}`,Y=sw(String(h[A][V]),e.prefix,A);v[A][V]=new AT(V,Y,A,e.prefix),S.push(`${W}:${Y}`)}}const u=()=>{if(S.length&&!n.rules.themed.cache.has(s)){n.rules.themed.cache.add(s);const A=`${h===e.theme?":root,":""}.${s}{${S.join(";")}}`;n.rules.themed.apply(A)}return s};return ka(ri({},v),{get className(){return u()},selector:g,toString:u})}),DT=kc(),wx,RT=kc(),aw=e=>{const n=(s=>{let h=!1;const g=DT(s,v=>{h=!0;const S="prefix"in(v=typeof v=="object"&&v||{})?String(v.prefix):"",u=typeof v.media=="object"&&v.media||{},A=typeof v.root=="object"?v.root||null:globalThis.document||null,V=typeof v.theme=="object"&&v.theme||{},W={prefix:S,media:u,theme:V,themeMap:typeof v.themeMap=="object"&&v.themeMap||ri({},uT),utils:typeof v.utils=="object"&&v.utils||{}},Y=xT(A),U={css:vx(W,Y),globalCss:CT(W,Y),keyframes:zT(W,Y),createTheme:LT(W,Y),reset(){Y.reset(),U.theme.toString()},theme:{},sheet:Y,config:W,prefix:S,getCssText:Y.toString,toString:Y.toString};return String(U.theme=U.createTheme(V)),U});return h||g.reset(),g})(e);return n.styled=(({config:s,sheet:h})=>RT(s,()=>{const g=vx(s,h);return(...v)=>{const S=g(...v),u=S[cu].type,A=tn.forwardRef((V,W)=>{const Y=V&&V.as||u,{props:U,deferredInjector:de}=S(V);return delete U.as,U.ref=W,de?tn.createElement(tn.Fragment,null,tn.createElement(Y,U),tn.createElement(de,null)):tn.createElement(Y,U)});return A.className=S.className,A.displayName=`Styled.${u.displayName||u.name||u}`,A.selector=S.selector,A.toString=()=>S.selector,A[cu]=S[cu],A}}))(n),n},BT=()=>wx||(wx=aw()),FT=(...e)=>BT().globalCss(...e);const{styled:In}=aw({theme:{colors:{black:"rgba(0, 0, 0)",white:"rgba(236, 237, 238)",hover:"#7180B9",primary:"#3423A6",primaryText:"white"},fonts:{sans:"Inter, sans-serif"},fontSizes:{1:"12px",2:"14px",3:"16px",4:"20px",5:"24px",6:"32px"},space:{1:"10px",2:"20px",3:"40px"},sizes:{1:"4px",2:"8px",3:"16px",4:"32px",5:"64px",6:"128px"},radii:{1:"2px",2:"4px",3:"8px",round:"9999px"},fontWeights:{},lineHeights:{},letterSpacings:{},borderWidths:{},borderStyles:{},shadows:{},zIndices:{},transitions:{}}}),OT=FT({"*":{margin:0,padding:0,border:0,fontFamily:"Inter, sans-serif"},body:{backgroundColor:"$black",color:"$white"},"@import":["url('https://rsms.me/inter/inter.css')"]});var Aa=(e,n,s)=>new Promise((h,g)=>{var v=A=>{try{u(s.next(A))}catch(V){g(V)}},S=A=>{try{u(s.throw(A))}catch(V){g(V)}},u=A=>A.done?h(A.value):Promise.resolve(A.value).then(v,S);u((s=s.apply(e,n)).next())});const lw=(e,n)=>e*Math.pow(2,n),ch=(e,n)=>Math.floor(e/Math.pow(2,n)),Dp=(e,n)=>lw(e.getUint16(n+1,!0),8)+e.getUint8(n),uw=(e,n)=>lw(e.getUint32(n+2,!0),16)+e.getUint16(n,!0),NT=(e,n,s,h,g)=>{if(e!=h.getUint8(g))return e-h.getUint8(g);const v=Dp(h,g+1);if(n!=v)return n-v;const S=Dp(h,g+4);return s!=S?s-S:0},UT=(e,n,s,h)=>{const g=cw(e,n|128,s,h);return g?{z:n,x:s,y:h,offset:g[0],length:g[1],is_dir:!0}:null},bx=(e,n,s,h)=>{const g=cw(e,n,s,h);return g?{z:n,x:s,y:h,offset:g[0],length:g[1],is_dir:!1}:null},cw=(e,n,s,h)=>{let g=0,v=e.byteLength/17-1;for(;g<=v;){const S=v+g>>1,u=NT(n,s,h,e,S*17);if(u>0)g=S+1;else if(u<0)v=S-1;else return[uw(e,S*17+7),e.getUint32(S*17+13,!0)]}return null},VT=e=>{if(e.byteLength<17)return null;const n=e.byteLength/17,s=k_(e,n-1);return s.is_dir?s.z:null},$T=(e,n)=>e.is_dir&&!n.is_dir?1:!e.is_dir&&n.is_dir?-1:e.z!==n.z?e.z-n.z:e.x!==n.x?e.x-n.x:e.y-n.y,k_=(e,n)=>{const s=e.getUint8(n*17);return{z:s&127,x:Dp(e,n*17+1),y:Dp(e,n*17+4),offset:uw(e,n*17+7),length:e.getUint32(n*17+13,!0),is_dir:s>>7===1}},Sx=e=>{const n=[];for(let s=0;s<e.byteLength/17;s++)n.push(k_(e,s));return ZT(n)},ZT=e=>{e.sort($T);const n=new ArrayBuffer(17*e.length),s=new Uint8Array(n);for(let h=0;h<e.length;h++){const g=e[h];let v=g.z;g.is_dir&&(v=v|128),s[h*17]=v,s[h*17+1]=g.x&255,s[h*17+2]=g.x>>8&255,s[h*17+3]=g.x>>16&255,s[h*17+4]=g.y&255,s[h*17+5]=g.y>>8&255,s[h*17+6]=g.y>>16&255,s[h*17+7]=g.offset&255,s[h*17+8]=ch(g.offset,8)&255,s[h*17+9]=ch(g.offset,16)&255,s[h*17+10]=ch(g.offset,24)&255,s[h*17+11]=ch(g.offset,32)&255,s[h*17+12]=ch(g.offset,48)&255,s[h*17+13]=g.length&255,s[h*17+14]=g.length>>8&255,s[h*17+15]=g.length>>16&255,s[h*17+16]=g.length>>24&255}return new DataView(s.buffer,s.byteOffset,s.length)},jT=(e,n)=>{const s=VT(e.dir);if(s){const h=n.z-s,g=Math.trunc(n.x/(1<<h)),v=Math.trunc(n.y/(1<<h));return{z:s,x:g,y:v}}return null},GT=e=>{if(e.getUint16(0,!0)!==19792)throw new Error('File header does not begin with "PM"');const s=e.getUint16(2,!0),h=e.getUint32(4,!0),g=e.getUint16(8,!0);return{version:s,json_size:h,root_entries:g}};class WT{constructor(n){this.file=n}getKey(){return this.file.name}getBytes(n,s){return Aa(this,null,function*(){let g=yield this.file.slice(n,n+s).arrayBuffer();return new DataView(g)})}}class qT{constructor(n){this.url=n}getKey(){return this.url}getBytes(n,s){return Aa(this,null,function*(){const h=new AbortController,g=h.signal,v=yield fetch(this.url,{signal:g,headers:{Range:"bytes="+n+"-"+(n+s-1)}}),S=v.headers.get("Content-Length");(!S||+S!==s)&&(console.error("Content-Length mismatch indicates byte serving not supported; aborting."),h.abort());const u=yield v.arrayBuffer();return new DataView(u)})}}class HT{constructor(n,s){this.getKey=()=>this.source.getKey(),this.source=n,this.entries=new Map,this.maxEntries=s}getBytes(n,s){return Aa(this,null,function*(){let h=this.entries.get(n+"-"+s);if(h)return h.lastUsed=performance.now(),h.buffer;let g=this.source.getBytes(n,s);if(this.entries.set(n+"-"+s,{lastUsed:performance.now(),buffer:g}),this.entries.size>this.maxEntries){let v=1/0,S;this.entries.forEach((u,A)=>{u.lastUsed<v&&(v=u.lastUsed,S=A)}),S&&this.entries.delete(S)}return g})}}class Th{constructor(n,s=64){typeof n=="string"?this.source=new HT(new qT(n),s):this.source=n}fetchRoot(){return Aa(this,null,function*(){const n=yield this.source.getBytes(0,512e3),s=GT(new DataView(n.buffer,n.byteOffset,10));let h=new DataView(n.buffer,10+s.json_size,17*s.root_entries);return s.version===1&&(console.warn("Sorting pmtiles v1 directory"),h=Sx(h)),{header:s,view:n,dir:h}})}root_entries(){return Aa(this,null,function*(){const n=yield this.fetchRoot();let s=[];for(var h=0;h<n.header.root_entries;h++)s.push(k_(n.dir,h));return s})}metadata(){return Aa(this,null,function*(){const n=yield this.fetchRoot(),s=new TextDecoder("utf-8"),h=JSON.parse(s.decode(new DataView(n.view.buffer,n.view.byteOffset+10,n.header.json_size)));return h.compression&&console.warn(`Archive has compression type: ${h.compression} and may not be readable directly by browsers.`),h.bounds||console.warn("Archive is missing 'bounds' in metadata, required in v2 and above."),h.minzoom||console.warn("Archive is missing 'minzoom' in metadata, required in v2 and above."),h.maxzoom||console.warn("Archive is missing 'maxzoom' in metadata, required in v2 and above."),h})}fetchLeafdir(n,s){return Aa(this,null,function*(){let h=yield this.source.getBytes(s.offset,s.length);return n===1&&(console.warn("Sorting pmtiles v1 directory."),h=Sx(h)),h})}getLeafdir(n,s){return Aa(this,null,function*(){return this.fetchLeafdir(n,s)})}getZxy(n,s,h){return Aa(this,null,function*(){const g=yield this.fetchRoot(),v=bx(new DataView(g.dir.buffer,g.dir.byteOffset,g.dir.byteLength),n,s,h);if(v)return v;const S=jT(g,{z:n,x:s,y:h});if(S){const u=UT(new DataView(g.dir.buffer,g.dir.byteOffset,g.dir.byteLength),S.z,S.x,S.y);if(u){const A=yield this.getLeafdir(g.header.version,u);return bx(new DataView(A.buffer,A.byteOffset,A.byteLength),n,s,h)}}return null})}}const XT=(e,n)=>{const s=L.GridLayer.extend({createTile:function(h,g){const v=document.createElement("img");return e.getZxy(h.z,h.x,h.y).then(S=>{if(S===null)return;const u=new AbortController;u.signal,v.cancel=()=>{u.abort()},e.source.getBytes(S.offset,S.length).then(A=>{const V=new Blob([A],{type:"image/png"}),W=window.URL.createObjectURL(V);v.src=W,v.cancel=null,g(null,v)}).catch(A=>{if(A.name!=="AbortError")throw A})}),v},_removeTile:function(h){const g=this._tiles[h];!g||(g.el.cancel&&g.el.cancel(),g.el.width=0,g.el.height=0,g.el.deleted=!0,L.DomUtil.remove(g.el),delete this._tiles[h],this.fire("tileunload",{tile:g.el,coords:this._keyToTileCoords(h)}))}});return new s(n)};class KT{constructor(){this.protocol=(n,s)=>{const h=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),g=n.url.match(h),v=g[1];let S=this.tiles.get(v);S||(S=new Th(v),this.tiles.set(v,S));const u=g[2],A=g[3],V=g[4];return S.getZxy(+u,+A,+V).then(W=>{W?S.source.getBytes(W.offset,W.length).then(Y=>{s(null,new Uint8Array(Y.buffer),null,null)}).catch(Y=>{s(new Error("Canceled"),null,null,null)}):s(null,new Uint8Array,null,null)}),{cancel:()=>{}}},this.tiles=new Map}add(n){this.tiles.set(n.source.getKey(),n)}get(n){return this.tiles.get(n)}}function hw(e,n){if(e==null)return{};var s={},h=Object.keys(e),g,v;for(v=0;v<h.length;v++)g=h[v],!(n.indexOf(g)>=0)&&(s[g]=e[g]);return s}var YT=["color"],JT=re.exports.forwardRef(function(e,n){var s=e.color,h=s===void 0?"currentColor":s,g=hw(e,YT);return re.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g,{ref:n}),re.exports.createElement("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:h,fillRule:"evenodd",clipRule:"evenodd"}))}),QT=["color"],eP=re.exports.forwardRef(function(e,n){var s=e.color,h=s===void 0?"currentColor":s,g=hw(e,QT);return re.exports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},g,{ref:n}),re.exports.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:h,fillRule:"evenodd",clipRule:"evenodd"}))}),dw={exports:{}},tP="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nP=tP,iP=nP;function pw(){}function fw(){}fw.resetWarningCache=pw;var rP=function(){function e(h,g,v,S,u,A){if(A!==iP){var V=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw V.name="Invariant Violation",V}}e.isRequired=e;function n(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:fw,resetWarningCache:pw};return s.PropTypes=s,s};dw.exports=rP();var Zn=dw.exports;function Cc(e,n,s,h){function g(v){return v instanceof s?v:new s(function(S){S(v)})}return new(s||(s=Promise))(function(v,S){function u(W){try{V(h.next(W))}catch(Y){S(Y)}}function A(W){try{V(h.throw(W))}catch(Y){S(Y)}}function V(W){W.done?v(W.value):g(W.value).then(u,A)}V((h=h.apply(e,n||[])).next())})}function Ic(e,n){var s={label:0,sent:function(){if(v[0]&1)throw v[1];return v[1]},trys:[],ops:[]},h,g,v,S;return S={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S;function u(V){return function(W){return A([V,W])}}function A(V){if(h)throw new TypeError("Generator is already executing.");for(;s;)try{if(h=1,g&&(v=V[0]&2?g.return:V[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,V[1])).done)return v;switch(g=0,v&&(V=[V[0]&2,v.value]),V[0]){case 0:case 1:v=V;break;case 4:return s.label++,{value:V[1],done:!1};case 5:s.label++,g=V[1],V=[0];continue;case 7:V=s.ops.pop(),s.trys.pop();continue;default:if(v=s.trys,!(v=v.length>0&&v[v.length-1])&&(V[0]===6||V[0]===2)){s=0;continue}if(V[0]===3&&(!v||V[1]>v[0]&&V[1]<v[3])){s.label=V[1];break}if(V[0]===6&&s.label<v[1]){s.label=v[1],v=V;break}if(v&&s.label<v[2]){s.label=v[2],s.ops.push(V);break}v[2]&&s.ops.pop(),s.trys.pop();continue}V=n.call(e,s)}catch(W){V=[6,W],g=0}finally{h=v=0}if(V[0]&5)throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}}function oP(e,n){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var h=s.call(e),g,v=[],S;try{for(;(n===void 0||n-- >0)&&!(g=h.next()).done;)v.push(g.value)}catch(u){S={error:u}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(S)throw S.error}}return v}function sP(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(oP(arguments[n]));return e}var aP=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Yh(e,n){var s=lP(e);if(typeof s.path!="string"){var h=e.webkitRelativePath;Object.defineProperty(s,"path",{value:typeof n=="string"?n:typeof h=="string"&&h.length>0?h:e.name,writable:!1,configurable:!1,enumerable:!0})}return s}function lP(e){var n=e.name,s=n&&n.lastIndexOf(".")!==-1;if(s&&!e.type){var h=n.split(".").pop().toLowerCase(),g=aP.get(h);g&&Object.defineProperty(e,"type",{value:g,writable:!1,configurable:!1,enumerable:!0})}return e}var uP=[".DS_Store","Thumbs.db"];function cP(e){return Cc(this,void 0,void 0,function(){return Ic(this,function(n){return Rp(e)&&hP(e)?[2,mP(e.dataTransfer,e.type)]:dP(e)?[2,pP(e)]:Array.isArray(e)&&e.every(function(s){return"getFile"in s&&typeof s.getFile=="function"})?[2,fP(e)]:[2,[]]})})}function hP(e){return Rp(e.dataTransfer)}function dP(e){return Rp(e)&&Rp(e.target)}function Rp(e){return typeof e=="object"&&e!==null}function pP(e){return vg(e.target.files).map(function(n){return Yh(n)})}function fP(e){return Cc(this,void 0,void 0,function(){var n;return Ic(this,function(s){switch(s.label){case 0:return[4,Promise.all(e.map(function(h){return h.getFile()}))];case 1:return n=s.sent(),[2,n.map(function(h){return Yh(h)})]}})})}function mP(e,n){return Cc(this,void 0,void 0,function(){var s,h;return Ic(this,function(g){switch(g.label){case 0:return e===null?[2,[]]:e.items?(s=vg(e.items).filter(function(v){return v.kind==="file"}),n!=="drop"?[2,s]:[4,Promise.all(s.map(gP))]):[3,2];case 1:return h=g.sent(),[2,Ex(mw(h))];case 2:return[2,Ex(vg(e.files).map(function(v){return Yh(v)}))]}})})}function Ex(e){return e.filter(function(n){return uP.indexOf(n.name)===-1})}function vg(e){if(e===null)return[];for(var n=[],s=0;s<e.length;s++){var h=e[s];n.push(h)}return n}function gP(e){if(typeof e.webkitGetAsEntry!="function")return Tx(e);var n=e.webkitGetAsEntry();return n&&n.isDirectory?gw(n):Tx(e)}function mw(e){return e.reduce(function(n,s){return sP(n,Array.isArray(s)?mw(s):[s])},[])}function Tx(e){var n=e.getAsFile();if(!n)return Promise.reject(e+" is not a File");var s=Yh(n);return Promise.resolve(s)}function _P(e){return Cc(this,void 0,void 0,function(){return Ic(this,function(n){return[2,e.isDirectory?gw(e):yP(e)]})})}function gw(e){var n=e.createReader();return new Promise(function(s,h){var g=[];function v(){var S=this;n.readEntries(function(u){return Cc(S,void 0,void 0,function(){var A,V,W;return Ic(this,function(Y){switch(Y.label){case 0:if(u.length)return[3,5];Y.label=1;case 1:return Y.trys.push([1,3,,4]),[4,Promise.all(g)];case 2:return A=Y.sent(),s(A),[3,4];case 3:return V=Y.sent(),h(V),[3,4];case 4:return[3,6];case 5:W=Promise.all(u.map(_P)),g.push(W),v(),Y.label=6;case 6:return[2]}})})},function(u){h(u)})}v()})}function yP(e){return Cc(this,void 0,void 0,function(){return Ic(this,function(n){return[2,new Promise(function(s,h){e.file(function(g){var v=Yh(g,e.fullPath);s(v)},function(g){h(g)})})]})})}var vP=function(e,n){if(e&&n){var s=Array.isArray(n)?n:n.split(","),h=e.name||"",g=(e.type||"").toLowerCase(),v=g.replace(/\/.*$/,"");return s.some(function(S){var u=S.trim().toLowerCase();return u.charAt(0)==="."?h.toLowerCase().endsWith(u):u.endsWith("/*")?v===u.replace(/\/.*$/,""):g===u})}return!0};function Px(e){return bP(e)||wP(e)||_w(e)||xP()}function xP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wP(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bP(e){if(Array.isArray(e))return xg(e)}function SP(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function jh(e,n){return PP(e)||TP(e,n)||_w(e,n)||EP()}function EP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _w(e,n){if(!!e){if(typeof e=="string")return xg(e,n);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return xg(e,n)}}function xg(e,n){(n==null||n>e.length)&&(n=e.length);for(var s=0,h=new Array(n);s<n;s++)h[s]=e[s];return h}function TP(e,n){var s=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var h=[],g=!0,v=!1,S,u;try{for(s=s.call(e);!(g=(S=s.next()).done)&&(h.push(S.value),!(n&&h.length===n));g=!0);}catch(A){v=!0,u=A}finally{try{!g&&s.return!=null&&s.return()}finally{if(v)throw u}}return h}}function PP(e){if(Array.isArray(e))return e}var kP="file-invalid-type",CP="file-too-large",IP="file-too-small",zP="too-many-files",AP=function(n){n=Array.isArray(n)&&n.length===1?n[0]:n;var s=Array.isArray(n)?"one of ".concat(n.join(", ")):n;return{code:kP,message:"File type must be ".concat(s)}},kx=function(n){return{code:CP,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},Cx=function(n){return{code:IP,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},MP={code:zP,message:"Too many files"};function yw(e,n){var s=e.type==="application/x-moz-file"||vP(e,n);return[s,s?null:AP(n)]}function vw(e,n,s){if(ou(e.size))if(ou(n)&&ou(s)){if(e.size>s)return[!1,kx(s)];if(e.size<n)return[!1,Cx(n)]}else{if(ou(n)&&e.size<n)return[!1,Cx(n)];if(ou(s)&&e.size>s)return[!1,kx(s)]}return[!0,null]}function ou(e){return e!=null}function LP(e){var n=e.files,s=e.accept,h=e.minSize,g=e.maxSize,v=e.multiple,S=e.maxFiles,u=e.validator;return!v&&n.length>1||v&&S>=1&&n.length>S?!1:n.every(function(A){var V=yw(A,s),W=jh(V,1),Y=W[0],U=vw(A,h,g),de=jh(U,1),ye=de[0],me=u?u(A):null;return Y&&ye&&!me})}function Bp(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Vd(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Ix(e){e.preventDefault()}function DP(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function RP(e){return e.indexOf("Edge/")!==-1}function BP(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return DP(e)||RP(e)}function qs(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return function(h){for(var g=arguments.length,v=new Array(g>1?g-1:0),S=1;S<g;S++)v[S-1]=arguments[S];return n.some(function(u){return!Bp(h)&&u&&u.apply(void 0,[h].concat(v)),Bp(h)})}}function FP(){return"showOpenFilePicker"in window}function OP(e){return ou(e)?Object.entries(e).filter(function(n){var s=jh(n,2),h=s[0],g=s[1],v=!0;return xw(h)||(console.warn('Skipped "'.concat(h,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),v=!1),(!Array.isArray(g)||!g.every(ww))&&(console.warn('Skipped "'.concat(h,'" because an invalid file extension was provided.')),v=!1),v}).map(function(n){var s=jh(n,2),h=s[0],g=s[1];return{accept:SP({},h,g)}}):e}function NP(e){if(ou(e))return Object.entries(e).reduce(function(n,s){var h=jh(s,2),g=h[0],v=h[1];return[].concat(Px(n),[g],Px(v))},[]).filter(function(n){return xw(n)||ww(n)}).join(",")}function UP(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function VP(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function xw(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function ww(e){return/^.*\.[\w]+$/.test(e)}var tf={exports:{}},nf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $P=re.exports,ZP=Symbol.for("react.element"),jP=Symbol.for("react.fragment"),GP=Object.prototype.hasOwnProperty,WP=$P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qP={key:!0,ref:!0,__self:!0,__source:!0};function bw(e,n,s){var h,g={},v=null,S=null;s!==void 0&&(v=""+s),n.key!==void 0&&(v=""+n.key),n.ref!==void 0&&(S=n.ref);for(h in n)GP.call(n,h)&&!qP.hasOwnProperty(h)&&(g[h]=n[h]);if(e&&e.defaultProps)for(h in n=e.defaultProps,n)g[h]===void 0&&(g[h]=n[h]);return{$$typeof:ZP,type:e,key:v,ref:S,props:g,_owner:WP.current}}nf.Fragment=jP;nf.jsx=bw;nf.jsxs=bw;tf.exports=nf;const _t=tf.exports.jsx,vi=tf.exports.jsxs,Sw=tf.exports.Fragment;var HP=["children"],XP=["open"],KP=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],YP=["refKey","onChange","onClick"];function JP(e){return tk(e)||ek(e)||Ew(e)||QP()}function QP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ek(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tk(e){if(Array.isArray(e))return wg(e)}function ym(e,n){return rk(e)||ik(e,n)||Ew(e,n)||nk()}function nk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ew(e,n){if(!!e){if(typeof e=="string")return wg(e,n);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return wg(e,n)}}function wg(e,n){(n==null||n>e.length)&&(n=e.length);for(var s=0,h=new Array(n);s<n;s++)h[s]=e[s];return h}function ik(e,n){var s=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var h=[],g=!0,v=!1,S,u;try{for(s=s.call(e);!(g=(S=s.next()).done)&&(h.push(S.value),!(n&&h.length===n));g=!0);}catch(A){v=!0,u=A}finally{try{!g&&s.return!=null&&s.return()}finally{if(v)throw u}}return h}}function rk(e){if(Array.isArray(e))return e}function zx(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);n&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable})),s.push.apply(s,h)}return s}function hi(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?zx(Object(s),!0).forEach(function(h){bg(e,h,s[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zx(Object(s)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(s,h))})}return e}function bg(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function Fp(e,n){if(e==null)return{};var s=ok(e,n),h,g;if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(g=0;g<v.length;g++)h=v[g],!(n.indexOf(h)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,h)||(s[h]=e[h]))}return s}function ok(e,n){if(e==null)return{};var s={},h=Object.keys(e),g,v;for(v=0;v<h.length;v++)g=h[v],!(n.indexOf(g)>=0)&&(s[g]=e[g]);return s}var C_=re.exports.forwardRef(function(e,n){var s=e.children,h=Fp(e,HP),g=Pw(h),v=g.open,S=Fp(g,XP);return re.exports.useImperativeHandle(n,function(){return{open:v}},[v]),_t(Sw,{children:s(hi(hi({},S),{},{open:v}))})});C_.displayName="Dropzone";var Tw={disabled:!1,getFilesFromEvent:cP,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};C_.defaultProps=Tw;C_.propTypes={children:Zn.func,accept:Zn.objectOf(Zn.arrayOf(Zn.string)),multiple:Zn.bool,preventDropOnDocument:Zn.bool,noClick:Zn.bool,noKeyboard:Zn.bool,noDrag:Zn.bool,noDragEventsBubbling:Zn.bool,minSize:Zn.number,maxSize:Zn.number,maxFiles:Zn.number,disabled:Zn.bool,getFilesFromEvent:Zn.func,onFileDialogCancel:Zn.func,onFileDialogOpen:Zn.func,useFsAccessApi:Zn.bool,autoFocus:Zn.bool,onDragEnter:Zn.func,onDragLeave:Zn.func,onDragOver:Zn.func,onDrop:Zn.func,onDropAccepted:Zn.func,onDropRejected:Zn.func,onError:Zn.func,validator:Zn.func};var Sg={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Pw(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=hi(hi({},Tw),e),s=n.accept,h=n.disabled,g=n.getFilesFromEvent,v=n.maxSize,S=n.minSize,u=n.multiple,A=n.maxFiles,V=n.onDragEnter,W=n.onDragLeave,Y=n.onDragOver,U=n.onDrop,de=n.onDropAccepted,ye=n.onDropRejected,me=n.onFileDialogCancel,ze=n.onFileDialogOpen,ie=n.useFsAccessApi,ee=n.autoFocus,te=n.preventDropOnDocument,Ee=n.noClick,De=n.noKeyboard,je=n.noDrag,Ue=n.noDragEventsBubbling,We=n.onError,ht=n.validator,ft=re.exports.useMemo(function(){return NP(s)},[s]),Ct=re.exports.useMemo(function(){return OP(s)},[s]),Ut=re.exports.useMemo(function(){return typeof ze=="function"?ze:Ax},[ze]),jn=re.exports.useMemo(function(){return typeof me=="function"?me:Ax},[me]),Zt=re.exports.useRef(null),Sn=re.exports.useRef(null),ut=re.exports.useReducer(sk,Sg),Dn=ym(ut,2),Oe=Dn[0],gt=Dn[1],Ye=Oe.isFocused,Pt=Oe.isFileDialogActive,jt=re.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&ie&&FP()),fn=function(){!jt.current&&Pt&&setTimeout(function(){if(Sn.current){var St=Sn.current.files;St.length||(gt({type:"closeDialog"}),jn())}},300)};re.exports.useEffect(function(){return window.addEventListener("focus",fn,!1),function(){window.removeEventListener("focus",fn,!1)}},[Sn,Pt,jn,jt]);var Wt=re.exports.useRef([]),qt=function(St){Zt.current&&Zt.current.contains(St.target)||(St.preventDefault(),Wt.current=[])};re.exports.useEffect(function(){return te&&(document.addEventListener("dragover",Ix,!1),document.addEventListener("drop",qt,!1)),function(){te&&(document.removeEventListener("dragover",Ix),document.removeEventListener("drop",qt))}},[Zt,te]),re.exports.useEffect(function(){return!h&&ee&&Zt.current&&Zt.current.focus(),function(){}},[Zt,ee,h]);var At=re.exports.useCallback(function(nt){We?We(nt):console.error(nt)},[We]),zn=re.exports.useCallback(function(nt){nt.preventDefault(),nt.persist(),Ti(nt),Wt.current=[].concat(JP(Wt.current),[nt.target]),Vd(nt)&&Promise.resolve(g(nt)).then(function(St){if(!(Bp(nt)&&!Ue)){var mn=St.length,Rn=mn>0&&LP({files:St,accept:ft,minSize:S,maxSize:v,multiple:u,maxFiles:A,validator:ht}),Pe=mn>0&&!Rn;gt({isDragAccept:Rn,isDragReject:Pe,isDragActive:!0,type:"setDraggedFiles"}),V&&V(nt)}}).catch(function(St){return At(St)})},[g,V,At,Ue,ft,S,v,u,A,ht]),si=re.exports.useCallback(function(nt){nt.preventDefault(),nt.persist(),Ti(nt);var St=Vd(nt);if(St&&nt.dataTransfer)try{nt.dataTransfer.dropEffect="copy"}catch{}return St&&Y&&Y(nt),!1},[Y,Ue]),Gr=re.exports.useCallback(function(nt){nt.preventDefault(),nt.persist(),Ti(nt);var St=Wt.current.filter(function(Rn){return Zt.current&&Zt.current.contains(Rn)}),mn=St.indexOf(nt.target);mn!==-1&&St.splice(mn,1),Wt.current=St,!(St.length>0)&&(gt({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Vd(nt)&&W&&W(nt))},[Zt,W,Ue]),Sr=re.exports.useCallback(function(nt,St){var mn=[],Rn=[];nt.forEach(function(Pe){var Je=yw(Pe,ft),Mi=ym(Je,2),$i=Mi[0],ln=Mi[1],wi=vw(Pe,S,v),Gn=ym(wi,2),cr=Gn[0],gn=Gn[1],He=ht?ht(Pe):null;if($i&&cr&&!He)mn.push(Pe);else{var Rt=[ln,gn];He&&(Rt=Rt.concat(He)),Rn.push({file:Pe,errors:Rt.filter(function(Lt){return Lt})})}}),(!u&&mn.length>1||u&&A>=1&&mn.length>A)&&(mn.forEach(function(Pe){Rn.push({file:Pe,errors:[MP]})}),mn.splice(0)),gt({acceptedFiles:mn,fileRejections:Rn,type:"setFiles"}),U&&U(mn,Rn,St),Rn.length>0&&ye&&ye(Rn,St),mn.length>0&&de&&de(mn,St)},[gt,u,ft,S,v,A,U,de,ye,ht]),ur=re.exports.useCallback(function(nt){nt.preventDefault(),nt.persist(),Ti(nt),Wt.current=[],Vd(nt)&&Promise.resolve(g(nt)).then(function(St){Bp(nt)&&!Ue||Sr(St,nt)}).catch(function(St){return At(St)}),gt({type:"reset"})},[g,Sr,At,Ue]),Ai=re.exports.useCallback(function(){if(jt.current){gt({type:"openDialog"}),Ut();var nt={multiple:u,types:Ct};window.showOpenFilePicker(nt).then(function(St){return g(St)}).then(function(St){Sr(St,null),gt({type:"closeDialog"})}).catch(function(St){UP(St)?(jn(St),gt({type:"closeDialog"})):VP(St)?(jt.current=!1,Sn.current&&(Sn.current.value=null,Sn.current.click())):At(St)});return}Sn.current&&(gt({type:"openDialog"}),Ut(),Sn.current.value=null,Sn.current.click())},[gt,Ut,jn,ie,Sr,At,Ct,u]),Fn=re.exports.useCallback(function(nt){!Zt.current||!Zt.current.isEqualNode(nt.target)||(nt.key===" "||nt.key==="Enter"||nt.keyCode===32||nt.keyCode===13)&&(nt.preventDefault(),Ai())},[Zt,Ai]),Er=re.exports.useCallback(function(){gt({type:"focus"})},[]),ao=re.exports.useCallback(function(){gt({type:"blur"})},[]),Tr=re.exports.useCallback(function(){Ee||(BP()?setTimeout(Ai,0):Ai())},[Ee,Ai]),ai=function(St){return h?null:St},Pr=function(St){return De?null:ai(St)},Ui=function(St){return je?null:ai(St)},Ti=function(St){Ue&&St.stopPropagation()},Vi=re.exports.useMemo(function(){return function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=nt.refKey,mn=St===void 0?"ref":St,Rn=nt.role,Pe=nt.onKeyDown,Je=nt.onFocus,Mi=nt.onBlur,$i=nt.onClick,ln=nt.onDragEnter,wi=nt.onDragOver,Gn=nt.onDragLeave,cr=nt.onDrop,gn=Fp(nt,KP);return hi(hi(bg({onKeyDown:Pr(qs(Pe,Fn)),onFocus:Pr(qs(Je,Er)),onBlur:Pr(qs(Mi,ao)),onClick:ai(qs($i,Tr)),onDragEnter:Ui(qs(ln,zn)),onDragOver:Ui(qs(wi,si)),onDragLeave:Ui(qs(Gn,Gr)),onDrop:Ui(qs(cr,ur)),role:typeof Rn=="string"&&Rn!==""?Rn:"presentation"},mn,Zt),!h&&!De?{tabIndex:0}:{}),gn)}},[Zt,Fn,Er,ao,Tr,zn,si,Gr,ur,De,je,h]),Po=re.exports.useCallback(function(nt){nt.stopPropagation()},[]),Ht=re.exports.useMemo(function(){return function(){var nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=nt.refKey,mn=St===void 0?"ref":St,Rn=nt.onChange,Pe=nt.onClick,Je=Fp(nt,YP),Mi=bg({accept:ft,multiple:u,type:"file",style:{display:"none"},onChange:ai(qs(Rn,ur)),onClick:ai(qs(Pe,Po)),tabIndex:-1},mn,Sn);return hi(hi({},Mi),Je)}},[Sn,s,u,ur,h]);return hi(hi({},Oe),{},{isFocused:Ye&&!h,getRootProps:Vi,getInputProps:Ht,rootRef:Zt,inputRef:Sn,open:ai(Ai)})}function sk(e,n){switch(n.type){case"focus":return hi(hi({},e),{},{isFocused:!0});case"blur":return hi(hi({},e),{},{isFocused:!1});case"openDialog":return hi(hi({},Sg),{},{isFileDialogActive:!0});case"closeDialog":return hi(hi({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return hi(hi({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return hi(hi({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections});case"reset":return hi({},Sg);default:return e}}function Ax(){}const Op=Boolean(globalThis==null?void 0:globalThis.document)?re.exports.useLayoutEffect:()=>{},ak=sS["useId".toString()]||(()=>{});let lk=0;function Ph(e){const[n,s]=re.exports.useState(ak());return Op(()=>{e||s(h=>h!=null?h:String(lk++))},[e]),e||(n?`radix-${n}`:"")}function kw(...e){return n=>e.forEach(s=>function(h,g){typeof h=="function"?h(g):h!=null&&(h.current=g)}(s,n))}function Js(...e){return re.exports.useCallback(kw(...e),e)}function Yt(){return Yt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(e[h]=s[h])}return e},Yt.apply(this,arguments)}const Gh=re.exports.forwardRef((e,n)=>{const g=e,{children:s}=g,h=pn(g,["children"]);return re.exports.Children.toArray(s).some(Mx)?re.exports.createElement(re.exports.Fragment,null,re.exports.Children.map(s,v=>Mx(v)?re.exports.createElement(Eg,Yt({},h,{ref:n}),v.props.children):v)):re.exports.createElement(Eg,Yt({},h,{ref:n}),s)});Gh.displayName="Slot";const Eg=re.exports.forwardRef((e,n)=>{const g=e,{children:s}=g,h=pn(g,["children"]);return re.exports.isValidElement(s)?re.exports.cloneElement(s,ka(ri({},ck(h,s.props)),{ref:kw(n,s.ref)})):re.exports.Children.count(s)>1?re.exports.Children.only(null):null});Eg.displayName="SlotClone";const uk=({children:e})=>re.exports.createElement(re.exports.Fragment,null,e);function Mx(e){return re.exports.isValidElement(e)&&e.type===uk}function ck(e,n){const s=ri({},n);for(const h in n){const g=e[h],v=n[h];/^on[A-Z]/.test(h)?s[h]=(...S)=>{v==null||v(...S),g==null||g(...S)}:h==="style"?s[h]=ri(ri({},g),v):h==="className"&&(s[h]=[g,v].filter(Boolean).join(" "))}return ri(ri({},e),s)}const lr=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,n)=>ka(ri({},e),{[n]:re.exports.forwardRef((s,h)=>{const u=s,{asChild:g}=u,v=pn(u,["asChild"]),S=g?Gh:n;return re.exports.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),re.exports.createElement(S,Yt({},v,{ref:h}))})}),{});function Cw(e,n){const s=re.exports.createContext(n);function h(g){const A=g,{children:v}=A,S=pn(A,["children"]),u=re.exports.useMemo(()=>S,Object.values(S));return re.exports.createElement(s.Provider,{value:u},v)}return h.displayName=e+"Provider",[h,function(g){const v=re.exports.useContext(s);if(v)return v;if(n!==void 0)return n;throw new Error(`\`${g}\` must be used within \`${e}\``)}]}function Jh(e,n=[]){let s=[];const h=()=>{const g=s.map(v=>re.exports.createContext(v));return function(v){const S=(v==null?void 0:v[e])||g;return re.exports.useMemo(()=>({[`__scope${e}`]:ka(ri({},v),{[e]:S})}),[v,S])}};return h.scopeName=e,[function(g,v){const S=re.exports.createContext(v),u=s.length;function A(V){const me=V,{scope:W,children:Y}=me,U=pn(me,["scope","children"]),de=(W==null?void 0:W[e][u])||S,ye=re.exports.useMemo(()=>U,Object.values(U));return re.exports.createElement(de.Provider,{value:ye},Y)}return s=[...s,v],A.displayName=g+"Provider",[A,function(V,W){const Y=(W==null?void 0:W[e][u])||S,U=re.exports.useContext(Y);if(U)return U;if(v!==void 0)return v;throw new Error(`\`${V}\` must be used within \`${g}\``)}]},hk(h,...n)]}function hk(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const h=e.map(g=>({useScope:g(),scopeName:g.scopeName}));return function(g){const v=h.reduce((S,{useScope:u,scopeName:A})=>ri(ri({},S),u(g)[`__scope${A}`]),{});return re.exports.useMemo(()=>({[`__scope${n.scopeName}`]:v}),[v])}};return s.scopeName=n.scopeName,s}const[dk,Bz]=Cw("Label",{id:void 0,controlRef:{current:null}}),pk=re.exports.forwardRef((e,n)=>{const V=e,{htmlFor:s,id:h}=V,g=pn(V,["htmlFor","id"]),v=re.exports.useRef(null),S=re.exports.useRef(null),u=Js(n,S),A=Ph(h);return re.exports.useEffect(()=>{if(s){const W=document.getElementById(s);if(S.current&&W){const Y=()=>W.getAttribute("aria-labelledby"),U=[A,Y()].filter(Boolean).join(" ");return W.setAttribute("aria-labelledby",U),v.current=W,()=>{var de;const ye=(de=Y())===null||de===void 0?void 0:de.replace(A,"");ye===""?W.removeAttribute("aria-labelledby"):ye&&W.setAttribute("aria-labelledby",ye)}}}},[A,s]),re.exports.createElement(dk,{id:A,controlRef:v},re.exports.createElement(lr.span,Yt({role:"label",id:A},g,{ref:u,onMouseDown:W=>{var Y;(Y=e.onMouseDown)===null||Y===void 0||Y.call(e,W),!W.defaultPrevented&&W.detail>1&&W.preventDefault()},onClick:W=>{var Y;if((Y=e.onClick)===null||Y===void 0||Y.call(e,W),!v.current||W.defaultPrevented)return;const U=v.current.contains(W.target),de=W.isTrusted===!0;!U&&de&&(v.current.click(),v.current.focus())}})))}),fk=pk,mk=In("input",{all:"unset",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"$3",fontFamily:"$sans","&:focus":{boxShadow:"0 0 0 1px black"},width:"100%",border:"1px solid $white",padding:"$1",boxSizing:"border-box",margin:"0 0 $2 0",borderRadius:"$2"}),vm=In(fk,{display:"block",fontSize:"$3",fontWeight:300,userSelect:"none",padding:"0 0 $1 0"}),gk=In("h1",{paddingBottom:"$1",fontWeight:500}),_k=In("div",{maxWidth:780,marginLeft:"auto",marginRight:"auto",padding:"$3"}),yk=In("button",{padding:"$1 $2",marginBottom:"$1",borderRadius:"$2",cursor:"pointer",variants:{color:{violet:{backgroundColor:"blueviolet",color:"white","&:hover":{backgroundColor:"darkviolet"}},gray:{backgroundColor:"gainsboro","&:hover":{backgroundColor:"lightgray"}}}}}),vk=In("div",{padding:"$2",border:"1px dashed $white",textAlign:"center",margin:"0 0 $2 0"}),xk=In("div",{padding:"$1","&:not(:last-child)":{borderBottom:"1px solid $white"},"&:hover":{backgroundColor:"$hover"},variants:{selected:{true:{backgroundColor:"red"}}}}),wk=In("div",{borderRadius:"$1",border:"1px solid $white",margin:"0 0 $2 0"}),Lx=["https://protomaps-static.sfo3.digitaloceanspaces.com/osm_carto.pmtiles","https://protomaps-static.sfo3.digitaloceanspaces.com/mantle-trial.pmtiles","https://protomaps-static.sfo3.digitaloceanspaces.com/cb_2018_us_zcta510_500k_nolimit.pmtiles"];function bk(e){const n=re.exports.useCallback(W=>{e.setFile(new Th(new WT(W[0])))},[]),{acceptedFiles:s,getRootProps:h,getInputProps:g}=Pw({onDrop:n});let[v,S]=re.exports.useState("");re.exports.useState(1);const u=W=>{S(W.target.value)},A=W=>()=>{e.setFile(new Th(Lx[W]))};return vi(_k,{children:[_t(gk,{children:"PMTiles Viewer"}),_t(vm,{htmlFor:"remoteUrl",children:"Specify a remote URL"}),_t(mk,{id:"remoteUrl",placeholder:"https://example.com/my_archive.pmtiles",onChange:u}),_t(yk,{color:"gray",onClick:()=>{e.setFile(new Th(v))},children:"Load URL"}),_t(vm,{htmlFor:"localFile",children:"Select a local file"}),vi(vk,ka(ri({},h()),{children:[_t("input",ri({},g())),_t("p",{children:"Drag + drop a file here, or click to select"})]})),_t(vm,{children:"Load an example"}),_t(wk,{children:Lx.map((W,Y)=>_t(xk,{onClick:A(Y),children:W},Y))})]})}var I_={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */I_.read=function(e,n,s,h,g){var v,S,u=g*8-h-1,A=(1<<u)-1,V=A>>1,W=-7,Y=s?g-1:0,U=s?-1:1,de=e[n+Y];for(Y+=U,v=de&(1<<-W)-1,de>>=-W,W+=u;W>0;v=v*256+e[n+Y],Y+=U,W-=8);for(S=v&(1<<-W)-1,v>>=-W,W+=h;W>0;S=S*256+e[n+Y],Y+=U,W-=8);if(v===0)v=1-V;else{if(v===A)return S?NaN:(de?-1:1)*(1/0);S=S+Math.pow(2,h),v=v-V}return(de?-1:1)*S*Math.pow(2,v-h)};I_.write=function(e,n,s,h,g,v){var S,u,A,V=v*8-g-1,W=(1<<V)-1,Y=W>>1,U=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,de=h?0:v-1,ye=h?1:-1,me=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,S=W):(S=Math.floor(Math.log(n)/Math.LN2),n*(A=Math.pow(2,-S))<1&&(S--,A*=2),S+Y>=1?n+=U/A:n+=U*Math.pow(2,1-Y),n*A>=2&&(S++,A/=2),S+Y>=W?(u=0,S=W):S+Y>=1?(u=(n*A-1)*Math.pow(2,g),S=S+Y):(u=n*Math.pow(2,Y-1)*Math.pow(2,g),S=0));g>=8;e[s+de]=u&255,de+=ye,u/=256,g-=8);for(S=S<<g|u,V+=g;V>0;e[s+de]=S&255,de+=ye,S/=256,V-=8);e[s+de-ye]|=me*128};var Sk=Pn,$d=I_;function Pn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pn.Varint=0;Pn.Fixed64=1;Pn.Bytes=2;Pn.Fixed32=5;var Tg=(1<<16)*(1<<16),Dx=1/Tg,Ek=12,Iw=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Pn.prototype={destroy:function(){this.buf=null},readFields:function(e,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),g=h>>3,v=this.pos;this.type=h&7,e(g,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(e,n){return this.readFields(e,n,this.readVarint()+this.pos)},readFixed32:function(){var e=Zd(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Bx(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Zd(this.buf,this.pos)+Zd(this.buf,this.pos+4)*Tg;return this.pos+=8,e},readSFixed64:function(){var e=Zd(this.buf,this.pos)+Bx(this.buf,this.pos+4)*Tg;return this.pos+=8,e},readFloat:function(){var e=$d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=$d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var n=this.buf,s,h;return h=n[this.pos++],s=h&127,h<128||(h=n[this.pos++],s|=(h&127)<<7,h<128)||(h=n[this.pos++],s|=(h&127)<<14,h<128)||(h=n[this.pos++],s|=(h&127)<<21,h<128)?s:(h=n[this.pos],s|=(h&15)<<28,Tk(s,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,n=this.pos;return this.pos=e,e-n>=Ek&&Iw?Nk(this.buf,n,e):Ok(this.buf,n,e)},readBytes:function(){var e=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,e);return this.pos=e,n},readPackedVarint:function(e,n){if(this.type!==Pn.Bytes)return e.push(this.readVarint(n));var s=Ca(this);for(e=e||[];this.pos<s;)e.push(this.readVarint(n));return e},readPackedSVarint:function(e){if(this.type!==Pn.Bytes)return e.push(this.readSVarint());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Pn.Bytes)return e.push(this.readBoolean());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Pn.Bytes)return e.push(this.readFloat());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Pn.Bytes)return e.push(this.readDouble());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Pn.Bytes)return e.push(this.readFixed32());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Pn.Bytes)return e.push(this.readSFixed32());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Pn.Bytes)return e.push(this.readFixed64());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Pn.Bytes)return e.push(this.readSFixed64());var n=Ca(this);for(e=e||[];this.pos<n;)e.push(this.readSFixed64());return e},skip:function(e){var n=e&7;if(n===Pn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Pn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Pn.Fixed32)this.pos+=4;else if(n===Pn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+n)},writeTag:function(e,n){this.writeVarint(e<<3|n)},realloc:function(e){for(var n=this.length||16;n<this.pos+e;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),qu(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),qu(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),qu(this.buf,e&-1,this.pos),qu(this.buf,Math.floor(e*Dx),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),qu(this.buf,e&-1,this.pos),qu(this.buf,Math.floor(e*Dx),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){Pk(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var n=this.pos;this.pos=Uk(this.buf,e,this.pos);var s=this.pos-n;s>=128&&Rx(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(e){this.realloc(4),$d.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),$d.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var n=e.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=e[s]},writeRawMessage:function(e,n){this.pos++;var s=this.pos;e(n,this);var h=this.pos-s;h>=128&&Rx(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(e,n,s){this.writeTag(e,Pn.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(e,n){n.length&&this.writeMessage(e,Ik,n)},writePackedSVarint:function(e,n){n.length&&this.writeMessage(e,zk,n)},writePackedBoolean:function(e,n){n.length&&this.writeMessage(e,Lk,n)},writePackedFloat:function(e,n){n.length&&this.writeMessage(e,Ak,n)},writePackedDouble:function(e,n){n.length&&this.writeMessage(e,Mk,n)},writePackedFixed32:function(e,n){n.length&&this.writeMessage(e,Dk,n)},writePackedSFixed32:function(e,n){n.length&&this.writeMessage(e,Rk,n)},writePackedFixed64:function(e,n){n.length&&this.writeMessage(e,Bk,n)},writePackedSFixed64:function(e,n){n.length&&this.writeMessage(e,Fk,n)},writeBytesField:function(e,n){this.writeTag(e,Pn.Bytes),this.writeBytes(n)},writeFixed32Field:function(e,n){this.writeTag(e,Pn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(e,n){this.writeTag(e,Pn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(e,n){this.writeTag(e,Pn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(e,n){this.writeTag(e,Pn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(e,n){this.writeTag(e,Pn.Varint),this.writeVarint(n)},writeSVarintField:function(e,n){this.writeTag(e,Pn.Varint),this.writeSVarint(n)},writeStringField:function(e,n){this.writeTag(e,Pn.Bytes),this.writeString(n)},writeFloatField:function(e,n){this.writeTag(e,Pn.Fixed32),this.writeFloat(n)},writeDoubleField:function(e,n){this.writeTag(e,Pn.Fixed64),this.writeDouble(n)},writeBooleanField:function(e,n){this.writeVarintField(e,Boolean(n))}};function Tk(e,n,s){var h=s.buf,g,v;if(v=h[s.pos++],g=(v&112)>>4,v<128||(v=h[s.pos++],g|=(v&127)<<3,v<128)||(v=h[s.pos++],g|=(v&127)<<10,v<128)||(v=h[s.pos++],g|=(v&127)<<17,v<128)||(v=h[s.pos++],g|=(v&127)<<24,v<128)||(v=h[s.pos++],g|=(v&1)<<31,v<128))return Wu(e,g,n);throw new Error("Expected varint not more than 10 bytes")}function Ca(e){return e.type===Pn.Bytes?e.readVarint()+e.pos:e.pos+1}function Wu(e,n,s){return s?n*4294967296+(e>>>0):(n>>>0)*4294967296+(e>>>0)}function Pk(e,n){var s,h;if(e>=0?(s=e%4294967296|0,h=e/4294967296|0):(s=~(-e%4294967296),h=~(-e/4294967296),s^4294967295?s=s+1|0:(s=0,h=h+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),kk(s,h,n),Ck(h,n)}function kk(e,n,s){s.buf[s.pos++]=e&127|128,e>>>=7,s.buf[s.pos++]=e&127|128,e>>>=7,s.buf[s.pos++]=e&127|128,e>>>=7,s.buf[s.pos++]=e&127|128,e>>>=7,s.buf[s.pos]=e&127}function Ck(e,n){var s=(e&7)<<4;n.buf[n.pos++]|=s|((e>>>=3)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127|((e>>>=7)?128:0),e&&(n.buf[n.pos++]=e&127)))))}function Rx(e,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(Math.LN2*7));s.realloc(h);for(var g=s.pos-1;g>=e;g--)s.buf[g+h]=s.buf[g]}function Ik(e,n){for(var s=0;s<e.length;s++)n.writeVarint(e[s])}function zk(e,n){for(var s=0;s<e.length;s++)n.writeSVarint(e[s])}function Ak(e,n){for(var s=0;s<e.length;s++)n.writeFloat(e[s])}function Mk(e,n){for(var s=0;s<e.length;s++)n.writeDouble(e[s])}function Lk(e,n){for(var s=0;s<e.length;s++)n.writeBoolean(e[s])}function Dk(e,n){for(var s=0;s<e.length;s++)n.writeFixed32(e[s])}function Rk(e,n){for(var s=0;s<e.length;s++)n.writeSFixed32(e[s])}function Bk(e,n){for(var s=0;s<e.length;s++)n.writeFixed64(e[s])}function Fk(e,n){for(var s=0;s<e.length;s++)n.writeSFixed64(e[s])}function Zd(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+e[n+3]*16777216}function qu(e,n,s){e[s]=n,e[s+1]=n>>>8,e[s+2]=n>>>16,e[s+3]=n>>>24}function Bx(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16)+(e[n+3]<<24)}function Ok(e,n,s){for(var h="",g=n;g<s;){var v=e[g],S=null,u=v>239?4:v>223?3:v>191?2:1;if(g+u>s)break;var A,V,W;u===1?v<128&&(S=v):u===2?(A=e[g+1],(A&192)===128&&(S=(v&31)<<6|A&63,S<=127&&(S=null))):u===3?(A=e[g+1],V=e[g+2],(A&192)===128&&(V&192)===128&&(S=(v&15)<<12|(A&63)<<6|V&63,(S<=2047||S>=55296&&S<=57343)&&(S=null))):u===4&&(A=e[g+1],V=e[g+2],W=e[g+3],(A&192)===128&&(V&192)===128&&(W&192)===128&&(S=(v&15)<<18|(A&63)<<12|(V&63)<<6|W&63,(S<=65535||S>=1114112)&&(S=null))),S===null?(S=65533,u=1):S>65535&&(S-=65536,h+=String.fromCharCode(S>>>10&1023|55296),S=56320|S&1023),h+=String.fromCharCode(S),g+=u}return h}function Nk(e,n,s){return Iw.decode(e.subarray(n,s))}function Uk(e,n,s){for(var h=0,g,v;h<n.length;h++){if(g=n.charCodeAt(h),g>55295&&g<57344)if(v)if(g<56320){e[s++]=239,e[s++]=191,e[s++]=189,v=g;continue}else g=v-55296<<10|g-56320|65536,v=null;else{g>56319||h+1===n.length?(e[s++]=239,e[s++]=191,e[s++]=189):v=g;continue}else v&&(e[s++]=239,e[s++]=191,e[s++]=189,v=null);g<128?e[s++]=g:(g<2048?e[s++]=g>>6|192:(g<65536?e[s++]=g>>12|224:(e[s++]=g>>18|240,e[s++]=g>>12&63|128),e[s++]=g>>6&63|128),e[s++]=g&63|128)}return s}var Vk=gc;function gc(e,n){this.x=e,this.y=n}gc.prototype={clone:function(){return new gc(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,n){return this.clone()._rotateAround(e,n)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var n=e.x-this.x,s=e.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,n){return Math.atan2(this.x*n-this.y*e,this.x*e+this.y*n)},_matMult:function(e){var n=e[0]*this.x+e[1]*this.y,s=e[2]*this.x+e[3]*this.y;return this.x=n,this.y=s,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var n=Math.cos(e),s=Math.sin(e),h=n*this.x-s*this.y,g=s*this.x+n*this.y;return this.x=h,this.y=g,this},_rotateAround:function(e,n){var s=Math.cos(e),h=Math.sin(e),g=n.x+s*(this.x-n.x)-h*(this.y-n.y),v=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=g,this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};gc.convert=function(e){return e instanceof gc?e:Array.isArray(e)?new gc(e[0],e[1]):e};var $k=Vk,Zk=Sc;function Sc(e,n,s,h,g){this.properties={},this.extent=s,this.type=0,this._pbf=e,this._geometry=-1,this._keys=h,this._values=g,e.readFields(jk,this,n)}function jk(e,n,s){e==1?n.id=s.readVarint():e==2?Gk(s,n):e==3?n.type=s.readVarint():e==4&&(n._geometry=s.pos)}function Gk(e,n){for(var s=e.readVarint()+e.pos;e.pos<s;){var h=n._keys[e.readVarint()],g=n._values[e.readVarint()];n.properties[h]=g}}Sc.types=["Unknown","Point","LineString","Polygon"];Sc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var n=e.readVarint()+e.pos,s=1,h=0,g=0,v=0,S=[],u;e.pos<n;){if(h<=0){var A=e.readVarint();s=A&7,h=A>>3}if(h--,s===1||s===2)g+=e.readSVarint(),v+=e.readSVarint(),s===1&&(u&&S.push(u),u=[]),u.push(new $k(g,v));else if(s===7)u&&u.push(u[0].clone());else throw new Error("unknown command "+s)}return u&&S.push(u),S};Sc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var n=e.readVarint()+e.pos,s=1,h=0,g=0,v=0,S=1/0,u=-1/0,A=1/0,V=-1/0;e.pos<n;){if(h<=0){var W=e.readVarint();s=W&7,h=W>>3}if(h--,s===1||s===2)g+=e.readSVarint(),v+=e.readSVarint(),g<S&&(S=g),g>u&&(u=g),v<A&&(A=v),v>V&&(V=v);else if(s!==7)throw new Error("unknown command "+s)}return[S,A,u,V]};Sc.prototype.toGeoJSON=function(e,n,s){var h=this.extent*Math.pow(2,s),g=this.extent*e,v=this.extent*n,S=this.loadGeometry(),u=Sc.types[this.type],A,V;function W(de){for(var ye=0;ye<de.length;ye++){var me=de[ye],ze=180-(me.y+v)*360/h;de[ye]=[(me.x+g)*360/h-180,360/Math.PI*Math.atan(Math.exp(ze*Math.PI/180))-90]}}switch(this.type){case 1:var Y=[];for(A=0;A<S.length;A++)Y[A]=S[A][0];S=Y,W(S);break;case 2:for(A=0;A<S.length;A++)W(S[A]);break;case 3:for(S=Wk(S),A=0;A<S.length;A++)for(V=0;V<S[A].length;V++)W(S[A][V]);break}S.length===1?S=S[0]:u="Multi"+u;var U={type:"Feature",geometry:{type:u,coordinates:S},properties:this.properties};return"id"in this&&(U.id=this.id),U};function Wk(e){var n=e.length;if(n<=1)return[e];for(var s=[],h,g,v=0;v<n;v++){var S=qk(e[v]);S!==0&&(g===void 0&&(g=S<0),g===S<0?(h&&s.push(h),h=[e[v]]):h.push(e[v]))}return h&&s.push(h),s}function qk(e){for(var n=0,s=0,h=e.length,g=h-1,v,S;s<h;g=s++)v=e[s],S=e[g],n+=(S.x-v.x)*(v.y+S.y);return n}var Hk=Zk,Xk=zw;function zw(e,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Kk,this,n),this.length=this._features.length}function Kk(e,n,s){e===15?n.version=s.readVarint():e===1?n.name=s.readString():e===5?n.extent=s.readVarint():e===2?n._features.push(s.pos):e===3?n._keys.push(s.readString()):e===4&&n._values.push(Yk(s))}function Yk(e){for(var n=null,s=e.readVarint()+e.pos;e.pos<s;){var h=e.readVarint()>>3;n=h===1?e.readString():h===2?e.readFloat():h===3?e.readDouble():h===4?e.readVarint64():h===5?e.readVarint():h===6?e.readSVarint():h===7?e.readBoolean():null}return n}zw.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var n=this._pbf.readVarint()+this._pbf.pos;return new Hk(this._pbf,n,this.extent,this._keys,this._values)};var Jk=Xk,Qk=eC;function eC(e,n){this.layers=e.readFields(tC,{},n)}function tC(e,n,s){if(e===3){var h=new Jk(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}var nC=Qk;const Pg=Math.PI,kg=2*Pg,ru=1e-6,iC=kg-ru;function Cg(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Aw(){return new Cg}Cg.prototype=Aw.prototype={constructor:Cg,moveTo:function(e,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,n){this._+="L"+(this._x1=+e)+","+(this._y1=+n)},quadraticCurveTo:function(e,n,s,h){this._+="Q"+ +e+","+ +n+","+(this._x1=+s)+","+(this._y1=+h)},bezierCurveTo:function(e,n,s,h,g,v){this._+="C"+ +e+","+ +n+","+ +s+","+ +h+","+(this._x1=+g)+","+(this._y1=+v)},arcTo:function(e,n,s,h,g){e=+e,n=+n,s=+s,h=+h,g=+g;var v=this._x1,S=this._y1,u=s-e,A=h-n,V=v-e,W=S-n,Y=V*V+W*W;if(g<0)throw new Error("negative radius: "+g);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(Y>ru)if(!(Math.abs(W*u-A*V)>ru)||!g)this._+="L"+(this._x1=e)+","+(this._y1=n);else{var U=s-v,de=h-S,ye=u*u+A*A,me=U*U+de*de,ze=Math.sqrt(ye),ie=Math.sqrt(Y),ee=g*Math.tan((Pg-Math.acos((ye+Y-me)/(2*ze*ie)))/2),te=ee/ie,Ee=ee/ze;Math.abs(te-1)>ru&&(this._+="L"+(e+te*V)+","+(n+te*W)),this._+="A"+g+","+g+",0,0,"+ +(W*U>V*de)+","+(this._x1=e+Ee*u)+","+(this._y1=n+Ee*A)}},arc:function(e,n,s,h,g,v){e=+e,n=+n,s=+s,v=!!v;var S=s*Math.cos(h),u=s*Math.sin(h),A=e+S,V=n+u,W=1^v,Y=v?h-g:g-h;if(s<0)throw new Error("negative radius: "+s);this._x1===null?this._+="M"+A+","+V:(Math.abs(this._x1-A)>ru||Math.abs(this._y1-V)>ru)&&(this._+="L"+A+","+V),s&&(Y<0&&(Y=Y%kg+kg),Y>iC?this._+="A"+s+","+s+",0,1,"+W+","+(e-S)+","+(n-u)+"A"+s+","+s+",0,1,"+W+","+(this._x1=A)+","+(this._y1=V):Y>ru&&(this._+="A"+s+","+s+",0,"+ +(Y>=Pg)+","+W+","+(this._x1=e+s*Math.cos(g))+","+(this._y1=n+s*Math.sin(g))))},rect:function(e,n,s,h){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+n)+"h"+ +s+"v"+ +h+"h"+-s+"Z"},toString:function(){return this._}};function rC(e){for(var n=e.length/6|0,s=new Array(n),h=0;h<n;)s[h]="#"+e.slice(h*6,++h*6);return s}var oC=rC("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");const sC=In("div",{height:"calc(100vh - $4 - $4)",overflowY:"scroll",width:"50%",padding:"$2"}),aC=In("div",{width:"50%",backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center",backgroundSize:"20px 20px",backgroundImage:"linear-gradient(to right, #111 1px, transparent 1px),linear-gradient(to bottom, #111 1px, transparent 1px);"}),lC=In("tr",{cursor:"pointer"},{"&:hover":{color:"red"}}),uC=In("div",{display:"flex"}),cC=e=>vi(lC,{onClick:()=>{e.setSelectedEntry(e.entry)},children:[_t("td",{children:e.entry.z}),_t("td",{children:e.entry.x}),_t("td",{children:e.entry.y}),_t("td",{children:e.entry.offset}),_t("td",{children:e.entry.length}),_t("td",{children:e.entry.is_dir})]});let hC=(e,n)=>e.name==="earth"?-4:e.name==="water"?-3:e.name==="natural"?-2:e.name==="landuse"?-1:e.name==="places"?1:0;const dC=e=>{let[n,s]=re.exports.useState(!1),h="none",g="";e.feature.type===3?h=n?"white":"currentColor":g=n?"white":"currentColor";let v=()=>{s(!0)},S=()=>{s(!1)},u=()=>{e.setSelectedFeature(e.feature)};return _t("path",{d:e.feature.path,stroke:g,strokeWidth:10,fill:h,fillOpacity:.5,onMouseOver:v,onMouseOut:S,onMouseDown:u})},pC=e=>{let n=e.layer.features.map((s,h)=>_t(dC,{feature:s,setSelectedFeature:e.setSelectedFeature},h));return _t("g",{color:e.color,children:n})},fC=In("div",{position:"absolute",right:0,bottom:0,backgroundColor:"$black",padding:"$1"}),mC=e=>{let n=[];for(var s in e.feature.properties)n.push([s,e.feature.properties[s]]);const h=n.map((g,v)=>vi("tr",{children:[_t("td",{children:g[0]}),_t("td",{children:g[1]})]},v));return vi(fC,{children:[e.feature.layerName,_t("table",{children:_t("tbody",{children:h})})]})},gC=e=>{let[n,s]=re.exports.useState([]),[h,g]=re.exports.useState(null);re.exports.useEffect(()=>{let S=async u=>{let A=await e.file.source.getBytes(u.offset,u.length),V=new nC(new Sk(new Uint8Array(A.buffer,A.byteOffset,A.byteLength))),W=[];for(let[de,ye]of Object.entries(V.layers)){let me=[];for(var Y=0;Y<ye.length;Y++){let ze=ye.feature(Y),ie=Aw(),ee=ze.loadGeometry();if(ze.type===1)for(let te of ee)for(let Ee of te)ie.arc(Ee.x,Ee.y,20,0,2*Math.PI);else for(let te of ee){ie.moveTo(te[0].x,te[0].y);for(var U=1;U<te.length;U++)ie.lineTo(te[U].x,te[U].y);ze.type===3&&ie.closePath()}me.push({path:ie.toString(),type:ze.type,id:ze.id,properties:ze.properties,layerName:de})}W.push({features:me,name:de})}W.sort(hC),s(W)};e.entry&&S(e.entry)},[e.entry]);let v=n.map((S,u)=>_t(pC,{layer:S,color:oC[u%12],setSelectedFeature:g},u));return vi("div",{children:[_t("svg",{viewBox:"0 0 4096 4096",width:800,height:800,children:v}),h?_t(mC,{feature:h}):null]})},_C=e=>{let[n,s]=re.exports.useState("");return re.exports.useEffect(()=>{let h=async g=>{let v=await e.file.source.getBytes(g.offset,g.length),S=new Blob([v]);var u=window.URL.createObjectURL(S);s(u)};e.entry&&h(e.entry)},[e.entry]),_t("img",{src:n})};function yC(e){let[n,s]=re.exports.useState([]),[h,g]=re.exports.useState(null),[v,S]=re.exports.useState(_u.UNKNOWN);re.exports.useEffect(()=>{(async()=>{let W=await e.file.root_entries(),Y=await L_(e.file);s(W),S(Y)})()},[e.file]);let u=n.map((V,W)=>_t(cC,{entry:V,setSelectedEntry:g},W)),A=_t("div",{});return h&&v&&(v===_u.MVT?A=_t(gC,{file:e.file,entry:h}):A=_t(_C,{file:e.file,entry:h})),vi(uC,{children:[_t(sC,{children:vi("table",{children:[_t("thead",{children:vi("tr",{children:[_t("th",{children:"z"}),_t("th",{children:"x"}),_t("th",{children:"y"}),_t("th",{children:"offset"}),_t("th",{children:"length"}),_t("th",{children:"is directory"})]})}),_t("tbody",{children:u})]})}),_t(aC,{children:A})]})}var Ig={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(s,h){h(n)})(Yx,function(s){var h="1.8.0";function g(a){var d,w,P,D;for(w=1,P=arguments.length;w<P;w++){D=arguments[w];for(d in D)a[d]=D[d]}return a}var v=Object.create||function(){function a(){}return function(d){return a.prototype=d,new a}}();function S(a,d){var w=Array.prototype.slice;if(a.bind)return a.bind.apply(a,w.call(arguments,1));var P=w.call(arguments,2);return function(){return a.apply(d,P.length?P.concat(w.call(arguments)):arguments)}}var u=0;function A(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function V(a,d,w){var P,D,j,ue;return ue=function(){P=!1,D&&(j.apply(w,D),D=!1)},j=function(){P?D=arguments:(a.apply(w,arguments),setTimeout(ue,d),P=!0)},j}function W(a,d,w){var P=d[1],D=d[0],j=P-D;return a===P&&w?a:((a-D)%j+j)%j+D}function Y(){return!1}function U(a,d){if(d===!1)return a;var w=Math.pow(10,d===void 0?6:d);return Math.round(a*w)/w}function de(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function ye(a){return de(a).split(/\s+/)}function me(a,d){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?v(a.options):{});for(var w in d)a.options[w]=d[w];return a.options}function ze(a,d,w){var P=[];for(var D in a)P.push(encodeURIComponent(w?D.toUpperCase():D)+"="+encodeURIComponent(a[D]));return(!d||d.indexOf("?")===-1?"?":"&")+P.join("&")}var ie=/\{ *([\w_ -]+) *\}/g;function ee(a,d){return a.replace(ie,function(w,P){var D=d[P];if(D===void 0)throw new Error("No value provided for variable "+w);return typeof D=="function"&&(D=D(d)),D})}var te=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function Ee(a,d){for(var w=0;w<a.length;w++)if(a[w]===d)return w;return-1}var De="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function je(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var Ue=0;function We(a){var d=+new Date,w=Math.max(0,16-(d-Ue));return Ue=d+w,window.setTimeout(a,w)}var ht=window.requestAnimationFrame||je("RequestAnimationFrame")||We,ft=window.cancelAnimationFrame||je("CancelAnimationFrame")||je("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Ct(a,d,w){if(w&&ht===We)a.call(d);else return ht.call(window,S(a,d))}function Ut(a){a&&ft.call(window,a)}var jn={__proto__:null,extend:g,create:v,bind:S,get lastId(){return u},stamp:A,throttle:V,wrapNum:W,falseFn:Y,formatNum:U,trim:de,splitWords:ye,setOptions:me,getParamString:ze,template:ee,isArray:te,indexOf:Ee,emptyImageUrl:De,requestFn:ht,cancelFn:ft,requestAnimFrame:Ct,cancelAnimFrame:Ut};function Zt(){}Zt.extend=function(a){var d=function(){me(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},w=d.__super__=this.prototype,P=v(w);P.constructor=d,d.prototype=P;for(var D in this)Object.prototype.hasOwnProperty.call(this,D)&&D!=="prototype"&&D!=="__super__"&&(d[D]=this[D]);return a.statics&&g(d,a.statics),a.includes&&(Sn(a.includes),g.apply(null,[P].concat(a.includes))),g(P,a),delete P.statics,delete P.includes,P.options&&(P.options=w.options?v(w.options):{},g(P.options,a.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){w.callInitHooks&&w.callInitHooks.call(this),this._initHooksCalled=!0;for(var j=0,ue=P._initHooks.length;j<ue;j++)P._initHooks[j].call(this)}},d},Zt.include=function(a){var d=this.prototype.options;return g(this.prototype,a),a.options&&(this.prototype.options=d,this.mergeOptions(a.options)),this},Zt.mergeOptions=function(a){return g(this.prototype.options,a),this},Zt.addInitHook=function(a){var d=Array.prototype.slice.call(arguments,1),w=typeof a=="function"?a:function(){this[a].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(w),this};function Sn(a){if(!(typeof L=="undefined"||!L||!L.Mixin)){a=te(a)?a:[a];for(var d=0;d<a.length;d++)a[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ut={on:function(a,d,w){if(typeof a=="object")for(var P in a)this._on(P,a[P],d);else{a=ye(a);for(var D=0,j=a.length;D<j;D++)this._on(a[D],d,w)}return this},off:function(a,d,w){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var P in a)this._off(P,a[P],d);else{a=ye(a);for(var D=arguments.length===1,j=0,ue=a.length;j<ue;j++)D?this._off(a[j]):this._off(a[j],d,w)}return this},_on:function(a,d,w){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}this._events=this._events||{};var P=this._events[a];P||(P=[],this._events[a]=P),w===this&&(w=void 0);for(var D={fn:d,ctx:w},j=P,ue=0,be=j.length;ue<be;ue++)if(j[ue].fn===d&&j[ue].ctx===w)return;j.push(D)},_off:function(a,d,w){var P,D,j;if(!!this._events&&(P=this._events[a],!!P)){if(arguments.length===1){if(this._firingCount)for(D=0,j=P.length;D<j;D++)P[D].fn=Y;delete this._events[a];return}if(w===this&&(w=void 0),typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}for(D=0,j=P.length;D<j;D++){var ue=P[D];if(ue.ctx===w&&ue.fn===d){this._firingCount&&(ue.fn=Y,this._events[a]=P=P.slice()),P.splice(D,1);return}}console.warn("listener not found")}},fire:function(a,d,w){if(!this.listens(a,w))return this;var P=g({},d,{type:a,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var D=this._events[a];if(D){this._firingCount=this._firingCount+1||1;for(var j=0,ue=D.length;j<ue;j++){var be=D[j];be.fn.call(be.ctx||this,P)}this._firingCount--}}return w&&this._propagateEvent(P),this},listens:function(a,d){typeof a!="string"&&console.warn('"string" type argument expected');var w=this._events&&this._events[a];if(w&&w.length)return!0;if(d){for(var P in this._eventParents)if(this._eventParents[P].listens(a,d))return!0}return!1},once:function(a,d,w){if(typeof a=="object"){for(var P in a)this.once(P,a[P],d);return this}var D=S(function(){this.off(a,d,w).off(a,D,w)},this);return this.on(a,d,w).on(a,D,w)},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[A(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[A(a)],this},_propagateEvent:function(a){for(var d in this._eventParents)this._eventParents[d].fire(a.type,g({layer:a.target,propagatedFrom:a.target},a),!0)}};ut.addEventListener=ut.on,ut.removeEventListener=ut.clearAllEventListeners=ut.off,ut.addOneTimeEventListener=ut.once,ut.fireEvent=ut.fire,ut.hasEventListeners=ut.listens;var Dn=Zt.extend(ut);function Oe(a,d,w){this.x=w?Math.round(a):a,this.y=w?Math.round(d):d}var gt=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Oe.prototype={clone:function(){return new Oe(this.x,this.y)},add:function(a){return this.clone()._add(Ye(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Ye(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Oe(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Oe(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=gt(this.x),this.y=gt(this.y),this},distanceTo:function(a){a=Ye(a);var d=a.x-this.x,w=a.y-this.y;return Math.sqrt(d*d+w*w)},equals:function(a){return a=Ye(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Ye(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+U(this.x)+", "+U(this.y)+")"}};function Ye(a,d,w){return a instanceof Oe?a:te(a)?new Oe(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Oe(a.x,a.y):new Oe(a,d,w)}function Pt(a,d){if(!!a)for(var w=d?[a,d]:a,P=0,D=w.length;P<D;P++)this.extend(w[P])}Pt.prototype={extend:function(a){return a=Ye(a),!this.min&&!this.max?(this.min=a.clone(),this.max=a.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)),this},getCenter:function(a){return new Oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new Oe(this.min.x,this.max.y)},getTopRight:function(){return new Oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var d,w;return typeof a[0]=="number"||a instanceof Oe?a=Ye(a):a=jt(a),a instanceof Pt?(d=a.min,w=a.max):d=w=a,d.x>=this.min.x&&w.x<=this.max.x&&d.y>=this.min.y&&w.y<=this.max.y},intersects:function(a){a=jt(a);var d=this.min,w=this.max,P=a.min,D=a.max,j=D.x>=d.x&&P.x<=w.x,ue=D.y>=d.y&&P.y<=w.y;return j&&ue},overlaps:function(a){a=jt(a);var d=this.min,w=this.max,P=a.min,D=a.max,j=D.x>d.x&&P.x<w.x,ue=D.y>d.y&&P.y<w.y;return j&&ue},isValid:function(){return!!(this.min&&this.max)}};function jt(a,d){return!a||a instanceof Pt?a:new Pt(a,d)}function fn(a,d){if(!!a)for(var w=d?[a,d]:a,P=0,D=w.length;P<D;P++)this.extend(w[P])}fn.prototype={extend:function(a){var d=this._southWest,w=this._northEast,P,D;if(a instanceof qt)P=a,D=a;else if(a instanceof fn){if(P=a._southWest,D=a._northEast,!P||!D)return this}else return a?this.extend(At(a)||Wt(a)):this;return!d&&!w?(this._southWest=new qt(P.lat,P.lng),this._northEast=new qt(D.lat,D.lng)):(d.lat=Math.min(P.lat,d.lat),d.lng=Math.min(P.lng,d.lng),w.lat=Math.max(D.lat,w.lat),w.lng=Math.max(D.lng,w.lng)),this},pad:function(a){var d=this._southWest,w=this._northEast,P=Math.abs(d.lat-w.lat)*a,D=Math.abs(d.lng-w.lng)*a;return new fn(new qt(d.lat-P,d.lng-D),new qt(w.lat+P,w.lng+D))},getCenter:function(){return new qt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new qt(this.getNorth(),this.getWest())},getSouthEast:function(){return new qt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof qt||"lat"in a?a=At(a):a=Wt(a);var d=this._southWest,w=this._northEast,P,D;return a instanceof fn?(P=a.getSouthWest(),D=a.getNorthEast()):P=D=a,P.lat>=d.lat&&D.lat<=w.lat&&P.lng>=d.lng&&D.lng<=w.lng},intersects:function(a){a=Wt(a);var d=this._southWest,w=this._northEast,P=a.getSouthWest(),D=a.getNorthEast(),j=D.lat>=d.lat&&P.lat<=w.lat,ue=D.lng>=d.lng&&P.lng<=w.lng;return j&&ue},overlaps:function(a){a=Wt(a);var d=this._southWest,w=this._northEast,P=a.getSouthWest(),D=a.getNorthEast(),j=D.lat>d.lat&&P.lat<w.lat,ue=D.lng>d.lng&&P.lng<w.lng;return j&&ue},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,d){return a?(a=Wt(a),this._southWest.equals(a.getSouthWest(),d)&&this._northEast.equals(a.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Wt(a,d){return a instanceof fn?a:new fn(a,d)}function qt(a,d,w){if(isNaN(a)||isNaN(d))throw new Error("Invalid LatLng object: ("+a+", "+d+")");this.lat=+a,this.lng=+d,w!==void 0&&(this.alt=+w)}qt.prototype={equals:function(a,d){if(!a)return!1;a=At(a);var w=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return w<=(d===void 0?1e-9:d)},toString:function(a){return"LatLng("+U(this.lat,a)+", "+U(this.lng,a)+")"},distanceTo:function(a){return si.distance(this,At(a))},wrap:function(){return si.wrapLatLng(this)},toBounds:function(a){var d=180*a/40075017,w=d/Math.cos(Math.PI/180*this.lat);return Wt([this.lat-d,this.lng-w],[this.lat+d,this.lng+w])},clone:function(){return new qt(this.lat,this.lng,this.alt)}};function At(a,d,w){return a instanceof qt?a:te(a)&&typeof a[0]!="object"?a.length===3?new qt(a[0],a[1],a[2]):a.length===2?new qt(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new qt(a.lat,"lng"in a?a.lng:a.lon,a.alt):d===void 0?null:new qt(a,d,w)}var zn={latLngToPoint:function(a,d){var w=this.projection.project(a),P=this.scale(d);return this.transformation._transform(w,P)},pointToLatLng:function(a,d){var w=this.scale(d),P=this.transformation.untransform(a,w);return this.projection.unproject(P)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var d=this.projection.bounds,w=this.scale(a),P=this.transformation.transform(d.min,w),D=this.transformation.transform(d.max,w);return new Pt(P,D)},infinite:!1,wrapLatLng:function(a){var d=this.wrapLng?W(a.lng,this.wrapLng,!0):a.lng,w=this.wrapLat?W(a.lat,this.wrapLat,!0):a.lat,P=a.alt;return new qt(w,d,P)},wrapLatLngBounds:function(a){var d=a.getCenter(),w=this.wrapLatLng(d),P=d.lat-w.lat,D=d.lng-w.lng;if(P===0&&D===0)return a;var j=a.getSouthWest(),ue=a.getNorthEast(),be=new qt(j.lat-P,j.lng-D),Me=new qt(ue.lat-P,ue.lng-D);return new fn(be,Me)}},si=g({},zn,{wrapLng:[-180,180],R:6371e3,distance:function(a,d){var w=Math.PI/180,P=a.lat*w,D=d.lat*w,j=Math.sin((d.lat-a.lat)*w/2),ue=Math.sin((d.lng-a.lng)*w/2),be=j*j+Math.cos(P)*Math.cos(D)*ue*ue,Me=2*Math.atan2(Math.sqrt(be),Math.sqrt(1-be));return this.R*Me}}),Gr=6378137,Sr={R:Gr,MAX_LATITUDE:85.0511287798,project:function(a){var d=Math.PI/180,w=this.MAX_LATITUDE,P=Math.max(Math.min(w,a.lat),-w),D=Math.sin(P*d);return new Oe(this.R*a.lng*d,this.R*Math.log((1+D)/(1-D))/2)},unproject:function(a){var d=180/Math.PI;return new qt((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*d,a.x*d/this.R)},bounds:function(){var a=Gr*Math.PI;return new Pt([-a,-a],[a,a])}()};function ur(a,d,w,P){if(te(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=d,this._c=w,this._d=P}ur.prototype={transform:function(a,d){return this._transform(a.clone(),d)},_transform:function(a,d){return d=d||1,a.x=d*(this._a*a.x+this._b),a.y=d*(this._c*a.y+this._d),a},untransform:function(a,d){return d=d||1,new Oe((a.x/d-this._b)/this._a,(a.y/d-this._d)/this._c)}};function Ai(a,d,w,P){return new ur(a,d,w,P)}var Fn=g({},si,{code:"EPSG:3857",projection:Sr,transformation:function(){var a=.5/(Math.PI*Sr.R);return Ai(a,.5,-a,.5)}()}),Er=g({},Fn,{code:"EPSG:900913"});function ao(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Tr(a,d){var w="",P,D,j,ue,be,Me;for(P=0,j=a.length;P<j;P++){for(be=a[P],D=0,ue=be.length;D<ue;D++)Me=be[D],w+=(D?"L":"M")+Me.x+" "+Me.y;w+=d?wt.svg?"z":"x":""}return w||"M0 0"}var ai=document.documentElement.style,Pr="ActiveXObject"in window,Ui=Pr&&!document.addEventListener,Ti="msLaunchUri"in navigator&&!("documentMode"in document),Vi=ti("webkit"),Po=ti("android"),Ht=ti("android 2")||ti("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),St=Po&&ti("Google")&&nt<537&&!("AudioNode"in window),mn=!!window.opera,Rn=!Ti&&ti("chrome"),Pe=ti("gecko")&&!Vi&&!mn&&!Pr,Je=!Rn&&ti("safari"),Mi=ti("phantom"),$i="OTransition"in ai,ln=navigator.platform.indexOf("Win")===0,wi=Pr&&"transition"in ai,Gn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ht,cr="MozPerspective"in ai,gn=!window.L_DISABLE_3D&&(wi||Gn||cr)&&!$i&&!Mi,He=typeof orientation!="undefined"||ti("mobile"),Rt=He&&Vi,Lt=He&&Gn,Pi=!window.PointerEvent&&window.MSPointerEvent,hr=!!(window.PointerEvent||Pi),Bt="ontouchstart"in window||!!window.TouchEvent,Ko=!window.L_NO_TOUCH&&(Bt||hr),kr=He&&mn,lo=He&&Pe,ei=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,wn=function(){var a=!1;try{var d=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",Y,d),window.removeEventListener("testPassiveEventSupport",Y,d)}catch{}return a}(),dr=function(){return!!document.createElement("canvas").getContext}(),uo=!!(document.createElementNS&&ao("svg").createSVGRect),li=!!uo&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Cr=!uo&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var d=a.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}();function ti(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var wt={ie:Pr,ielt9:Ui,edge:Ti,webkit:Vi,android:Po,android23:Ht,androidStock:St,opera:mn,chrome:Rn,gecko:Pe,safari:Je,phantom:Mi,opera12:$i,win:ln,ie3d:wi,webkit3d:Gn,gecko3d:cr,any3d:gn,mobile:He,mobileWebkit:Rt,mobileWebkit3d:Lt,msPointer:Pi,pointer:hr,touch:Ko,touchNative:Bt,mobileOpera:kr,mobileGecko:lo,retina:ei,passiveEvents:wn,canvas:dr,svg:uo,vml:Cr,inlineSvg:li},Yo=wt.msPointer?"MSPointerDown":"pointerdown",Jo=wt.msPointer?"MSPointerMove":"pointermove",J=wt.msPointer?"MSPointerUp":"pointerup",M=wt.msPointer?"MSPointerCancel":"pointercancel",B={touchstart:Yo,touchmove:Jo,touchend:J,touchcancel:M},H={touchstart:dt,touchmove:ke,touchend:ke,touchcancel:ke},Q={},ne=!1;function pe(a,d,w){return d==="touchstart"&&Ve(),H[d]?(w=H[d].bind(this,w),a.addEventListener(B[d],w,!1),w):(console.warn("wrong event specified:",d),L.Util.falseFn)}function ce(a,d,w){if(!B[d]){console.warn("wrong event specified:",d);return}a.removeEventListener(B[d],w,!1)}function he(a){Q[a.pointerId]=a}function fe(a){Q[a.pointerId]&&(Q[a.pointerId]=a)}function Ae(a){delete Q[a.pointerId]}function Ve(){ne||(document.addEventListener(Yo,he,!0),document.addEventListener(Jo,fe,!0),document.addEventListener(J,Ae,!0),document.addEventListener(M,Ae,!0),ne=!0)}function ke(a,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var w in Q)d.touches.push(Q[w]);d.changedTouches=[d],a(d)}}function dt(a,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Mt(d),ke(a,d)}function it(a){var d={},w,P;for(P in a)w=a[P],d[P]=w&&w.bind?w.bind(a):w;return a=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var mt=200;function Et(a,d){a.addEventListener("dblclick",d);var w=0,P;function D(j){if(j.detail!==1){P=j.detail;return}if(!(j.pointerType==="mouse"||j.sourceCapabilities&&!j.sourceCapabilities.firesTouchEvents)){var ue=Date.now();ue-w<=mt?(P++,P===2&&d(it(j))):P=1,w=ue}}return a.addEventListener("click",D),{dblclick:d,simDblclick:D}}function sn(a,d){a.removeEventListener("dblclick",d.dblclick),a.removeEventListener("click",d.simDblclick)}var Gt=Es(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Nt=Es(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ft=Nt==="webkitTransition"||Nt==="OTransition"?Nt+"End":"transitionend";function Dt(a){return typeof a=="string"?document.getElementById(a):a}function An(a,d){var w=a.style[d]||a.currentStyle&&a.currentStyle[d];if((!w||w==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(a,null);w=P?P[d]:null}return w==="auto"?null:w}function kt(a,d,w){var P=document.createElement(a);return P.className=d||"",w&&w.appendChild(P),P}function Xt(a){var d=a.parentNode;d&&d.removeChild(a)}function ni(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ko(a){var d=a.parentNode;d&&d.lastChild!==a&&d.appendChild(a)}function Co(a){var d=a.parentNode;d&&d.firstChild!==a&&d.insertBefore(a,d.firstChild)}function _n(a,d){if(a.classList!==void 0)return a.classList.contains(d);var w=Ss(a);return w.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(w)}function Kt(a,d){if(a.classList!==void 0)for(var w=ye(d),P=0,D=w.length;P<D;P++)a.classList.add(w[P]);else if(!_n(a,d)){var j=Ss(a);Il(a,(j?j+" ":"")+d)}}function On(a,d){a.classList!==void 0?a.classList.remove(d):Il(a,de((" "+Ss(a)+" ").replace(" "+d+" "," ")))}function Il(a,d){a.className.baseVal===void 0?a.className=d:a.className.baseVal=d}function Ss(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Ki(a,d){"opacity"in a.style?a.style.opacity=d:"filter"in a.style&&zl(a,d)}function zl(a,d){var w=!1,P="DXImageTransform.Microsoft.Alpha";try{w=a.filters.item(P)}catch{if(d===1)return}d=Math.round(d*100),w?(w.Enabled=d!==100,w.Opacity=d):a.style.filter+=" progid:"+P+"(opacity="+d+")"}function Es(a){for(var d=document.documentElement.style,w=0;w<a.length;w++)if(a[w]in d)return a[w];return!1}function co(a,d,w){var P=d||new Oe(0,0);a.style[Gt]=(wt.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(w?" scale("+w+")":"")}function Xn(a,d){a._leaflet_pos=d,wt.any3d?co(a,d):(a.style.left=d.x+"px",a.style.top=d.y+"px")}function Io(a){return a._leaflet_pos||new Oe(0,0)}var Ir,zo,Ao;if("onselectstart"in document)Ir=function(){Vt(window,"selectstart",Mt)},zo=function(){bn(window,"selectstart",Mt)};else{var ho=Es(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ir=function(){if(ho){var a=document.documentElement.style;Ao=a[ho],a[ho]="none"}},zo=function(){ho&&(document.documentElement.style[ho]=Ao,Ao=void 0)}}function Ts(){Vt(window,"dragstart",Mt)}function Ps(){bn(window,"dragstart",Mt)}var Mo,ks;function Qo(a){for(;a.tabIndex===-1;)a=a.parentNode;!a.style||(Nn(),Mo=a,ks=a.style.outline,a.style.outline="none",Vt(window,"keydown",Nn))}function Nn(){!Mo||(Mo.style.outline=ks,Mo=void 0,ks=void 0,bn(window,"keydown",Nn))}function Cs(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Qs(a){var d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}var xu={__proto__:null,TRANSFORM:Gt,TRANSITION:Nt,TRANSITION_END:Ft,get:Dt,getStyle:An,create:kt,remove:Xt,empty:ni,toFront:ko,toBack:Co,hasClass:_n,addClass:Kt,removeClass:On,setClass:Il,getClass:Ss,setOpacity:Ki,testProp:Es,setTransform:co,setPosition:Xn,getPosition:Io,get disableTextSelection(){return Ir},get enableTextSelection(){return zo},disableImageDrag:Ts,enableImageDrag:Ps,preventOutline:Qo,restoreOutline:Nn,getSizedParentNode:Cs,getScale:Qs};function Vt(a,d,w,P){if(d&&typeof d=="object")for(var D in d)ea(a,D,d[D],w);else{d=ye(d);for(var j=0,ue=d.length;j<ue;j++)ea(a,d[j],w,P)}return this}var Yi="_leaflet_events";function bn(a,d,w,P){if(arguments.length===1)wu(a),delete a[Yi];else if(d&&typeof d=="object")for(var D in d)ta(a,D,d[D],w);else if(d=ye(d),arguments.length===2)wu(a,function(be){return Ee(d,be)!==-1});else for(var j=0,ue=d.length;j<ue;j++)ta(a,d[j],w,P);return this}function wu(a,d){for(var w in a[Yi]){var P=w.split(/\d/)[0];(!d||d(P))&&ta(a,P,null,null,w)}}var Al={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ea(a,d,w,P){var D=d+A(w)+(P?"_"+A(P):"");if(a[Yi]&&a[Yi][D])return this;var j=function(be){return w.call(P||a,be||window.event)},ue=j;!wt.touchNative&&wt.pointer&&d.indexOf("touch")===0?j=pe(a,d,j):wt.touch&&d==="dblclick"?j=Et(a,j):"addEventListener"in a?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?a.addEventListener(Al[d]||d,j,wt.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(j=function(be){be=be||window.event,Li(a,be)&&ue(be)},a.addEventListener(Al[d],j,!1)):a.addEventListener(d,ue,!1):a.attachEvent("on"+d,j),a[Yi]=a[Yi]||{},a[Yi][D]=j}function ta(a,d,w,P,D){D=D||d+A(w)+(P?"_"+A(P):"");var j=a[Yi]&&a[Yi][D];if(!j)return this;!wt.touchNative&&wt.pointer&&d.indexOf("touch")===0?ce(a,d,j):wt.touch&&d==="dblclick"?sn(a,j):"removeEventListener"in a?a.removeEventListener(Al[d]||d,j,!1):a.detachEvent("on"+d,j),a[Yi][D]=null}function po(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function na(a){return ea(a,"wheel",po),this}function Is(a){return Vt(a,"mousedown touchstart dblclick contextmenu",po),a._leaflet_disable_click=!0,this}function Mt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function es(a){return Mt(a),po(a),this}function zs(a,d){if(!d)return new Oe(a.clientX,a.clientY);var w=Qs(d),P=w.boundingClientRect;return new Oe((a.clientX-P.left)/w.x-d.clientLeft,(a.clientY-P.top)/w.y-d.clientTop)}var ia=wt.win&&wt.chrome?2*window.devicePixelRatio:wt.gecko?window.devicePixelRatio:1;function Ml(a){return wt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/ia:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Li(a,d){var w=d.relatedTarget;if(!w)return!0;try{for(;w&&w!==a;)w=w.parentNode}catch{return!1}return w!==a}var Ll={__proto__:null,on:Vt,off:bn,stopPropagation:po,disableScrollPropagation:na,disableClickPropagation:Is,preventDefault:Mt,stop:es,getMousePosition:zs,getWheelDelta:Ml,isExternalTarget:Li,addListener:Vt,removeListener:bn},ra=Dn.extend({run:function(a,d,w,P){this.stop(),this._el=a,this._inProgress=!0,this._duration=w||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Io(a),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=Ct(this._animate,this),this._step()},_step:function(a){var d=+new Date-this._startTime,w=this._duration*1e3;d<w?this._runFrame(this._easeOut(d/w),a):(this._runFrame(1),this._complete())},_runFrame:function(a,d){var w=this._startPos.add(this._offset.multiplyBy(a));d&&w._round(),Xn(this._el,w),this.fire("step")},_complete:function(){Ut(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),nn=Dn.extend({options:{crs:Fn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,d){d=me(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=S(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(At(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Nt&&wt.any3d&&!wt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Vt(this._proxy,Ft,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,d,w){if(d=d===void 0?this._zoom:this._limitZoom(d),a=this._limitCenter(At(a),d,this.options.maxBounds),w=w||{},this._stop(),this._loaded&&!w.reset&&w!==!0){w.animate!==void 0&&(w.zoom=g({animate:w.animate},w.zoom),w.pan=g({animate:w.animate,duration:w.duration},w.pan));var P=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,d,w.zoom):this._tryAnimatedPan(a,w.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(a,d),this},setZoom:function(a,d){return this._loaded?this.setView(this.getCenter(),a,{zoom:d}):(this._zoom=a,this)},zoomIn:function(a,d){return a=a||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,d)},zoomOut:function(a,d){return a=a||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,d)},setZoomAround:function(a,d,w){var P=this.getZoomScale(d),D=this.getSize().divideBy(2),j=a instanceof Oe?a:this.latLngToContainerPoint(a),ue=j.subtract(D).multiplyBy(1-1/P),be=this.containerPointToLatLng(D.add(ue));return this.setView(be,d,{zoom:w})},_getBoundsCenterZoom:function(a,d){d=d||{},a=a.getBounds?a.getBounds():Wt(a);var w=Ye(d.paddingTopLeft||d.padding||[0,0]),P=Ye(d.paddingBottomRight||d.padding||[0,0]),D=this.getBoundsZoom(a,!1,w.add(P));if(D=typeof d.maxZoom=="number"?Math.min(d.maxZoom,D):D,D===1/0)return{center:a.getCenter(),zoom:D};var j=P.subtract(w).divideBy(2),ue=this.project(a.getSouthWest(),D),be=this.project(a.getNorthEast(),D),Me=this.unproject(ue.add(be).divideBy(2).add(j),D);return{center:Me,zoom:D}},fitBounds:function(a,d){if(a=Wt(a),!a.isValid())throw new Error("Bounds are not valid.");var w=this._getBoundsCenterZoom(a,d);return this.setView(w.center,w.zoom,d)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,d){return this.setView(a,this._zoom,{pan:d})},panBy:function(a,d){if(a=Ye(a).round(),d=d||{},!a.x&&!a.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ra,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Kt(this._mapPane,"leaflet-pan-anim");var w=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,w,d.duration||.25,d.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,d,w){if(w=w||{},w.animate===!1||!wt.any3d)return this.setView(a,d,w);this._stop();var P=this.project(this.getCenter()),D=this.project(a),j=this.getSize(),ue=this._zoom;a=At(a),d=d===void 0?ue:d;var be=Math.max(j.x,j.y),Me=be*this.getZoomScale(ue,d),Se=D.distanceTo(P)||1,$e=1.42,$t=$e*$e;function Qt(f){var i=f?-1:1,l=f?Me:be,p=Me*Me-be*be+i*$t*$t*Se*Se,_=2*l*$t*Se,b=p/_,T=Math.sqrt(b*b+1)-b,C=T<1e-9?-18:Math.log(T);return C}function Mr(f){return(Math.exp(f)-Math.exp(-f))/2}function Mn(f){return(Math.exp(f)+Math.exp(-f))/2}function Yr(f){return Mr(f)/Mn(f)}var Kn=Qt(0);function Hl(f){return be*(Mn(Kn)/Mn(Kn+$e*f))}function _a(f){return be*(Mn(Kn)*Yr(Kn+$e*f)-Mr(Kn))/$t}function Cn(f){return 1-Math.pow(1-f,1.5)}var ui=Date.now(),Xl=(Qt(1)-Kn)/$e,$s=w.duration?1e3*w.duration:1e3*Xl*.8;function Zs(){var f=(Date.now()-ui)/$s,i=Cn(f)*Xl;f<=1?(this._flyToFrame=Ct(Zs,this),this._move(this.unproject(P.add(D.subtract(P).multiplyBy(_a(i)/Se)),ue),this.getScaleZoom(be/Hl(i),ue),{flyTo:!0})):this._move(a,d)._moveEnd(!0)}return this._moveStart(!0,w.noMoveStart),Zs.call(this),this},flyToBounds:function(a,d){var w=this._getBoundsCenterZoom(a,d);return this.flyTo(w.center,w.zoom,d)},setMaxBounds:function(a){if(a=Wt(a),a.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(a){var d=this.options.minZoom;return this.options.minZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var d=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&d!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,d){this._enforcingBounds=!0;var w=this.getCenter(),P=this._limitCenter(w,this._zoom,Wt(a));return w.equals(P)||this.panTo(P,d),this._enforcingBounds=!1,this},panInside:function(a,d){d=d||{};var w=Ye(d.paddingTopLeft||d.padding||[0,0]),P=Ye(d.paddingBottomRight||d.padding||[0,0]),D=this.project(this.getCenter()),j=this.project(a),ue=this.getPixelBounds(),be=jt([ue.min.add(w),ue.max.subtract(P)]),Me=be.getSize();if(!be.contains(j)){this._enforcingBounds=!0;var Se=j.subtract(be.getCenter()),$e=be.extend(j).getSize().subtract(Me);D.x+=Se.x<0?-$e.x:$e.x,D.y+=Se.y<0?-$e.y:$e.y,this.panTo(this.unproject(D),d),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=g({animate:!1,pan:!0},a===!0?{animate:!0}:a);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var w=this.getSize(),P=d.divideBy(2).round(),D=w.divideBy(2).round(),j=P.subtract(D);return!j.x&&!j.y?this:(a.animate&&a.pan?this.panBy(j):(a.pan&&this._rawPanBy(j),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(S(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:w}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=g({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=S(this._handleGeolocationResponse,this),w=S(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,w,a):navigator.geolocation.getCurrentPosition(d,w,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(!!this._container._leaflet_id){var d=a.code,w=a.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+w+"."})}},_handleGeolocationResponse:function(a){if(!!this._container._leaflet_id){var d=a.coords.latitude,w=a.coords.longitude,P=new qt(d,w),D=P.toBounds(a.coords.accuracy*2),j=this._locateOptions;if(j.setView){var ue=this.getBoundsZoom(D);this.setView(P,j.maxZoom?Math.min(ue,j.maxZoom):ue)}var be={latlng:P,bounds:D,timestamp:a.timestamp};for(var Me in a.coords)typeof a.coords[Me]=="number"&&(be[Me]=a.coords[Me]);this.fire("locationfound",be)}},addHandler:function(a,d){if(!d)return this;var w=this[a]=new d(this);return this._handlers.push(w),this.options[a]&&w.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ut(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Xt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,d){var w="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),P=kt("div",w,d||this._mapPane);return a&&(this._panes[a]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),d=this.unproject(a.getBottomLeft()),w=this.unproject(a.getTopRight());return new fn(d,w)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,d,w){a=Wt(a),w=Ye(w||[0,0]);var P=this.getZoom()||0,D=this.getMinZoom(),j=this.getMaxZoom(),ue=a.getNorthWest(),be=a.getSouthEast(),Me=this.getSize().subtract(w),Se=jt(this.project(be,P),this.project(ue,P)).getSize(),$e=wt.any3d?this.options.zoomSnap:1,$t=Me.x/Se.x,Qt=Me.y/Se.y,Mr=d?Math.max($t,Qt):Math.min($t,Qt);return P=this.getScaleZoom(Mr,P),$e&&(P=Math.round(P/($e/100))*($e/100),P=d?Math.ceil(P/$e)*$e:Math.floor(P/$e)*$e),Math.max(D,Math.min(j,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Oe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,d){var w=this._getTopLeftPoint(a,d);return new Pt(w,w.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,d){var w=this.options.crs;return d=d===void 0?this._zoom:d,w.scale(a)/w.scale(d)},getScaleZoom:function(a,d){var w=this.options.crs;d=d===void 0?this._zoom:d;var P=w.zoom(a*w.scale(d));return isNaN(P)?1/0:P},project:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(At(a),d)},unproject:function(a,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(Ye(a),d)},layerPointToLatLng:function(a){var d=Ye(a).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(a){var d=this.project(At(a))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(At(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Wt(a))},distance:function(a,d){return this.options.crs.distance(At(a),At(d))},containerPointToLayerPoint:function(a){return Ye(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Ye(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var d=this.containerPointToLayerPoint(Ye(a));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(At(a)))},mouseEventToContainerPoint:function(a){return zs(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var d=this._container=Dt(a);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Vt(d,"scroll",this._onScroll,this),this._containerId=A(d)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&wt.any3d,Kt(a,"leaflet-container"+(wt.touch?" leaflet-touch":"")+(wt.retina?" leaflet-retina":"")+(wt.ielt9?" leaflet-oldie":"")+(wt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=An(a,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xn(this._mapPane,new Oe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Kt(a.markerPane,"leaflet-zoom-hide"),Kt(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,d){Xn(this._mapPane,new Oe(0,0));var w=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var P=this._zoom!==d;this._moveStart(P,!1)._move(a,d)._moveEnd(P),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(a,d){return a&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(a,d,w,P){d===void 0&&(d=this._zoom);var D=this._zoom!==d;return this._zoom=d,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),P?w&&w.pinch&&this.fire("zoom",w):((D||w&&w.pinch)&&this.fire("zoom",w),this.fire("move",w)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ut(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Xn(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[A(this._container)]=this;var d=a?bn:Vt;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),wt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ut(this._resizeRequest),this._resizeRequest=Ct(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,d){for(var w=[],P,D=d==="mouseout"||d==="mouseover",j=a.target||a.srcElement,ue=!1;j;){if(P=this._targets[A(j)],P&&(d==="click"||d==="preclick")&&this._draggableMoved(P)){ue=!0;break}if(P&&P.listens(d,!0)&&(D&&!Li(j,a)||(w.push(P),D))||j===this._container)break;j=j.parentNode}return!w.length&&!ue&&!D&&this.listens(d,!0)&&(w=[this]),w},_isClickDisabled:function(a){for(;a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var d=a.target||a.srcElement;if(!(!this._loaded||d._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(d))){var w=a.type;w==="mousedown"&&Qo(d),this._fireDOMEvent(a,w)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,d,w){if(a.type==="click"){var P=g({},a);P.type="preclick",this._fireDOMEvent(P,P.type,w)}var D=this._findEventTargets(a,d);if(w){for(var j=[],ue=0;ue<w.length;ue++)w[ue].listens(d,!0)&&j.push(w[ue]);D=j.concat(D)}if(!!D.length){d==="contextmenu"&&Mt(a);var be=D[0],Me={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Se=be.getLatLng&&(!be._radius||be._radius<=10);Me.containerPoint=Se?this.latLngToContainerPoint(be.getLatLng()):this.mouseEventToContainerPoint(a),Me.layerPoint=this.containerPointToLayerPoint(Me.containerPoint),Me.latlng=Se?be.getLatLng():this.layerPointToLatLng(Me.layerPoint)}for(ue=0;ue<D.length;ue++)if(D[ue].fire(d,Me,!0),Me.originalEvent._stopped||D[ue].options.bubblingMouseEvents===!1&&Ee(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,d=this._handlers.length;a<d;a++)this._handlers[a].disable()},whenReady:function(a,d){return this._loaded?a.call(d||this,{target:this}):this.on("load",a,d),this},_getMapPanePos:function(){return Io(this._mapPane)||new Oe(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,d){var w=a&&d!==void 0?this._getNewPixelOrigin(a,d):this.getPixelOrigin();return w.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,d){var w=this.getSize()._divideBy(2);return this.project(a,d)._subtract(w)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,d,w){var P=this._getNewPixelOrigin(w,d);return this.project(a,d)._subtract(P)},_latLngBoundsToNewLayerBounds:function(a,d,w){var P=this._getNewPixelOrigin(w,d);return jt([this.project(a.getSouthWest(),d)._subtract(P),this.project(a.getNorthWest(),d)._subtract(P),this.project(a.getSouthEast(),d)._subtract(P),this.project(a.getNorthEast(),d)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,d,w){if(!w)return a;var P=this.project(a,d),D=this.getSize().divideBy(2),j=new Pt(P.subtract(D),P.add(D)),ue=this._getBoundsOffset(j,w,d);return ue.round().equals([0,0])?a:this.unproject(P.add(ue),d)},_limitOffset:function(a,d){if(!d)return a;var w=this.getPixelBounds(),P=new Pt(w.min.add(a),w.max.add(a));return a.add(this._getBoundsOffset(P,d))},_getBoundsOffset:function(a,d,w){var P=jt(this.project(d.getNorthEast(),w),this.project(d.getSouthWest(),w)),D=P.min.subtract(a.min),j=P.max.subtract(a.max),ue=this._rebound(D.x,-j.x),be=this._rebound(D.y,-j.y);return new Oe(ue,be)},_rebound:function(a,d){return a+d>0?Math.round(a-d)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(d))},_limitZoom:function(a){var d=this.getMinZoom(),w=this.getMaxZoom(),P=wt.any3d?this.options.zoomSnap:1;return P&&(a=Math.round(a/P)*P),Math.max(d,Math.min(w,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){On(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,d){var w=this._getCenterOffset(a)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(w)?!1:(this.panBy(w,d),!0)},_createAnimProxy:function(){var a=this._proxy=kt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(d){var w=Gt,P=this._proxy.style[w];co(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),P===this._proxy.style[w]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),d=this.getZoom();co(this._proxy,this.project(a,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,d,w){if(this._animatingZoom)return!0;if(w=w||{},!this._zoomAnimated||w.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(d),D=this._getCenterOffset(a)._divideBy(1-1/P);return w.animate!==!0&&!this.getSize().contains(D)?!1:(Ct(function(){this._moveStart(!0,!1)._animateZoom(a,d,!0)},this),!0)},_animateZoom:function(a,d,w,P){!this._mapPane||(w&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=d,Kt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:d,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(S(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&On(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dl(a,d){return new nn(a,d)}var Ji=Zt.extend({options:{position:"topright"},initialize:function(a){me(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var d=this._map;return d&&d.removeControl(this),this.options.position=a,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var d=this._container=this.onAdd(a),w=this.getPosition(),P=a._controlCorners[w];return Kt(d,"leaflet-control"),w.indexOf("bottom")!==-1?P.insertBefore(d,P.firstChild):P.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Lo=function(a){return new Ji(a)};nn.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},d="leaflet-",w=this._controlContainer=kt("div",d+"control-container",this._container);function P(D,j){var ue=d+D+" "+d+j;a[D+j]=kt("div",ue,w)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Xt(this._controlCorners[a]);Xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Va=Ji.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,d,w,P){return w<P?-1:P<w?1:0}},initialize:function(a,d,w){me(this,w),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var P in a)this._addLayer(a[P],P);for(P in d)this._addLayer(d[P],P,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Ji.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,d){return this._addLayer(a,d),this._map?this._update():this},addOverlay:function(a,d){return this._addLayer(a,d,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var d=this._getLayer(A(a));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Kt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Kt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):On(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return On(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",d=this._container=kt("div",a),w=this.options.collapsed;d.setAttribute("aria-haspopup",!0),Is(d),na(d);var P=this._section=kt("section",a+"-list");w&&(this._map.on("click",this.collapse,this),Vt(d,{mouseenter:function(){Vt(P,"click",Mt),this.expand(),setTimeout(function(){bn(P,"click",Mt)})},mouseleave:this.collapse},this));var D=this._layersLink=kt("a",a+"-toggle",d);D.href="#",D.title="Layers",D.setAttribute("role","button"),Vt(D,"click",Mt),Vt(D,"focus",this.expand,this),w||this.expand(),this._baseLayersList=kt("div",a+"-base",P),this._separator=kt("div",a+"-separator",P),this._overlaysList=kt("div",a+"-overlays",P),d.appendChild(P)},_getLayer:function(a){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&A(this._layers[d].layer)===a)return this._layers[d]},_addLayer:function(a,d,w){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:d,overlay:w}),this.options.sortLayers&&this._layers.sort(S(function(P,D){return this.options.sortFunction(P.layer,D.layer,P.name,D.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ni(this._baseLayersList),ni(this._overlaysList),this._layerControlInputs=[];var a,d,w,P,D=0;for(w=0;w<this._layers.length;w++)P=this._layers[w],this._addItem(P),d=d||P.overlay,a=a||!P.overlay,D+=P.overlay?0:1;return this.options.hideSingleBase&&(a=a&&D>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=d&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var d=this._getLayer(A(a.target)),w=d.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;w&&this._map.fire(w,d)},_createRadioElement:function(a,d){var w='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(d?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=w,P.firstChild},_addItem:function(a){var d=document.createElement("label"),w=this._map.hasLayer(a.layer),P;a.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=w):P=this._createRadioElement("leaflet-base-layers_"+A(this),w),this._layerControlInputs.push(P),P.layerId=A(a.layer),Vt(P,"click",this._onInputClick,this);var D=document.createElement("span");D.innerHTML=" "+a.name;var j=document.createElement("span");d.appendChild(j),j.appendChild(P),j.appendChild(D);var ue=a.overlay?this._overlaysList:this._baseLayersList;return ue.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){var a=this._layerControlInputs,d,w,P=[],D=[];this._handlingClick=!0;for(var j=a.length-1;j>=0;j--)d=a[j],w=this._getLayer(d.layerId).layer,d.checked?P.push(w):d.checked||D.push(w);for(j=0;j<D.length;j++)this._map.hasLayer(D[j])&&this._map.removeLayer(D[j]);for(j=0;j<P.length;j++)this._map.hasLayer(P[j])||this._map.addLayer(P[j]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,d,w,P=this._map.getZoom(),D=a.length-1;D>=0;D--)d=a[D],w=this._getLayer(d.layerId).layer,d.disabled=w.options.minZoom!==void 0&&P<w.options.minZoom||w.options.maxZoom!==void 0&&P>w.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Rl=function(a,d,w){return new Va(a,d,w)},As=Ji.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var d="leaflet-control-zoom",w=kt("div",d+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,d+"-in",w,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,d+"-out",w,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),w},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,d,w,P,D){var j=kt("a",w,P);return j.innerHTML=a,j.href="#",j.title=d,j.setAttribute("role","button"),j.setAttribute("aria-label",d),Is(j),Vt(j,"click",es),Vt(j,"click",D,this),Vt(j,"click",this._refocusOnMap,this),j},_updateDisabled:function(){var a=this._map,d="leaflet-disabled";On(this._zoomInButton,d),On(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Kt(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Kt(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new As,this.addControl(this.zoomControl))});var bu=function(a){return new As(a)},Bl=Ji.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var d="leaflet-control-scale",w=kt("div",d),P=this.options;return this._addScales(P,d+"-line",w),a.on(P.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),w},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,d,w){a.metric&&(this._mScale=kt("div",d,w)),a.imperial&&(this._iScale=kt("div",d,w))},_update:function(){var a=this._map,d=a.getSize().y/2,w=a.distance(a.containerPointToLatLng([0,d]),a.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(w)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var d=this._getRoundNum(a),w=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,w,d/a)},_updateImperial:function(a){var d=a*3.2808399,w,P,D;d>5280?(w=d/5280,P=this._getRoundNum(w),this._updateScale(this._iScale,P+" mi",P/w)):(D=this._getRoundNum(d),this._updateScale(this._iScale,D+" ft",D/d))},_updateScale:function(a,d,w){a.style.width=Math.round(this.options.maxWidth*w)+"px",a.innerHTML=d},_getRoundNum:function(a){var d=Math.pow(10,(Math.floor(a)+"").length-1),w=a/d;return w=w>=10?10:w>=5?5:w>=3?3:w>=2?2:1,d*w}}),Ms=function(a){return new Bl(a)},zc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Fl=Ji.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(wt.inlineSvg?zc+" ":"")+"Leaflet</a>"},initialize:function(a){me(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=kt("div","leaflet-control-attribution"),Is(this._container);for(var d in a._layers)a._layers[d].getAttribution&&this.addAttribution(a._layers[d].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(!!this._map){var a=[];for(var d in this._attributions)this._attributions[d]&&a.push(d);var w=[];this.options.prefix&&w.push(this.options.prefix),a.length&&w.push(a.join(", ")),this._container.innerHTML=w.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&new Fl().addTo(this)});var Ac=function(a){return new Fl(a)};Ji.Layers=Va,Ji.Zoom=As,Ji.Scale=Bl,Ji.Attribution=Fl,Lo.layers=Rl,Lo.zoom=bu,Lo.scale=Ms,Lo.attribution=Ac;var Wr=Zt.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wr.addTo=function(a,d){return a.addHandler(d,this),this};var Mc={Events:ut},Su=wt.touch?"touchstart mousedown":"mousedown",qr=Dn.extend({options:{clickTolerance:3},initialize:function(a,d,w,P){me(this,P),this._element=a,this._dragStartTarget=d||a,this._preventOutline=w},enable:function(){this._enabled||(Vt(this._dragStartTarget,Su,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(qr._dragging===this&&this.finishDrag(!0),bn(this._dragStartTarget,Su,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(!!this._enabled&&(this._moved=!1,!_n(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){qr._dragging===this&&this.finishDrag();return}if(!(qr._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(qr._dragging=this,this._preventOutline&&Qo(this._element),Ts(),Ir(),!this._moving)){this.fire("down");var d=a.touches?a.touches[0]:a,w=Cs(this._element);this._startPoint=new Oe(d.clientX,d.clientY),this._startPos=Io(this._element),this._parentScale=Qs(w);var P=a.type==="mousedown";Vt(document,P?"mousemove":"touchmove",this._onMove,this),Vt(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(!!this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var d=a.touches&&a.touches.length===1?a.touches[0]:a,w=new Oe(d.clientX,d.clientY)._subtract(this._startPoint);!w.x&&!w.y||Math.abs(w.x)+Math.abs(w.y)<this.options.clickTolerance||(w.x/=this._parentScale.x,w.y/=this._parentScale.y,Mt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Kt(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Kt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(w),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Xn(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(a){On(document.body,"leaflet-dragging"),this._lastTarget&&(On(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),bn(document,"mousemove touchmove",this._onMove,this),bn(document,"mouseup touchend touchcancel",this._onUp,this),Ps(),zo(),this._moved&&this._moving&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,qr._dragging=!1}});function $a(a,d){if(!d||!a.length)return a.slice();var w=d*d;return a=ns(a,w),a=Tu(a,w),a}function ts(a,d,w){return Math.sqrt(It(a,d,w,!0))}function Eu(a,d,w){return It(a,d,w)}function Tu(a,d){var w=a.length,P=typeof Uint8Array!=void 0+""?Uint8Array:Array,D=new P(w);D[0]=D[w-1]=1,oa(a,D,d,0,w-1);var j,ue=[];for(j=0;j<w;j++)D[j]&&ue.push(a[j]);return ue}function oa(a,d,w,P,D){var j=0,ue,be,Me;for(be=P+1;be<=D-1;be++)Me=It(a[be],a[P],a[D],!0),Me>j&&(ue=be,j=Me);j>w&&(d[ue]=1,oa(a,d,w,P,ue),oa(a,d,w,ue,D))}function ns(a,d){for(var w=[a[0]],P=1,D=0,j=a.length;P<j;P++)Nl(a[P],a[D])>d&&(w.push(a[P]),D=P);return D<j-1&&w.push(a[j-1]),w}var Ol;function Do(a,d,w,P,D){var j=P?Ol:Ro(a,w),ue=Ro(d,w),be,Me,Se;for(Ol=ue;;){if(!(j|ue))return[a,d];if(j&ue)return!1;be=j||ue,Me=fo(a,d,be,w,D),Se=Ro(Me,w),be===j?(a=Me,j=Se):(d=Me,ue=Se)}}function fo(a,d,w,P,D){var j=d.x-a.x,ue=d.y-a.y,be=P.min,Me=P.max,Se,$e;return w&8?(Se=a.x+j*(Me.y-a.y)/ue,$e=Me.y):w&4?(Se=a.x+j*(be.y-a.y)/ue,$e=be.y):w&2?(Se=Me.x,$e=a.y+ue*(Me.x-a.x)/j):w&1&&(Se=be.x,$e=a.y+ue*(be.x-a.x)/j),new Oe(Se,$e,D)}function Ro(a,d){var w=0;return a.x<d.min.x?w|=1:a.x>d.max.x&&(w|=2),a.y<d.min.y?w|=4:a.y>d.max.y&&(w|=8),w}function Nl(a,d){var w=d.x-a.x,P=d.y-a.y;return w*w+P*P}function It(a,d,w,P){var D=d.x,j=d.y,ue=w.x-D,be=w.y-j,Me=ue*ue+be*be,Se;return Me>0&&(Se=((a.x-D)*ue+(a.y-j)*be)/Me,Se>1?(D=w.x,j=w.y):Se>0&&(D+=ue*Se,j+=be*Se)),ue=a.x-D,be=a.y-j,P?ue*ue+be*be:new Oe(D,j)}function pr(a){return!te(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]!="undefined"}function un(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pr(a)}var Za={__proto__:null,simplify:$a,pointToSegmentDistance:ts,closestPointOnSegment:Eu,clipSegment:Do,_getEdgeIntersection:fo,_getBitCode:Ro,_sqClosestPointOnSegment:It,isFlat:pr,_flat:un};function kn(a,d,w){var P,D=[1,4,2,8],j,ue,be,Me,Se,$e,$t,Qt;for(j=0,$e=a.length;j<$e;j++)a[j]._code=Ro(a[j],d);for(be=0;be<4;be++){for($t=D[be],P=[],j=0,$e=a.length,ue=$e-1;j<$e;ue=j++)Me=a[j],Se=a[ue],Me._code&$t?Se._code&$t||(Qt=fo(Se,Me,$t,d,w),Qt._code=Ro(Qt,d),P.push(Qt)):(Se._code&$t&&(Qt=fo(Se,Me,$t,d,w),Qt._code=Ro(Qt,d),P.push(Qt)),P.push(Me));a=P}return a}var Wn={__proto__:null,clipPolygon:kn},Ls={project:function(a){return new Oe(a.lng,a.lat)},unproject:function(a){return new qt(a.y,a.x)},bounds:new Pt([-180,-90],[180,90])},sa={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Pt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var d=Math.PI/180,w=this.R,P=a.lat*d,D=this.R_MINOR/w,j=Math.sqrt(1-D*D),ue=j*Math.sin(P),be=Math.tan(Math.PI/4-P/2)/Math.pow((1-ue)/(1+ue),j/2);return P=-w*Math.log(Math.max(be,1e-10)),new Oe(a.lng*d*w,P)},unproject:function(a){for(var d=180/Math.PI,w=this.R,P=this.R_MINOR/w,D=Math.sqrt(1-P*P),j=Math.exp(-a.y/w),ue=Math.PI/2-2*Math.atan(j),be=0,Me=.1,Se;be<15&&Math.abs(Me)>1e-7;be++)Se=D*Math.sin(ue),Se=Math.pow((1-Se)/(1+Se),D/2),Me=Math.PI/2-2*Math.atan(j*Se)-ue,ue+=Me;return new qt(ue*d,a.x*d/w)}},Lc={__proto__:null,LonLat:Ls,Mercator:sa,SphericalMercator:Sr},Ul=g({},si,{code:"EPSG:3395",projection:sa,transformation:function(){var a=.5/(Math.PI*sa.R);return Ai(a,.5,-a,.5)}()}),aa=g({},si,{code:"EPSG:4326",projection:Ls,transformation:Ai(1/180,1,-1/180,.5)}),ja=g({},zn,{projection:Ls,transformation:Ai(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,d){var w=d.lng-a.lng,P=d.lat-a.lat;return Math.sqrt(w*w+P*P)},infinite:!0});zn.Earth=si,zn.EPSG3395=Ul,zn.EPSG3857=Fn,zn.EPSG900913=Er,zn.EPSG4326=aa,zn.Simple=ja;var Zi=Dn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[A(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[A(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var d=a.target;if(!!d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var w=this.getEvents();d.on(w,this),this.once("remove",function(){d.off(w,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var d=A(a);return this._layers[d]?this:(this._layers[d]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var d=A(a);return this._layers[d]?(this._loaded&&a.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return A(a)in this._layers},eachLayer:function(a,d){for(var w in this._layers)a.call(d,this._layers[w]);return this},_addLayers:function(a){a=a?te(a)?a:[a]:[];for(var d=0,w=a.length;d<w;d++)this.addLayer(a[d])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[A(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var d=A(a);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,d=-1/0,w=this._getZoomSpan();for(var P in this._zoomBoundLayers){var D=this._zoomBoundLayers[P].options;a=D.minZoom===void 0?a:Math.min(a,D.minZoom),d=D.maxZoom===void 0?d:Math.max(d,D.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=a===1/0?void 0:a,w!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var mo=Zi.extend({initialize:function(a,d){me(this,d),this._layers={};var w,P;if(a)for(w=0,P=a.length;w<P;w++)this.addLayer(a[w])},addLayer:function(a){var d=this.getLayerId(a);return this._layers[d]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var d=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(a){var d=typeof a=="number"?a:this.getLayerId(a);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var d=Array.prototype.slice.call(arguments,1),w,P;for(w in this._layers)P=this._layers[w],P[a]&&P[a].apply(P,d);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,d){for(var w in this._layers)a.call(d,this._layers[w]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return A(a)}}),Vl=function(a,d){return new mo(a,d)},zr=mo.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),mo.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),mo.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new fn;for(var d in this._layers){var w=this._layers[d];a.extend(w.getBounds?w.getBounds():w.getLatLng())}return a}}),Ga=function(a,d){return new zr(a,d)},ki=Zt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){me(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,d){var w=this._getIconUrl(a);if(!w){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(w,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(P,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(a,d){var w=this.options,P=w[d+"Size"];typeof P=="number"&&(P=[P,P]);var D=Ye(P),j=Ye(d==="shadow"&&w.shadowAnchor||w.iconAnchor||D&&D.divideBy(2,!0));a.className="leaflet-marker-"+d+" "+(w.className||""),j&&(a.style.marginLeft=-j.x+"px",a.style.marginTop=-j.y+"px"),D&&(a.style.width=D.x+"px",a.style.height=D.y+"px")},_createImg:function(a,d){return d=d||document.createElement("img"),d.src=a,d},_getIconUrl:function(a){return wt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function Pu(a){return new ki(a)}var Ds=ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ds.imagePath!="string"&&(Ds.imagePath=this._detectIconPath()),(this.options.imagePath||Ds.imagePath)+ki.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var d=function(w,P,D){var j=P.exec(w);return j&&j[D]};return a=d(a,/^url\((['"])?(.+)\1\)$/,2),a&&d(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=kt("div","leaflet-default-icon-path",document.body),d=An(a,"background-image")||An(a,"backgroundImage");if(document.body.removeChild(a),d=this._stripUrl(d),d)return d;var w=document.querySelector('link[href$="leaflet.css"]');return w?w.href.substring(0,w.href.length-11-1):""}}),$l=Wr.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new qr(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Kt(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&On(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var d=this._marker,w=d._map,P=this._marker.options.autoPanSpeed,D=this._marker.options.autoPanPadding,j=Io(d._icon),ue=w.getPixelBounds(),be=w.getPixelOrigin(),Me=jt(ue.min._subtract(be).add(D),ue.max._subtract(be).subtract(D));if(!Me.contains(j)){var Se=Ye((Math.max(Me.max.x,j.x)-Me.max.x)/(ue.max.x-Me.max.x)-(Math.min(Me.min.x,j.x)-Me.min.x)/(ue.min.x-Me.min.x),(Math.max(Me.max.y,j.y)-Me.max.y)/(ue.max.y-Me.max.y)-(Math.min(Me.min.y,j.y)-Me.min.y)/(ue.min.y-Me.min.y)).multiplyBy(P);w.panBy(Se,{animate:!1}),this._draggable._newPos._add(Se),this._draggable._startPos._add(Se),Xn(d._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Ct(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Ut(this._panRequest),this._panRequest=Ct(this._adjustPan.bind(this,a)))},_onDrag:function(a){var d=this._marker,w=d._shadow,P=Io(d._icon),D=d._map.layerPointToLatLng(P);w&&Xn(w,P),d._latlng=D,a.latlng=D,a.oldLatLng=this._oldLatLng,d.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Ut(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),go=Zi.extend({options:{icon:new Ds,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,d){me(this,d),this._latlng=At(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var d=this._latlng;return this._latlng=At(a),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),w=a.icon.createIcon(this._icon),P=!1;w!==this._icon&&(this._icon&&this._removeIcon(),P=!0,a.title&&(w.title=a.title),w.tagName==="IMG"&&(w.alt=a.alt||"")),Kt(w,d),a.keyboard&&(w.tabIndex="0",w.setAttribute("role","button")),this._icon=w,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vt(w,"focus",this._panOnFocus,this);var D=a.icon.createShadow(this._shadow),j=!1;D!==this._shadow&&(this._removeShadow(),j=!0),D&&(Kt(D,d),D.alt=""),this._shadow=D,a.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),D&&j&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&bn(this._icon,"focus",this._panOnFocus,this),Xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Xt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Xn(this._icon,a),this._shadow&&Xn(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(d)},_initInteraction:function(){if(!!this.options.interactive&&(Kt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$l)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $l(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Ki(this._icon,a),this._shadow&&Ki(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(!!a){var d=this.options.icon.options,w=d.iconSize?Ye(d.iconSize):Ye(0,0),P=d.iconAnchor?Ye(d.iconAnchor):Ye(0,0);a.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:w.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Wa(a,d){return new go(a,d)}var Hr=Zi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return me(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),la=Hr.extend({options:{fill:!0,radius:10},initialize:function(a,d){me(this,d),this._latlng=At(a),this._radius=this.options.radius},setLatLng:function(a){var d=this._latlng;return this._latlng=At(a),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var d=a&&a.radius||this._radius;return Hr.prototype.setStyle.call(this,a),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,d=this._radiusY||a,w=this._clickTolerance(),P=[a+w,d+w];this._pxBounds=new Pt(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qa(a,d){return new la(a,d)}var Rs=la.extend({initialize:function(a,d,w){if(typeof d=="number"&&(d=g({},w,{radius:d})),me(this,d),this._latlng=At(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new fn(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Hr.prototype.setStyle,_project:function(){var a=this._latlng.lng,d=this._latlng.lat,w=this._map,P=w.options.crs;if(P.distance===si.distance){var D=Math.PI/180,j=this._mRadius/si.R/D,ue=w.project([d+j,a]),be=w.project([d-j,a]),Me=ue.add(be).divideBy(2),Se=w.unproject(Me).lat,$e=Math.acos((Math.cos(j*D)-Math.sin(d*D)*Math.sin(Se*D))/(Math.cos(d*D)*Math.cos(Se*D)))/D;(isNaN($e)||$e===0)&&($e=j/Math.cos(Math.PI/180*d)),this._point=Me.subtract(w.getPixelOrigin()),this._radius=isNaN($e)?0:Me.x-w.project([Se,a-$e]).x,this._radiusY=Me.y-ue.y}else{var $t=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=w.latLngToLayerPoint(this._latlng),this._radius=this._point.x-w.latLngToLayerPoint($t).x}this._updateBounds()}});function ku(a,d,w){return new Rs(a,d,w)}var Qi=Hr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,d){me(this,d),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var d=1/0,w=null,P=It,D,j,ue=0,be=this._parts.length;ue<be;ue++)for(var Me=this._parts[ue],Se=1,$e=Me.length;Se<$e;Se++){D=Me[Se-1],j=Me[Se];var $t=P(a,D,j,!0);$t<d&&(d=$t,w=P(a,D,j))}return w&&(w.distance=Math.sqrt(d)),w},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,d,w,P,D,j,ue,be=this._rings[0],Me=be.length;if(!Me)return null;for(a=0,d=0;a<Me-1;a++)d+=be[a].distanceTo(be[a+1])/2;if(d===0)return this._map.layerPointToLatLng(be[0]);for(a=0,P=0;a<Me-1;a++)if(D=be[a],j=be[a+1],w=D.distanceTo(j),P+=w,P>d)return ue=(P-d)/w,this._map.layerPointToLatLng([j.x-ue*(j.x-D.x),j.y-ue*(j.y-D.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,d){return d=d||this._defaultShape(),a=At(a),d.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new fn,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return pr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var d=[],w=pr(a),P=0,D=a.length;P<D;P++)w?(d[P]=At(a[P]),this._bounds.extend(d[P])):d[P]=this._convertLatLngs(a[P]);return d},_project:function(){var a=new Pt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),d=new Oe(a,a);!this._rawPxBounds||(this._pxBounds=new Pt([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(a,d,w){var P=a[0]instanceof qt,D=a.length,j,ue;if(P){for(ue=[],j=0;j<D;j++)ue[j]=this._map.latLngToLayerPoint(a[j]),w.extend(ue[j]);d.push(ue)}else for(j=0;j<D;j++)this._projectLatlngs(a[j],d,w)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,w,P,D,j,ue,be,Me;for(w=0,D=0,j=this._rings.length;w<j;w++)for(Me=this._rings[w],P=0,ue=Me.length;P<ue-1;P++)be=Do(Me[P],Me[P+1],a,P,!0),be&&(d[D]=d[D]||[],d[D].push(be[0]),(be[1]!==Me[P+1]||P===ue-2)&&(d[D].push(be[1]),D++))}},_simplifyPoints:function(){for(var a=this._parts,d=this.options.smoothFactor,w=0,P=a.length;w<P;w++)a[w]=$a(a[w],d)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,d){var w,P,D,j,ue,be,Me=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(w=0,j=this._parts.length;w<j;w++)for(be=this._parts[w],P=0,ue=be.length,D=ue-1;P<ue;D=P++)if(!(!d&&P===0)&&ts(a,be[D],be[P])<=Me)return!0;return!1}});function Zl(a,d){return new Qi(a,d)}Qi._flat=un;var _o=Qi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var a,d,w,P,D,j,ue,be,Me,Se=this._rings[0],$e=Se.length;if(!$e)return null;for(j=ue=be=0,a=0,d=$e-1;a<$e;d=a++)w=Se[a],P=Se[d],D=w.y*P.x-P.y*w.x,ue+=(w.x+P.x)*D,be+=(w.y+P.y)*D,j+=D*3;return j===0?Me=Se[0]:Me=[ue/j,be/j],this._map.layerPointToLatLng(Me)},_convertLatLngs:function(a){var d=Qi.prototype._convertLatLngs.call(this,a),w=d.length;return w>=2&&d[0]instanceof qt&&d[0].equals(d[w-1])&&d.pop(),d},_setLatLngs:function(a){Qi.prototype._setLatLngs.call(this,a),pr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,d=this.options.weight,w=new Oe(d,d);if(a=new Pt(a.min.subtract(w),a.max.add(w)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,D=this._rings.length,j;P<D;P++)j=kn(this._rings[P],a,!0),j.length&&this._parts.push(j)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var d=!1,w,P,D,j,ue,be,Me,Se;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(j=0,Me=this._parts.length;j<Me;j++)for(w=this._parts[j],ue=0,Se=w.length,be=Se-1;ue<Se;be=ue++)P=w[ue],D=w[be],P.y>a.y!=D.y>a.y&&a.x<(D.x-P.x)*(a.y-P.y)/(D.y-P.y)+P.x&&(d=!d);return d||Qi.prototype._containsPoint.call(this,a,!0)}});function Ha(a,d){return new _o(a,d)}var ji=zr.extend({initialize:function(a,d){me(this,d),this._layers={},a&&this.addData(a)},addData:function(a){var d=te(a)?a:a.features,w,P,D;if(d){for(w=0,P=d.length;w<P;w++)D=d[w],(D.geometries||D.geometry||D.features||D.coordinates)&&this.addData(D);return this}var j=this.options;if(j.filter&&!j.filter(a))return this;var ue=is(a,j);return ue?(ue.feature=ha(a),ue.defaultOptions=ue.options,this.resetStyle(ue),j.onEachFeature&&j.onEachFeature(a,ue),this.addLayer(ue)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=g({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(d){this._setLayerStyle(d,a)},this)},_setLayerStyle:function(a,d){a.setStyle&&(typeof d=="function"&&(d=d(a.feature)),a.setStyle(d))}});function is(a,d){var w=a.type==="Feature"?a.geometry:a,P=w?w.coordinates:null,D=[],j=d&&d.pointToLayer,ue=d&&d.coordsToLatLng||rs,be,Me,Se,$e;if(!P&&!w)return null;switch(w.type){case"Point":return be=ue(P),jl(j,a,be,d);case"MultiPoint":for(Se=0,$e=P.length;Se<$e;Se++)be=ue(P[Se]),D.push(jl(j,a,be,d));return new zr(D);case"LineString":case"MultiLineString":return Me=ua(P,w.type==="LineString"?0:1,ue),new Qi(Me,d);case"Polygon":case"MultiPolygon":return Me=ua(P,w.type==="Polygon"?1:2,ue),new _o(Me,d);case"GeometryCollection":for(Se=0,$e=w.geometries.length;Se<$e;Se++){var $t=is({geometry:w.geometries[Se],type:"Feature",properties:a.properties},d);$t&&D.push($t)}return new zr(D);default:throw new Error("Invalid GeoJSON object.")}}function jl(a,d,w,P){return a?a(d,w):new go(w,P&&P.markersInheritOptions&&P)}function rs(a){return new qt(a[1],a[0],a[2])}function ua(a,d,w){for(var P=[],D=0,j=a.length,ue;D<j;D++)ue=d?ua(a[D],d-1,w):(w||rs)(a[D]),P.push(ue);return P}function Xa(a,d){return a=At(a),a.alt!==void 0?[U(a.lng,d),U(a.lat,d),U(a.alt,d)]:[U(a.lng,d),U(a.lat,d)]}function ca(a,d,w,P){for(var D=[],j=0,ue=a.length;j<ue;j++)D.push(d?ca(a[j],d-1,w,P):Xa(a[j],P));return!d&&w&&D.push(D[0]),D}function Ar(a,d){return a.feature?g({},a.feature,{geometry:d}):ha(d)}function ha(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var os={toGeoJSON:function(a){return Ar(this,{type:"Point",coordinates:Xa(this.getLatLng(),a)})}};go.include(os),Rs.include(os),la.include(os),Qi.include({toGeoJSON:function(a){var d=!pr(this._latlngs),w=ca(this._latlngs,d?1:0,!1,a);return Ar(this,{type:(d?"Multi":"")+"LineString",coordinates:w})}}),_o.include({toGeoJSON:function(a){var d=!pr(this._latlngs),w=d&&!pr(this._latlngs[0]),P=ca(this._latlngs,w?2:d?1:0,!0,a);return d||(P=[P]),Ar(this,{type:(w?"Multi":"")+"Polygon",coordinates:P})}}),mo.include({toMultiPoint:function(a){var d=[];return this.eachLayer(function(w){d.push(w.toGeoJSON(a).geometry.coordinates)}),Ar(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(a){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(a);var w=d==="GeometryCollection",P=[];return this.eachLayer(function(D){if(D.toGeoJSON){var j=D.toGeoJSON(a);if(w)P.push(j.geometry);else{var ue=ha(j);ue.type==="FeatureCollection"?P.push.apply(P,ue.features):P.push(ue)}}}),w?Ar(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function Bs(a,d){return new ji(a,d)}var er=Bs,bi=Zi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,d,w){this._url=a,this._bounds=Wt(d),me(this,w)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Kt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&ko(this._image),this},bringToBack:function(){return this._map&&Co(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Wt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",d=this._image=a?this._url:kt("img");if(Kt(d,"leaflet-image-layer"),this._zoomAnimated&&Kt(d,"leaflet-zoom-animated"),this.options.className&&Kt(d,this.options.className),d.onselectstart=Y,d.onmousemove=Y,d.onload=S(this.fire,this,"load"),d.onerror=S(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(a){var d=this._map.getZoomScale(a.zoom),w=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;co(this._image,w,d)},_reset:function(){var a=this._image,d=new Pt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),w=d.getSize();Xn(a,d.min),a.style.width=w.x+"px",a.style.height=w.y+"px"},_updateOpacity:function(){Ki(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Dc=function(a,d,w){return new bi(a,d,w)},Bo=bi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",d=this._image=a?this._url:kt("video");if(Kt(d,"leaflet-image-layer"),this._zoomAnimated&&Kt(d,"leaflet-zoom-animated"),this.options.className&&Kt(d,this.options.className),d.onselectstart=Y,d.onmousemove=Y,d.onloadeddata=S(this.fire,this,"load"),a){for(var w=d.getElementsByTagName("source"),P=[],D=0;D<w.length;D++)P.push(w[D].src);this._url=w.length>0?P:[d.src];return}te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var j=0;j<this._url.length;j++){var ue=kt("source");ue.src=this._url[j],d.appendChild(ue)}}});function Cu(a,d,w){return new Bo(a,d,w)}var ss=bi.extend({_initImage:function(){var a=this._image=this._url;Kt(a,"leaflet-image-layer"),this._zoomAnimated&&Kt(a,"leaflet-zoom-animated"),this.options.className&&Kt(a,this.options.className),a.onselectstart=Y,a.onmousemove=Y}});function as(a,d,w){return new ss(a,d,w)}var Xr=Zi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(a,d){me(this,a),this._source=d},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Ki(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Ki(this._container,1),this.bringToFront(),this.options.interactive&&(Kt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Ki(this._container,0),this._removeTimeout=setTimeout(S(Xt,void 0,this._container),200)):Xt(this._container),this.options.interactive&&(On(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=At(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ko(this._container),this},bringToBack:function(){return this._map&&Co(this._container),this},_prepareOpen:function(a){var d=this._source;if(!d._map)return!1;if(d instanceof zr){d=null;var w=this._source._layers;for(var P in w)if(w[P]._map){d=w[P];break}if(!d)return!1;this._source=d}if(!a)if(d.getCenter)a=d.getCenter();else if(d.getLatLng)a=d.getLatLng();else if(d.getBounds)a=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var a=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")a.innerHTML=d;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var a=this._map.latLngToLayerPoint(this._latlng),d=Ye(this.options.offset),w=this._getAnchor();this._zoomAnimated?Xn(this._container,a.add(w)):d=d.add(a).add(w);var P=this._containerBottom=-d.y,D=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=P+"px",this._container.style.left=D+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(a,d,w,P){var D=d;return D instanceof a||(D=new a(P).setContent(d)),w&&D.setLatLng(w),D}}),Zi.include({_initOverlay:function(a,d,w,P){var D=w;return D instanceof a?(me(D,P),D._source=this):(D=d&&!P?d:new a(P,this),D.setContent(w)),D}});var Fs=Xr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Xr.prototype.openOn.call(this,a)},onAdd:function(a){Xr.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hr||this._source.on("preclick",po))},onRemove:function(a){Xr.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hr||this._source.off("preclick",po))},getEvents:function(){var a=Xr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",d=this._container=kt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),w=this._wrapper=kt("div",a+"-content-wrapper",d);if(this._contentNode=kt("div",a+"-content",w),Is(d),na(this._contentNode),Vt(d,"contextmenu",po),this._tipContainer=kt("div",a+"-tip-container",d),this._tip=kt("div",a+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=kt("a",a+"-close-button",d);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',Vt(P,"click",this.close,this)}},_updateLayout:function(){var a=this._contentNode,d=a.style;d.width="",d.whiteSpace="nowrap";var w=a.offsetWidth;w=Math.min(w,this.options.maxWidth),w=Math.max(w,this.options.minWidth),d.width=w+1+"px",d.whiteSpace="",d.height="";var P=a.offsetHeight,D=this.options.maxHeight,j="leaflet-popup-scrolled";D&&P>D?(d.height=D+"px",Kt(a,j)):On(a,j),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),w=this._getAnchor();Xn(this._container,d.add(w))},_adjustPan:function(a){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var d=this._map,w=parseInt(An(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+w,D=this._containerWidth,j=new Oe(this._containerLeft,-P-this._containerBottom);j._add(Io(this._container));var ue=d.layerPointToContainerPoint(j),be=Ye(this.options.autoPanPadding),Me=Ye(this.options.autoPanPaddingTopLeft||be),Se=Ye(this.options.autoPanPaddingBottomRight||be),$e=d.getSize(),$t=0,Qt=0;ue.x+D+Se.x>$e.x&&($t=ue.x+D-$e.x+Se.x),ue.x-$t-Me.x<0&&($t=ue.x-Me.x),ue.y+P+Se.y>$e.y&&(Qt=ue.y+P-$e.y+Se.y),ue.y-Qt-Me.y<0&&(Qt=ue.y-Me.y),($t||Qt)&&d.fire("autopanstart").panBy([$t,Qt],{animate:a&&a.type==="moveend"})}},_getAnchor:function(){return Ye(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Rc=function(a,d){return new Fs(a,d)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(a,d,w){return this._initOverlay(Fs,a,d,w).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Zi.include({bindPopup:function(a,d){return this._popup=this._initOverlay(Fs,this._popup,a,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&this._popup._prepareOpen(a)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){es(a);var d=a.layer||a.target;if(this._popup._source===d&&!(d instanceof Hr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=d,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var da=Xr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Xr.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Xr.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Xr.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",d=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=kt("div",d)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var d,w,P=this._map,D=this._container,j=P.latLngToContainerPoint(P.getCenter()),ue=P.layerPointToContainerPoint(a),be=this.options.direction,Me=D.offsetWidth,Se=D.offsetHeight,$e=Ye(this.options.offset),$t=this._getAnchor();be==="top"?(d=Me/2,w=Se):be==="bottom"?(d=Me/2,w=0):be==="center"?(d=Me/2,w=Se/2):be==="right"?(d=0,w=Se/2):be==="left"?(d=Me,w=Se/2):ue.x<j.x?(be="right",d=0,w=Se/2):(be="left",d=Me+($e.x+$t.x)*2,w=Se/2),a=a.subtract(Ye(d,w,!0)).add($e).add($t),On(D,"leaflet-tooltip-right"),On(D,"leaflet-tooltip-left"),On(D,"leaflet-tooltip-top"),On(D,"leaflet-tooltip-bottom"),Kt(D,"leaflet-tooltip-"+be),Xn(D,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Ki(this._container,a)},_animateZoom:function(a){var d=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(d)},_getAnchor:function(){return Ye(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ls=function(a,d){return new da(a,d)};nn.include({openTooltip:function(a,d,w){return this._initOverlay(da,a,d,w).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Zi.include({bindTooltip:function(a,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(da,this._tooltip,a,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var d=a?"off":"on",w={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?w.add=this._openTooltip:(w.mouseover=this._openTooltip,w.mouseout=this.closeTooltip,w.click=this._openTooltip),this._tooltip.options.sticky&&(w.mousemove=this._moveTooltip),this[d](w),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&this._tooltip._prepareOpen(a)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_openTooltip:function(a){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0))},_moveTooltip:function(a){var d=a.latlng,w,P;this._tooltip.options.sticky&&a.originalEvent&&(w=this._map.mouseEventToContainerPoint(a.originalEvent),P=this._map.containerPointToLayerPoint(w),d=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(d)}});var us=ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var d=a&&a.tagName==="DIV"?a:document.createElement("div"),w=this.options;if(w.html instanceof Element?(ni(d),d.appendChild(w.html)):d.innerHTML=w.html!==!1?w.html:"",w.bgPos){var P=Ye(w.bgPos);d.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function at(a){return new us(a)}ki.Default=Ds;var cs=Zi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:wt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){me(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Xt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ko(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Co(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=V(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Oe?a:new Oe(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var d=this.getPane().children,w=-a(-1/0,1/0),P=0,D=d.length,j;P<D;P++)j=d[P].style.zIndex,d[P]!==this._container&&j&&(w=a(w,+j));isFinite(w)&&(this.options.zIndex=w+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!wt.ielt9){Ki(this._container,this.options.opacity);var a=+new Date,d=!1,w=!1;for(var P in this._tiles){var D=this._tiles[P];if(!(!D.current||!D.loaded)){var j=Math.min(1,(a-D.loaded)/200);Ki(D.el,j),j<1?d=!0:(D.active?w=!0:this._onOpaqueTile(D),D.active=!0)}}w&&!this._noPrune&&this._pruneTiles(),d&&(Ut(this._fadeFrame),this._fadeFrame=Ct(this._updateOpacity,this))}},_onOpaqueTile:Y,_initContainer:function(){this._container||(this._container=kt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,d=this.options.maxZoom;if(a!==void 0){for(var w in this._levels)w=Number(w),this._levels[w].el.children.length||w===a?(this._levels[w].el.style.zIndex=d-Math.abs(a-w),this._onUpdateLevel(w)):(Xt(this._levels[w].el),this._removeTilesAtZoom(w),this._onRemoveLevel(w),delete this._levels[w]);var P=this._levels[a],D=this._map;return P||(P=this._levels[a]={},P.el=kt("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=d,P.origin=D.project(D.unproject(D.getPixelOrigin()),a).round(),P.zoom=a,this._setZoomTransform(P,D.getCenter(),D.getZoom()),Y(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:Y,_onRemoveLevel:Y,_onCreateLevel:Y,_pruneTiles:function(){if(!!this._map){var a,d,w=this._map.getZoom();if(w>this.options.maxZoom||w<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)d=this._tiles[a],d.retain=d.current;for(a in this._tiles)if(d=this._tiles[a],d.current&&!d.active){var P=d.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var d in this._tiles)this._tiles[d].coords.z===a&&this._removeTile(d)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Xt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,d,w,P){var D=Math.floor(a/2),j=Math.floor(d/2),ue=w-1,be=new Oe(+D,+j);be.z=+ue;var Me=this._tileCoordsToKey(be),Se=this._tiles[Me];return Se&&Se.active?(Se.retain=!0,!0):(Se&&Se.loaded&&(Se.retain=!0),ue>P?this._retainParent(D,j,ue,P):!1)},_retainChildren:function(a,d,w,P){for(var D=2*a;D<2*a+2;D++)for(var j=2*d;j<2*d+2;j++){var ue=new Oe(D,j);ue.z=w+1;var be=this._tileCoordsToKey(ue),Me=this._tiles[be];if(Me&&Me.active){Me.retain=!0;continue}else Me&&Me.loaded&&(Me.retain=!0);w+1<P&&this._retainChildren(D,j,w+1,P)}},_resetView:function(a){var d=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var d=this.options;return d.minNativeZoom!==void 0&&a<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<a?d.maxNativeZoom:a},_setView:function(a,d,w,P){var D=Math.round(d);this.options.maxZoom!==void 0&&D>this.options.maxZoom||this.options.minZoom!==void 0&&D<this.options.minZoom?D=void 0:D=this._clampZoom(D);var j=this.options.updateWhenZooming&&D!==this._tileZoom;(!P||j)&&(this._tileZoom=D,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),D!==void 0&&this._update(a),w||this._pruneTiles(),this._noPrune=!!w),this._setZoomTransforms(a,d)},_setZoomTransforms:function(a,d){for(var w in this._levels)this._setZoomTransform(this._levels[w],a,d)},_setZoomTransform:function(a,d,w){var P=this._map.getZoomScale(w,a.zoom),D=a.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(d,w)).round();wt.any3d?co(a.el,D,P):Xn(a.el,D)},_resetGrid:function(){var a=this._map,d=a.options.crs,w=this._tileSize=this.getTileSize(),P=this._tileZoom,D=this._map.getPixelWorldBounds(this._tileZoom);D&&(this._globalTileRange=this._pxBoundsToTileRange(D)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,d.wrapLng[0]],P).x/w.x),Math.ceil(a.project([0,d.wrapLng[1]],P).x/w.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([d.wrapLat[0],0],P).y/w.x),Math.ceil(a.project([d.wrapLat[1],0],P).y/w.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var d=this._map,w=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),P=d.getZoomScale(w,this._tileZoom),D=d.project(a,this._tileZoom).floor(),j=d.getSize().divideBy(P*2);return new Pt(D.subtract(j),D.add(j))},_update:function(a){var d=this._map;if(!!d){var w=this._clampZoom(d.getZoom());if(a===void 0&&(a=d.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(a),D=this._pxBoundsToTileRange(P),j=D.getCenter(),ue=[],be=this.options.keepBuffer,Me=new Pt(D.getBottomLeft().subtract([be,-be]),D.getTopRight().add([be,-be]));if(!(isFinite(D.min.x)&&isFinite(D.min.y)&&isFinite(D.max.x)&&isFinite(D.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Se in this._tiles){var $e=this._tiles[Se].coords;($e.z!==this._tileZoom||!Me.contains(new Oe($e.x,$e.y)))&&(this._tiles[Se].current=!1)}if(Math.abs(w-this._tileZoom)>1){this._setView(a,w);return}for(var $t=D.min.y;$t<=D.max.y;$t++)for(var Qt=D.min.x;Qt<=D.max.x;Qt++){var Mr=new Oe(Qt,$t);if(Mr.z=this._tileZoom,!!this._isValidTile(Mr)){var Mn=this._tiles[this._tileCoordsToKey(Mr)];Mn?Mn.current=!0:ue.push(Mr)}}if(ue.sort(function(Kn,Hl){return Kn.distanceTo(j)-Hl.distanceTo(j)}),ue.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Yr=document.createDocumentFragment();for(Qt=0;Qt<ue.length;Qt++)this._addTile(ue[Qt],Yr);this._level.el.appendChild(Yr)}}}},_isValidTile:function(a){var d=this._map.options.crs;if(!d.infinite){var w=this._globalTileRange;if(!d.wrapLng&&(a.x<w.min.x||a.x>w.max.x)||!d.wrapLat&&(a.y<w.min.y||a.y>w.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(a);return Wt(this.options.bounds).overlaps(P)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var d=this._map,w=this.getTileSize(),P=a.scaleBy(w),D=P.add(w),j=d.unproject(P,a.z),ue=d.unproject(D,a.z);return[j,ue]},_tileCoordsToBounds:function(a){var d=this._tileCoordsToNwSe(a),w=new fn(d[0],d[1]);return this.options.noWrap||(w=this._map.wrapLatLngBounds(w)),w},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var d=a.split(":"),w=new Oe(+d[0],+d[1]);return w.z=+d[2],w},_removeTile:function(a){var d=this._tiles[a];!d||(Xt(d.el),delete this._tiles[a],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Kt(a,"leaflet-tile");var d=this.getTileSize();a.style.width=d.x+"px",a.style.height=d.y+"px",a.onselectstart=Y,a.onmousemove=Y,wt.ielt9&&this.options.opacity<1&&Ki(a,this.options.opacity)},_addTile:function(a,d){var w=this._getTilePos(a),P=this._tileCoordsToKey(a),D=this.createTile(this._wrapCoords(a),S(this._tileReady,this,a));this._initTile(D),this.createTile.length<2&&Ct(S(this._tileReady,this,a,null,D)),Xn(D,w),this._tiles[P]={el:D,coords:a,current:!0},d.appendChild(D),this.fire("tileloadstart",{tile:D,coords:a})},_tileReady:function(a,d,w){d&&this.fire("tileerror",{error:d,tile:w,coords:a});var P=this._tileCoordsToKey(a);w=this._tiles[P],w&&(w.loaded=+new Date,this._map._fadeAnimated?(Ki(w.el,0),Ut(this._fadeFrame),this._fadeFrame=Ct(this._updateOpacity,this)):(w.active=!0,this._pruneTiles()),d||(Kt(w.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:w.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),wt.ielt9||!this._map._fadeAnimated?Ct(this._pruneTiles,this):setTimeout(S(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var d=new Oe(this._wrapX?W(a.x,this._wrapX):a.x,this._wrapY?W(a.y,this._wrapY):a.y);return d.z=a.z,d},_pxBoundsToTileRange:function(a){var d=this.getTileSize();return new Pt(a.min.unscaleBy(d).floor(),a.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function pa(a){return new cs(a)}var fr=cs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,d){this._url=a,d=me(this,d),d.detectRetina&&wt.retina&&d.maxZoom>0&&(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom++):(d.zoomOffset++,d.maxZoom--),d.minZoom=Math.max(0,d.minZoom)),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,d){return this._url===a&&d===void 0&&(d=!0),this._url=a,d||this.redraw(),this},createTile:function(a,d){var w=document.createElement("img");return Vt(w,"load",S(this._tileOnLoad,this,d,w)),Vt(w,"error",S(this._tileOnError,this,d,w)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(w.referrerPolicy=this.options.referrerPolicy),w.alt="",w.setAttribute("role","presentation"),w.src=this.getTileUrl(a),w},getTileUrl:function(a){var d={r:wt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var w=this._globalTileRange.max.y-a.y;this.options.tms&&(d.y=w),d["-y"]=w}return ee(this._url,g(d,this.options))},_tileOnLoad:function(a,d){wt.ielt9?setTimeout(S(a,this,null,d),0):a(null,d)},_tileOnError:function(a,d,w){var P=this.options.errorTileUrl;P&&d.getAttribute("src")!==P&&(d.src=P),a(w,d)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,d=this.options.maxZoom,w=this.options.zoomReverse,P=this.options.zoomOffset;return w&&(a=d-a),a+P},_getSubdomain:function(a){var d=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var a,d;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(d=this._tiles[a].el,d.onload=Y,d.onerror=Y,!d.complete)){d.src=De;var w=this._tiles[a].coords;Xt(d),delete this._tiles[a],this.fire("tileabort",{tile:d,coords:w})}},_removeTile:function(a){var d=this._tiles[a];if(!!d)return d.el.setAttribute("src",De),cs.prototype._removeTile.call(this,a)},_tileReady:function(a,d,w){if(!(!this._map||w&&w.getAttribute("src")===De))return cs.prototype._tileReady.call(this,a,d,w)}});function Os(a,d){return new fr(a,d)}var et=fr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,d){this._url=a;var w=g({},this.defaultWmsParams);for(var P in d)P in this.options||(w[P]=d[P]);d=me(this,d);var D=d.detectRetina&&wt.retina?2:1,j=this.getTileSize();w.width=j.x*D,w.height=j.y*D,this.wmsParams=w},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,fr.prototype.onAdd.call(this,a)},getTileUrl:function(a){var d=this._tileCoordsToNwSe(a),w=this._crs,P=jt(w.project(d[0]),w.project(d[1])),D=P.min,j=P.max,ue=(this._wmsVersion>=1.3&&this._crs===aa?[D.y,D.x,j.y,j.x]:[D.x,D.y,j.x,j.y]).join(","),be=fr.prototype.getTileUrl.call(this,a);return be+ze(this.wmsParams,be,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ue},setParams:function(a,d){return g(this.wmsParams,a),d||this.redraw(),this}});function Gl(a,d){return new et(a,d)}fr.WMS=et,Os.wms=Gl;var Kr=Zi.extend({options:{padding:.1},initialize:function(a){me(this,a),A(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Kt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,d){var w=this._map.getZoomScale(d,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),D=this._map.project(this._center,d),j=P.multiplyBy(-w).add(D).subtract(this._map._getNewPixelOrigin(a,d));wt.any3d?co(this._container,j,w):Xn(this._container,j)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,d=this._map.getSize(),w=this._map.containerPointToLayerPoint(d.multiplyBy(-a)).round();this._bounds=new Pt(w,w.add(d.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Iu=Kr.extend({options:{tolerance:0},getEvents:function(){var a=Kr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Vt(a,"mousemove",this._onMouseMove,this),Vt(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Vt(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Ut(this._redrawRequest),delete this._ctx,Xt(this._container),bn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var d in this._layers)a=this._layers[d],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kr.prototype._update.call(this);var a=this._bounds,d=this._container,w=a.getSize(),P=wt.retina?2:1;Xn(d,a.min),d.width=P*w.x,d.height=P*w.y,d.style.width=w.x+"px",d.style.height=w.y+"px",wt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Kr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[A(a)]=a;var d=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var d=a._order,w=d.next,P=d.prev;w?w.prev=P:this._drawLast=P,P?P.next=w:this._drawFirst=w,delete a._order,delete this._layers[A(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var d=a.options.dashArray.split(/[, ]+/),w=[],P,D;for(D=0;D<d.length;D++){if(P=Number(d[D]),isNaN(P))return;w.push(P)}a.options._dashArray=w}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){!this._map||(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Ct(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var d=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Pt,this._redrawBounds.extend(a._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(a._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var d=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,d=this._redrawBounds;if(this._ctx.save(),d){var w=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,w.x,w.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)a=P.layer,(!d||a._pxBounds&&a._pxBounds.intersects(d))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,d){if(!!this._drawing){var w,P,D,j,ue=a._parts,be=ue.length,Me=this._ctx;if(!!be){for(Me.beginPath(),w=0;w<be;w++){for(P=0,D=ue[w].length;P<D;P++)j=ue[w][P],Me[P?"lineTo":"moveTo"](j.x,j.y);d&&Me.closePath()}this._fillStroke(Me,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var d=a._point,w=this._ctx,P=Math.max(Math.round(a._radius),1),D=(Math.max(Math.round(a._radiusY),1)||P)/P;D!==1&&(w.save(),w.scale(1,D)),w.beginPath(),w.arc(d.x,d.y/D,P,0,Math.PI*2,!1),D!==1&&w.restore(),this._fillStroke(w,a)}},_fillStroke:function(a,d){var w=d.options;w.fill&&(a.globalAlpha=w.fillOpacity,a.fillStyle=w.fillColor||w.color,a.fill(w.fillRule||"evenodd")),w.stroke&&w.weight!==0&&(a.setLineDash&&a.setLineDash(d.options&&d.options._dashArray||[]),a.globalAlpha=w.opacity,a.lineWidth=w.weight,a.strokeStyle=w.color,a.lineCap=w.lineCap,a.lineJoin=w.lineJoin,a.stroke())},_onClick:function(a){for(var d=this._map.mouseEventToLayerPoint(a),w,P,D=this._drawFirst;D;D=D.next)w=D.layer,w.options.interactive&&w._containsPoint(d)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(w))&&(P=w);this._fireEvent(P?[P]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,d)}},_handleMouseOut:function(a){var d=this._hoveredLayer;d&&(On(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,d){if(!this._mouseHoverThrottled){for(var w,P,D=this._drawFirst;D;D=D.next)w=D.layer,w.options.interactive&&w._containsPoint(d)&&(P=w);P!==this._hoveredLayer&&(this._handleMouseOut(a),P&&(Kt(this._container,"leaflet-interactive"),this._fireEvent([P],a,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(S(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,d,w){this._map._fireDOMEvent(d,w||d.type,a)},_bringToFront:function(a){var d=a._order;if(!!d){var w=d.next,P=d.prev;if(w)w.prev=P;else return;P?P.next=w:w&&(this._drawFirst=w),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(a)}},_bringToBack:function(a){var d=a._order;if(!!d){var w=d.next,P=d.prev;if(P)P.next=w;else return;w?w.prev=P:P&&(this._drawLast=P),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(a)}}});function Ns(a){return wt.canvas?new Iu(a):null}var Us=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),zu={_initContainer:function(){this._container=kt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var d=a._container=Us("shape");Kt(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",a._path=Us("path"),d.appendChild(a._path),this._updateStyle(a),this._layers[A(a)]=a},_addPath:function(a){var d=a._container;this._container.appendChild(d),a.options.interactive&&a.addInteractiveTarget(d)},_removePath:function(a){var d=a._container;Xt(d),a.removeInteractiveTarget(d),delete this._layers[A(a)]},_updateStyle:function(a){var d=a._stroke,w=a._fill,P=a.options,D=a._container;D.stroked=!!P.stroke,D.filled=!!P.fill,P.stroke?(d||(d=a._stroke=Us("stroke")),D.appendChild(d),d.weight=P.weight+"px",d.color=P.color,d.opacity=P.opacity,P.dashArray?d.dashStyle=te(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=P.lineCap.replace("butt","flat"),d.joinstyle=P.lineJoin):d&&(D.removeChild(d),a._stroke=null),P.fill?(w||(w=a._fill=Us("fill")),D.appendChild(w),w.color=P.fillColor||P.color,w.opacity=P.fillOpacity):w&&(D.removeChild(w),a._fill=null)},_updateCircle:function(a){var d=a._point.round(),w=Math.round(a._radius),P=Math.round(a._radiusY||w);this._setPath(a,a._empty()?"M0 0":"AL "+d.x+","+d.y+" "+w+","+P+" 0,"+65535*360)},_setPath:function(a,d){a._path.v=d},_bringToFront:function(a){ko(a._container)},_bringToBack:function(a){Co(a._container)}},Ka=wt.vml?Us:ao,fa=Kr.extend({_initContainer:function(){this._container=Ka("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ka("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Xt(this._container),bn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kr.prototype._update.call(this);var a=this._bounds,d=a.getSize(),w=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,w.setAttribute("width",d.x),w.setAttribute("height",d.y)),Xn(w,a.min),w.setAttribute("viewBox",[a.min.x,a.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(a){var d=a._path=Ka("path");a.options.className&&Kt(d,a.options.className),a.options.interactive&&Kt(d,"leaflet-interactive"),this._updateStyle(a),this._layers[A(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Xt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[A(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var d=a._path,w=a.options;!d||(w.stroke?(d.setAttribute("stroke",w.color),d.setAttribute("stroke-opacity",w.opacity),d.setAttribute("stroke-width",w.weight),d.setAttribute("stroke-linecap",w.lineCap),d.setAttribute("stroke-linejoin",w.lineJoin),w.dashArray?d.setAttribute("stroke-dasharray",w.dashArray):d.removeAttribute("stroke-dasharray"),w.dashOffset?d.setAttribute("stroke-dashoffset",w.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),w.fill?(d.setAttribute("fill",w.fillColor||w.color),d.setAttribute("fill-opacity",w.fillOpacity),d.setAttribute("fill-rule",w.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(a,d){this._setPath(a,Tr(a._parts,d))},_updateCircle:function(a){var d=a._point,w=Math.max(Math.round(a._radius),1),P=Math.max(Math.round(a._radiusY),1)||w,D="a"+w+","+P+" 0 1,0 ",j=a._empty()?"M0 0":"M"+(d.x-w)+","+d.y+D+w*2+",0 "+D+-w*2+",0 ";this._setPath(a,j)},_setPath:function(a,d){a._path.setAttribute("d",d)},_bringToFront:function(a){ko(a._path)},_bringToBack:function(a){Co(a._path)}});wt.vml&&fa.include(zu);function ma(a){return wt.svg||wt.vml?new fa(a):null}nn.include({getRenderer:function(a){var d=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var d=this._paneRenderers[a];return d===void 0&&(d=this._createRenderer({pane:a}),this._paneRenderers[a]=d),d},_createRenderer:function(a){return this.options.preferCanvas&&Ns(a)||ma(a)}});var Ya=_o.extend({initialize:function(a,d){_o.prototype.initialize.call(this,this._boundsToLatLngs(a),d)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Wt(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function Wl(a,d){return new Ya(a,d)}fa.create=Ka,fa.pointsToPath=Tr,ji.geometryToLayer=is,ji.coordsToLatLng=rs,ji.coordsToLatLngs=ua,ji.latLngToCoords=Xa,ji.latLngsToCoords=ca,ji.getFeature=Ar,ji.asFeature=ha,nn.mergeOptions({boxZoom:!0});var Ja=Wr.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Vt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){bn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ir(),Ts(),this._startPoint=this._map.mouseEventToContainerPoint(a),Vt(document,{contextmenu:es,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=kt("div","leaflet-zoom-box",this._container),Kt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var d=new Pt(this._point,this._startPoint),w=d.getSize();Xn(this._box,d.min),this._box.style.width=w.x+"px",this._box.style.height=w.y+"px"},_finish:function(){this._moved&&(Xt(this._box),On(this._container,"leaflet-crosshair")),zo(),Ps(),bn(document,{contextmenu:es,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(S(this._resetState,this),0);var d=new fn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Ja),nn.mergeOptions({doubleClickZoom:!0});var Di=Wr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var d=this._map,w=d.getZoom(),P=d.options.zoomDelta,D=a.originalEvent.shiftKey?w-P:w+P;d.options.doubleClickZoom==="center"?d.setZoom(D):d.setZoomAround(a.containerPoint,D)}});nn.addInitHook("addHandler","doubleClickZoom",Di),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yo=Wr.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new qr(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Kt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){On(this._map._container,"leaflet-grab"),On(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=Wt(this._map.options.maxBounds);this._offsetLimit=jt(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var d=this._lastTime=+new Date,w=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(w),this._times.push(d),this._prunePositions(d)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,d){return a-(a-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;a.x<d.min.x&&(a.x=this._viscousLimit(a.x,d.min.x)),a.y<d.min.y&&(a.y=this._viscousLimit(a.y,d.min.y)),a.x>d.max.x&&(a.x=this._viscousLimit(a.x,d.max.x)),a.y>d.max.y&&(a.y=this._viscousLimit(a.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,d=Math.round(a/2),w=this._initialWorldOffset,P=this._draggable._newPos.x,D=(P-d+w)%a+d-w,j=(P+d+w)%a-d-w,ue=Math.abs(D+w)<Math.abs(j+w)?D:j;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ue},_onDragEnd:function(a){var d=this._map,w=d.options,P=!w.inertia||a.noInertia||this._times.length<2;if(d.fire("dragend",a),P)d.fire("moveend");else{this._prunePositions(+new Date);var D=this._lastPos.subtract(this._positions[0]),j=(this._lastTime-this._times[0])/1e3,ue=w.easeLinearity,be=D.multiplyBy(ue/j),Me=be.distanceTo([0,0]),Se=Math.min(w.inertiaMaxSpeed,Me),$e=be.multiplyBy(Se/Me),$t=Se/(w.inertiaDeceleration*ue),Qt=$e.multiplyBy(-$t/2).round();!Qt.x&&!Qt.y?d.fire("moveend"):(Qt=d._limitOffset(Qt,d.options.maxBounds),Ct(function(){d.panBy(Qt,{duration:$t,easeLinearity:ue,noMoveStart:!0,animate:!0})}))}}});nn.addInitHook("addHandler","dragging",yo),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ql=Wr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Vt(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),bn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,d=document.documentElement,w=a.scrollTop||d.scrollTop,P=a.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(P,w)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var d=this._panKeys={},w=this.keyCodes,P,D;for(P=0,D=w.left.length;P<D;P++)d[w.left[P]]=[-1*a,0];for(P=0,D=w.right.length;P<D;P++)d[w.right[P]]=[a,0];for(P=0,D=w.down.length;P<D;P++)d[w.down[P]]=[0,a];for(P=0,D=w.up.length;P<D;P++)d[w.up[P]]=[0,-1*a]},_setZoomDelta:function(a){var d=this._zoomKeys={},w=this.keyCodes,P,D;for(P=0,D=w.zoomIn.length;P<D;P++)d[w.zoomIn[P]]=a;for(P=0,D=w.zoomOut.length;P<D;P++)d[w.zoomOut[P]]=-a},_addHooks:function(){Vt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){bn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var d=a.keyCode,w=this._map,P;if(d in this._panKeys)(!w._panAnim||!w._panAnim._inProgress)&&(P=this._panKeys[d],a.shiftKey&&(P=Ye(P).multiplyBy(3)),w.panBy(P),w.options.maxBounds&&w.panInsideBounds(w.options.maxBounds));else if(d in this._zoomKeys)w.setZoom(w.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&w._popup&&w._popup.options.closeOnEscapeKey)w.closePopup();else return;es(a)}}});nn.addInitHook("addHandler","keyboard",ql),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Qa=Wr.extend({addHooks:function(){Vt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){bn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var d=Ml(a),w=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var P=Math.max(w-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(S(this._performZoom,this),P),es(a)},_performZoom:function(){var a=this._map,d=a.getZoom(),w=this._map.options.zoomSnap||0;a._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),D=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,j=w?Math.ceil(D/w)*w:D,ue=a._limitZoom(d+(this._delta>0?j:-j))-d;this._delta=0,this._startTime=null,ue&&(a.options.scrollWheelZoom==="center"?a.setZoom(d+ue):a.setZoomAround(this._lastMousePos,d+ue))}});nn.addInitHook("addHandler","scrollWheelZoom",Qa);var Vs=600;nn.mergeOptions({tapHold:wt.touchNative&&wt.safari&&wt.mobile,tapTolerance:15});var el=Wr.extend({addHooks:function(){Vt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){bn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var d=a.touches[0];this._startPos=this._newPos=new Oe(d.clientX,d.clientY),this._holdTimeout=setTimeout(S(function(){this._cancel(),this._isTapValid()&&(Vt(document,"touchend",Mt),Vt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Vs),Vt(document,"touchend touchcancel contextmenu",this._cancel,this),Vt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){bn(document,"touchend",Mt),bn(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),bn(document,"touchend touchcancel contextmenu",this._cancel,this),bn(document,"touchmove",this._onMove,this)},_onMove:function(a){var d=a.touches[0];this._newPos=new Oe(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,d){var w=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});w._simulated=!0,d.target.dispatchEvent(w)}});nn.addInitHook("addHandler","tapHold",el),nn.mergeOptions({touchZoom:wt.touch,bounceAtZoomLimits:!0});var ga=Wr.extend({addHooks:function(){Kt(this._map._container,"leaflet-touch-zoom"),Vt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){On(this._map._container,"leaflet-touch-zoom"),bn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var d=this._map;if(!(!a.touches||a.touches.length!==2||d._animatingZoom||this._zooming)){var w=d.mouseEventToContainerPoint(a.touches[0]),P=d.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(w.add(P)._divideBy(2))),this._startDist=w.distanceTo(P),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Vt(document,"touchmove",this._onTouchMove,this),Vt(document,"touchend touchcancel",this._onTouchEnd,this),Mt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var d=this._map,w=d.mouseEventToContainerPoint(a.touches[0]),P=d.mouseEventToContainerPoint(a.touches[1]),D=w.distanceTo(P)/this._startDist;if(this._zoom=d.getScaleZoom(D,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&D<1||this._zoom>d.getMaxZoom()&&D>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,D===1)return}else{var j=w._add(P)._divideBy(2)._subtract(this._centerPoint);if(D===1&&j.x===0&&j.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(j),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),Ut(this._animRequest);var ue=S(d._move,d,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=Ct(ue,this,!0),Mt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ut(this._animRequest),bn(document,"touchmove",this._onTouchMove,this),bn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nn.addInitHook("addHandler","touchZoom",ga),nn.BoxZoom=Ja,nn.DoubleClickZoom=Di,nn.Drag=yo,nn.Keyboard=ql,nn.ScrollWheelZoom=Qa,nn.TapHold=el,nn.TouchZoom=ga,s.Bounds=Pt,s.Browser=wt,s.CRS=zn,s.Canvas=Iu,s.Circle=Rs,s.CircleMarker=la,s.Class=Zt,s.Control=Ji,s.DivIcon=us,s.DivOverlay=Xr,s.DomEvent=Ll,s.DomUtil=xu,s.Draggable=qr,s.Evented=Dn,s.FeatureGroup=zr,s.GeoJSON=ji,s.GridLayer=cs,s.Handler=Wr,s.Icon=ki,s.ImageOverlay=bi,s.LatLng=qt,s.LatLngBounds=fn,s.Layer=Zi,s.LayerGroup=mo,s.LineUtil=Za,s.Map=nn,s.Marker=go,s.Mixin=Mc,s.Path=Hr,s.Point=Oe,s.PolyUtil=Wn,s.Polygon=_o,s.Polyline=Qi,s.Popup=Fs,s.PosAnimation=ra,s.Projection=Lc,s.Rectangle=Ya,s.Renderer=Kr,s.SVG=fa,s.SVGOverlay=ss,s.TileLayer=fr,s.Tooltip=da,s.Transformation=ur,s.Util=jn,s.VideoOverlay=Bo,s.bind=S,s.bounds=jt,s.canvas=Ns,s.circle=ku,s.circleMarker=qa,s.control=Lo,s.divIcon=at,s.extend=g,s.featureGroup=Ga,s.geoJSON=Bs,s.geoJson=er,s.gridLayer=pa,s.icon=Pu,s.imageOverlay=Dc,s.latLng=At,s.latLngBounds=Wt,s.layerGroup=Vl,s.map=Dl,s.marker=Wa,s.point=Ye,s.polygon=Ha,s.polyline=Zl,s.popup=Rc,s.rectangle=Wl,s.setOptions=me,s.stamp=A,s.svg=ma,s.svgOverlay=as,s.tileLayer=Os,s.tooltip=ls,s.transformation=Ai,s.version=h,s.videoOverlay=Cu;var mr=window.L;s.noConflict=function(){return window.L=mr,this},window.L=s})})(Ig,Ig.exports);var vC=Ig.exports;const xC=In("div",{height:"calc(100vh - $4 - $4)"});function wC(e){var n,s;return re.exports.useEffect(()=>(n=vC.map("map").setView([0,0],0),()=>{n.remove()}),[]),re.exports.useEffect(()=>{s&&s.remove(),(async()=>{if(n){let g=await L_(e.file);g===_u.PNG||g==_u.JPG?(s=XT(e.file,{attribution:'\xA9 <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'}),s.addTo(n)):console.error("leaflet vector preview not yet implemented")}})()},[]),_t(xC,{id:"map"})}var Mw={exports:{}};(function(e,n){(function(s,h){e.exports=h()})(Yx,function(){var s,h,g;function v(u,A){if(!s)s=A;else if(!h)h=A;else{var V="var sharedChunk = {}; ("+s+")(sharedChunk); ("+h+")(sharedChunk);",W={};s(W),g=A(W),typeof window!="undefined"&&(g.workerUrl=window.URL.createObjectURL(new Blob([V],{type:"text/javascript"})))}}v(["exports"],function(u){var A=V;function V(r,t,o,c){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(c-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=o,this.p2y=c}function W(r,t,o,c){const m=new A(r,t,o,c);return function(y){return m.solve(y)}}V.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var o=r,c=0;c<8;c++){var m=this.sampleCurveX(o)-r;if(Math.abs(m)<t)return o;var y=this.sampleCurveDerivativeX(o);if(Math.abs(y)<1e-6)break;o-=m/y}var x=0,E=1;for(o=r,c=0;c<20&&(m=this.sampleCurveX(o),!(Math.abs(m-r)<t));c++)r>m?x=o:E=o,o=.5*(E-x)+x;return o},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};const Y=W(.25,.1,.25,1);function U(r,t,o){return Math.min(o,Math.max(t,r))}function de(r,t,o){const c=o-t,m=((r-t)%c+c)%c+t;return m===t?o:m}function ye(r,...t){for(const o of t)for(const c in o)r[c]=o[c];return r}let me=1;function ze(r,t){r.forEach(o=>{t[o]&&(t[o]=t[o].bind(t))})}function ie(r,t,o){const c={};for(const m in r)c[m]=t.call(o||this,r[m],m,r);return c}function ee(r,t,o){const c={};for(const m in r)t.call(o||this,r[m],m,r)&&(c[m]=r[m]);return c}function te(r){return Array.isArray(r)?r.map(te):typeof r=="object"&&r?ie(r,te):r}const Ee={};function De(r){Ee[r]||(typeof console!="undefined"&&console.warn(r),Ee[r]=!0)}function je(r,t,o){return(o.y-r.y)*(t.x-r.x)>(t.y-r.y)*(o.x-r.x)}function Ue(r){let t=0;for(let o,c,m=0,y=r.length,x=y-1;m<y;x=m++)o=r[m],c=r[x],t+=(c.x-o.x)*(o.y+c.y);return t}function We(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ht(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,c,m,y)=>{const x=m||y;return t[c]=!x||x.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t}let ft,Ct,Ut=null;function jn(r){if(Ut==null){const t=r.navigator?r.navigator.userAgent:null;Ut=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ut}function Zt(r){return typeof ImageBitmap!="undefined"&&r instanceof ImageBitmap}const Sn={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(r){const t=requestAnimationFrame(r);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(r,t=0){const o=window.document.createElement("canvas"),c=o.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return o.width=r.width,o.height=r.height,c.drawImage(r,0,0,r.width,r.height),c.getImageData(-t,-t,r.width+2*t,r.height+2*t)},resolveURL:r=>(ft||(ft=document.createElement("a")),ft.href=r,ft.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Ct==null&&(Ct=matchMedia("(prefers-reduced-motion: reduce)")),Ct.matches)}};var ut=Dn;function Dn(r,t){this.x=r,this.y=t}Dn.prototype={clone:function(){return new Dn(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,o=r.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),o=Math.sin(r),c=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=c,this},_rotateAround:function(r,t){var o=Math.cos(r),c=Math.sin(r),m=t.y+c*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-c*(this.y-t.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Dn.convert=function(r){return r instanceof Dn?r:Array.isArray(r)?new Dn(r[0],r[1]):r};const Oe={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},gt="mapbox-tiles";let Ye,Pt,jt=500,fn=50;function Wt(){typeof caches=="undefined"||Ye||(Ye=caches.open(gt))}let qt=1/0;const At={supported:!1,testSupport:function(r){!Gr&&si&&(Sr?ur(r):zn=r)}};let zn,si,Gr=!1,Sr=!1;function ur(r){const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,si),r.isContextLost())return;At.supported=!0}catch{}r.deleteTexture(t),Gr=!0}typeof document!="undefined"&&(si=document.createElement("img"),si.onload=function(){zn&&ur(zn),zn=null,Sr=!0},si.onerror=function(){Gr=!0,zn=null},si.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Ai={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ai);class Fn extends Error{constructor(t,o,c,m){super(`AJAXError: ${o} (${t}): ${c}`),this.status=t,this.statusText=o,this.url=c,this.body=m}}const Er=We()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ao(r,t){const o=new AbortController,c=new Request(r.url,{method:r.method||"GET",body:r.body,credentials:r.credentials,headers:r.headers,referrer:Er(),signal:o.signal});let m=!1,y=!1;return r.type==="json"&&c.headers.set("Accept","application/json"),((x,E,k)=>{if(y)return;const z=Date.now();fetch(c).then(F=>F.ok?((O,$,G)=>{(r.type==="arrayBuffer"?O.arrayBuffer():r.type==="json"?O.json():O.text()).then(q=>{y||($&&G&&function(ae,le,xe){if(Wt(),!Ye)return;const Ce={status:le.status,statusText:le.statusText,headers:new Headers};le.headers.forEach((Re,Ze)=>Ce.headers.set(Ze,Re));const Te=ht(le.headers.get("Cache-Control")||"");Te["no-store"]||(Te["max-age"]&&Ce.headers.set("Expires",new Date(xe+1e3*Te["max-age"]).toUTCString()),new Date(Ce.headers.get("Expires")).getTime()-xe<42e4||function(Re,Ze){if(Pt===void 0)try{new Response(new ReadableStream),Pt=!0}catch{Pt=!1}Pt?Ze(Re.body):Re.blob().then(Ze)}(le,Re=>{const Ze=new Response(Re,Ce);Wt(),Ye&&Ye.then(Ne=>Ne.put(function(ct){const vt=ct.indexOf("?");return vt<0?ct:ct.slice(0,vt)}(ae.url),Ze)).catch(Ne=>De(Ne.message))}))}(c,$,G),m=!0,t(null,q,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(q=>{y||t(new Error(q.message))})})(F,null,z):F.blob().then(O=>t(new Fn(F.status,F.statusText,r.url,O)))).catch(F=>{F.code!==20&&t(new Error(F.message))})})(),{cancel:()=>{y=!0,m||o.abort()}}}const Tr=function(r,t){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){if(We()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,t);if(!We()){const c=r.url.substring(0,r.url.indexOf("://"));return(Oe.REGISTERED_PROTOCOLS[c]||ao)(r,t)}}if(!(/^file:/.test(o=r.url)||/^file:/.test(Er())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ao(r,t);if(We()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,t,void 0,!0)}var o;return function(c,m){const y=new XMLHttpRequest;y.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const x in c.headers)y.setRequestHeader(x,c.headers[x]);return c.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=c.credentials==="include",y.onerror=()=>{m(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let x=y.response;if(c.type==="json")try{x=JSON.parse(y.response)}catch(E){return m(E)}m(null,x,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else{const x=new Blob([y.response],{type:y.getResponseHeader("Content-Type")});m(new Fn(y.status,y.statusText,c.url,x))}},y.send(c.body),{cancel:()=>y.abort()}}(r,t)},ai=function(r,t){return Tr(ye(r,{type:"arrayBuffer"}),t)};function Pr(r){const t=window.document.createElement("a");return t.href=r,t.protocol===window.document.location.protocol&&t.host===window.document.location.host}const Ui="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ti,Vi;Ti=[],Vi=0;const Po=function(r,t){if(At.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Vi>=Oe.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:r,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Ti.push(y),y}Vi++;let o=!1;const c=()=>{if(!o)for(o=!0,Vi--;Ti.length&&Vi<Oe.MAX_PARALLEL_IMAGE_REQUESTS;){const y=Ti.shift(),{requestParameters:x,callback:E,cancelled:k}=y;k||(y.cancel=Po(x,E).cancel)}},m=ai(r,(y,x,E,k)=>{c(),y?t(y):x&&function(z,F){typeof createImageBitmap=="function"?function(O,$){const G=new Blob([new Uint8Array(O)],{type:"image/png"});createImageBitmap(G).then(q=>{$(null,q)}).catch(q=>{$(new Error(`Could not load image because of ${q.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(z,F):function(O,$){const G=new Image;G.onload=()=>{$(null,G),URL.revokeObjectURL(G.src),G.onload=null,window.requestAnimationFrame(()=>{G.src=Ui})},G.onerror=()=>$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const q=new Blob([new Uint8Array(O)],{type:"image/png"});G.src=O.byteLength?URL.createObjectURL(q):Ui}(z,F)}(x,(z,F)=>{z!=null?t(z):F!=null&&t(null,F,{cacheControl:E,expires:k})})});return{cancel:()=>{m.cancel(),c()}}};function Ht(r,t,o){o[r]&&o[r].indexOf(t)!==-1||(o[r]=o[r]||[],o[r].push(t))}function nt(r,t,o){if(o&&o[r]){const c=o[r].indexOf(t);c!==-1&&o[r].splice(c,1)}}class St{constructor(t,o={}){ye(this,o),this.type=t}}class mn extends St{constructor(t,o={}){super("error",ye({error:t},o))}}class Rn{on(t,o){return this._listeners=this._listeners||{},Ht(t,o,this._listeners),this}off(t,o){return nt(t,o,this._listeners),nt(t,o,this._oneTimeListeners),this}once(t,o){return this._oneTimeListeners=this._oneTimeListeners||{},Ht(t,o,this._oneTimeListeners),this}fire(t,o){typeof t=="string"&&(t=new St(t,o||{}));const c=t.type;if(this.listens(c)){t.target=this;const m=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const E of m)E.call(this,t);const y=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const E of y)nt(c,E,this._oneTimeListeners),E.call(this,t);const x=this._eventedParent;x&&(ye(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(t))}else t instanceof mn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var Pe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Je{constructor(t,o,c,m){this.message=(t?`${t}: `:"")+c,m&&(this.identifier=m),o!=null&&o.__line__&&(this.line=o.__line__)}}function Mi(r){const t=r.value;return t?[new Je(r.key,t,"constants have been deprecated as of v8")]:[]}function $i(r,...t){for(const o of t)for(const c in o)r[c]=o[c];return r}function ln(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function wi(r){if(Array.isArray(r))return r.map(wi);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const o in r)t[o]=wi(r[o]);return t}return ln(r)}class Gn extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class cr{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[c,m]of o)this.bindings[c]=m}concat(t){return new cr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const gn={kind:"null"},He={kind:"number"},Rt={kind:"string"},Lt={kind:"boolean"},Pi={kind:"color"},hr={kind:"object"},Bt={kind:"value"},Ko={kind:"collator"},kr={kind:"formatted"},lo={kind:"resolvedImage"};function ei(r,t){return{kind:"array",itemType:r,N:t}}function wn(r){if(r.kind==="array"){const t=wn(r.itemType);return typeof r.N=="number"?`array<${t}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${t}>`}return r.kind}const dr=[gn,He,Rt,Lt,Pi,kr,hr,ei(Bt),lo];function uo(r,t){if(t.kind==="error")return null;if(r.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!uo(r.itemType,t.itemType))&&(typeof r.N!="number"||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if(r.kind==="value"){for(const o of dr)if(!uo(o,t))return null}}return`Expected ${wn(r)} but found ${wn(t)} instead.`}function li(r,t){return t.some(o=>o.kind===r.kind)}function Cr(r,t){return t.some(o=>o==="null"?r===null:o==="array"?Array.isArray(r):o==="object"?r&&!Array.isArray(r)&&typeof r=="object":o===typeof r)}var ti,wt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Yo(r){return(r=Math.round(r))<0?0:r>255?255:r}function Jo(r){return Yo(r[r.length-1]==="%"?parseFloat(r)/100*255:parseInt(r))}function J(r){return(t=r[r.length-1]==="%"?parseFloat(r)/100:parseFloat(r))<0?0:t>1?1:t;var t}function M(r,t,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?r+(t-r)*o*6:2*o<1?t:3*o<2?r+(t-r)*(2/3-o)*6:r}try{ti={}.parseCSSColor=function(r){var t,o=r.replace(/ /g,"").toLowerCase();if(o in wt)return wt[o].slice();if(o[0]==="#")return o.length===4?(t=parseInt(o.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:o.length===7&&(t=parseInt(o.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var c=o.indexOf("("),m=o.indexOf(")");if(c!==-1&&m+1===o.length){var y=o.substr(0,c),x=o.substr(c+1,m-(c+1)).split(","),E=1;switch(y){case"rgba":if(x.length!==4)return null;E=J(x.pop());case"rgb":return x.length!==3?null:[Jo(x[0]),Jo(x[1]),Jo(x[2]),E];case"hsla":if(x.length!==4)return null;E=J(x.pop());case"hsl":if(x.length!==3)return null;var k=(parseFloat(x[0])%360+360)%360/360,z=J(x[1]),F=J(x[2]),O=F<=.5?F*(z+1):F+z-F*z,$=2*F-O;return[Yo(255*M($,O,k+1/3)),Yo(255*M($,O,k)),Yo(255*M($,O,k-1/3)),E];default:return null}}return null}}catch{}class B{constructor(t,o,c,m=1){this.r=t,this.g=o,this.b=c,this.a=m}static parse(t){if(!t)return;if(t instanceof B)return t;if(typeof t!="string")return;const o=ti(t);return o?new B(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[t,o,c,m]=this.toArray();return`rgba(${Math.round(t)},${Math.round(o)},${Math.round(c)},${m})`}toArray(){const{r:t,g:o,b:c,a:m}=this;return m===0?[0,0,0,0]:[255*t/m,255*o/m,255*c/m,m]}}B.black=new B(0,0,0,1),B.white=new B(1,1,1,1),B.transparent=new B(0,0,0,0),B.red=new B(1,0,0,1);class H{constructor(t,o,c){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Q{constructor(t,o,c,m,y){this.text=t,this.image=o,this.scale=c,this.fontStack=m,this.textColor=y}}class ne{constructor(t){this.sections=t}static fromString(t){return new ne([new Q(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ne?t:ne.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const o of this.sections){if(o.image){t.push(["image",o.image.name]);continue}t.push(o.text);const c={};o.fontStack&&(c["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(c["font-scale"]=o.scale),o.textColor&&(c["text-color"]=["rgba"].concat(o.textColor.toArray())),t.push(c)}return t}}class pe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new pe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function ce(r,t,o,c){return typeof r=="number"&&r>=0&&r<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[r,t,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[r,t,o,c]:[r,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function he(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof B||r instanceof H||r instanceof ne||r instanceof pe)return!0;if(Array.isArray(r)){for(const t of r)if(!he(t))return!1;return!0}if(typeof r=="object"){for(const t in r)if(!he(r[t]))return!1;return!0}return!1}function fe(r){if(r===null)return gn;if(typeof r=="string")return Rt;if(typeof r=="boolean")return Lt;if(typeof r=="number")return He;if(r instanceof B)return Pi;if(r instanceof H)return Ko;if(r instanceof ne)return kr;if(r instanceof pe)return lo;if(Array.isArray(r)){const t=r.length;let o;for(const c of r){const m=fe(c);if(o){if(o===m)continue;o=Bt;break}o=m}return ei(o||Bt,t)}return hr}function Ae(r){const t=typeof r;return r===null?"":t==="string"||t==="number"||t==="boolean"?String(r):r instanceof B||r instanceof ne||r instanceof pe?r.toString():JSON.stringify(r)}class Ve{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!he(t[1]))return o.error("invalid value");const c=t[1];let m=fe(c);const y=o.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new Ve(m,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof B?["rgba"].concat(this.value.toArray()):this.value instanceof ne?this.value.serialize():this.value}}class ke{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const dt={string:Rt,number:He,boolean:Lt,object:hr};class it{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let c,m=1;const y=t[0];if(y==="array"){let E,k;if(t.length>2){const z=t[1];if(typeof z!="string"||!(z in dt)||z==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);E=dt[z],m++}else E=Bt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);k=t[2],m++}c=ei(E,k)}else c=dt[y];const x=[];for(;m<t.length;m++){const E=o.parse(t[m],m,Bt);if(!E)return null;x.push(E)}return new it(c,x)}evaluate(t){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(t);if(!uo(this.type,fe(c)))return c;if(o===this.args.length-1)throw new ke(`Expected value to be of type ${wn(this.type)}, but found ${wn(fe(c))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,o=[t.kind];if(t.kind==="array"){const c=t.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){o.push(c.kind);const m=t.N;(typeof m=="number"||this.args.length>1)&&o.push(m)}}return o.concat(this.args.map(c=>c.serialize()))}}class mt{constructor(t){this.type=kr,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[1];if(!Array.isArray(c)&&typeof c=="object")return o.error("First argument must be an image or text section.");const m=[];let y=!1;for(let x=1;x<=t.length-1;++x){const E=t[x];if(y&&typeof E=="object"&&!Array.isArray(E)){y=!1;let k=null;if(E["font-scale"]&&(k=o.parse(E["font-scale"],1,He),!k))return null;let z=null;if(E["text-font"]&&(z=o.parse(E["text-font"],1,ei(Rt)),!z))return null;let F=null;if(E["text-color"]&&(F=o.parse(E["text-color"],1,Pi),!F))return null;const O=m[m.length-1];O.scale=k,O.font=z,O.textColor=F}else{const k=o.parse(t[x],1,Bt);if(!k)return null;const z=k.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:k,scale:null,font:null,textColor:null})}}return new mt(m)}evaluate(t){return new ne(this.sections.map(o=>{const c=o.content.evaluate(t);return fe(c)===lo?new Q("",c,null,null,null):new Q(Ae(c),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const o of this.sections){t.push(o.content.serialize());const c={};o.scale&&(c["font-scale"]=o.scale.serialize()),o.font&&(c["text-font"]=o.font.serialize()),o.textColor&&(c["text-color"]=o.textColor.serialize()),t.push(c)}return t}}class Et{constructor(t){this.type=lo,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const c=o.parse(t[1],1,Rt);return c?new Et(c):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),c=pe.fromString(o);return c&&t.availableImages&&(c.available=t.availableImages.indexOf(o)>-1),c}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const sn={"to-boolean":Lt,"to-color":Pi,"to-number":He,"to-string":Rt};class Gt{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const c=t[0];if((c==="to-boolean"||c==="to-string")&&t.length!==2)return o.error("Expected one argument.");const m=sn[c],y=[];for(let x=1;x<t.length;x++){const E=o.parse(t[x],x,Bt);if(!E)return null;y.push(E)}return new Gt(m,y)}evaluate(t){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(t));if(this.type.kind==="color"){let o,c;for(const m of this.args){if(o=m.evaluate(t),c=null,o instanceof B)return o;if(typeof o=="string"){const y=t.parseColor(o);if(y)return y}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:ce(o[0],o[1],o[2],o[3]),!c))return new B(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ke(c||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const c of this.args){if(o=c.evaluate(t),o===null)return 0;const m=Number(o);if(!isNaN(m))return m}throw new ke(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?ne.fromString(Ae(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?pe.fromString(Ae(this.args[0].evaluate(t))):Ae(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new mt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Et(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(o=>{t.push(o.serialize())}),t}}const Nt=["Unknown","Point","LineString","Polygon"];class Ft{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Nt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=B.parse(t)),o}}class Dt{constructor(t,o,c,m){this.name=t,this.type=o,this._evaluate=c,this.args=m}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,o){const c=t[0],m=Dt.definitions[c];if(!m)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=x.filter(([z])=>!Array.isArray(z)||z.length===t.length-1);let k=null;for(const[z,F]of E){k=new Ps(o.registry,o.path,null,o.scope);const O=[];let $=!1;for(let G=1;G<t.length;G++){const q=t[G],ae=Array.isArray(z)?z[G-1]:z.type,le=k.parse(q,1+O.length,ae);if(!le){$=!0;break}O.push(le)}if(!$)if(Array.isArray(z)&&z.length!==O.length)k.error(`Expected ${z.length} arguments, but found ${O.length} instead.`);else{for(let G=0;G<O.length;G++){const q=Array.isArray(z)?z[G]:z.type,ae=O[G];k.concat(G+1).checkSubtype(q,ae.type)}if(k.errors.length===0)return new Dt(c,y,F,O)}}if(E.length===1)o.errors.push(...k.errors);else{const z=(E.length?E:x).map(([O])=>{return $=O,Array.isArray($)?`(${$.map(wn).join(", ")})`:`(${wn($.type)}...)`;var $}).join(" | "),F=[];for(let O=1;O<t.length;O++){const $=o.parse(t[O],1+F.length);if(!$)return null;F.push(wn($.type))}o.error(`Expected arguments of type ${z}, but found (${F.join(", ")}) instead.`)}return null}static register(t,o){Dt.definitions=o;for(const c in o)t[c]=Dt}}class An{constructor(t,o,c){this.type=Ko,this.locale=c,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const c=t[1];if(typeof c!="object"||Array.isArray(c))return o.error("Collator options argument must be an object.");const m=o.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Lt);if(!m)return null;const y=o.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Lt);if(!y)return null;let x=null;return c.locale&&(x=o.parse(c.locale,1,Rt),!x)?null:new An(m,y,x)}evaluate(t){return new H(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const kt=8192;function Xt(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function ni(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function ko(r,t){const o=(180+r[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,t.z);return[Math.round(o*m*kt),Math.round(c*m*kt)]}function Co(r,t,o){const c=r[0]-t[0],m=r[1]-t[1],y=r[0]-o[0],x=r[1]-o[1];return c*x-y*m==0&&c*y<=0&&m*x<=0}function _n(r,t){let o=!1;for(let x=0,E=t.length;x<E;x++){const k=t[x];for(let z=0,F=k.length;z<F-1;z++){if(Co(r,k[z],k[z+1]))return!1;(m=k[z])[1]>(c=r)[1]!=(y=k[z+1])[1]>c[1]&&c[0]<(y[0]-m[0])*(c[1]-m[1])/(y[1]-m[1])+m[0]&&(o=!o)}}var c,m,y;return o}function Kt(r,t){for(let o=0;o<t.length;o++)if(_n(r,t[o]))return!0;return!1}function On(r,t,o,c){const m=c[0]-o[0],y=c[1]-o[1],x=(r[0]-o[0])*y-m*(r[1]-o[1]),E=(t[0]-o[0])*y-m*(t[1]-o[1]);return x>0&&E<0||x<0&&E>0}function Il(r,t,o){for(const z of o)for(let F=0;F<z.length-1;++F)if((E=[(x=z[F+1])[0]-(y=z[F])[0],x[1]-y[1]])[0]*(k=[(m=t)[0]-(c=r)[0],m[1]-c[1]])[1]-E[1]*k[0]!=0&&On(c,m,y,x)&&On(y,x,c,m))return!0;var c,m,y,x,E,k;return!1}function Ss(r,t){for(let o=0;o<r.length;++o)if(!_n(r[o],t))return!1;for(let o=0;o<r.length-1;++o)if(Il(r[o],r[o+1],t))return!1;return!0}function Ki(r,t){for(let o=0;o<t.length;o++)if(Ss(r,t[o]))return!0;return!1}function zl(r,t,o){const c=[];for(let m=0;m<r.length;m++){const y=[];for(let x=0;x<r[m].length;x++){const E=ko(r[m][x],o);Xt(t,E),y.push(E)}c.push(y)}return c}function Es(r,t,o){const c=[];for(let m=0;m<r.length;m++){const y=zl(r[m],t,o);c.push(y)}return c}function co(r,t,o,c){if(r[0]<o[0]||r[0]>o[2]){const m=.5*c;let y=r[0]-o[0]>m?-c:o[0]-r[0]>m?c:0;y===0&&(y=r[0]-o[2]>m?-c:o[2]-r[0]>m?c:0),r[0]+=y}Xt(t,r)}function Xn(r,t,o,c){const m=Math.pow(2,c.z)*kt,y=[c.x*kt,c.y*kt],x=[];for(const E of r)for(const k of E){const z=[k.x+y[0],k.y+y[1]];co(z,t,o,m),x.push(z)}return x}function Io(r,t,o,c){const m=Math.pow(2,c.z)*kt,y=[c.x*kt,c.y*kt],x=[];for(const k of r){const z=[];for(const F of k){const O=[F.x+y[0],F.y+y[1]];Xt(t,O),z.push(O)}x.push(z)}if(t[2]-t[0]<=m/2){(E=t)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const k of x)for(const z of k)co(z,t,o,m)}var E;return x}class Ir{constructor(t,o){this.type=Lt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(he(t[1])){const c=t[1];if(c.type==="FeatureCollection")for(let m=0;m<c.features.length;++m){const y=c.features[m].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Ir(c,c.features[m].geometry)}else if(c.type==="Feature"){const m=c.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ir(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new Ir(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,c){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(c.type==="Polygon"){const E=zl(c.coordinates,y,x),k=Xn(o.geometry(),m,y,x);if(!ni(m,y))return!1;for(const z of k)if(!_n(z,E))return!1}if(c.type==="MultiPolygon"){const E=Es(c.coordinates,y,x),k=Xn(o.geometry(),m,y,x);if(!ni(m,y))return!1;for(const z of k)if(!Kt(z,E))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,c){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(c.type==="Polygon"){const E=zl(c.coordinates,y,x),k=Io(o.geometry(),m,y,x);if(!ni(m,y))return!1;for(const z of k)if(!Ss(z,E))return!1}if(c.type==="MultiPolygon"){const E=Es(c.coordinates,y,x),k=Io(o.geometry(),m,y,x);if(!ni(m,y))return!1;for(const z of k)if(!Ki(z,E))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function zo(r){if(r instanceof Dt&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Ir)return!1;let t=!0;return r.eachChild(o=>{t&&!zo(o)&&(t=!1)}),t}function Ao(r){if(r instanceof Dt&&r.name==="feature-state")return!1;let t=!0;return r.eachChild(o=>{t&&!Ao(o)&&(t=!1)}),t}function ho(r,t){if(r instanceof Dt&&t.indexOf(r.name)>=0)return!1;let o=!0;return r.eachChild(c=>{o&&!ho(c,t)&&(o=!1)}),o}class Ts{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const c=t[1];return o.scope.has(c)?new Ts(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ps{constructor(t,o=[],c,m=new cr,y=[]){this.registry=t,this.path=o,this.key=o.map(x=>`[${x}]`).join(""),this.scope=m,this.errors=y,this.expectedType=c}parse(t,o,c,m,y={}){return o?this.concat(o,c,m)._parse(t,y):this._parse(t,y)}_parse(t,o){function c(m,y,x){return x==="assert"?new it(y,[m]):x==="coerce"?new Gt(y,[m]):m}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=t[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let x=y.parse(t,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,k=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||k.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string"){if(this.checkSubtype(E,k))return null}else x=c(x,E,o.typeAnnotation||"coerce");else x=c(x,E,o.typeAnnotation||"assert")}if(!(x instanceof Ve)&&x.type.kind!=="resolvedImage"&&Mo(x)){const E=new Ft;try{x=new Ve(x.type,x.evaluate(E))}catch(k){return this.error(k.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,c){const m=typeof t=="number"?this.path.concat(t):this.path,y=c?this.scope.concat(c):this.scope;return new Ps(this.registry,m,o||null,y,this.errors)}error(t,...o){const c=`${this.key}${o.map(m=>`[${m}]`).join("")}`;this.errors.push(new Gn(c,t))}checkSubtype(t,o){const c=uo(t,o);return c&&this.error(c),c}}function Mo(r){if(r instanceof Ts)return Mo(r.boundExpression);if(r instanceof Dt&&r.name==="error"||r instanceof An||r instanceof Ir)return!1;const t=r instanceof Gt||r instanceof it;let o=!0;return r.eachChild(c=>{o=t?o&&Mo(c):o&&c instanceof Ve}),!!o&&zo(r)&&ho(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ks(r,t){const o=r.length-1;let c,m,y=0,x=o,E=0;for(;y<=x;)if(E=Math.floor((y+x)/2),c=r[E],m=r[E+1],c<=t){if(E===o||t<m)return E;y=E+1}else{if(!(c>t))throw new ke("Input is not a number.");x=E-1}return 0}class Qo{constructor(t,o,c){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[m,y]of c)this.labels.push(m),this.outputs.push(y)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(t[1],1,He);if(!c)return null;const m=[];let y=null;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);for(let x=1;x<t.length;x+=2){const E=x===1?-1/0:t[x],k=t[x+1],z=x,F=x+1;if(typeof E!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(m.length&&m[m.length-1][0]>=E)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const O=o.parse(k,F,y);if(!O)return null;y=y||O.type,m.push([E,O])}return new Qo(y,c,m)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const m=this.input.evaluate(t);if(m<=o[0])return c[0].evaluate(t);const y=o.length;return m>=o[y-1]?c[y-1].evaluate(t):c[ks(o,m)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&t.push(this.labels[o]),t.push(this.outputs[o].serialize());return t}}function Nn(r,t,o){return r*(1-o)+t*o}var Cs=Object.freeze({__proto__:null,number:Nn,color:function(r,t,o){return new B(Nn(r.r,t.r,o),Nn(r.g,t.g,o),Nn(r.b,t.b,o),Nn(r.a,t.a,o))},array:function(r,t,o){return r.map((c,m)=>Nn(c,t[m],o))}});const Qs=.95047,xu=1.08883,Vt=4/29,Yi=6/29,bn=3*Yi*Yi,wu=Math.PI/180,Al=180/Math.PI;function ea(r){return r>.008856451679035631?Math.pow(r,1/3):r/bn+Vt}function ta(r){return r>Yi?r*r*r:bn*(r-Vt)}function po(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function na(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Is(r){const t=na(r.r),o=na(r.g),c=na(r.b),m=ea((.4124564*t+.3575761*o+.1804375*c)/Qs),y=ea((.2126729*t+.7151522*o+.072175*c)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-ea((.0193339*t+.119192*o+.9503041*c)/xu)),alpha:r.a}}function Mt(r){let t=(r.l+16)/116,o=isNaN(r.a)?t:t+r.a/500,c=isNaN(r.b)?t:t-r.b/200;return t=1*ta(t),o=Qs*ta(o),c=xu*ta(c),new B(po(3.2404542*o-1.5371385*t-.4985314*c),po(-.969266*o+1.8760108*t+.041556*c),po(.0556434*o-.2040259*t+1.0572252*c),r.alpha)}function es(r,t,o){const c=t-r;return r+o*(c>180||c<-180?c-360*Math.round(c/360):c)}const zs={forward:Is,reverse:Mt,interpolate:function(r,t,o){return{l:Nn(r.l,t.l,o),a:Nn(r.a,t.a,o),b:Nn(r.b,t.b,o),alpha:Nn(r.alpha,t.alpha,o)}}},ia={forward:function(r){const{l:t,a:o,b:c}=Is(r),m=Math.atan2(c,o)*Al;return{h:m<0?m+360:m,c:Math.sqrt(o*o+c*c),l:t,alpha:r.a}},reverse:function(r){const t=r.h*wu,o=r.c;return Mt({l:r.l,a:Math.cos(t)*o,b:Math.sin(t)*o,alpha:r.alpha})},interpolate:function(r,t,o){return{h:es(r.h,t.h,o),c:Nn(r.c,t.c,o),l:Nn(r.l,t.l,o),alpha:Nn(r.alpha,t.alpha,o)}}};var Ml=Object.freeze({__proto__:null,lab:zs,hcl:ia});class Li{constructor(t,o,c,m,y){this.type=t,this.operator=o,this.interpolation=c,this.input=m,this.labels=[],this.outputs=[];for(const[x,E]of y)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(t,o,c,m){let y=0;if(t.name==="exponential")y=Ll(o,t.base,c,m);else if(t.name==="linear")y=Ll(o,1,c,m);else if(t.name==="cubic-bezier"){const x=t.controlPoints;y=new A(x[0],x[1],x[2],x[3]).solve(Ll(o,1,c,m))}return y}static parse(t,o){let[c,m,y,...x]=t;if(!Array.isArray(m)||m.length===0)return o.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const z=m[1];if(typeof z!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:z}}else{if(m[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const z=m.slice(1);if(z.length!==4||z.some(F=>typeof F!="number"||F<0||F>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:z}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(y=o.parse(y,2,He),!y)return null;const E=[];let k=null;c==="interpolate-hcl"||c==="interpolate-lab"?k=Pi:o.expectedType&&o.expectedType.kind!=="value"&&(k=o.expectedType);for(let z=0;z<x.length;z+=2){const F=x[z],O=x[z+1],$=z+3,G=z+4;if(typeof F!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(E.length&&E[E.length-1][0]>=F)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const q=o.parse(O,G,k);if(!q)return null;k=k||q.type,E.push([F,q])}return k.kind==="number"||k.kind==="color"||k.kind==="array"&&k.itemType.kind==="number"&&typeof k.N=="number"?new Li(k,c,m,y,E):o.error(`Type ${wn(k)} is not interpolatable.`)}evaluate(t){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(t);const m=this.input.evaluate(t);if(m<=o[0])return c[0].evaluate(t);const y=o.length;if(m>=o[y-1])return c[y-1].evaluate(t);const x=ks(o,m),E=Li.interpolationFactor(this.interpolation,m,o[x],o[x+1]),k=c[x].evaluate(t),z=c[x+1].evaluate(t);return this.operator==="interpolate"?Cs[this.type.kind.toLowerCase()](k,z,E):this.operator==="interpolate-hcl"?ia.reverse(ia.interpolate(ia.forward(k),ia.forward(z),E)):zs.reverse(zs.interpolate(zs.forward(k),zs.forward(z),E))}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,t,this.input.serialize()];for(let c=0;c<this.labels.length;c++)o.push(this.labels[c],this.outputs[c].serialize());return o}}function Ll(r,t,o,c){const m=c-o,y=r-o;return m===0?0:t===1?y/m:(Math.pow(t,y)-1)/(Math.pow(t,m)-1)}class ra{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let c=null;const m=o.expectedType;m&&m.kind!=="value"&&(c=m);const y=[];for(const E of t.slice(1)){const k=o.parse(E,1+y.length,c,void 0,{typeAnnotation:"omit"});if(!k)return null;c=c||k.type,y.push(k)}const x=m&&y.some(E=>uo(m,E.type));return new ra(x?Bt:c,y)}evaluate(t){let o,c=null,m=0;for(const y of this.args)if(m++,c=y.evaluate(t),c&&c instanceof pe&&!c.available&&(o||(o=c.name),c=null,m===this.args.length&&(c=o)),c!==null)break;return c}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class nn{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const c=[];for(let y=1;y<t.length-1;y+=2){const x=t[y];if(typeof x!="string")return o.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return o.error("Variable names must contain only alphanumeric characters or '_'.",y);const E=o.parse(t[y+1],y+1);if(!E)return null;c.push([x,E])}const m=o.parse(t[t.length-1],t.length-1,o.expectedType,c);return m?new nn(c,m):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[o,c]of this.bindings)t.push(o,c.serialize());return t.push(this.result.serialize()),t}}class Dl{constructor(t,o,c){this.type=t,this.index=o,this.input=c}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,He),m=o.parse(t[2],2,ei(o.expectedType||Bt));return c&&m?new Dl(m.type.itemType,c,m):null}evaluate(t){const o=this.index.evaluate(t),c=this.input.evaluate(t);if(o<0)throw new ke(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new ke(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new ke(`Array index must be an integer, but found ${o} instead.`);return c[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ji{constructor(t,o){this.type=Lt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Bt),m=o.parse(t[2],2,Bt);return c&&m?li(c.type,[Lt,Rt,He,gn,Bt])?new Ji(c,m):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${wn(c.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!c)return!1;if(!Cr(o,["boolean","string","number","null"]))throw new ke(`Expected first argument to be of type boolean, string, number or null, but found ${wn(fe(o))} instead.`);if(!Cr(c,["string","array"]))throw new ke(`Expected second argument to be of type array or string, but found ${wn(fe(c))} instead.`);return c.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Lo{constructor(t,o,c){this.type=He,this.needle=t,this.haystack=o,this.fromIndex=c}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Bt),m=o.parse(t[2],2,Bt);if(!c||!m)return null;if(!li(c.type,[Lt,Rt,He,gn,Bt]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${wn(c.type)} instead`);if(t.length===4){const y=o.parse(t[3],3,He);return y?new Lo(c,m,y):null}return new Lo(c,m)}evaluate(t){const o=this.needle.evaluate(t),c=this.haystack.evaluate(t);if(!Cr(o,["boolean","string","number","null"]))throw new ke(`Expected first argument to be of type boolean, string, number or null, but found ${wn(fe(o))} instead.`);if(!Cr(c,["string","array"]))throw new ke(`Expected second argument to be of type array or string, but found ${wn(fe(c))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(t);return c.indexOf(o,m)}return c.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Va{constructor(t,o,c,m,y,x){this.inputType=t,this.type=o,this.input=c,this.cases=m,this.outputs=y,this.otherwise=x}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let c,m;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);const y={},x=[];for(let z=2;z<t.length-1;z+=2){let F=t[z];const O=t[z+1];Array.isArray(F)||(F=[F]);const $=o.concat(z);if(F.length===0)return $.error("Expected at least one branch label.");for(const q of F){if(typeof q!="number"&&typeof q!="string")return $.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return $.error("Numeric branch labels must be integer values.");if(c){if($.checkSubtype(c,fe(q)))return null}else c=fe(q);if(y[String(q)]!==void 0)return $.error("Branch labels must be unique.");y[String(q)]=x.length}const G=o.parse(O,z,m);if(!G)return null;m=m||G.type,x.push(G)}const E=o.parse(t[1],1,Bt);if(!E)return null;const k=o.parse(t[t.length-1],t.length-1,m);return k?E.type.kind!=="value"&&o.concat(1).checkSubtype(c,E.type)?null:new Va(c,m,E,y,x,k):null}evaluate(t){const o=this.input.evaluate(t);return(fe(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),c=[],m={};for(const x of o){const E=m[this.cases[x]];E===void 0?(m[this.cases[x]]=c.length,c.push([this.cases[x],[x]])):c[E][1].push(x)}const y=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,E]of c)t.push(E.length===1?y(E[0]):E.map(y)),t.push(this.outputs[x].serialize());return t.push(this.otherwise.serialize()),t}}class Rl{constructor(t,o,c){this.type=t,this.branches=o,this.otherwise=c}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&o.expectedType.kind!=="value"&&(c=o.expectedType);const m=[];for(let x=1;x<t.length-1;x+=2){const E=o.parse(t[x],x,Lt);if(!E)return null;const k=o.parse(t[x+1],x+1,c);if(!k)return null;m.push([E,k]),c=c||k.type}const y=o.parse(t[t.length-1],t.length-1,c);return y?new Rl(c,m,y):null}evaluate(t){for(const[o,c]of this.branches)if(o.evaluate(t))return c.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,c]of this.branches)t(o),t(c);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(o=>{t.push(o.serialize())}),t}}class As{constructor(t,o,c,m){this.type=t,this.input=o,this.beginIndex=c,this.endIndex=m}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const c=o.parse(t[1],1,Bt),m=o.parse(t[2],2,He);if(!c||!m)return null;if(!li(c.type,[ei(Bt),Rt,Bt]))return o.error(`Expected first argument to be of type array or string, but found ${wn(c.type)} instead`);if(t.length===4){const y=o.parse(t[3],3,He);return y?new As(c.type,c,m,y):null}return new As(c.type,c,m)}evaluate(t){const o=this.input.evaluate(t),c=this.beginIndex.evaluate(t);if(!Cr(o,["string","array"]))throw new ke(`Expected first argument to be of type array or string, but found ${wn(fe(o))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(t);return o.slice(c,m)}return o.slice(c)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function bu(r,t){return r==="=="||r==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Bl(r,t,o,c){return c.compare(t,o)===0}function Ms(r,t,o){const c=r!=="=="&&r!=="!=";return class Lw{constructor(y,x,E){this.type=Lt,this.lhs=y,this.rhs=x,this.collator=E,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const E=y[0];let k=x.parse(y[1],1,Bt);if(!k)return null;if(!bu(E,k.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${wn(k.type)}'.`);let z=x.parse(y[2],2,Bt);if(!z)return null;if(!bu(E,z.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${wn(z.type)}'.`);if(k.type.kind!==z.type.kind&&k.type.kind!=="value"&&z.type.kind!=="value")return x.error(`Cannot compare types '${wn(k.type)}' and '${wn(z.type)}'.`);c&&(k.type.kind==="value"&&z.type.kind!=="value"?k=new it(z.type,[k]):k.type.kind!=="value"&&z.type.kind==="value"&&(z=new it(k.type,[z])));let F=null;if(y.length===4){if(k.type.kind!=="string"&&z.type.kind!=="string"&&k.type.kind!=="value"&&z.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(F=x.parse(y[3],3,Ko),!F)return null}return new Lw(k,z,F)}evaluate(y){const x=this.lhs.evaluate(y),E=this.rhs.evaluate(y);if(c&&this.hasUntypedArgument){const k=fe(x),z=fe(E);if(k.kind!==z.kind||k.kind!=="string"&&k.kind!=="number")throw new ke(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${k.kind}, ${z.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const k=fe(x),z=fe(E);if(k.kind!=="string"||z.kind!=="string")return t(y,x,E)}return this.collator?o(y,x,E,this.collator.evaluate(y)):t(y,x,E)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[r];return this.eachChild(x=>{y.push(x.serialize())}),y}}}const zc=Ms("==",function(r,t,o){return t===o},Bl),Fl=Ms("!=",function(r,t,o){return t!==o},function(r,t,o,c){return!Bl(0,t,o,c)}),Ac=Ms("<",function(r,t,o){return t<o},function(r,t,o,c){return c.compare(t,o)<0}),Wr=Ms(">",function(r,t,o){return t>o},function(r,t,o,c){return c.compare(t,o)>0}),Mc=Ms("<=",function(r,t,o){return t<=o},function(r,t,o,c){return c.compare(t,o)<=0}),Su=Ms(">=",function(r,t,o){return t>=o},function(r,t,o,c){return c.compare(t,o)>=0});class qr{constructor(t,o,c,m,y){this.type=Rt,this.number=t,this.locale=o,this.currency=c,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const c=o.parse(t[1],1,He);if(!c)return null;const m=t[2];if(typeof m!="object"||Array.isArray(m))return o.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=o.parse(m.locale,1,Rt),!y))return null;let x=null;if(m.currency&&(x=o.parse(m.currency,1,Rt),!x))return null;let E=null;if(m["min-fraction-digits"]&&(E=o.parse(m["min-fraction-digits"],1,He),!E))return null;let k=null;return m["max-fraction-digits"]&&(k=o.parse(m["max-fraction-digits"],1,He),!k)?null:new qr(c,y,x,E,k)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class $a{constructor(t){this.type=He,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const c=o.parse(t[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${wn(c.type)} instead.`):new $a(c):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new ke(`Expected value to be of type string or array, but found ${wn(fe(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(o=>{t.push(o.serialize())}),t}}const ts={"==":zc,"!=":Fl,">":Wr,"<":Ac,">=":Su,"<=":Mc,array:it,at:Dl,boolean:it,case:Rl,coalesce:ra,collator:An,format:mt,image:Et,in:Ji,"index-of":Lo,interpolate:Li,"interpolate-hcl":Li,"interpolate-lab":Li,length:$a,let:nn,literal:Ve,match:Va,number:it,"number-format":qr,object:it,slice:As,step:Qo,string:it,"to-boolean":Gt,"to-color":Gt,"to-number":Gt,"to-string":Gt,var:Ts,within:Ir};function Eu(r,[t,o,c,m]){t=t.evaluate(r),o=o.evaluate(r),c=c.evaluate(r);const y=m?m.evaluate(r):1,x=ce(t,o,c,y);if(x)throw new ke(x);return new B(t/255*y,o/255*y,c/255*y,y)}function Tu(r,t){return r in t}function oa(r,t){const o=t[r];return o===void 0?null:o}function ns(r){return{type:r}}function Ol(r){return{result:"success",value:r}}function Do(r){return{result:"error",value:r}}function fo(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Ro(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Nl(r){return!!r.expression&&r.expression.interpolated}function It(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function pr(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function un(r){return r}function Za(r,t){const o=t.type==="color",c=r.stops&&typeof r.stops[0][0]=="object",m=c||!(c||r.property!==void 0),y=r.type||(Nl(t)?"exponential":"interval");if(o&&((r=$i({},r)).stops&&(r.stops=r.stops.map(z=>[z[0],B.parse(z[1])])),r.default=B.parse(r.default?r.default:t.default)),r.colorSpace&&r.colorSpace!=="rgb"&&!Ml[r.colorSpace])throw new Error(`Unknown color space: ${r.colorSpace}`);let x,E,k;if(y==="exponential")x=sa;else if(y==="interval")x=Ls;else if(y==="categorical"){x=Wn,E=Object.create(null);for(const z of r.stops)E[z[0]]=z[1];k=typeof r.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);x=Lc}if(c){const z={},F=[];for(let G=0;G<r.stops.length;G++){const q=r.stops[G],ae=q[0].zoom;z[ae]===void 0&&(z[ae]={zoom:ae,type:r.type,property:r.property,default:r.default,stops:[]},F.push(ae)),z[ae].stops.push([q[0].value,q[1]])}const O=[];for(const G of F)O.push([z[G].zoom,Za(z[G],t)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Li.interpolationFactor.bind(void 0,$),zoomStops:O.map(G=>G[0]),evaluate:({zoom:G},q)=>sa({stops:O,base:r.base},t,G).evaluate(G,q)}}if(m){const z=y==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Li.interpolationFactor.bind(void 0,z),zoomStops:r.stops.map(F=>F[0]),evaluate:({zoom:F})=>x(r,t,F,E,k)}}return{kind:"source",evaluate(z,F){const O=F&&F.properties?F.properties[r.property]:void 0;return O===void 0?kn(r.default,t.default):x(r,t,O,E,k)}}}function kn(r,t,o){return r!==void 0?r:t!==void 0?t:o!==void 0?o:void 0}function Wn(r,t,o,c,m){return kn(typeof o===m?c[o]:void 0,r.default,t.default)}function Ls(r,t,o){if(It(o)!=="number")return kn(r.default,t.default);const c=r.stops.length;if(c===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[c-1][0])return r.stops[c-1][1];const m=ks(r.stops.map(y=>y[0]),o);return r.stops[m][1]}function sa(r,t,o){const c=r.base!==void 0?r.base:1;if(It(o)!=="number")return kn(r.default,t.default);const m=r.stops.length;if(m===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[m-1][0])return r.stops[m-1][1];const y=ks(r.stops.map(F=>F[0]),o),x=function(F,O,$,G){const q=G-$,ae=F-$;return q===0?0:O===1?ae/q:(Math.pow(O,ae)-1)/(Math.pow(O,q)-1)}(o,c,r.stops[y][0],r.stops[y+1][0]),E=r.stops[y][1],k=r.stops[y+1][1];let z=Cs[t.type]||un;if(r.colorSpace&&r.colorSpace!=="rgb"){const F=Ml[r.colorSpace];z=(O,$)=>F.reverse(F.interpolate(F.forward(O),F.forward($),x))}return typeof E.evaluate=="function"?{evaluate(...F){const O=E.evaluate.apply(void 0,F),$=k.evaluate.apply(void 0,F);if(O!==void 0&&$!==void 0)return z(O,$,x)}}:z(E,k,x)}function Lc(r,t,o){return t.type==="color"?o=B.parse(o):t.type==="formatted"?o=ne.fromString(o.toString()):t.type==="resolvedImage"?o=pe.fromString(o.toString()):It(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0),kn(o,r.default,t.default)}Dt.register(ts,{error:[{kind:"error"},[Rt],(r,[t])=>{throw new ke(t.evaluate(r))}],typeof:[Rt,[Bt],(r,[t])=>wn(fe(t.evaluate(r)))],"to-rgba":[ei(He,4),[Pi],(r,[t])=>t.evaluate(r).toArray()],rgb:[Pi,[He,He,He],Eu],rgba:[Pi,[He,He,He,He],Eu],has:{type:Lt,overloads:[[[Rt],(r,[t])=>Tu(t.evaluate(r),r.properties())],[[Rt,hr],(r,[t,o])=>Tu(t.evaluate(r),o.evaluate(r))]]},get:{type:Bt,overloads:[[[Rt],(r,[t])=>oa(t.evaluate(r),r.properties())],[[Rt,hr],(r,[t,o])=>oa(t.evaluate(r),o.evaluate(r))]]},"feature-state":[Bt,[Rt],(r,[t])=>oa(t.evaluate(r),r.featureState||{})],properties:[hr,[],r=>r.properties()],"geometry-type":[Rt,[],r=>r.geometryType()],id:[Bt,[],r=>r.id()],zoom:[He,[],r=>r.globals.zoom],"heatmap-density":[He,[],r=>r.globals.heatmapDensity||0],"line-progress":[He,[],r=>r.globals.lineProgress||0],accumulated:[Bt,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[He,ns(He),(r,t)=>{let o=0;for(const c of t)o+=c.evaluate(r);return o}],"*":[He,ns(He),(r,t)=>{let o=1;for(const c of t)o*=c.evaluate(r);return o}],"-":{type:He,overloads:[[[He,He],(r,[t,o])=>t.evaluate(r)-o.evaluate(r)],[[He],(r,[t])=>-t.evaluate(r)]]},"/":[He,[He,He],(r,[t,o])=>t.evaluate(r)/o.evaluate(r)],"%":[He,[He,He],(r,[t,o])=>t.evaluate(r)%o.evaluate(r)],ln2:[He,[],()=>Math.LN2],pi:[He,[],()=>Math.PI],e:[He,[],()=>Math.E],"^":[He,[He,He],(r,[t,o])=>Math.pow(t.evaluate(r),o.evaluate(r))],sqrt:[He,[He],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[He,[He],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[He,[He],(r,[t])=>Math.log(t.evaluate(r))],log2:[He,[He],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[He,[He],(r,[t])=>Math.sin(t.evaluate(r))],cos:[He,[He],(r,[t])=>Math.cos(t.evaluate(r))],tan:[He,[He],(r,[t])=>Math.tan(t.evaluate(r))],asin:[He,[He],(r,[t])=>Math.asin(t.evaluate(r))],acos:[He,[He],(r,[t])=>Math.acos(t.evaluate(r))],atan:[He,[He],(r,[t])=>Math.atan(t.evaluate(r))],min:[He,ns(He),(r,t)=>Math.min(...t.map(o=>o.evaluate(r)))],max:[He,ns(He),(r,t)=>Math.max(...t.map(o=>o.evaluate(r)))],abs:[He,[He],(r,[t])=>Math.abs(t.evaluate(r))],round:[He,[He],(r,[t])=>{const o=t.evaluate(r);return o<0?-Math.round(-o):Math.round(o)}],floor:[He,[He],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[He,[He],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[Lt,[Rt,Bt],(r,[t,o])=>r.properties()[t.value]===o.value],"filter-id-==":[Lt,[Bt],(r,[t])=>r.id()===t.value],"filter-type-==":[Lt,[Rt],(r,[t])=>r.geometryType()===t.value],"filter-<":[Lt,[Rt,Bt],(r,[t,o])=>{const c=r.properties()[t.value],m=o.value;return typeof c==typeof m&&c<m}],"filter-id-<":[Lt,[Bt],(r,[t])=>{const o=r.id(),c=t.value;return typeof o==typeof c&&o<c}],"filter->":[Lt,[Rt,Bt],(r,[t,o])=>{const c=r.properties()[t.value],m=o.value;return typeof c==typeof m&&c>m}],"filter-id->":[Lt,[Bt],(r,[t])=>{const o=r.id(),c=t.value;return typeof o==typeof c&&o>c}],"filter-<=":[Lt,[Rt,Bt],(r,[t,o])=>{const c=r.properties()[t.value],m=o.value;return typeof c==typeof m&&c<=m}],"filter-id-<=":[Lt,[Bt],(r,[t])=>{const o=r.id(),c=t.value;return typeof o==typeof c&&o<=c}],"filter->=":[Lt,[Rt,Bt],(r,[t,o])=>{const c=r.properties()[t.value],m=o.value;return typeof c==typeof m&&c>=m}],"filter-id->=":[Lt,[Bt],(r,[t])=>{const o=r.id(),c=t.value;return typeof o==typeof c&&o>=c}],"filter-has":[Lt,[Bt],(r,[t])=>t.value in r.properties()],"filter-has-id":[Lt,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Lt,[ei(Rt)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[Lt,[ei(Bt)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[Lt,[Rt,ei(Bt)],(r,[t,o])=>o.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[Lt,[Rt,ei(Bt)],(r,[t,o])=>function(c,m,y,x){for(;y<=x;){const E=y+x>>1;if(m[E]===c)return!0;m[E]>c?x=E-1:y=E+1}return!1}(r.properties()[t.value],o.value,0,o.value.length-1)],all:{type:Lt,overloads:[[[Lt,Lt],(r,[t,o])=>t.evaluate(r)&&o.evaluate(r)],[ns(Lt),(r,t)=>{for(const o of t)if(!o.evaluate(r))return!1;return!0}]]},any:{type:Lt,overloads:[[[Lt,Lt],(r,[t,o])=>t.evaluate(r)||o.evaluate(r)],[ns(Lt),(r,t)=>{for(const o of t)if(o.evaluate(r))return!0;return!1}]]},"!":[Lt,[Lt],(r,[t])=>!t.evaluate(r)],"is-supported-script":[Lt,[Rt],(r,[t])=>{const o=r.globals&&r.globals.isSupportedScript;return!o||o(t.evaluate(r))}],upcase:[Rt,[Rt],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Rt,[Rt],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Rt,ns(Bt),(r,t)=>t.map(o=>Ae(o.evaluate(r))).join("")],"resolved-locale":[Rt,[Ko],(r,[t])=>t.evaluate(r).resolvedLocale()]});class Ul{constructor(t,o){this.expression=t,this._warningHistory={},this._evaluator=new Ft,this._defaultValue=o?function(c){return c.type==="color"&&pr(c.default)?new B(0,0,0,0):c.type==="color"?B.parse(c.default)||null:c.default===void 0?null:c.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,c,m,y,x){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(t,o,c,m,y,x){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new ke(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console!="undefined"&&console.warn(E.message)),this._defaultValue}}}function aa(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in ts}function ja(r,t){const o=new Ps(ts,[],t?function(m){const y={color:Pi,string:Rt,number:He,enum:Rt,boolean:Lt,formatted:kr,resolvedImage:lo};return m.type==="array"?ei(y[m.value]||Bt,m.length):y[m.type]}(t):void 0),c=o.parse(r,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?Ol(new Ul(c,t)):Do(o.errors)}class Zi{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!Ao(o.expression)}evaluateWithoutErrorHandling(t,o,c,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,m,y,x)}evaluate(t,o,c,m,y,x){return this._styleExpression.evaluate(t,o,c,m,y,x)}}class mo{constructor(t,o,c,m){this.kind=t,this.zoomStops=c,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!Ao(o.expression),this.interpolationType=m}evaluateWithoutErrorHandling(t,o,c,m,y,x){return this._styleExpression.evaluateWithoutErrorHandling(t,o,c,m,y,x)}evaluate(t,o,c,m,y,x){return this._styleExpression.evaluate(t,o,c,m,y,x)}interpolationFactor(t,o,c){return this.interpolationType?Li.interpolationFactor(this.interpolationType,t,o,c):0}}function Vl(r,t){const o=ja(r,t);if(o.result==="error")return o;const c=o.value.expression,m=zo(c);if(!m&&!fo(t))return Do([new Gn("","data expressions not supported")]);const y=ho(c,["zoom"]);if(!y&&!Ro(t))return Do([new Gn("","zoom expressions not supported")]);const x=Ga(c);return x||y?x instanceof Gn?Do([x]):x instanceof Li&&!Nl(t)?Do([new Gn("",'"interpolate" expressions cannot be used with this property')]):Ol(x?new mo(m?"camera":"composite",o.value,x.labels,x instanceof Li?x.interpolation:void 0):new Zi(m?"constant":"source",o.value)):Do([new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class zr{constructor(t,o){this._parameters=t,this._specification=o,$i(this,Za(this._parameters,this._specification))}static deserialize(t){return new zr(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Ga(r){let t=null;if(r instanceof nn)t=Ga(r.result);else if(r instanceof ra){for(const o of r.args)if(t=Ga(o),t)break}else(r instanceof Qo||r instanceof Li)&&r.input instanceof Dt&&r.input.name==="zoom"&&(t=r);return t instanceof Gn||r.eachChild(o=>{const c=Ga(o);c instanceof Gn?t=c:!t&&c?t=new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&c&&t!==c&&(t=new Gn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function ki(r){const t=r.key,o=r.value,c=r.valueSpec||{},m=r.objectElementValidators||{},y=r.style,x=r.styleSpec;let E=[];const k=It(o);if(k!=="object")return[new Je(t,o,`object expected, ${k} found`)];for(const z in o){const F=z.split(".")[0],O=c[F]||c["*"];let $;if(m[F])$=m[F];else if(c[F])$=bi;else if(m["*"])$=m["*"];else{if(!c["*"]){E.push(new Je(t,o[z],`unknown property "${z}"`));continue}$=bi}E=E.concat($({key:(t&&`${t}.`)+z,value:o[z],valueSpec:O,style:y,styleSpec:x,object:o,objectKey:z},o))}for(const z in c)m[z]||c[z].required&&c[z].default===void 0&&o[z]===void 0&&E.push(new Je(t,o,`missing required property "${z}"`));return E}function Pu(r){const t=r.value,o=r.valueSpec,c=r.style,m=r.styleSpec,y=r.key,x=r.arrayElementValidator||bi;if(It(t)!=="array")return[new Je(y,t,`array expected, ${It(t)} found`)];if(o.length&&t.length!==o.length)return[new Je(y,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new Je(y,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let E={type:o.value,values:o.values};m.$version<7&&(E.function=o.function),It(o.value)==="object"&&(E=o.value);let k=[];for(let z=0;z<t.length;z++)k=k.concat(x({array:t,arrayIndex:z,value:t[z],valueSpec:E,style:c,styleSpec:m,key:`${y}[${z}]`}));return k}function Ds(r){const t=r.key,o=r.value,c=r.valueSpec;let m=It(o);return m==="number"&&o!=o&&(m="NaN"),m!=="number"?[new Je(t,o,`number expected, ${m} found`)]:"minimum"in c&&o<c.minimum?[new Je(t,o,`${o} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&o>c.maximum?[new Je(t,o,`${o} is greater than the maximum value ${c.maximum}`)]:[]}function $l(r){const t=r.valueSpec,o=ln(r.value.type);let c,m,y,x={};const E=o!=="categorical"&&r.value.property===void 0,k=!E,z=It(r.value.stops)==="array"&&It(r.value.stops[0])==="array"&&It(r.value.stops[0][0])==="object",F=ki({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(G){if(o==="identity")return[new Je(G.key,G.value,'identity function may not have a "stops" property')];let q=[];const ae=G.value;return q=q.concat(Pu({key:G.key,value:ae,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:O})),It(ae)==="array"&&ae.length===0&&q.push(new Je(G.key,ae,"array must have at least one stop")),q},default:function(G){return bi({key:G.key,value:G.value,valueSpec:t,style:G.style,styleSpec:G.styleSpec})}}});return o==="identity"&&E&&F.push(new Je(r.key,r.value,'missing required property "property"')),o==="identity"||r.value.stops||F.push(new Je(r.key,r.value,'missing required property "stops"')),o==="exponential"&&r.valueSpec.expression&&!Nl(r.valueSpec)&&F.push(new Je(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(k&&!fo(r.valueSpec)?F.push(new Je(r.key,r.value,"property functions not supported")):E&&!Ro(r.valueSpec)&&F.push(new Je(r.key,r.value,"zoom functions not supported"))),o!=="categorical"&&!z||r.value.property!==void 0||F.push(new Je(r.key,r.value,'"property" property is required')),F;function O(G){let q=[];const ae=G.value,le=G.key;if(It(ae)!=="array")return[new Je(le,ae,`array expected, ${It(ae)} found`)];if(ae.length!==2)return[new Je(le,ae,`array length 2 expected, length ${ae.length} found`)];if(z){if(It(ae[0])!=="object")return[new Je(le,ae,`object expected, ${It(ae[0])} found`)];if(ae[0].zoom===void 0)return[new Je(le,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new Je(le,ae,"object stop key must have value")];if(y&&y>ln(ae[0].zoom))return[new Je(le,ae[0].zoom,"stop zoom values must appear in ascending order")];ln(ae[0].zoom)!==y&&(y=ln(ae[0].zoom),m=void 0,x={}),q=q.concat(ki({key:`${le}[0]`,value:ae[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Ds,value:$}}))}else q=q.concat($({key:`${le}[0]`,value:ae[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},ae));return aa(wi(ae[1]))?q.concat([new Je(`${le}[1]`,ae[1],"expressions are not allowed in function stops.")]):q.concat(bi({key:`${le}[1]`,value:ae[1],valueSpec:t,style:G.style,styleSpec:G.styleSpec}))}function $(G,q){const ae=It(G.value),le=ln(G.value),xe=G.value!==null?G.value:q;if(c){if(ae!==c)return[new Je(G.key,xe,`${ae} stop domain type must match previous stop domain type ${c}`)]}else c=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new Je(G.key,xe,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&o!=="categorical"){let Ce=`number expected, ${ae} found`;return fo(t)&&o===void 0&&(Ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(G.key,xe,Ce)]}return o!=="categorical"||ae!=="number"||isFinite(le)&&Math.floor(le)===le?o!=="categorical"&&ae==="number"&&m!==void 0&&le<m?[new Je(G.key,xe,"stop domain values must appear in ascending order")]:(m=le,o==="categorical"&&le in x?[new Je(G.key,xe,"stop domain values must be unique")]:(x[le]=!0,[])):[new Je(G.key,xe,`integer expected, found ${le}`)]}}function go(r){const t=(r.expressionContext==="property"?Vl:ja)(wi(r.value),r.valueSpec);if(t.result==="error")return t.value.map(c=>new Je(`${r.key}${c.key}`,r.value,c.message));const o=t.value.expression||t.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!o.outputDefined())return[new Je(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ao(o))return[new Je(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ao(o))return[new Je(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!ho(o,["zoom","feature-state"]))return[new Je(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!zo(o))return[new Je(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wa(r){const t=r.key,o=r.value,c=r.valueSpec,m=[];return Array.isArray(c.values)?c.values.indexOf(ln(o))===-1&&m.push(new Je(t,o,`expected one of [${c.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(c.values).indexOf(ln(o))===-1&&m.push(new Je(t,o,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(o)} found`)),m}function Hr(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!Hr(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const la={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qa(r){if(r==null)return{filter:()=>!0,needGeometry:!1};Hr(r)||(r=Qi(r));const t=ja(r,la);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,c,m)=>t.value.evaluate(o,c,{},m),needGeometry:ku(r)}}function Rs(r,t){return r<t?-1:r>t?1:0}function ku(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let t=1;t<r.length;t++)if(ku(r[t]))return!0;return!1}function Qi(r){if(!r)return!0;const t=r[0];return r.length<=1?t!=="any":t==="=="?Zl(r[1],r[2],"=="):t==="!="?ji(Zl(r[1],r[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Zl(r[1],r[2],t):t==="any"?(o=r.slice(1),["any"].concat(o.map(Qi))):t==="all"?["all"].concat(r.slice(1).map(Qi)):t==="none"?["all"].concat(r.slice(1).map(Qi).map(ji)):t==="in"?_o(r[1],r.slice(2)):t==="!in"?ji(_o(r[1],r.slice(2))):t==="has"?Ha(r[1]):t==="!has"?ji(Ha(r[1])):t!=="within"||r;var o}function Zl(r,t,o){switch(r){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,r,t]}}function _o(r,t){if(t.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",r,["literal",t.sort(Rs)]]:["filter-in-small",r,["literal",t]]}}function Ha(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function ji(r){return["!",r]}function is(r){return Hr(wi(r.value))?go($i({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):jl(r)}function jl(r){const t=r.value,o=r.key;if(It(t)!=="array")return[new Je(o,t,`array expected, ${It(t)} found`)];const c=r.styleSpec;let m,y=[];if(t.length<1)return[new Je(o,t,"filter array must have at least 1 element")];switch(y=y.concat(Wa({key:`${o}[0]`,value:t[0],valueSpec:c.filter_operator,style:r.style,styleSpec:r.styleSpec})),ln(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&ln(t[1])==="$type"&&y.push(new Je(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&y.push(new Je(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(m=It(t[1]),m!=="string"&&y.push(new Je(`${o}[1]`,t[1],`string expected, ${m} found`)));for(let x=2;x<t.length;x++)m=It(t[x]),ln(t[1])==="$type"?y=y.concat(Wa({key:`${o}[${x}]`,value:t[x],valueSpec:c.geometry_type,style:r.style,styleSpec:r.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new Je(`${o}[${x}]`,t[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<t.length;x++)y=y.concat(jl({key:`${o}[${x}]`,value:t[x],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":m=It(t[1]),t.length!==2?y.push(new Je(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new Je(`${o}[1]`,t[1],`string expected, ${m} found`));break;case"within":m=It(t[1]),t.length!==2?y.push(new Je(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):m!=="object"&&y.push(new Je(`${o}[1]`,t[1],`object expected, ${m} found`))}return y}function rs(r,t){const o=r.key,c=r.style,m=r.styleSpec,y=r.value,x=r.objectKey,E=m[`${t}_${r.layerType}`];if(!E)return[];const k=x.match(/^(.*)-transition$/);if(t==="paint"&&k&&E[k[1]]&&E[k[1]].transition)return bi({key:o,value:y,valueSpec:m.transition,style:c,styleSpec:m});const z=r.valueSpec||E[x];if(!z)return[new Je(o,y,`unknown property "${x}"`)];let F;if(It(y)==="string"&&fo(z)&&!z.tokens&&(F=/^{([^}]+)}$/.exec(y)))return[new Je(o,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const O=[];return r.layerType==="symbol"&&(x==="text-field"&&c&&!c.glyphs&&O.push(new Je(o,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&pr(wi(y))&&ln(y.type)==="identity"&&O.push(new Je(o,y,'"text-font" does not support identity functions'))),O.concat(bi({key:r.key,value:y,valueSpec:z,style:c,styleSpec:m,expressionContext:"property",propertyType:t,propertyKey:x}))}function ua(r){return rs(r,"paint")}function Xa(r){return rs(r,"layout")}function ca(r){let t=[];const o=r.value,c=r.key,m=r.style,y=r.styleSpec;o.type||o.ref||t.push(new Je(c,o,'either "type" or "ref" is required'));let x=ln(o.type);const E=ln(o.ref);if(o.id){const k=ln(o.id);for(let z=0;z<r.arrayIndex;z++){const F=m.layers[z];ln(F.id)===k&&t.push(new Je(c,o.id,`duplicate layer id "${o.id}", previously used at line ${F.id.__line__}`))}}if("ref"in o){let k;["type","source","source-layer","filter","layout"].forEach(z=>{z in o&&t.push(new Je(c,o[z],`"${z}" is prohibited for ref layers`))}),m.layers.forEach(z=>{ln(z.id)===E&&(k=z)}),k?k.ref?t.push(new Je(c,o.ref,"ref cannot reference another ref layer")):x=ln(k.type):t.push(new Je(c,o.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(o.source){const k=m.sources&&m.sources[o.source],z=k&&ln(k.type);k?z==="vector"&&x==="raster"?t.push(new Je(c,o.source,`layer "${o.id}" requires a raster source`)):z==="raster"&&x!=="raster"?t.push(new Je(c,o.source,`layer "${o.id}" requires a vector source`)):z!=="vector"||o["source-layer"]?z==="raster-dem"&&x!=="hillshade"?t.push(new Je(c,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!o.paint||!o.paint["line-gradient"]||z==="geojson"&&k.lineMetrics||t.push(new Je(c,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Je(c,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new Je(c,o.source,`source "${o.source}" not found`))}else t.push(new Je(c,o,'missing required property "source"'));return t=t.concat(ki({key:c,value:o,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":()=>[],type:()=>bi({key:`${c}.type`,value:o.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,object:o,objectKey:"type"}),filter:is,layout:k=>ki({layer:o,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":z=>Xa($i({layerType:x},z))}}),paint:k=>ki({layer:o,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":z=>ua($i({layerType:x},z))}})}})),t}function Ar(r){const t=r.value,o=r.key,c=It(t);return c!=="string"?[new Je(o,t,`string expected, ${c} found`)]:[]}const ha={promoteId:function({key:r,value:t}){if(It(t)==="string")return Ar({key:r,value:t});{const o=[];for(const c in t)o.push(...Ar({key:`${r}.${c}`,value:t[c]}));return o}}};function os(r){const t=r.value,o=r.key,c=r.styleSpec,m=r.style;if(!t.type)return[new Je(o,t,'"type" is required')];const y=ln(t.type);let x;switch(y){case"vector":case"raster":case"raster-dem":return x=ki({key:o,value:t,valueSpec:c[`source_${y.replace("-","_")}`],style:r.style,styleSpec:c,objectElementValidators:ha}),x;case"geojson":if(x=ki({key:o,value:t,valueSpec:c.source_geojson,style:m,styleSpec:c,objectElementValidators:ha}),t.cluster)for(const E in t.clusterProperties){const[k,z]=t.clusterProperties[E],F=typeof k=="string"?[k,["accumulated"],["get",E]]:k;x.push(...go({key:`${o}.${E}.map`,value:z,expressionContext:"cluster-map"})),x.push(...go({key:`${o}.${E}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return x;case"video":return ki({key:o,value:t,valueSpec:c.source_video,style:m,styleSpec:c});case"image":return ki({key:o,value:t,valueSpec:c.source_image,style:m,styleSpec:c});case"canvas":return[new Je(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wa({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:c})}}function Bs(r){const t=r.value,o=r.styleSpec,c=o.light,m=r.style;let y=[];const x=It(t);if(t===void 0)return y;if(x!=="object")return y=y.concat([new Je("light",t,`object expected, ${x} found`)]),y;for(const E in t){const k=E.match(/^(.*)-transition$/);y=y.concat(k&&c[k[1]]&&c[k[1]].transition?bi({key:E,value:t[E],valueSpec:o.transition,style:m,styleSpec:o}):c[E]?bi({key:E,value:t[E],valueSpec:c[E],style:m,styleSpec:o}):[new Je(E,t[E],`unknown property "${E}"`)])}return y}const er={"*":()=>[],array:Pu,boolean:function(r){const t=r.value,o=r.key,c=It(t);return c!=="boolean"?[new Je(o,t,`boolean expected, ${c} found`)]:[]},number:Ds,color:function(r){const t=r.key,o=r.value,c=It(o);return c!=="string"?[new Je(t,o,`color expected, ${c} found`)]:ti(o)===null?[new Je(t,o,`color expected, "${o}" found`)]:[]},constants:Mi,enum:Wa,filter:is,function:$l,layer:ca,object:ki,source:os,light:Bs,string:Ar,formatted:function(r){return Ar(r).length===0?[]:go(r)},resolvedImage:function(r){return Ar(r).length===0?[]:go(r)}};function bi(r){const t=r.value,o=r.valueSpec,c=r.styleSpec;return o.expression&&pr(ln(t))?$l(r):o.expression&&aa(wi(t))?go(r):o.type&&er[o.type]?er[o.type](r):ki($i({},r,{valueSpec:o.type?c[o.type]:o}))}function Dc(r){const t=r.value,o=r.key,c=Ar(r);return c.length||(t.indexOf("{fontstack}")===-1&&c.push(new Je(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&c.push(new Je(o,t,'"glyphs" url must include a "{range}" token'))),c}function Bo(r,t=Pe){let o=[];return o=o.concat(bi({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,objectElementValidators:{glyphs:Dc,"*":()=>[]}})),r.constants&&(o=o.concat(Mi({key:"constants",value:r.constants,style:r,styleSpec:t}))),Cu(o)}function Cu(r){return[].concat(r).sort((t,o)=>t.line-o.line)}function ss(r){return function(...t){return Cu(r.apply(this,t))}}Bo.source=ss(os),Bo.light=ss(Bs),Bo.layer=ss(ca),Bo.filter=ss(is),Bo.paintProperty=ss(ua),Bo.layoutProperty=ss(Xa);const as=Bo,Xr=as.light,Fs=as.paintProperty,Rc=as.layoutProperty;function da(r,t){let o=!1;if(t&&t.length)for(const c of t)r.fire(new mn(new Error(c.message))),o=!0;return o}class ls{constructor(t,o,c){const m=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const x=new Int32Array(this.arrayBuffer);t=x[0],this.d=(o=x[1])+2*(c=x[2]);for(let k=0;k<this.d*this.d;k++){const z=x[3+k],F=x[3+k+1];m.push(z===F?null:x.subarray(z,F))}const E=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=o+2*c;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=c,this.scale=o/t,this.uid=0;const y=c/o*t;this.min=-y,this.max=t+y}insert(t,o,c,m,y){this._forEachCell(o,c,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,c,m,y,x){this.cells[y].push(x)}query(t,o,c,m,y){const x=this.min,E=this.max;if(t<=x&&o<=x&&E<=c&&E<=m&&!y)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(t,o,c,m,this._queryCell,k,{},y),k}}_queryCell(t,o,c,m,y,x,E,k){const z=this.cells[y];if(z!==null){const F=this.keys,O=this.bboxes;for(let $=0;$<z.length;$++){const G=z[$];if(E[G]===void 0){const q=4*G;(k?k(O[q+0],O[q+1],O[q+2],O[q+3]):t<=O[q+2]&&o<=O[q+3]&&c>=O[q+0]&&m>=O[q+1])?(E[G]=!0,x.push(F[G])):E[G]=!1}}}}_forEachCell(t,o,c,m,y,x,E,k){const z=this._convertToCellCoord(t),F=this._convertToCellCoord(o),O=this._convertToCellCoord(c),$=this._convertToCellCoord(m);for(let G=z;G<=O;G++)for(let q=F;q<=$;q++){const ae=this.d*q+G;if((!k||k(this._convertFromCellCoord(G),this._convertFromCellCoord(q),this._convertFromCellCoord(G+1),this._convertFromCellCoord(q+1)))&&y.call(this,t,o,c,m,ae,x,E,k))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let c=0;for(let x=0;x<this.cells.length;x++)c+=this.cells[x].length;const m=new Int32Array(o+c+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=o;for(let x=0;x<t.length;x++){const E=t[x];m[3+x]=y,m.set(E,y),y+=E.length}return m[3+t.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+t.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(t,o){const c=t.toArrayBuffer();return o&&o.push(c),{buffer:c}}static deserialize(t){return new ls(t.buffer)}}const us={};function at(r,t,o={}){Object.defineProperty(t,"_classRegistryKey",{value:r,writeable:!1}),us[r]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}at("Object",Object),at("TransferableGridIndex",ls),at("Color",B),at("Error",Error),at("AJAXError",Fn),at("ResolvedImage",pe),at("StylePropertyFunction",zr),at("StyleExpression",Ul,{omit:["_evaluator"]}),at("ZoomDependentExpression",mo),at("ZoomConstantExpression",Zi),at("CompoundExpression",Dt,{omit:["_evaluate"]});for(const r in ts)ts[r]._classRegistryKey||at(`Expression_${r}`,ts[r]);function cs(r){return r&&typeof ArrayBuffer!="undefined"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function pa(r,t){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob)return r;if(cs(r)||Zt(r))return t&&t.push(r),r;if(ArrayBuffer.isView(r)){const o=r;return t&&t.push(o.buffer),o}if(r instanceof ImageData)return t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const o=[];for(const c of r)o.push(pa(c,t));return o}if(typeof r=="object"){const o=r.constructor,c=o._classRegistryKey;if(!c)throw new Error("can't serialize object of unregistered class");const m=o.serialize?o.serialize(r,t):{};if(!o.serialize){for(const y in r){if(!r.hasOwnProperty(y)||us[c].omit.indexOf(y)>=0)continue;const x=r[y];m[y]=us[c].shallow.indexOf(y)>=0?x:pa(x,t)}r instanceof Error&&(m.message=r.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(m.$name=c),m}throw new Error("can't serialize object of type "+typeof r)}function fr(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||cs(r)||Zt(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(fr);if(typeof r=="object"){const t=r.$name||"Object";if(!us[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=us[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(r);const c=Object.create(o.prototype);for(const m of Object.keys(r)){if(m==="$name")continue;const y=r[m];c[m]=us[t].shallow.indexOf(m)>=0?y:fr(y)}return c}throw new Error("can't deserialize object of type "+typeof r)}class Os{constructor(){this.first=!0}update(t,o){const c=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=c,!0))}}const et={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function Gl(r){for(const t of r)if(Ns(t.charCodeAt(0)))return!0;return!1}function Kr(r){for(const t of r)if(!Iu(t.charCodeAt(0)))return!1;return!0}function Iu(r){return!(et.Arabic(r)||et["Arabic Supplement"](r)||et["Arabic Extended-A"](r)||et["Arabic Presentation Forms-A"](r)||et["Arabic Presentation Forms-B"](r))}function Ns(r){return!(r!==746&&r!==747&&(r<4352||!(et["Bopomofo Extended"](r)||et.Bopomofo(r)||et["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||et["CJK Compatibility Ideographs"](r)||et["CJK Compatibility"](r)||et["CJK Radicals Supplement"](r)||et["CJK Strokes"](r)||!(!et["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||et["CJK Unified Ideographs Extension A"](r)||et["CJK Unified Ideographs"](r)||et["Enclosed CJK Letters and Months"](r)||et["Hangul Compatibility Jamo"](r)||et["Hangul Jamo Extended-A"](r)||et["Hangul Jamo Extended-B"](r)||et["Hangul Jamo"](r)||et["Hangul Syllables"](r)||et.Hiragana(r)||et["Ideographic Description Characters"](r)||et.Kanbun(r)||et["Kangxi Radicals"](r)||et["Katakana Phonetic Extensions"](r)||et.Katakana(r)&&r!==12540||!(!et["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!et["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||et["Unified Canadian Aboriginal Syllabics"](r)||et["Unified Canadian Aboriginal Syllabics Extended"](r)||et["Vertical Forms"](r)||et["Yijing Hexagram Symbols"](r)||et["Yi Syllables"](r)||et["Yi Radicals"](r))))}function Us(r){return!(Ns(r)||function(t){return!!(et["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||et["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||et["Letterlike Symbols"](t)||et["Number Forms"](t)||et["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||et["Control Pictures"](t)&&t!==9251||et["Optical Character Recognition"](t)||et["Enclosed Alphanumerics"](t)||et["Geometric Shapes"](t)||et["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||et["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||et["CJK Symbols and Punctuation"](t)||et.Katakana(t)||et["Private Use Area"](t)||et["CJK Compatibility Forms"](t)||et["Small Form Variants"](t)||et["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(r))}function zu(r){return r>=1424&&r<=2303||et["Arabic Presentation Forms-A"](r)||et["Arabic Presentation Forms-B"](r)}function Ka(r,t){return!(!t&&zu(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||et.Khmer(r))}function fa(r){for(const t of r)if(zu(t.charCodeAt(0)))return!0;return!1}const ma="deferred",Ya="loading",Wl="loaded";let Ja=null,Di="unavailable",yo=null;const ql=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Di="error"),Ja&&Ja(r)};function Qa(){Vs.fire(new St("pluginStateChange",{pluginStatus:Di,pluginURL:yo}))}const Vs=new Rn,el=function(){return Di},ga=function(){if(Di!==ma||!yo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Di=Ya,Qa(),yo&&ai({url:yo},r=>{r?ql(r):(Di=Wl,Qa())})},mr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Di===Wl||mr.applyArabicShaping!=null,isLoading:()=>Di===Ya,setState(r){Di=r.pluginStatus,yo=r.pluginURL},isParsed:()=>mr.applyArabicShaping!=null&&mr.processBidirectionalText!=null&&mr.processStyledBidirectionalText!=null,getPluginURL:()=>yo};class a{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Os,this.transition={})}isSupportedScript(t){return function(o,c){for(const m of o)if(!Ka(m.charCodeAt(0),c))return!1;return!0}(t,mr.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),c=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*o}}}class d{constructor(t,o){this.property=t,this.value=o,this.expression=function(c,m){if(pr(c))return new zr(c,m);if(aa(c)){const y=Vl(c,m);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=c;return typeof c=="string"&&m.type==="color"&&(y=B.parse(c)),{kind:"constant",evaluate:()=>y}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,c){return this.property.possiblyEvaluate(this,t,o,c)}}class w{constructor(t){this.property=t,this.value=new d(t,void 0)}transitioned(t,o){return new D(this.property,this.value,o,ye({},t.transition,this.transition),t.now)}untransitioned(){return new D(this.property,this.value,null,{},0)}}class P{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return te(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new w(this._values[t].property)),this._values[t].value=new d(this._values[t].property,o===null?void 0:te(o))}getTransition(t){return te(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new w(this._values[t].property)),this._values[t].transition=te(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c);const m=this.getTransition(o);m!==void 0&&(t[`${o}-transition`]=m)}return t}transitioned(t,o){const c=new j(this._properties);for(const m of Object.keys(this._values))c._values[m]=this._values[m].transitioned(t,o._values[m]);return c}untransitioned(){const t=new j(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class D{constructor(t,o,c,m,y){this.property=t,this.value=o,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,t.specification.transition&&(m.delay||m.duration)&&(this.prior=c)}possiblyEvaluate(t,o,c){const m=t.now||0,y=this.value.possiblyEvaluate(t,o,c),x=this.prior;if(x){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return x.possiblyEvaluate(t,o,c);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(t,o,c),y,function(k){if(k<=0)return 0;if(k>=1)return 1;const z=k*k,F=z*k;return 4*(k<.5?F:3*(k-z)+F-.75)}(E))}}return y}}class j{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,c){const m=new Me(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(t,o,c);return m}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class ue{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return te(this._values[t].value)}setValue(t,o){this._values[t]=new d(this._values[t].property,o===null?void 0:te(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(t[o]=c)}return t}possiblyEvaluate(t,o,c){const m=new Me(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(t,o,c);return m}}class be{constructor(t,o,c){this.property=t,this.value=o,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,c,m){return this.property.evaluate(this.value,this.parameters,t,o,c,m)}}class Me{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Se{constructor(t){this.specification=t}possiblyEvaluate(t,o){return t.expression.evaluate(o)}interpolate(t,o,c){const m=Cs[this.specification.type];return m?m(t,o,c):t}}class $e{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,c,m){return new be(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},c,m)}:t.expression,o)}interpolate(t,o,c){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new be(this,{kind:"constant",value:void 0},t.parameters);const m=Cs[this.specification.type];return m?new be(this,{kind:"constant",value:m(t.value.value,o.value.value,c)},t.parameters):t}evaluate(t,o,c,m,y,x){return t.kind==="constant"?t.value:t.evaluate(o,c,m,y,x)}}class $t extends $e{possiblyEvaluate(t,o,c,m){if(t.value===void 0)return new be(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const y=t.expression.evaluate(o,null,{},c,m),x=t.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,E=this._calculate(x,x,x,o);return new be(this,{kind:"constant",value:E},o)}if(t.expression.kind==="camera"){const y=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new be(this,{kind:"constant",value:y},o)}return new be(this,t.expression,o)}evaluate(t,o,c,m,y,x){if(t.kind==="source"){const E=t.evaluate(o,c,m,y,x);return this._calculate(E,E,E,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},c,m),t.evaluate({zoom:Math.floor(o.zoom)},c,m),t.evaluate({zoom:Math.floor(o.zoom)+1},c,m),o):t.value}_calculate(t,o,c,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class Qt{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,m){if(t.value!==void 0){if(t.expression.kind==="constant"){const y=t.expression.evaluate(o,null,{},c,m);return this._calculate(y,y,y,o)}return this._calculate(t.expression.evaluate(new a(Math.floor(o.zoom-1),o)),t.expression.evaluate(new a(Math.floor(o.zoom),o)),t.expression.evaluate(new a(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,c,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:c,to:o}}interpolate(t){return t}}class Mr{constructor(t){this.specification=t}possiblyEvaluate(t,o,c,m){return!!t.expression.evaluate(o,null,{},c,m)}interpolate(){return!1}}class Mn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const c=t[o];c.specification.overridable&&this.overridableProperties.push(o);const m=this.defaultPropertyValues[o]=new d(c,void 0),y=this.defaultTransitionablePropertyValues[o]=new w(c);this.defaultTransitioningPropertyValues[o]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=m.possiblyEvaluate({})}}}at("DataDrivenProperty",$e),at("DataConstantProperty",Se),at("CrossFadedDataDrivenProperty",$t),at("CrossFadedProperty",Qt),at("ColorRampProperty",Mr);const Yr="-transition";class Kn extends Rn{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new ue(o.layout)),o.paint)){this._transitionablePaint=new P(o.paint);for(const c in t.paint)this.setPaintProperty(c,t.paint[c],{validate:!1});for(const c in t.layout)this.setLayoutProperty(c,t.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Me(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,c={}){o!=null&&this._validate(Rc,`layers.${this.id}.layout.${t}`,t,o,c)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(Yr)?this._transitionablePaint.getTransition(t.slice(0,-Yr.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,c={}){if(o!=null&&this._validate(Fs,`layers.${this.id}.paint.${t}`,t,o,c))return!1;if(t.endsWith(Yr))return this._transitionablePaint.setTransition(t.slice(0,-Yr.length),o||void 0),!1;{const m=this._transitionablePaint._values[t],y=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const k=this._transitionablePaint._values[t].value;return k.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(t,E,k)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,c){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ee(t,(o,c)=>!(o===void 0||c==="layout"&&!Object.keys(o).length||c==="paint"&&!Object.keys(o).length))}_validate(t,o,c,m,y={}){return(!y||y.validate!==!1)&&da(this,t.call(as,{key:o,layerType:this.type,objectKey:c,value:m,styleSpec:Pe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof be&&fo(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const Hl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _a{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Cn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ui(r,t=1){let o=0,c=0;return{members:r.map(m=>{const y=Hl[m.type].BYTES_PER_ELEMENT,x=o=Xl(o,Math.max(t,y)),E=m.components||1;return c=Math.max(c,y),o+=y*E,{name:m.name,type:m.type,components:E,offset:x}}),size:Xl(o,Math.max(c,t)),alignment:t}}function Xl(r,t){return Math.ceil(r/t)*t}class $s extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const m=2*t;return this.int16[m+0]=o,this.int16[m+1]=c,t}}$s.prototype.bytesPerElement=4,at("StructArrayLayout2i4",$s);class Zs extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,m){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,c,m)}emplace(t,o,c,m,y){const x=4*t;return this.int16[x+0]=o,this.int16[x+1]=c,this.int16[x+2]=m,this.int16[x+3]=y,t}}Zs.prototype.bytesPerElement=8,at("StructArrayLayout4i8",Zs);class f extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,t,o,c,m,y,x)}emplace(t,o,c,m,y,x,E){const k=6*t;return this.int16[k+0]=o,this.int16[k+1]=c,this.int16[k+2]=m,this.int16[k+3]=y,this.int16[k+4]=x,this.int16[k+5]=E,t}}f.prototype.bytesPerElement=12,at("StructArrayLayout2i4i12",f);class i extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,t,o,c,m,y,x)}emplace(t,o,c,m,y,x,E){const k=4*t,z=8*t;return this.int16[k+0]=o,this.int16[k+1]=c,this.uint8[z+4]=m,this.uint8[z+5]=y,this.uint8[z+6]=x,this.uint8[z+7]=E,t}}i.prototype.bytesPerElement=8,at("StructArrayLayout2i4ub8",i);class l extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const m=2*t;return this.float32[m+0]=o,this.float32[m+1]=c,t}}l.prototype.bytesPerElement=8,at("StructArrayLayout2f8",l);class p extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x,E,k,z,F){const O=this.length;return this.resize(O+1),this.emplace(O,t,o,c,m,y,x,E,k,z,F)}emplace(t,o,c,m,y,x,E,k,z,F,O){const $=10*t;return this.uint16[$+0]=o,this.uint16[$+1]=c,this.uint16[$+2]=m,this.uint16[$+3]=y,this.uint16[$+4]=x,this.uint16[$+5]=E,this.uint16[$+6]=k,this.uint16[$+7]=z,this.uint16[$+8]=F,this.uint16[$+9]=O,t}}p.prototype.bytesPerElement=20,at("StructArrayLayout10ui20",p);class _ extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x,E,k,z,F,O,$){const G=this.length;return this.resize(G+1),this.emplace(G,t,o,c,m,y,x,E,k,z,F,O,$)}emplace(t,o,c,m,y,x,E,k,z,F,O,$,G){const q=12*t;return this.int16[q+0]=o,this.int16[q+1]=c,this.int16[q+2]=m,this.int16[q+3]=y,this.uint16[q+4]=x,this.uint16[q+5]=E,this.uint16[q+6]=k,this.uint16[q+7]=z,this.int16[q+8]=F,this.int16[q+9]=O,this.int16[q+10]=$,this.int16[q+11]=G,t}}_.prototype.bytesPerElement=24,at("StructArrayLayout4i4ui4i24",_);class b extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,o,c)}emplace(t,o,c,m){const y=3*t;return this.float32[y+0]=o,this.float32[y+1]=c,this.float32[y+2]=m,t}}b.prototype.bytesPerElement=12,at("StructArrayLayout3f12",b);class T extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}T.prototype.bytesPerElement=4,at("StructArrayLayout1ul4",T);class C extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x,E,k,z){const F=this.length;return this.resize(F+1),this.emplace(F,t,o,c,m,y,x,E,k,z)}emplace(t,o,c,m,y,x,E,k,z,F){const O=10*t,$=5*t;return this.int16[O+0]=o,this.int16[O+1]=c,this.int16[O+2]=m,this.int16[O+3]=y,this.int16[O+4]=x,this.int16[O+5]=E,this.uint32[$+3]=k,this.uint16[O+8]=z,this.uint16[O+9]=F,t}}C.prototype.bytesPerElement=20,at("StructArrayLayout6i1ul2ui20",C);class I extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,t,o,c,m,y,x)}emplace(t,o,c,m,y,x,E){const k=6*t;return this.int16[k+0]=o,this.int16[k+1]=c,this.int16[k+2]=m,this.int16[k+3]=y,this.int16[k+4]=x,this.int16[k+5]=E,t}}I.prototype.bytesPerElement=12,at("StructArrayLayout2i2i2i12",I);class R extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,o,c,m,y)}emplace(t,o,c,m,y,x){const E=4*t,k=8*t;return this.float32[E+0]=o,this.float32[E+1]=c,this.float32[E+2]=m,this.int16[k+6]=y,this.int16[k+7]=x,t}}R.prototype.bytesPerElement=16,at("StructArrayLayout2f1f2i16",R);class N extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,m){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,c,m)}emplace(t,o,c,m,y){const x=12*t,E=3*t;return this.uint8[x+0]=o,this.uint8[x+1]=c,this.float32[E+1]=m,this.float32[E+2]=y,t}}N.prototype.bytesPerElement=12,at("StructArrayLayout2ub2f12",N);class Z extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,o,c)}emplace(t,o,c,m){const y=3*t;return this.uint16[y+0]=o,this.uint16[y+1]=c,this.uint16[y+2]=m,t}}Z.prototype.bytesPerElement=6,at("StructArrayLayout3ui6",Z);class X extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x,E,k,z,F,O,$,G,q,ae,le,xe){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,t,o,c,m,y,x,E,k,z,F,O,$,G,q,ae,le,xe)}emplace(t,o,c,m,y,x,E,k,z,F,O,$,G,q,ae,le,xe,Ce){const Te=24*t,Re=12*t,Ze=48*t;return this.int16[Te+0]=o,this.int16[Te+1]=c,this.uint16[Te+2]=m,this.uint16[Te+3]=y,this.uint32[Re+2]=x,this.uint32[Re+3]=E,this.uint32[Re+4]=k,this.uint16[Te+10]=z,this.uint16[Te+11]=F,this.uint16[Te+12]=O,this.float32[Re+7]=$,this.float32[Re+8]=G,this.uint8[Ze+36]=q,this.uint8[Ze+37]=ae,this.uint8[Ze+38]=le,this.uint32[Re+10]=xe,this.int16[Te+22]=Ce,t}}X.prototype.bytesPerElement=48,at("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",X);class se extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,m,y,x,E,k,z,F,O,$,G,q,ae,le,xe,Ce,Te,Re,Ze,Ne,ct,vt,rt,ot,Qe,lt){const st=this.length;return this.resize(st+1),this.emplace(st,t,o,c,m,y,x,E,k,z,F,O,$,G,q,ae,le,xe,Ce,Te,Re,Ze,Ne,ct,vt,rt,ot,Qe,lt)}emplace(t,o,c,m,y,x,E,k,z,F,O,$,G,q,ae,le,xe,Ce,Te,Re,Ze,Ne,ct,vt,rt,ot,Qe,lt,st){const qe=34*t,Tt=17*t;return this.int16[qe+0]=o,this.int16[qe+1]=c,this.int16[qe+2]=m,this.int16[qe+3]=y,this.int16[qe+4]=x,this.int16[qe+5]=E,this.int16[qe+6]=k,this.int16[qe+7]=z,this.uint16[qe+8]=F,this.uint16[qe+9]=O,this.uint16[qe+10]=$,this.uint16[qe+11]=G,this.uint16[qe+12]=q,this.uint16[qe+13]=ae,this.uint16[qe+14]=le,this.uint16[qe+15]=xe,this.uint16[qe+16]=Ce,this.uint16[qe+17]=Te,this.uint16[qe+18]=Re,this.uint16[qe+19]=Ze,this.uint16[qe+20]=Ne,this.uint16[qe+21]=ct,this.uint16[qe+22]=vt,this.uint32[Tt+12]=rt,this.float32[Tt+13]=ot,this.float32[Tt+14]=Qe,this.float32[Tt+15]=lt,this.float32[Tt+16]=st,t}}se.prototype.bytesPerElement=68,at("StructArrayLayout8i15ui1ul4f68",se);class K extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}K.prototype.bytesPerElement=4,at("StructArrayLayout1f4",K);class oe extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,o,c)}emplace(t,o,c,m){const y=3*t;return this.int16[y+0]=o,this.int16[y+1]=c,this.int16[y+2]=m,t}}oe.prototype.bytesPerElement=6,at("StructArrayLayout3i6",oe);class ge extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,c){const m=this.length;return this.resize(m+1),this.emplace(m,t,o,c)}emplace(t,o,c,m){const y=4*t;return this.uint32[2*t+0]=o,this.uint16[y+2]=c,this.uint16[y+3]=m,t}}ge.prototype.bytesPerElement=8,at("StructArrayLayout1ul2ui8",ge);class _e extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const c=this.length;return this.resize(c+1),this.emplace(c,t,o)}emplace(t,o,c){const m=2*t;return this.uint16[m+0]=o,this.uint16[m+1]=c,t}}_e.prototype.bytesPerElement=4,at("StructArrayLayout2ui4",_e);class we extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}we.prototype.bytesPerElement=2,at("StructArrayLayout1ui2",we);class ve extends Cn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,c,m){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,c,m)}emplace(t,o,c,m,y){const x=4*t;return this.float32[x+0]=o,this.float32[x+1]=c,this.float32[x+2]=m,this.float32[x+3]=y,t}}ve.prototype.bytesPerElement=16,at("StructArrayLayout4f16",ve);class Fe extends _a{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ut(this.anchorPointX,this.anchorPointY)}}Fe.prototype.size=20;class Ie extends C{get(t){return new Fe(this,t)}}at("CollisionBoxArray",Ie);class Le extends _a{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Le.prototype.size=48;class Ge extends X{get(t){return new Le(this,t)}}at("PlacedSymbolArray",Ge);class Ke extends _a{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ke.prototype.size=68;class Be extends se{get(t){return new Ke(this,t)}}at("SymbolInstanceArray",Be);class pt extends K{getoffsetX(t){return this.float32[1*t+0]}}at("GlyphOffsetArray",pt);class tt extends oe{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}at("SymbolLineVertexArray",tt);class zt extends _a{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}zt.prototype.size=8;class an extends ge{get(t){return new zt(this,t)}}at("FeatureIndexArray",an);class Jt extends $s{}class rn extends $s{}class Yn extends f{}class Ot extends i{}class cn extends l{}class En extends p{}class Ri extends _{}class Lr extends b{}class Jr extends T{}class Qr extends I{}class js extends N{}class gr extends Z{}class Fo extends _e{}const ya=ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dr}=ya;class hn{constructor(t=[]){this.segments=t}prepareSegment(t,o,c,m){let y=this.segments[this.segments.length-1];return t>hn.MAX_VERTEX_ARRAY_LENGTH&&De(`Max vertices per segment is ${hn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!y||y.vertexLength+t>hn.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m)&&(y={vertexOffset:o.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},m!==void 0&&(y.sortKey=m),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,c,m){return new hn([{vertexOffset:t,primitiveOffset:o,vertexLength:c,primitiveLength:m,vaos:{},sortKey:0}])}}function yn(r,t){return 256*(r=U(Math.floor(r),0,255))+U(Math.floor(t),0,255)}hn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,at("SegmentVector",hn);const mi=ui([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var tr={exports:{}},Un={exports:{}};Un.exports=function(r,t){var o,c,m,y,x,E,k,z;for(c=r.length-(o=3&r.length),m=t,x=3432918353,E=461845907,z=0;z<c;)k=255&r.charCodeAt(z)|(255&r.charCodeAt(++z))<<8|(255&r.charCodeAt(++z))<<16|(255&r.charCodeAt(++z))<<24,++z,m=27492+(65535&(y=5*(65535&(m=(m^=k=(65535&(k=(k=(65535&k)*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*E+(((k>>>16)*E&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(k=0,o){case 3:k^=(255&r.charCodeAt(z+2))<<16;case 2:k^=(255&r.charCodeAt(z+1))<<8;case 1:m^=k=(65535&(k=(k=(65535&(k^=255&r.charCodeAt(z)))*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*E+(((k>>>16)*E&65535)<<16)&4294967295}return m^=r.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var va={exports:{}};va.exports=function(r,t){for(var o,c=r.length,m=t^c,y=0;c>=4;)o=1540483477*(65535&(o=255&r.charCodeAt(y)|(255&r.charCodeAt(++y))<<8|(255&r.charCodeAt(++y))<<16|(255&r.charCodeAt(++y))<<24))+((1540483477*(o>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),c-=4,++y;switch(c){case 3:m^=(255&r.charCodeAt(y+2))<<16;case 2:m^=(255&r.charCodeAt(y+1))<<8;case 1:m=1540483477*(65535&(m^=255&r.charCodeAt(y)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var Oo=Un.exports,Au=va.exports;tr.exports=Oo,tr.exports.murmur3=Oo,tr.exports.murmur2=Au;var Bc=tr.exports;class Mu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,c,m){this.ids.push(ed(t)),this.positions.push(o,c,m)}getPositions(t){const o=ed(t);let c=0,m=this.ids.length-1;for(;c<m;){const x=c+m>>1;this.ids[x]>=o?m=x:c=x+1}const y=[];for(;this.ids[c]===o;)y.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return y}static serialize(t,o){const c=new Float64Array(t.ids),m=new Uint32Array(t.positions);return xa(c,m,0,c.length-1),o&&o.push(c.buffer,m.buffer),{ids:c,positions:m}}static deserialize(t){const o=new Mu;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function ed(r){const t=+r;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Bc(String(r))}function xa(r,t,o,c){for(;o<c;){const m=r[o+c>>1];let y=o-1,x=c+1;for(;;){do y++;while(r[y]<m);do x--;while(r[x]>m);if(y>=x)break;Lu(r,y,x),Lu(t,3*y,3*x),Lu(t,3*y+1,3*x+1),Lu(t,3*y+2,3*x+2)}x-o<c-x?(xa(r,t,o,x),o=x+1):(xa(r,t,x+1,c),c=x)}}function Lu(r,t,o){const c=r[t];r[t]=r[o],r[o]=c}at("FeaturePositionMap",Mu);class No{constructor(t,o){this.gl=t.gl,this.location=o}}class tl extends No{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class D_ extends No{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class R_ extends No{constructor(t,o){super(t,o),this.current=B.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Qw=new Float32Array(16);function af(r){return[yn(255*r.r,255*r.g),yn(255*r.b,255*r.a)]}class Fc{constructor(t,o,c){this.value=t,this.uniformNames=o.map(m=>`u_${m}`),this.type=c}setUniform(t,o,c){t.set(c.constantOr(this.value))}getBinding(t,o,c){return this.type==="color"?new R_(t,o):new tl(t,o)}}class Du{constructor(t,o){this.uniformNames=o.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,c,m){const y=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&t.set(y)}getBinding(t,o,c){return c.substr(0,9)==="u_pattern"?new D_(t,o):new tl(t,o)}}class wa{constructor(t,o,c,m){this.expression=t,this.type=c,this.maxValue=0,this.paintVertexAttributes=o.map(y=>({name:`a_${y}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(t,o,c,m,y){const x=this.paintVertexArray.length,E=this.expression.evaluate(new a(0),o,{},m,[],y);this.paintVertexArray.resize(t),this._setPaintValue(x,t,E)}updatePaintArray(t,o,c,m){const y=this.expression.evaluate({zoom:0},c,m);this._setPaintValue(t,o,y)}_setPaintValue(t,o,c){if(this.type==="color"){const m=af(c);for(let y=t;y<o;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=t;m<o;m++)this.paintVertexArray.emplace(m,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class hs{constructor(t,o,c,m,y,x){this.expression=t,this.uniformNames=o.map(E=>`u_${E}_t`),this.type=c,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=o.map(E=>({name:`a_${E}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(t,o,c,m,y){const x=this.expression.evaluate(new a(this.zoom),o,{},m,[],y),E=this.expression.evaluate(new a(this.zoom+1),o,{},m,[],y),k=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(k,t,x,E)}updatePaintArray(t,o,c,m){const y=this.expression.evaluate({zoom:this.zoom},c,m),x=this.expression.evaluate({zoom:this.zoom+1},c,m);this._setPaintValue(t,o,y,x)}_setPaintValue(t,o,c,m){if(this.type==="color"){const y=af(c),x=af(m);for(let E=t;E<o;E++)this.paintVertexArray.emplace(E,y[0],y[1],x[0],x[1])}else{for(let y=t;y<o;y++)this.paintVertexArray.emplace(y,c,m);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(m))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const c=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,m=U(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);t.set(m)}getBinding(t,o,c){return new tl(t,o)}}class nl{constructor(t,o,c,m,y,x){this.expression=t,this.type=o,this.useIntegerZoom=c,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(t,o,c){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(m,t,o.patterns&&o.patterns[this.layerId],c)}updatePaintArray(t,o,c,m,y){this._setPaintValues(t,o,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(t,o,c,m){if(!m||!c)return;const{min:y,mid:x,max:E}=c,k=m[y],z=m[x],F=m[E];if(k&&z&&F)for(let O=t;O<o;O++)this.zoomInPaintVertexArray.emplace(O,z.tl[0],z.tl[1],z.br[0],z.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],z.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,z.tl[0],z.tl[1],z.br[0],z.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],z.pixelRatio,F.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,mi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,mi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class B_{constructor(t,o,c){this.binders={},this._buffers=[];const m=[];for(const y in t.paint._values){if(!c(y))continue;const x=t.paint.get(y);if(!(x instanceof be&&fo(x.property.specification)))continue;const E=eb(y,t.type),k=x.value,z=x.property.specification.type,F=x.property.useIntegerZoom,O=x.property.specification["property-type"],$=O==="cross-faded"||O==="cross-faded-data-driven";if(k.kind==="constant")this.binders[y]=$?new Du(k.value,E):new Fc(k.value,E,z),m.push(`/u_${y}`);else if(k.kind==="source"||$){const G=F_(y,z,"source");this.binders[y]=$?new nl(k,z,F,o,G,t.id):new wa(k,E,z,G),m.push(`/a_${y}`)}else{const G=F_(y,z,"composite");this.binders[y]=new hs(k,E,z,F,o,G),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof wa||o instanceof hs?o.maxValue:0}populatePaintArrays(t,o,c,m,y){for(const x in this.binders){const E=this.binders[x];(E instanceof wa||E instanceof hs||E instanceof nl)&&E.populatePaintArray(t,o,c,m,y)}}setConstantPatternPositions(t,o){for(const c in this.binders){const m=this.binders[c];m instanceof Du&&m.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,c,m,y){let x=!1;for(const E in t){const k=o.getPositions(E);for(const z of k){const F=c.feature(z.index);for(const O in this.binders){const $=this.binders[O];if(($ instanceof wa||$ instanceof hs||$ instanceof nl)&&$.expression.isStateDependent===!0){const G=m.paint.get(O);$.expression=G.value,$.updatePaintArray(z.start,z.end,F,t[E],y),x=!0}}}}return x}defines(){const t=[];for(const o in this.binders){const c=this.binders[o];(c instanceof Fc||c instanceof Du)&&t.push(...c.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof wa||c instanceof hs)for(let m=0;m<c.paintVertexAttributes.length;m++)t.push(c.paintVertexAttributes[m].name);else if(c instanceof nl)for(let m=0;m<mi.members.length;m++)t.push(mi.members[m].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof Fc||c instanceof Du||c instanceof hs)for(const m of c.uniformNames)t.push(m)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const c=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof Fc||y instanceof Du||y instanceof hs){for(const x of y.uniformNames)if(o[x]){const E=y.getBinding(t,o[x],x);c.push({name:x,property:m,binding:E})}}}return c}setUniforms(t,o,c,m){for(const{name:y,property:x,binding:E}of o)this.binders[x].setUniform(E,m,c.get(x),y)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const c=this.binders[o];if(t&&c instanceof nl){const m=t.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(c instanceof wa||c instanceof hs)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(t){for(const o in this.binders){const c=this.binders[o];(c instanceof wa||c instanceof hs||c instanceof nl)&&c.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof wa||o instanceof hs||o instanceof nl)&&o.destroy()}}}class Kl{constructor(t,o,c=()=>!0){this.programConfigurations={};for(const m of t)this.programConfigurations[m.id]=new B_(m,o,c);this.needsUpload=!1,this._featureMap=new Mu,this._bufferOffset=0}populatePaintArrays(t,o,c,m,y,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(t,o,m,y,x);o.id!==void 0&&this._featureMap.add(o.id,c,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,c,m){for(const y of c)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(t,this._featureMap,o,y,m)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function eb(r,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}function F_(r,t,o){const c={color:{source:l,composite:ve},number:{source:K,composite:l}},m=function(y){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[y]}(r);return m&&m[o]||c[t][o]}at("ConstantBinder",Fc),at("CrossFadedConstantBinder",Du),at("SourceExpressionBinder",wa),at("CrossFadedCompositeBinder",nl),at("CompositeExpressionBinder",hs),at("ProgramConfiguration",B_,{omit:["_buffers"]}),at("ProgramConfigurationSet",Kl);var Si=8192;const lf=Math.pow(2,14)-1,O_=-lf-1;function Yl(r){const t=Si/r.extent,o=r.loadGeometry();for(let c=0;c<o.length;c++){const m=o[c];for(let y=0;y<m.length;y++){const x=m[y],E=Math.round(x.x*t),k=Math.round(x.y*t);x.x=U(E,O_,lf),x.y=U(k,O_,lf),(E<x.x||E>x.x+1||k<x.y||k>x.y+1)&&De("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Jl(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?Yl(r):[]}}function td(r,t,o,c,m){r.emplaceBack(2*t+(c+1)/2,2*o+(m+1)/2)}class uf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.indexArray=new gr,this.segments=new hn,this.programConfigurations=new Kl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){const m=this.layers[0],y=[];let x=null,E=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),E=!x.isConstant());for(const{feature:k,id:z,index:F,sourceLayerIndex:O}of t){const $=this.layers[0]._featureFilter.needGeometry,G=Jl(k,$);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),G,c))continue;const q=E?x.evaluate(G,{},c):void 0,ae={id:z,properties:k.properties,type:k.type,sourceLayerIndex:O,index:F,geometry:$?G.geometry:Yl(k),patterns:{},sortKey:q};y.push(ae)}E&&y.sort((k,z)=>k.sortKey-z.sortKey);for(const k of y){const{geometry:z,index:F,sourceLayerIndex:O}=k,$=t[F].feature;this.addFeature(k,z,F,c),o.featureIndex.insert($,z,F,O,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Dr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,c,m){for(const y of o)for(const x of y){const E=x.x,k=x.y;if(E<0||E>=Si||k<0||k>=Si)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),F=z.vertexLength;td(this.layoutVertexArray,E,k,-1,-1),td(this.layoutVertexArray,E,k,1,-1),td(this.layoutVertexArray,E,k,1,1),td(this.layoutVertexArray,E,k,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,{},m)}}function N_(r,t){for(let o=0;o<r.length;o++)if(Ru(t,r[o]))return!0;for(let o=0;o<t.length;o++)if(Ru(r,t[o]))return!0;return!!cf(r,t)}function tb(r,t,o){return!!Ru(r,t)||!!hf(t,r,o)}function U_(r,t){if(r.length===1)return $_(t,r[0]);for(let o=0;o<t.length;o++){const c=t[o];for(let m=0;m<c.length;m++)if(Ru(r,c[m]))return!0}for(let o=0;o<r.length;o++)if($_(t,r[o]))return!0;for(let o=0;o<t.length;o++)if(cf(r,t[o]))return!0;return!1}function nb(r,t,o){if(r.length>1){if(cf(r,t))return!0;for(let c=0;c<t.length;c++)if(hf(t[c],r,o))return!0}for(let c=0;c<r.length;c++)if(hf(r[c],t,o))return!0;return!1}function cf(r,t){if(r.length===0||t.length===0)return!1;for(let o=0;o<r.length-1;o++){const c=r[o],m=r[o+1];for(let y=0;y<t.length-1;y++)if(ib(c,m,t[y],t[y+1]))return!0}return!1}function ib(r,t,o,c){return je(r,o,c)!==je(t,o,c)&&je(r,t,o)!==je(r,t,c)}function hf(r,t,o){const c=o*o;if(t.length===1)return r.distSqr(t[0])<c;for(let m=1;m<t.length;m++)if(V_(r,t[m-1],t[m])<c)return!0;return!1}function V_(r,t,o){const c=t.distSqr(o);if(c===0)return r.distSqr(t);const m=((r.x-t.x)*(o.x-t.x)+(r.y-t.y)*(o.y-t.y))/c;return r.distSqr(m<0?t:m>1?o:o.sub(t)._mult(m)._add(t))}function $_(r,t){let o,c,m,y=!1;for(let x=0;x<r.length;x++){o=r[x];for(let E=0,k=o.length-1;E<o.length;k=E++)c=o[E],m=o[k],c.y>t.y!=m.y>t.y&&t.x<(m.x-c.x)*(t.y-c.y)/(m.y-c.y)+c.x&&(y=!y)}return y}function Ru(r,t){let o=!1;for(let c=0,m=r.length-1;c<r.length;m=c++){const y=r[c],x=r[m];y.y>t.y!=x.y>t.y&&t.x<(x.x-y.x)*(t.y-y.y)/(x.y-y.y)+y.x&&(o=!o)}return o}function rb(r,t,o){const c=o[0],m=o[2];if(r.x<c.x&&t.x<c.x||r.x>m.x&&t.x>m.x||r.y<c.y&&t.y<c.y||r.y>m.y&&t.y>m.y)return!1;const y=je(r,t,o[0]);return y!==je(r,t,o[1])||y!==je(r,t,o[2])||y!==je(r,t,o[3])}function Oc(r,t,o){const c=t.paint.get(r).value;return c.kind==="constant"?c.value:o.programConfigurations.get(t.id).getMaxValue(r)}function nd(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function id(r,t,o,c,m){if(!t[0]&&!t[1])return r;const y=ut.convert(t)._mult(m);o==="viewport"&&y._rotate(-c);const x=[];for(let E=0;E<r.length;E++)x.push(r[E].sub(y));return x}at("CircleBucket",uf,{omit:["layers"]});const ob=new Mn({"circle-sort-key":new $e(Pe.layout_circle["circle-sort-key"])});var sb={paint:new Mn({"circle-radius":new $e(Pe.paint_circle["circle-radius"]),"circle-color":new $e(Pe.paint_circle["circle-color"]),"circle-blur":new $e(Pe.paint_circle["circle-blur"]),"circle-opacity":new $e(Pe.paint_circle["circle-opacity"]),"circle-translate":new Se(Pe.paint_circle["circle-translate"]),"circle-translate-anchor":new Se(Pe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Se(Pe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Se(Pe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $e(Pe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $e(Pe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $e(Pe.paint_circle["circle-stroke-opacity"])}),layout:ob},Bu=typeof Float32Array!="undefined"?Float32Array:Array;function df(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Z_(r,t,o){var c=t[0],m=t[1],y=t[2],x=t[3],E=t[4],k=t[5],z=t[6],F=t[7],O=t[8],$=t[9],G=t[10],q=t[11],ae=t[12],le=t[13],xe=t[14],Ce=t[15],Te=o[0],Re=o[1],Ze=o[2],Ne=o[3];return r[0]=Te*c+Re*E+Ze*O+Ne*ae,r[1]=Te*m+Re*k+Ze*$+Ne*le,r[2]=Te*y+Re*z+Ze*G+Ne*xe,r[3]=Te*x+Re*F+Ze*q+Ne*Ce,r[4]=(Te=o[4])*c+(Re=o[5])*E+(Ze=o[6])*O+(Ne=o[7])*ae,r[5]=Te*m+Re*k+Ze*$+Ne*le,r[6]=Te*y+Re*z+Ze*G+Ne*xe,r[7]=Te*x+Re*F+Ze*q+Ne*Ce,r[8]=(Te=o[8])*c+(Re=o[9])*E+(Ze=o[10])*O+(Ne=o[11])*ae,r[9]=Te*m+Re*k+Ze*$+Ne*le,r[10]=Te*y+Re*z+Ze*G+Ne*xe,r[11]=Te*x+Re*F+Ze*q+Ne*Ce,r[12]=(Te=o[12])*c+(Re=o[13])*E+(Ze=o[14])*O+(Ne=o[15])*ae,r[13]=Te*m+Re*k+Ze*$+Ne*le,r[14]=Te*y+Re*z+Ze*G+Ne*xe,r[15]=Te*x+Re*F+Ze*q+Ne*Ce,r}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var Nc,ab=Z_;function rd(r,t,o){var c=t[0],m=t[1],y=t[2],x=t[3];return r[0]=o[0]*c+o[4]*m+o[8]*y+o[12]*x,r[1]=o[1]*c+o[5]*m+o[9]*y+o[13]*x,r[2]=o[2]*c+o[6]*m+o[10]*y+o[14]*x,r[3]=o[3]*c+o[7]*m+o[11]*y+o[15]*x,r}function j_(r,t){const o=rd([],[r.x,r.y,0,1],t);return new ut(o[0]/o[3],o[1]/o[3])}Nc=new Bu(4),Bu!=Float32Array&&(Nc[0]=0,Nc[1]=0,Nc[2]=0,Nc[3]=0);class G_ extends uf{}at("HeatmapBucket",G_,{omit:["layers"]});var lb={paint:new Mn({"heatmap-radius":new $e(Pe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $e(Pe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Se(Pe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Mr(Pe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Se(Pe.paint_heatmap["heatmap-opacity"])})};function pf(r,{width:t,height:o},c,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==t*o*c)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${t*o*c}`)}else m=new Uint8Array(t*o*c);return r.width=t,r.height=o,r.data=m,r}function W_(r,{width:t,height:o},c){if(t===r.width&&o===r.height)return;const m=pf({},{width:t,height:o},c);ff(r,m,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,t),height:Math.min(r.height,o)},c),r.width=t,r.height=o,r.data=m.data}function ff(r,t,o,c,m,y){if(m.width===0||m.height===0)return t;if(m.width>r.width||m.height>r.height||o.x>r.width-m.width||o.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>t.width||m.height>t.height||c.x>t.width-m.width||c.y>t.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=r.data,E=t.data;for(let k=0;k<m.height;k++){const z=((o.y+k)*r.width+o.x)*y,F=((c.y+k)*t.width+c.x)*y;for(let O=0;O<m.width*y;O++)E[F+O]=x[z+O]}return t}class Uc{constructor(t,o){pf(this,t,1,o)}resize(t){W_(this,t,1)}clone(){return new Uc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,m,y){ff(t,o,c,m,y,1)}}class vo{constructor(t,o){pf(this,t,4,o)}resize(t){W_(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new vo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,c,m,y){ff(t,o,c,m,y,4)}}function q_(r){const t={},o=r.resolution||256,c=r.clips?r.clips.length:1,m=r.image||new vo({width:o,height:c}),y=(x,E,k)=>{t[r.evaluationKey]=k;const z=r.expression.evaluate(t);m.data[x+E+0]=Math.floor(255*z.r/z.a),m.data[x+E+1]=Math.floor(255*z.g/z.a),m.data[x+E+2]=Math.floor(255*z.b/z.a),m.data[x+E+3]=Math.floor(255*z.a)};if(r.clips)for(let x=0,E=0;x<c;++x,E+=4*o)for(let k=0,z=0;k<o;k++,z+=4){const F=k/(o-1),{start:O,end:$}=r.clips[x];y(E,z,O*(1-F)+$*F)}else for(let x=0,E=0;x<o;x++,E+=4)y(0,E,x/(o-1));return m}at("AlphaImage",Uc),at("RGBAImage",vo);var ub={paint:new Mn({"hillshade-illumination-direction":new Se(Pe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Se(Pe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Se(Pe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Se(Pe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Se(Pe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Se(Pe.paint_hillshade["hillshade-accent-color"])})};const cb=ui([{name:"a_pos",components:2,type:"Int16"}],4),{members:hb}=cb;var mf={exports:{}};function od(r,t,o){o=o||2;var c,m,y,x,E,k,z,F=t&&t.length,O=F?t[0]*o:r.length,$=H_(r,0,O,o,!0),G=[];if(!$||$.next===$.prev)return G;if(F&&($=function(ae,le,xe,Ce){var Te,Re,Ze,Ne=[];for(Te=0,Re=le.length;Te<Re;Te++)(Ze=H_(ae,le[Te]*Ce,Te<Re-1?le[Te+1]*Ce:ae.length,Ce,!1))===Ze.next&&(Ze.steiner=!0),Ne.push(vb(Ze));for(Ne.sort(gb),Te=0;Te<Ne.length;Te++)xe=il(xe=_b(Ne[Te],xe),xe.next);return xe}(r,t,$,o)),r.length>80*o){c=y=r[0],m=x=r[1];for(var q=o;q<O;q+=o)(E=r[q])<c&&(c=E),(k=r[q+1])<m&&(m=k),E>y&&(y=E),k>x&&(x=k);z=(z=Math.max(y-c,x-m))!==0?1/z:0}return Vc($,G,o,c,m,z),G}function H_(r,t,o,c,m){var y,x;if(m===yf(r,t,o,c)>0)for(y=t;y<o;y+=c)x=Y_(y,r[y],r[y+1],x);else for(y=o-c;y>=t;y-=c)x=Y_(y,r[y],r[y+1],x);return x&&sd(x,x.next)&&(Zc(x),x=x.next),x}function il(r,t){if(!r)return r;t||(t=r);var o,c=r;do if(o=!1,c.steiner||!sd(c,c.next)&&ci(c.prev,c,c.next)!==0)c=c.next;else{if(Zc(c),(c=t=c.prev)===c.next)break;o=!0}while(o||c!==t);return t}function Vc(r,t,o,c,m,y,x){if(r){!x&&y&&function(F,O,$,G){var q=F;do q.z===null&&(q.z=gf(q.x,q.y,O,$,G)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==F);q.prevZ.nextZ=null,q.prevZ=null,function(ae){var le,xe,Ce,Te,Re,Ze,Ne,ct,vt=1;do{for(xe=ae,ae=null,Re=null,Ze=0;xe;){for(Ze++,Ce=xe,Ne=0,le=0;le<vt&&(Ne++,Ce=Ce.nextZ);le++);for(ct=vt;Ne>0||ct>0&&Ce;)Ne!==0&&(ct===0||!Ce||xe.z<=Ce.z)?(Te=xe,xe=xe.nextZ,Ne--):(Te=Ce,Ce=Ce.nextZ,ct--),Re?Re.nextZ=Te:ae=Te,Te.prevZ=Re,Re=Te;xe=Ce}Re.nextZ=null,vt*=2}while(Ze>1)}(q)}(r,c,m,y);for(var E,k,z=r;r.prev!==r.next;)if(E=r.prev,k=r.next,y?pb(r,c,m,y):db(r))t.push(E.i/o),t.push(r.i/o),t.push(k.i/o),Zc(r),r=k.next,z=k.next;else if((r=k)===z){x?x===1?Vc(r=fb(il(r),t,o),t,o,c,m,y,2):x===2&&mb(r,t,o,c,m,y):Vc(il(r),t,o,c,m,y,1);break}}}function db(r){var t=r.prev,o=r,c=r.next;if(ci(t,o,c)>=0)return!1;for(var m=r.next.next;m!==r.prev;){if(Fu(t.x,t.y,o.x,o.y,c.x,c.y,m.x,m.y)&&ci(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function pb(r,t,o,c){var m=r.prev,y=r,x=r.next;if(ci(m,y,x)>=0)return!1;for(var E=m.x>y.x?m.x>x.x?m.x:x.x:y.x>x.x?y.x:x.x,k=m.y>y.y?m.y>x.y?m.y:x.y:y.y>x.y?y.y:x.y,z=gf(m.x<y.x?m.x<x.x?m.x:x.x:y.x<x.x?y.x:x.x,m.y<y.y?m.y<x.y?m.y:x.y:y.y<x.y?y.y:x.y,t,o,c),F=gf(E,k,t,o,c),O=r.prevZ,$=r.nextZ;O&&O.z>=z&&$&&$.z<=F;){if(O!==r.prev&&O!==r.next&&Fu(m.x,m.y,y.x,y.y,x.x,x.y,O.x,O.y)&&ci(O.prev,O,O.next)>=0||(O=O.prevZ,$!==r.prev&&$!==r.next&&Fu(m.x,m.y,y.x,y.y,x.x,x.y,$.x,$.y)&&ci($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;O&&O.z>=z;){if(O!==r.prev&&O!==r.next&&Fu(m.x,m.y,y.x,y.y,x.x,x.y,O.x,O.y)&&ci(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;$&&$.z<=F;){if($!==r.prev&&$!==r.next&&Fu(m.x,m.y,y.x,y.y,x.x,x.y,$.x,$.y)&&ci($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function fb(r,t,o){var c=r;do{var m=c.prev,y=c.next.next;!sd(m,y)&&X_(m,c,c.next,y)&&$c(m,y)&&$c(y,m)&&(t.push(m.i/o),t.push(c.i/o),t.push(y.i/o),Zc(c),Zc(c.next),c=r=y),c=c.next}while(c!==r);return il(c)}function mb(r,t,o,c,m,y){var x=r;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&xb(x,E)){var k=K_(x,E);return x=il(x,x.next),k=il(k,k.next),Vc(x,t,o,c,m,y),void Vc(k,t,o,c,m,y)}E=E.next}x=x.next}while(x!==r)}function gb(r,t){return r.x-t.x}function _b(r,t){var o=function(y,x){var E,k=x,z=y.x,F=y.y,O=-1/0;do{if(F<=k.y&&F>=k.next.y&&k.next.y!==k.y){var $=k.x+(F-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if($<=z&&$>O){if(O=$,$===z){if(F===k.y)return k;if(F===k.next.y)return k.next}E=k.x<k.next.x?k:k.next}}k=k.next}while(k!==x);if(!E)return null;if(z===O)return E;var G,q=E,ae=E.x,le=E.y,xe=1/0;k=E;do z>=k.x&&k.x>=ae&&z!==k.x&&Fu(F<le?z:O,F,ae,le,F<le?O:z,F,k.x,k.y)&&(G=Math.abs(F-k.y)/(z-k.x),$c(k,y)&&(G<xe||G===xe&&(k.x>E.x||k.x===E.x&&yb(E,k)))&&(E=k,xe=G)),k=k.next;while(k!==q);return E}(r,t);if(!o)return t;var c=K_(o,r),m=il(o,o.next);return il(c,c.next),t===o?m:t}function yb(r,t){return ci(r.prev,r,t.prev)<0&&ci(t.next,r,r.next)<0}function gf(r,t,o,c,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-o)*m)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-c)*m)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vb(r){var t=r,o=r;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==r);return o}function Fu(r,t,o,c,m,y,x,E){return(m-x)*(t-E)-(r-x)*(y-E)>=0&&(r-x)*(c-E)-(o-x)*(t-E)>=0&&(o-x)*(y-E)-(m-x)*(c-E)>=0}function xb(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(o,c){var m=o;do{if(m.i!==o.i&&m.next.i!==o.i&&m.i!==c.i&&m.next.i!==c.i&&X_(m,m.next,o,c))return!0;m=m.next}while(m!==o);return!1}(r,t)&&($c(r,t)&&$c(t,r)&&function(o,c){var m=o,y=!1,x=(o.x+c.x)/2,E=(o.y+c.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&x<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==o);return y}(r,t)&&(ci(r.prev,r,t.prev)||ci(r,t.prev,t))||sd(r,t)&&ci(r.prev,r,r.next)>0&&ci(t.prev,t,t.next)>0)}function ci(r,t,o){return(t.y-r.y)*(o.x-t.x)-(t.x-r.x)*(o.y-t.y)}function sd(r,t){return r.x===t.x&&r.y===t.y}function X_(r,t,o,c){var m=ld(ci(r,t,o)),y=ld(ci(r,t,c)),x=ld(ci(o,c,r)),E=ld(ci(o,c,t));return m!==y&&x!==E||!(m!==0||!ad(r,o,t))||!(y!==0||!ad(r,c,t))||!(x!==0||!ad(o,r,c))||!(E!==0||!ad(o,t,c))}function ad(r,t,o){return t.x<=Math.max(r.x,o.x)&&t.x>=Math.min(r.x,o.x)&&t.y<=Math.max(r.y,o.y)&&t.y>=Math.min(r.y,o.y)}function ld(r){return r>0?1:r<0?-1:0}function $c(r,t){return ci(r.prev,r,r.next)<0?ci(r,t,r.next)>=0&&ci(r,r.prev,t)>=0:ci(r,t,r.prev)<0||ci(r,r.next,t)<0}function K_(r,t){var o=new _f(r.i,r.x,r.y),c=new _f(t.i,t.x,t.y),m=r.next,y=t.prev;return r.next=t,t.prev=r,o.next=m,m.prev=o,c.next=o,o.prev=c,y.next=c,c.prev=y,c}function Y_(r,t,o,c){var m=new _f(r,t,o);return c?(m.next=c.next,m.prev=c,c.next.prev=m,c.next=m):(m.prev=m,m.next=m),m}function Zc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function _f(r,t,o){this.i=r,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yf(r,t,o,c){for(var m=0,y=t,x=o-c;y<o;y+=c)m+=(r[x]-r[y])*(r[y+1]+r[x+1]),x=y;return m}mf.exports=od,mf.exports.default=od,od.deviation=function(r,t,o,c){var m=t&&t.length,y=Math.abs(yf(r,0,m?t[0]*o:r.length,o));if(m)for(var x=0,E=t.length;x<E;x++)y-=Math.abs(yf(r,t[x]*o,x<E-1?t[x+1]*o:r.length,o));var k=0;for(x=0;x<c.length;x+=3){var z=c[x]*o,F=c[x+1]*o,O=c[x+2]*o;k+=Math.abs((r[z]-r[O])*(r[F+1]-r[z+1])-(r[z]-r[F])*(r[O+1]-r[z+1]))}return y===0&&k===0?0:Math.abs((k-y)/y)},od.flatten=function(r){for(var t=r[0][0].length,o={vertices:[],holes:[],dimensions:t},c=0,m=0;m<r.length;m++){for(var y=0;y<r[m].length;y++)for(var x=0;x<t;x++)o.vertices.push(r[m][y][x]);m>0&&o.holes.push(c+=r[m-1].length)}return o};var J_=mf.exports;function wb(r,t,o,c,m){Q_(r,t,o||0,c||r.length-1,m||bb)}function Q_(r,t,o,c,m){for(;c>o;){if(c-o>600){var y=c-o+1,x=t-o+1,E=Math.log(y),k=.5*Math.exp(2*E/3),z=.5*Math.sqrt(E*k*(y-k)/y)*(x-y/2<0?-1:1);Q_(r,t,Math.max(o,Math.floor(t-x*k/y+z)),Math.min(c,Math.floor(t+(y-x)*k/y+z)),m)}var F=r[t],O=o,$=c;for(jc(r,o,t),m(r[c],F)>0&&jc(r,o,c);O<$;){for(jc(r,O,$),O++,$--;m(r[O],F)<0;)O++;for(;m(r[$],F)>0;)$--}m(r[o],F)===0?jc(r,o,$):jc(r,++$,c),$<=t&&(o=$+1),t<=$&&(c=$-1)}}function jc(r,t,o){var c=r[t];r[t]=r[o],r[o]=c}function bb(r,t){return r<t?-1:r>t?1:0}function vf(r,t){const o=r.length;if(o<=1)return[r];const c=[];let m,y;for(let x=0;x<o;x++){const E=Ue(r[x]);E!==0&&(r[x].area=Math.abs(E),y===void 0&&(y=E<0),y===E<0?(m&&c.push(m),m=[r[x]]):m.push(r[x]))}if(m&&c.push(m),t>1)for(let x=0;x<c.length;x++)c[x].length<=t||(wb(c[x],t,1,c[x].length-1,Sb),c[x]=c[x].slice(0,t));return c}function Sb(r,t){return t.area-r.area}function xf(r,t,o){const c=o.patternDependencies;let m=!1;for(const y of t){const x=y.paint.get(`${r}-pattern`);x.isConstant()||(m=!0);const E=x.constantOr(null);E&&(m=!0,c[E.to]=!0,c[E.from]=!0)}return m}function wf(r,t,o,c,m){const y=m.patternDependencies;for(const x of t){const E=x.paint.get(`${r}-pattern`).value;if(E.kind!=="constant"){let k=E.evaluate({zoom:c-1},o,{},m.availableImages),z=E.evaluate({zoom:c},o,{},m.availableImages),F=E.evaluate({zoom:c+1},o,{},m.availableImages);k=k&&k.name?k.name:k,z=z&&z.name?z.name:z,F=F&&F.name?F.name:F,y[k]=!0,y[z]=!0,y[F]=!0,o.patterns[x.id]={min:k,mid:z,max:F}}}return o}class bf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new rn,this.indexArray=new gr,this.indexArray2=new Fo,this.programConfigurations=new Kl(t.layers,t.zoom),this.segments=new hn,this.segments2=new hn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=xf("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),x=[];for(const{feature:E,id:k,index:z,sourceLayerIndex:F}of t){const O=this.layers[0]._featureFilter.needGeometry,$=Jl(E,O);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),$,c))continue;const G=y?m.evaluate($,{},c,o.availableImages):void 0,q={id:k,properties:E.properties,type:E.type,sourceLayerIndex:F,index:z,geometry:O?$.geometry:Yl(E),patterns:{},sortKey:G};x.push(q)}y&&x.sort((E,k)=>E.sortKey-k.sortKey);for(const E of x){const{geometry:k,index:z,sourceLayerIndex:F}=E;if(this.hasPattern){const O=wf("fill",this.layers,E,this.zoom,o);this.patternFeatures.push(O)}else this.addFeature(E,k,z,c,{});o.featureIndex.insert(t[z].feature,k,z,F,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hb),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,c,m,y){for(const x of vf(o,500)){let E=0;for(const G of x)E+=G.length;const k=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),z=k.vertexLength,F=[],O=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&O.push(F.length/2);const q=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),ae=q.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(ae+G.length-1,ae),F.push(G[0].x),F.push(G[0].y);for(let le=1;le<G.length;le++)this.layoutVertexArray.emplaceBack(G[le].x,G[le].y),this.indexArray2.emplaceBack(ae+le-1,ae+le),F.push(G[le].x),F.push(G[le].y);q.vertexLength+=G.length,q.primitiveLength+=G.length}const $=J_(F,O);for(let G=0;G<$.length;G+=3)this.indexArray.emplaceBack(z+$[G],z+$[G+1],z+$[G+2]);k.vertexLength+=E,k.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,m)}}at("FillBucket",bf,{omit:["layers","patternFeatures"]});const Eb=new Mn({"fill-sort-key":new $e(Pe.layout_fill["fill-sort-key"])});var Tb={paint:new Mn({"fill-antialias":new Se(Pe.paint_fill["fill-antialias"]),"fill-opacity":new $e(Pe.paint_fill["fill-opacity"]),"fill-color":new $e(Pe.paint_fill["fill-color"]),"fill-outline-color":new $e(Pe.paint_fill["fill-outline-color"]),"fill-translate":new Se(Pe.paint_fill["fill-translate"]),"fill-translate-anchor":new Se(Pe.paint_fill["fill-translate-anchor"]),"fill-pattern":new $t(Pe.paint_fill["fill-pattern"])}),layout:Eb};const Pb=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),{members:kb}=Pb;var rl={},Cb=ut,ey=Ou;function Ou(r,t,o,c,m){this.properties={},this.extent=o,this.type=0,this._pbf=r,this._geometry=-1,this._keys=c,this._values=m,r.readFields(Ib,this,t)}function Ib(r,t,o){r==1?t.id=o.readVarint():r==2?function(c,m){for(var y=c.readVarint()+c.pos;c.pos<y;){var x=m._keys[c.readVarint()],E=m._values[c.readVarint()];m.properties[x]=E}}(o,t):r==3?t.type=o.readVarint():r==4&&(t._geometry=o.pos)}function zb(r){for(var t,o,c=0,m=0,y=r.length,x=y-1;m<y;x=m++)c+=((o=r[x]).x-(t=r[m]).x)*(t.y+o.y);return c}Ou.types=["Unknown","Point","LineString","Polygon"],Ou.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var t,o=r.readVarint()+r.pos,c=1,m=0,y=0,x=0,E=[];r.pos<o;){if(m<=0){var k=r.readVarint();c=7&k,m=k>>3}if(m--,c===1||c===2)y+=r.readSVarint(),x+=r.readSVarint(),c===1&&(t&&E.push(t),t=[]),t.push(new Cb(y,x));else{if(c!==7)throw new Error("unknown command "+c);t&&t.push(t[0].clone())}}return t&&E.push(t),E},Ou.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var t=r.readVarint()+r.pos,o=1,c=0,m=0,y=0,x=1/0,E=-1/0,k=1/0,z=-1/0;r.pos<t;){if(c<=0){var F=r.readVarint();o=7&F,c=F>>3}if(c--,o===1||o===2)(m+=r.readSVarint())<x&&(x=m),m>E&&(E=m),(y+=r.readSVarint())<k&&(k=y),y>z&&(z=y);else if(o!==7)throw new Error("unknown command "+o)}return[x,k,E,z]},Ou.prototype.toGeoJSON=function(r,t,o){var c,m,y=this.extent*Math.pow(2,o),x=this.extent*r,E=this.extent*t,k=this.loadGeometry(),z=Ou.types[this.type];function F(G){for(var q=0;q<G.length;q++){var ae=G[q];G[q]=[360*(ae.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(ae.y+E)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(c=0;c<k.length;c++)O[c]=k[c][0];F(k=O);break;case 2:for(c=0;c<k.length;c++)F(k[c]);break;case 3:for(k=function(G){var q=G.length;if(q<=1)return[G];for(var ae,le,xe=[],Ce=0;Ce<q;Ce++){var Te=zb(G[Ce]);Te!==0&&(le===void 0&&(le=Te<0),le===Te<0?(ae&&xe.push(ae),ae=[G[Ce]]):ae.push(G[Ce]))}return ae&&xe.push(ae),xe}(k),c=0;c<k.length;c++)for(m=0;m<k[c].length;m++)F(k[c][m])}k.length===1?k=k[0]:z="Multi"+z;var $={type:"Feature",geometry:{type:z,coordinates:k},properties:this.properties};return"id"in this&&($.id=this.id),$};var Ab=ey,ty=ny;function ny(r,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Mb,this,t),this.length=this._features.length}function Mb(r,t,o){r===15?t.version=o.readVarint():r===1?t.name=o.readString():r===5?t.extent=o.readVarint():r===2?t._features.push(o.pos):r===3?t._keys.push(o.readString()):r===4&&t._values.push(function(c){for(var m=null,y=c.readVarint()+c.pos;c.pos<y;){var x=c.readVarint()>>3;m=x===1?c.readString():x===2?c.readFloat():x===3?c.readDouble():x===4?c.readVarint64():x===5?c.readVarint():x===6?c.readSVarint():x===7?c.readBoolean():null}return m}(o))}ny.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var t=this._pbf.readVarint()+this._pbf.pos;return new Ab(this._pbf,t,this.extent,this._keys,this._values)};var Lb=ty;function Db(r,t,o){if(r===3){var c=new Lb(o,o.readVarint()+o.pos);c.length&&(t[c.name]=c)}}rl.VectorTile=function(r,t){this.layers=r.readFields(Db,{},t)},rl.VectorTileFeature=ey,rl.VectorTileLayer=ty;const Rb=rl.VectorTileFeature.types,Sf=Math.pow(2,13);function Gc(r,t,o,c,m,y,x,E){r.emplaceBack(t,o,2*Math.floor(c*Sf)+x,m*Sf*2,y*Sf*2,Math.round(E))}class Ef{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Yn,this.indexArray=new gr,this.programConfigurations=new Kl(t.layers,t.zoom),this.segments=new hn,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.features=[],this.hasPattern=xf("fill-extrusion",this.layers,o);for(const{feature:m,id:y,index:x,sourceLayerIndex:E}of t){const k=this.layers[0]._featureFilter.needGeometry,z=Jl(m,k);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),z,c))continue;const F={id:y,sourceLayerIndex:E,index:x,geometry:k?z.geometry:Yl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(wf("fill-extrusion",this.layers,F,this.zoom,o)):this.addFeature(F,F.geometry,x,c,{}),o.featureIndex.insert(m,F.geometry,x,E,this.index,!0)}}addFeatures(t,o,c){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,o,c)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,kb),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,c,m,y){for(const x of vf(o,500)){let E=0;for(const G of x)E+=G.length;let k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const G of x){if(G.length===0||Fb(G))continue;let q=0;for(let ae=0;ae<G.length;ae++){const le=G[ae];if(ae>=1){const xe=G[ae-1];if(!Bb(le,xe)){k.vertexLength+4>hn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ce=le.sub(xe)._perp()._unit(),Te=xe.dist(le);q+Te>32768&&(q=0),Gc(this.layoutVertexArray,le.x,le.y,Ce.x,Ce.y,0,0,q),Gc(this.layoutVertexArray,le.x,le.y,Ce.x,Ce.y,0,1,q),q+=Te,Gc(this.layoutVertexArray,xe.x,xe.y,Ce.x,Ce.y,0,0,q),Gc(this.layoutVertexArray,xe.x,xe.y,Ce.x,Ce.y,0,1,q);const Re=k.vertexLength;this.indexArray.emplaceBack(Re,Re+2,Re+1),this.indexArray.emplaceBack(Re+1,Re+2,Re+3),k.vertexLength+=4,k.primitiveLength+=2}}}}if(k.vertexLength+E>hn.MAX_VERTEX_ARRAY_LENGTH&&(k=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),Rb[t.type]!=="Polygon")continue;const z=[],F=[],O=k.vertexLength;for(const G of x)if(G.length!==0){G!==x[0]&&F.push(z.length/2);for(let q=0;q<G.length;q++){const ae=G[q];Gc(this.layoutVertexArray,ae.x,ae.y,0,0,1,1,0),z.push(ae.x),z.push(ae.y)}}const $=J_(z,F);for(let G=0;G<$.length;G+=3)this.indexArray.emplaceBack(O+$[G],O+$[G+2],O+$[G+1]);k.primitiveLength+=$.length/3,k.vertexLength+=E}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,m)}}function Bb(r,t){return r.x===t.x&&(r.x<0||r.x>Si)||r.y===t.y&&(r.y<0||r.y>Si)}function Fb(r){return r.every(t=>t.x<0)||r.every(t=>t.x>Si)||r.every(t=>t.y<0)||r.every(t=>t.y>Si)}at("FillExtrusionBucket",Ef,{omit:["layers","features"]});var Ob={paint:new Mn({"fill-extrusion-opacity":new Se(Pe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $e(Pe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Se(Pe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Se(Pe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new $t(Pe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $e(Pe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $e(Pe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Se(Pe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Wc(r,t){return r.x*t.x+r.y*t.y}function iy(r,t){if(r.length===1){let o=0;const c=t[o++];let m;for(;!m||c.equals(m);)if(m=t[o++],!m)return 1/0;for(;o<t.length;o++){const y=t[o],x=r[0],E=m.sub(c),k=y.sub(c),z=x.sub(c),F=Wc(E,E),O=Wc(E,k),$=Wc(k,k),G=Wc(z,E),q=Wc(z,k),ae=F*$-O*O,le=($*G-O*q)/ae,xe=(F*q-O*G)/ae,Ce=c.z*(1-le-xe)+m.z*le+y.z*xe;if(isFinite(Ce))return Ce}return 1/0}{let o=1/0;for(const c of t)o=Math.min(o,c.z);return o}}const Nb=ui([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ub}=Nb,Vb=ui([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$b}=Vb,Zb=rl.VectorTileFeature.types,jb=Math.cos(Math.PI/180*37.5),ry=Math.pow(2,14)/.5;class Tf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Ot,this.layoutVertexArray2=new cn,this.indexArray=new gr,this.programConfigurations=new Kl(t.layers,t.zoom),this.segments=new hn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,c){this.hasPattern=xf("line",this.layers,o);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),x=[];for(const{feature:E,id:k,index:z,sourceLayerIndex:F}of t){const O=this.layers[0]._featureFilter.needGeometry,$=Jl(E,O);if(!this.layers[0]._featureFilter.filter(new a(this.zoom),$,c))continue;const G=y?m.evaluate($,{},c):void 0,q={id:k,properties:E.properties,type:E.type,sourceLayerIndex:F,index:z,geometry:O?$.geometry:Yl(E),patterns:{},sortKey:G};x.push(q)}y&&x.sort((E,k)=>E.sortKey-k.sortKey);for(const E of x){const{geometry:k,index:z,sourceLayerIndex:F}=E;if(this.hasPattern){const O=wf("line",this.layers,E,this.zoom,o);this.patternFeatures.push(O)}else this.addFeature(E,k,z,c,{});o.featureIndex.insert(t[z].feature,k,z,F,this.index)}}update(t,o,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,c)}addFeatures(t,o,c){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,$b)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ub),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,c,m,y){const x=this.layers[0].layout,E=x.get("line-join").evaluate(t,{}),k=x.get("line-cap"),z=x.get("line-miter-limit"),F=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const O of o)this.addLine(O,t,E,k,z,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,c,y,m)}addLine(t,o,c,m,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let xe=0;xe<t.length-1;xe++)this.totalDistance+=t[xe].dist(t[xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=Zb[o.type]==="Polygon";let k=t.length;for(;k>=2&&t[k-1].equals(t[k-2]);)k--;let z=0;for(;z<k-1&&t[z].equals(t[z+1]);)z++;if(k<(E?3:2))return;c==="bevel"&&(y=1.05);const F=this.overscaling<=16?122880/(512*this.overscaling):0,O=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let $,G,q,ae,le;this.e1=this.e2=-1,E&&($=t[k-2],le=t[z].sub($)._unit()._perp());for(let xe=z;xe<k;xe++){if(q=xe===k-1?E?t[z+1]:void 0:t[xe+1],q&&t[xe].equals(q))continue;le&&(ae=le),$&&(G=$),$=t[xe],le=q?q.sub($)._unit()._perp():ae,ae=ae||le;let Ce=ae.add(le);Ce.x===0&&Ce.y===0||Ce._unit();const Te=ae.x*le.x+ae.y*le.y,Re=Ce.x*le.x+Ce.y*le.y,Ze=Re!==0?1/Re:1/0,Ne=2*Math.sqrt(2-2*Re),ct=Re<jb&&G&&q,vt=ae.x*le.y-ae.y*le.x>0;if(ct&&xe>z){const Qe=$.dist(G);if(Qe>2*F){const lt=$.sub($.sub(G)._mult(F/Qe)._round());this.updateDistance(G,lt),this.addCurrentVertex(lt,ae,0,0,O),G=lt}}const rt=G&&q;let ot=rt?c:E?"butt":m;if(rt&&ot==="round"&&(Ze<x?ot="miter":Ze<=2&&(ot="fakeround")),ot==="miter"&&Ze>y&&(ot="bevel"),ot==="bevel"&&(Ze>2&&(ot="flipbevel"),Ze<y&&(ot="miter")),G&&this.updateDistance(G,$),ot==="miter")Ce._mult(Ze),this.addCurrentVertex($,Ce,0,0,O);else if(ot==="flipbevel"){if(Ze>100)Ce=le.mult(-1);else{const Qe=Ze*ae.add(le).mag()/ae.sub(le).mag();Ce._perp()._mult(Qe*(vt?-1:1))}this.addCurrentVertex($,Ce,0,0,O),this.addCurrentVertex($,Ce.mult(-1),0,0,O)}else if(ot==="bevel"||ot==="fakeround"){const Qe=-Math.sqrt(Ze*Ze-1),lt=vt?Qe:0,st=vt?0:Qe;if(G&&this.addCurrentVertex($,ae,lt,st,O),ot==="fakeround"){const qe=Math.round(180*Ne/Math.PI/20);for(let Tt=1;Tt<qe;Tt++){let bt=Tt/qe;if(bt!==.5){const vn=bt-.5;bt+=bt*vn*(bt-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*vn*vn+(.848013+Te*(.215638*Te-1.06021)))}const on=le.sub(ae)._mult(bt)._add(ae)._unit()._mult(vt?-1:1);this.addHalfVertex($,on.x,on.y,!1,vt,0,O)}}q&&this.addCurrentVertex($,le,-lt,-st,O)}else if(ot==="butt")this.addCurrentVertex($,Ce,0,0,O);else if(ot==="square"){const Qe=G?1:-1;this.addCurrentVertex($,Ce,Qe,Qe,O)}else ot==="round"&&(G&&(this.addCurrentVertex($,ae,0,0,O),this.addCurrentVertex($,ae,1,1,O,!0)),q&&(this.addCurrentVertex($,le,-1,-1,O,!0),this.addCurrentVertex($,le,0,0,O)));if(ct&&xe<k-1){const Qe=$.dist(q);if(Qe>2*F){const lt=$.add(q.sub($)._mult(F/Qe)._round());this.updateDistance($,lt),this.addCurrentVertex(lt,le,0,0,O),$=lt}}}}addCurrentVertex(t,o,c,m,y,x=!1){const E=o.y*m-o.x,k=-o.y-o.x*m;this.addHalfVertex(t,o.x+o.y*c,o.y-o.x*c,x,!1,c,y),this.addHalfVertex(t,E,k,x,!0,-m,y),this.distance>ry/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(t,o,c,m,y,x))}addHalfVertex({x:t,y:o},c,m,y,x,E,k){const z=.5*(this.lineClips?this.scaledDistance*(ry-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(y?1:0),(o<<1)+(x?1:0),Math.round(63*c)+128,Math.round(63*m)+128,1+(E===0?0:E<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),k.primitiveLength++),x?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}at("LineBucket",Tf,{omit:["layers","patternFeatures"]});const Gb=new Mn({"line-cap":new Se(Pe.layout_line["line-cap"]),"line-join":new $e(Pe.layout_line["line-join"]),"line-miter-limit":new Se(Pe.layout_line["line-miter-limit"]),"line-round-limit":new Se(Pe.layout_line["line-round-limit"]),"line-sort-key":new $e(Pe.layout_line["line-sort-key"])});var oy={paint:new Mn({"line-opacity":new $e(Pe.paint_line["line-opacity"]),"line-color":new $e(Pe.paint_line["line-color"]),"line-translate":new Se(Pe.paint_line["line-translate"]),"line-translate-anchor":new Se(Pe.paint_line["line-translate-anchor"]),"line-width":new $e(Pe.paint_line["line-width"]),"line-gap-width":new $e(Pe.paint_line["line-gap-width"]),"line-offset":new $e(Pe.paint_line["line-offset"]),"line-blur":new $e(Pe.paint_line["line-blur"]),"line-dasharray":new Qt(Pe.paint_line["line-dasharray"]),"line-pattern":new $t(Pe.paint_line["line-pattern"]),"line-gradient":new Mr(Pe.paint_line["line-gradient"])}),layout:Gb};const sy=new class extends $e{possiblyEvaluate(r,t){return t=new a(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(r,t)}evaluate(r,t,o,c){return t=ye({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(r,t,o,c)}}(oy.paint.properties["line-width"].specification);function ay(r,t){return t>0?t+2*r:r}sy.useIntegerZoom=!0;const Wb=ui([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),qb=ui([{name:"a_projected_pos",components:3,type:"Float32"}],4);ui([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Hb=ui([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ui([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ly=ui([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Xb=ui([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Kb(r,t,o){return r.sections.forEach(c=>{c.text=function(m,y,x){const E=y.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),mr.applyArabicShaping&&(m=mr.applyArabicShaping(m)),m}(c.text,t,o)}),r}ui([{name:"triangle",components:3,type:"Uint16"}]),ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ui([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ui([{type:"Float32",name:"offsetX"}]),ui([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const qc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Bi=24,Pf=Tn,uy=function(r,t,o,c,m){var y,x,E=8*m-c-1,k=(1<<E)-1,z=k>>1,F=-7,O=o?m-1:0,$=o?-1:1,G=r[t+O];for(O+=$,y=G&(1<<-F)-1,G>>=-F,F+=E;F>0;y=256*y+r[t+O],O+=$,F-=8);for(x=y&(1<<-F)-1,y>>=-F,F+=c;F>0;x=256*x+r[t+O],O+=$,F-=8);if(y===0)y=1-z;else{if(y===k)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,c),y-=z}return(G?-1:1)*x*Math.pow(2,y-c)},cy=function(r,t,o,c,m,y){var x,E,k,z=8*y-m-1,F=(1<<z)-1,O=F>>1,$=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=c?0:y-1,q=c?1:-1,ae=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(E=isNaN(t)?1:0,x=F):(x=Math.floor(Math.log(t)/Math.LN2),t*(k=Math.pow(2,-x))<1&&(x--,k*=2),(t+=x+O>=1?$/k:$*Math.pow(2,1-O))*k>=2&&(x++,k/=2),x+O>=F?(E=0,x=F):x+O>=1?(E=(t*k-1)*Math.pow(2,m),x+=O):(E=t*Math.pow(2,O-1)*Math.pow(2,m),x=0));m>=8;r[o+G]=255&E,G+=q,E/=256,m-=8);for(x=x<<m|E,z+=m;z>0;r[o+G]=255&x,G+=q,x/=256,z-=8);r[o+G-q]|=128*ae};function Tn(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Tn.Varint=0,Tn.Fixed64=1,Tn.Bytes=2,Tn.Fixed32=5;var ol,kf=4294967296,hy=1/kf,dy=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ba(r){return r.type===Tn.Bytes?r.readVarint()+r.pos:r.pos+1}function Nu(r,t,o){return o?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}function py(r,t,o){var c=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(c);for(var m=o.pos-1;m>=r;m--)o.buf[m+c]=o.buf[m]}function Yb(r,t){for(var o=0;o<r.length;o++)t.writeVarint(r[o])}function Jb(r,t){for(var o=0;o<r.length;o++)t.writeSVarint(r[o])}function Qb(r,t){for(var o=0;o<r.length;o++)t.writeFloat(r[o])}function e2(r,t){for(var o=0;o<r.length;o++)t.writeDouble(r[o])}function t2(r,t){for(var o=0;o<r.length;o++)t.writeBoolean(r[o])}function n2(r,t){for(var o=0;o<r.length;o++)t.writeFixed32(r[o])}function i2(r,t){for(var o=0;o<r.length;o++)t.writeSFixed32(r[o])}function r2(r,t){for(var o=0;o<r.length;o++)t.writeFixed64(r[o])}function o2(r,t){for(var o=0;o<r.length;o++)t.writeSFixed64(r[o])}function ud(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+16777216*r[t+3]}function Uu(r,t,o){r[o]=t,r[o+1]=t>>>8,r[o+2]=t>>>16,r[o+3]=t>>>24}function fy(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+(r[t+3]<<24)}function s2(r,t,o){r===1&&o.readMessage(a2,t)}function a2(r,t,o){if(r===3){const{id:c,bitmap:m,width:y,height:x,left:E,top:k,advance:z}=o.readMessage(l2,{});t.push({id:c,bitmap:new Uc({width:y+6,height:x+6},m),metrics:{width:y,height:x,left:E,top:k,advance:z}})}}function l2(r,t,o){r===1?t.id=o.readVarint():r===2?t.bitmap=o.readBytes():r===3?t.width=o.readVarint():r===4?t.height=o.readVarint():r===5?t.left=o.readSVarint():r===6?t.top=o.readSVarint():r===7&&(t.advance=o.readVarint())}function my(r){let t=0,o=0;for(const x of r)t+=x.w*x.h,o=Math.max(o,x.w);r.sort((x,E)=>E.h-x.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let m=0,y=0;for(const x of r)for(let E=c.length-1;E>=0;E--){const k=c[E];if(!(x.w>k.w||x.h>k.h)){if(x.x=k.x,x.y=k.y,y=Math.max(y,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===k.w&&x.h===k.h){const z=c.pop();E<c.length&&(c[E]=z)}else x.h===k.h?(k.x+=x.w,k.w-=x.w):x.w===k.w?(k.y+=x.h,k.h-=x.h):(c.push({x:k.x+x.w,y:k.y,w:k.w-x.w,h:x.h}),k.y+=x.h,k.h-=x.h);break}}return{w:m,h:y,fill:t/(m*y)||0}}Tn.prototype={destroy:function(){this.buf=null},readFields:function(r,t,o){for(o=o||this.length;this.pos<o;){var c=this.readVarint(),m=c>>3,y=this.pos;this.type=7&c,r(m,t,this),this.pos===y&&this.skip(c)}return t},readMessage:function(r,t){return this.readFields(r,t,this.readVarint()+this.pos)},readFixed32:function(){var r=ud(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=fy(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=ud(this.buf,this.pos)+ud(this.buf,this.pos+4)*kf;return this.pos+=8,r},readSFixed64:function(){var r=ud(this.buf,this.pos)+fy(this.buf,this.pos+4)*kf;return this.pos+=8,r},readFloat:function(){var r=uy(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=uy(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var t,o,c=this.buf;return t=127&(o=c[this.pos++]),o<128?t:(t|=(127&(o=c[this.pos++]))<<7,o<128?t:(t|=(127&(o=c[this.pos++]))<<14,o<128?t:(t|=(127&(o=c[this.pos++]))<<21,o<128?t:function(m,y,x){var E,k,z=x.buf;if(E=(112&(k=z[x.pos++]))>>4,k<128||(E|=(127&(k=z[x.pos++]))<<3,k<128)||(E|=(127&(k=z[x.pos++]))<<10,k<128)||(E|=(127&(k=z[x.pos++]))<<17,k<128)||(E|=(127&(k=z[x.pos++]))<<24,k<128)||(E|=(1&(k=z[x.pos++]))<<31,k<128))return Nu(m,E,y);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=c[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var r=this.readVarint()+this.pos,t=this.pos;return this.pos=r,r-t>=12&&dy?function(o,c,m){return dy.decode(o.subarray(c,m))}(this.buf,t,r):function(o,c,m){for(var y="",x=c;x<m;){var E,k,z,F=o[x],O=null,$=F>239?4:F>223?3:F>191?2:1;if(x+$>m)break;$===1?F<128&&(O=F):$===2?(192&(E=o[x+1]))==128&&(O=(31&F)<<6|63&E)<=127&&(O=null):$===3?(k=o[x+2],(192&(E=o[x+1]))==128&&(192&k)==128&&((O=(15&F)<<12|(63&E)<<6|63&k)<=2047||O>=55296&&O<=57343)&&(O=null)):$===4&&(k=o[x+2],z=o[x+3],(192&(E=o[x+1]))==128&&(192&k)==128&&(192&z)==128&&((O=(15&F)<<18|(63&E)<<12|(63&k)<<6|63&z)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,$=1):O>65535&&(O-=65536,y+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),y+=String.fromCharCode(O),x+=$}return y}(this.buf,t,r)},readBytes:function(){var r=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,r);return this.pos=r,t},readPackedVarint:function(r,t){if(this.type!==Tn.Bytes)return r.push(this.readVarint(t));var o=ba(this);for(r=r||[];this.pos<o;)r.push(this.readVarint(t));return r},readPackedSVarint:function(r){if(this.type!==Tn.Bytes)return r.push(this.readSVarint());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Tn.Bytes)return r.push(this.readBoolean());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Tn.Bytes)return r.push(this.readFloat());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Tn.Bytes)return r.push(this.readDouble());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Tn.Bytes)return r.push(this.readFixed32());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Tn.Bytes)return r.push(this.readSFixed32());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Tn.Bytes)return r.push(this.readFixed64());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Tn.Bytes)return r.push(this.readSFixed64());var t=ba(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed64());return r},skip:function(r){var t=7&r;if(t===Tn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Tn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Tn.Fixed32)this.pos+=4;else{if(t!==Tn.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(r,t){this.writeVarint(r<<3|t)},realloc:function(r){for(var t=this.length||16;t<this.pos+r;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Uu(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Uu(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Uu(this.buf,-1&r,this.pos),Uu(this.buf,Math.floor(r*hy),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Uu(this.buf,-1&r,this.pos),Uu(this.buf,Math.floor(r*hy),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(t,o){var c,m;if(t>=0?(c=t%4294967296|0,m=t/4294967296|0):(m=~(-t/4294967296),4294967295^(c=~(-t%4294967296))?c=c+1|0:(c=0,m=m+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(y,x,E){E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,E.buf[E.pos]=127&(y>>>=7)}(c,0,o),function(y,x){var E=(7&y)<<4;x.buf[x.pos++]|=E|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(m,o)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(Boolean(r))},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var t=this.pos;this.pos=function(c,m,y){for(var x,E,k=0;k<m.length;k++){if((x=m.charCodeAt(k))>55295&&x<57344){if(!E){x>56319||k+1===m.length?(c[y++]=239,c[y++]=191,c[y++]=189):E=x;continue}if(x<56320){c[y++]=239,c[y++]=191,c[y++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(c[y++]=239,c[y++]=191,c[y++]=189,E=null);x<128?c[y++]=x:(x<2048?c[y++]=x>>6|192:(x<65536?c[y++]=x>>12|224:(c[y++]=x>>18|240,c[y++]=x>>12&63|128),c[y++]=x>>6&63|128),c[y++]=63&x|128)}return y}(this.buf,r,this.pos);var o=this.pos-t;o>=128&&py(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(r){this.realloc(4),cy(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),cy(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var t=r.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=r[o]},writeRawMessage:function(r,t){this.pos++;var o=this.pos;r(t,this);var c=this.pos-o;c>=128&&py(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeMessage:function(r,t,o){this.writeTag(r,Tn.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(r,t){t.length&&this.writeMessage(r,Yb,t)},writePackedSVarint:function(r,t){t.length&&this.writeMessage(r,Jb,t)},writePackedBoolean:function(r,t){t.length&&this.writeMessage(r,t2,t)},writePackedFloat:function(r,t){t.length&&this.writeMessage(r,Qb,t)},writePackedDouble:function(r,t){t.length&&this.writeMessage(r,e2,t)},writePackedFixed32:function(r,t){t.length&&this.writeMessage(r,n2,t)},writePackedSFixed32:function(r,t){t.length&&this.writeMessage(r,i2,t)},writePackedFixed64:function(r,t){t.length&&this.writeMessage(r,r2,t)},writePackedSFixed64:function(r,t){t.length&&this.writeMessage(r,o2,t)},writeBytesField:function(r,t){this.writeTag(r,Tn.Bytes),this.writeBytes(t)},writeFixed32Field:function(r,t){this.writeTag(r,Tn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(r,t){this.writeTag(r,Tn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(r,t){this.writeTag(r,Tn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(r,t){this.writeTag(r,Tn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(r,t){this.writeTag(r,Tn.Varint),this.writeVarint(t)},writeSVarintField:function(r,t){this.writeTag(r,Tn.Varint),this.writeSVarint(t)},writeStringField:function(r,t){this.writeTag(r,Tn.Bytes),this.writeString(t)},writeFloatField:function(r,t){this.writeTag(r,Tn.Fixed32),this.writeFloat(t)},writeDoubleField:function(r,t){this.writeTag(r,Tn.Fixed64),this.writeDouble(t)},writeBooleanField:function(r,t){this.writeVarintField(r,Boolean(t))}};class Cf{constructor(t,{pixelRatio:o,version:c,stretchX:m,stretchY:y,content:x}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=m,this.stretchY=y,this.content=x,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class gy{constructor(t,o){const c={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(t,c,y),this.addImages(o,m,y);const{w:x,h:E}=my(y),k=new vo({width:x||1,height:E||1});for(const z in t){const F=t[z],O=c[z].paddedRect;vo.copy(F.data,k,{x:0,y:0},{x:O.x+1,y:O.y+1},F.data)}for(const z in o){const F=o[z],O=m[z].paddedRect,$=O.x+1,G=O.y+1,q=F.data.width,ae=F.data.height;vo.copy(F.data,k,{x:0,y:0},{x:$,y:G},F.data),vo.copy(F.data,k,{x:0,y:ae-1},{x:$,y:G-1},{width:q,height:1}),vo.copy(F.data,k,{x:0,y:0},{x:$,y:G+ae},{width:q,height:1}),vo.copy(F.data,k,{x:q-1,y:0},{x:$-1,y:G},{width:1,height:ae}),vo.copy(F.data,k,{x:0,y:0},{x:$+q,y:G},{width:1,height:ae})}this.image=k,this.iconPositions=c,this.patternPositions=m}addImages(t,o,c){for(const m in t){const y=t[m],x={x:0,y:0,w:y.data.width+2,h:y.data.height+2};c.push(x),o[m]=new Cf(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in t.updatedImages)this.patchUpdatedImage(this.iconPositions[c],t.getImage(c),o),this.patchUpdatedImage(this.patternPositions[c],t.getImage(c),o)}patchUpdatedImage(t,o,c){if(!t||!o||t.version===o.version)return;t.version=o.version;const[m,y]=t.tl;c.update(o.data,void 0,{x:m,y})}}at("ImagePosition",Cf),at("ImageAtlas",gy),u.WritingMode=void 0,(ol=u.WritingMode||(u.WritingMode={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";const cd=-17;class Hc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const c=new Hc;return c.scale=t||1,c.fontStack=o,c}static forImage(t){const o=new Hc;return o.imageName=t,o}}class Vu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const c=new Vu;for(let m=0;m<t.sections.length;m++){const y=t.sections[m];y.image?c.addImageSection(y):c.addTextSection(y,o)}return c}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let c=0;c<t.length;c++){const m=t.charCodeAt(c+1)||null,y=t.charCodeAt(c-1)||null;o+=m&&Us(m)&&!qc[t[c+1]]||y&&Us(y)&&!qc[t[c-1]]||!qc[t[c]]?t[c]:qc[t[c]]}return o}(this.text)}trim(){let t=0;for(let c=0;c<this.text.length&&dd[this.text.charCodeAt(c)];c++)t++;let o=this.text.length;for(let c=this.text.length-1;c>=0&&c>=t&&dd[this.text.charCodeAt(c)];c--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const c=new Vu;return c.text=this.text.substring(t,o),c.sectionIndex=this.sectionIndex.slice(t,o),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(Hc.forText(t.scale,t.fontStack||o));const c=this.sections.length-1;for(let m=0;m<t.text.length;++m)this.sectionIndex.push(c)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void De("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(Hc.forImage(o)),this.sectionIndex.push(this.sections.length-1)):De("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function hd(r,t,o,c,m,y,x,E,k,z,F,O,$,G,q,ae){const le=Vu.fromFeature(r,m);let xe;O===u.WritingMode.vertical&&le.verticalizePunctuation();const{processBidirectionalText:Ce,processStyledBidirectionalText:Te}=mr;if(Ce&&le.sections.length===1){xe=[];const Ne=Ce(le.toString(),If(le,z,y,t,c,G,q));for(const ct of Ne){const vt=new Vu;vt.text=ct,vt.sections=le.sections;for(let rt=0;rt<ct.length;rt++)vt.sectionIndex.push(0);xe.push(vt)}}else if(Te){xe=[];const Ne=Te(le.text,le.sectionIndex,If(le,z,y,t,c,G,q));for(const ct of Ne){const vt=new Vu;vt.text=ct[0],vt.sectionIndex=ct[1],vt.sections=le.sections,xe.push(vt)}}else xe=function(Ne,ct){const vt=[],rt=Ne.text;let ot=0;for(const Qe of ct)vt.push(Ne.substring(ot,Qe)),ot=Qe;return ot<rt.length&&vt.push(Ne.substring(ot,rt.length)),vt}(le,If(le,z,y,t,c,G,q));const Re=[],Ze={positionedLines:Re,text:le.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(Ne,ct,vt,rt,ot,Qe,lt,st,qe,Tt,bt,on){let vn=0,Vn=cd,$n=0,Gi=0;const gi=st==="right"?1:st==="left"?0:.5;let _i=0;for(const yi of ot){yi.trim();const qi=yi.getMaxScale(),ir=(qi-1)*Bi,_r={positionedGlyphs:[],lineOffset:0};Ne.positionedLines[_i]=_r;const Br=_r.positionedGlyphs;let Fr=0;if(!yi.length()){Vn+=Qe,++_i;continue}for(let Ii=0;Ii<yi.length();Ii++){const en=yi.getSection(Ii),eo=yi.getSectionIndex(Ii),Hi=yi.getCharCode(Ii);let rr=0,Vo=null,ds=null,ps=null,Ea=Bi;const $o=!(qe===u.WritingMode.horizontal||!bt&&!Ns(Hi)||bt&&(dd[Hi]||(Ci=Hi,et.Arabic(Ci)||et["Arabic Supplement"](Ci)||et["Arabic Extended-A"](Ci)||et["Arabic Presentation Forms-A"](Ci)||et["Arabic Presentation Forms-B"](Ci))));if(en.imageName){const xo=rt[en.imageName];if(!xo)continue;ps=en.imageName,Ne.iconsInText=Ne.iconsInText||!0,ds=xo.paddedRect;const Or=xo.displaySize;en.scale=en.scale*Bi/on,Vo={width:Or[0],height:Or[1],left:1,top:-3,advance:$o?Or[1]:Or[0]},rr=ir+(Bi-Or[1]*en.scale),Ea=Vo.advance;const Ta=$o?Or[0]*en.scale-Bi*qi:Or[1]*en.scale-Bi*qi;Ta>0&&Ta>Fr&&(Fr=Ta)}else{const xo=vt[en.fontStack],Or=xo&&xo[Hi];if(Or&&Or.rect)ds=Or.rect,Vo=Or.metrics;else{const Ta=ct[en.fontStack],Yc=Ta&&Ta[Hi];if(!Yc)continue;Vo=Yc.metrics}rr=(qi-en.scale)*Bi}$o?(Ne.verticalizable=!0,Br.push({glyph:Hi,imageName:ps,x:vn,y:Vn+rr,vertical:$o,scale:en.scale,fontStack:en.fontStack,sectionIndex:eo,metrics:Vo,rect:ds}),vn+=Ea*en.scale+Tt):(Br.push({glyph:Hi,imageName:ps,x:vn,y:Vn+rr,vertical:$o,scale:en.scale,fontStack:en.fontStack,sectionIndex:eo,metrics:Vo,rect:ds}),vn+=Vo.advance*en.scale+Tt)}Br.length!==0&&($n=Math.max(vn-Tt,$n),h2(Br,0,Br.length-1,gi,Fr)),vn=0;const qn=Qe*qi+Fr;_r.lineOffset=Math.max(Fr,ir),Vn+=qn,Gi=Math.max(qn,Gi),++_i}var Ci;const Wi=Vn-cd,{horizontalAlign:nr,verticalAlign:Rr}=zf(lt);(function(yi,qi,ir,_r,Br,Fr,qn,Ii,en){const eo=(qi-ir)*Br;let Hi=0;Hi=Fr!==qn?-Ii*_r-cd:(-_r*en+.5)*qn;for(const rr of yi)for(const Vo of rr.positionedGlyphs)Vo.x+=eo,Vo.y+=Hi})(Ne.positionedLines,gi,nr,Rr,$n,Gi,Qe,Wi,ot.length),Ne.top+=-Rr*Wi,Ne.bottom=Ne.top+Wi,Ne.left+=-nr*$n,Ne.right=Ne.left+$n}(Ze,t,o,c,xe,x,E,k,O,z,$,ae),!function(Ne){for(const ct of Ne)if(ct.positionedGlyphs.length!==0)return!1;return!0}(Re)&&Ze}const dd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},u2={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _y(r,t,o,c,m,y){if(t.imageName){const x=c[t.imageName];return x?x.displaySize[0]*t.scale*Bi/y+m:0}{const x=o[t.fontStack],E=x&&x[r];return E?E.metrics.advance*t.scale+m:0}}function yy(r,t,o,c){const m=Math.pow(r-t,2);return c?r<t?m/2:2*m:m+Math.abs(o)*o}function c2(r,t,o){let c=0;return r===10&&(c-=1e4),o&&(c+=150),r!==40&&r!==65288||(c+=50),t!==41&&t!==65289||(c+=50),c}function vy(r,t,o,c,m,y){let x=null,E=yy(t,o,m,y);for(const k of c){const z=yy(t-k.x,o,m,y)+k.badness;z<=E&&(x=k,E=z)}return{index:r,x:t,priorBreak:x,badness:E}}function xy(r){return r?xy(r.priorBreak).concat(r.index):[]}function If(r,t,o,c,m,y,x){if(y!=="point")return[];if(!r)return[];const E=[],k=function($,G,q,ae,le,xe){let Ce=0;for(let Te=0;Te<$.length();Te++){const Re=$.getSection(Te);Ce+=_y($.getCharCode(Te),Re,ae,le,G,xe)}return Ce/Math.max(1,Math.ceil(Ce/q))}(r,t,o,c,m,x),z=r.text.indexOf("\u200B")>=0;let F=0;for(let $=0;$<r.length();$++){const G=r.getSection($),q=r.getCharCode($);if(dd[q]||(F+=_y(q,G,c,m,t,x)),$<r.length()-1){const ae=!((O=q)<11904||!(et["Bopomofo Extended"](O)||et.Bopomofo(O)||et["CJK Compatibility Forms"](O)||et["CJK Compatibility Ideographs"](O)||et["CJK Compatibility"](O)||et["CJK Radicals Supplement"](O)||et["CJK Strokes"](O)||et["CJK Symbols and Punctuation"](O)||et["CJK Unified Ideographs Extension A"](O)||et["CJK Unified Ideographs"](O)||et["Enclosed CJK Letters and Months"](O)||et["Halfwidth and Fullwidth Forms"](O)||et.Hiragana(O)||et["Ideographic Description Characters"](O)||et["Kangxi Radicals"](O)||et["Katakana Phonetic Extensions"](O)||et.Katakana(O)||et["Vertical Forms"](O)||et["Yi Radicals"](O)||et["Yi Syllables"](O)));(u2[q]||ae||G.imageName)&&E.push(vy($+1,F,k,E,c2(q,r.getCharCode($+1),ae&&z),!1))}}var O;return xy(vy(r.length(),F,k,E,0,!0))}function zf(r){let t=.5,o=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function h2(r,t,o,c,m){if(!c&&!m)return;const y=r[o],x=(r[o].x+y.metrics.advance*y.scale)*c;for(let E=t;E<=o;E++)r[E].x-=x,r[E].y+=m}function d2(r,t,o){const{horizontalAlign:c,verticalAlign:m}=zf(o),y=t[0]-r.displaySize[0]*c,x=t[1]-r.displaySize[1]*m;return{image:r,top:x,bottom:x+r.displaySize[1],left:y,right:y+r.displaySize[0]}}function wy(r,t,o,c,m,y){const x=r.image;let E;if(x.content){const le=x.content,xe=x.pixelRatio||1;E=[le[0]/xe,le[1]/xe,x.displaySize[0]-le[2]/xe,x.displaySize[1]-le[3]/xe]}const k=t.left*y,z=t.right*y;let F,O,$,G;o==="width"||o==="both"?(G=m[0]+k-c[3],O=m[0]+z+c[1]):(G=m[0]+(k+z-x.displaySize[0])/2,O=G+x.displaySize[0]);const q=t.top*y,ae=t.bottom*y;return o==="height"||o==="both"?(F=m[1]+q-c[0],$=m[1]+ae+c[2]):(F=m[1]+(q+ae-x.displaySize[1])/2,$=F+x.displaySize[1]),{image:x,top:F,right:O,bottom:$,left:G,collisionPadding:E}}const Sa=128;function by(r,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new a(r+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:m}=o;let y=0;for(;y<c.length&&c[y]<=r;)y++;y=Math.max(0,y-1);let x=y;for(;x<c.length&&c[x]<r+1;)x++;x=Math.min(c.length-1,x);const E=c[y],k=c[x];return o.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:k,minSize:o.evaluate(new a(E)),maxSize:o.evaluate(new a(k)),interpolationType:m}}}class sl extends ut{constructor(t,o,c,m){super(t,o),this.angle=c,m!==void 0&&(this.segment=m)}clone(){return new sl(this.x,this.y,this.angle,this.segment)}}function Sy(r,t,o,c,m){if(t.segment===void 0)return!0;let y=t,x=t.segment+1,E=0;for(;E>-o/2;){if(x--,x<0)return!1;E-=r[x].dist(y),y=r[x]}E+=r[x].dist(r[x+1]),x++;const k=[];let z=0;for(;E<o/2;){const F=r[x],O=r[x+1];if(!O)return!1;let $=r[x-1].angleTo(F)-F.angleTo(O);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:E,angleDelta:$}),z+=$;E-k[0].distance>c;)z-=k.shift().angleDelta;if(z>m)return!1;x++,E+=F.dist(O)}return!0}function Ey(r){let t=0;for(let o=0;o<r.length-1;o++)t+=r[o].dist(r[o+1]);return t}function Ty(r,t,o){return r?.6*t*o:0}function Py(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function p2(r,t,o,c,m,y){const x=Ty(o,m,y),E=Py(o,c)*y;let k=0;const z=Ey(r)/2;for(let F=0;F<r.length-1;F++){const O=r[F],$=r[F+1],G=O.dist($);if(k+G>z){const q=(z-k)/G,ae=Nn(O.x,$.x,q),le=Nn(O.y,$.y,q),xe=new sl(ae,le,$.angleTo(O),F);return xe._round(),!x||Sy(r,xe,E,x,t)?xe:void 0}k+=G}}function f2(r,t,o,c,m,y,x,E,k){const z=Ty(c,y,x),F=Py(c,m),O=F*x,$=r[0].x===0||r[0].x===k||r[0].y===0||r[0].y===k;return t-O<t/4&&(t=O+t/4),ky(r,$?t/2*E%t:(F/2+2*y)*x*E%t,t,z,o,O,$,!1,k)}function ky(r,t,o,c,m,y,x,E,k){const z=y/2,F=Ey(r);let O=0,$=t-o,G=[];for(let q=0;q<r.length-1;q++){const ae=r[q],le=r[q+1],xe=ae.dist(le),Ce=le.angleTo(ae);for(;$+o<O+xe;){$+=o;const Te=($-O)/xe,Re=Nn(ae.x,le.x,Te),Ze=Nn(ae.y,le.y,Te);if(Re>=0&&Re<k&&Ze>=0&&Ze<k&&$-z>=0&&$+z<=F){const Ne=new sl(Re,Ze,Ce,q);Ne._round(),c&&!Sy(r,Ne,y,c,m)||G.push(Ne)}}O+=xe}return E||G.length||x||(G=ky(r,O/2,o,c,m,y,x,!0,k)),G}function Cy(r,t,o,c,m){const y=[];for(let x=0;x<r.length;x++){const E=r[x];let k;for(let z=0;z<E.length-1;z++){let F=E[z],O=E[z+1];F.x<t&&O.x<t||(F.x<t?F=new ut(t,F.y+(t-F.x)/(O.x-F.x)*(O.y-F.y))._round():O.x<t&&(O=new ut(t,F.y+(t-F.x)/(O.x-F.x)*(O.y-F.y))._round()),F.y<o&&O.y<o||(F.y<o?F=new ut(F.x+(o-F.y)/(O.y-F.y)*(O.x-F.x),o)._round():O.y<o&&(O=new ut(F.x+(o-F.y)/(O.y-F.y)*(O.x-F.x),o)._round()),F.x>=c&&O.x>=c||(F.x>=c?F=new ut(c,F.y+(c-F.x)/(O.x-F.x)*(O.y-F.y))._round():O.x>=c&&(O=new ut(c,F.y+(c-F.x)/(O.x-F.x)*(O.y-F.y))._round()),F.y>=m&&O.y>=m||(F.y>=m?F=new ut(F.x+(m-F.y)/(O.y-F.y)*(O.x-F.x),m)._round():O.y>=m&&(O=new ut(F.x+(m-F.y)/(O.y-F.y)*(O.x-F.x),m)._round()),k&&F.equals(k[k.length-1])||(k=[F],y.push(k)),k.push(O)))))}}return y}function Iy(r,t,o,c){const m=[],y=r.image,x=y.pixelRatio,E=y.paddedRect.w-2,k=y.paddedRect.h-2,z=r.right-r.left,F=r.bottom-r.top,O=y.stretchX||[[0,E]],$=y.stretchY||[[0,k]],G=(Qe,lt)=>Qe+lt[1]-lt[0],q=O.reduce(G,0),ae=$.reduce(G,0),le=E-q,xe=k-ae;let Ce=0,Te=q,Re=0,Ze=ae,Ne=0,ct=le,vt=0,rt=xe;if(y.content&&c){const Qe=y.content;Ce=pd(O,0,Qe[0]),Re=pd($,0,Qe[1]),Te=pd(O,Qe[0],Qe[2]),Ze=pd($,Qe[1],Qe[3]),Ne=Qe[0]-Ce,vt=Qe[1]-Re,ct=Qe[2]-Qe[0]-Te,rt=Qe[3]-Qe[1]-Ze}const ot=(Qe,lt,st,qe)=>{const Tt=fd(Qe.stretch-Ce,Te,z,r.left),bt=md(Qe.fixed-Ne,ct,Qe.stretch,q),on=fd(lt.stretch-Re,Ze,F,r.top),vn=md(lt.fixed-vt,rt,lt.stretch,ae),Vn=fd(st.stretch-Ce,Te,z,r.left),$n=md(st.fixed-Ne,ct,st.stretch,q),Gi=fd(qe.stretch-Re,Ze,F,r.top),gi=md(qe.fixed-vt,rt,qe.stretch,ae),_i=new ut(Tt,on),Ci=new ut(Vn,on),Wi=new ut(Vn,Gi),nr=new ut(Tt,Gi),Rr=new ut(bt/x,vn/x),yi=new ut($n/x,gi/x),qi=t*Math.PI/180;if(qi){const Br=Math.sin(qi),Fr=Math.cos(qi),qn=[Fr,-Br,Br,Fr];_i._matMult(qn),Ci._matMult(qn),nr._matMult(qn),Wi._matMult(qn)}const ir=Qe.stretch+Qe.fixed,_r=lt.stretch+lt.fixed;return{tl:_i,tr:Ci,bl:nr,br:Wi,tex:{x:y.paddedRect.x+1+ir,y:y.paddedRect.y+1+_r,w:st.stretch+st.fixed-ir,h:qe.stretch+qe.fixed-_r},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rr,pixelOffsetBR:yi,minFontScaleX:ct/x/z,minFontScaleY:rt/x/F,isSDF:o}};if(c&&(y.stretchX||y.stretchY)){const Qe=zy(O,le,q),lt=zy($,xe,ae);for(let st=0;st<Qe.length-1;st++){const qe=Qe[st],Tt=Qe[st+1];for(let bt=0;bt<lt.length-1;bt++)m.push(ot(qe,lt[bt],Tt,lt[bt+1]))}}else m.push(ot({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:k+1}));return m}function pd(r,t,o){let c=0;for(const m of r)c+=Math.max(t,Math.min(o,m[1]))-Math.max(t,Math.min(o,m[0]));return c}function zy(r,t,o){const c=[{fixed:-1,stretch:0}];for(const[m,y]of r){const x=c[c.length-1];c.push({fixed:m-x.stretch,stretch:x.stretch}),c.push({fixed:m-x.stretch,stretch:x.stretch+(y-m)})}return c.push({fixed:t+1,stretch:o}),c}function fd(r,t,o,c){return r/t*o+c}function md(r,t,o,c){return r-t*o/c}at("Anchor",sl);class gd{constructor(t,o,c,m,y,x,E,k,z,F){if(this.boxStartIndex=t.length,z){let O=x.top,$=x.bottom;const G=x.collisionPadding;G&&(O-=G[1],$+=G[3]);let q=$-O;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let O=x.top*E-k,$=x.bottom*E+k,G=x.left*E-k,q=x.right*E+k;const ae=x.collisionPadding;if(ae&&(G-=ae[0]*E,O-=ae[1]*E,q+=ae[2]*E,$+=ae[3]*E),F){const le=new ut(G,O),xe=new ut(q,O),Ce=new ut(G,$),Te=new ut(q,$),Re=F*Math.PI/180;le._rotate(Re),xe._rotate(Re),Ce._rotate(Re),Te._rotate(Re),G=Math.min(le.x,xe.x,Ce.x,Te.x),q=Math.max(le.x,xe.x,Ce.x,Te.x),O=Math.min(le.y,xe.y,Ce.y,Te.y),$=Math.max(le.y,xe.y,Ce.y,Te.y)}t.emplaceBack(o.x,o.y,G,O,q,$,c,m,y)}this.boxEndIndex=t.length}}class m2{constructor(t=[],o=g2){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:c}=this,m=o[t];for(;t>0;){const y=t-1>>1,x=o[y];if(c(m,x)>=0)break;o[t]=x,t=y}o[t]=m}_down(t){const{data:o,compare:c}=this,m=this.length>>1,y=o[t];for(;t<m;){let x=1+(t<<1),E=o[x];const k=x+1;if(k<this.length&&c(o[k],E)<0&&(x=k,E=o[k]),c(E,y)>=0)break;o[t]=E,t=x}o[t]=y}}function g2(r,t){return r<t?-1:r>t?1:0}function _2(r,t=1,o=!1){let c=1/0,m=1/0,y=-1/0,x=-1/0;const E=r[0];for(let G=0;G<E.length;G++){const q=E[G];(!G||q.x<c)&&(c=q.x),(!G||q.y<m)&&(m=q.y),(!G||q.x>y)&&(y=q.x),(!G||q.y>x)&&(x=q.y)}const k=Math.min(y-c,x-m);let z=k/2;const F=new m2([],y2);if(k===0)return new ut(c,m);for(let G=c;G<y;G+=k)for(let q=m;q<x;q+=k)F.push(new $u(G+z,q+z,z,r));let O=function(G){let q=0,ae=0,le=0;const xe=G[0];for(let Ce=0,Te=xe.length,Re=Te-1;Ce<Te;Re=Ce++){const Ze=xe[Ce],Ne=xe[Re],ct=Ze.x*Ne.y-Ne.x*Ze.y;ae+=(Ze.x+Ne.x)*ct,le+=(Ze.y+Ne.y)*ct,q+=3*ct}return new $u(ae/q,le/q,0,G)}(r),$=F.length;for(;F.length;){const G=F.pop();(G.d>O.d||!O.d)&&(O=G,o&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,$)),G.max-O.d<=t||(z=G.h/2,F.push(new $u(G.p.x-z,G.p.y-z,z,r)),F.push(new $u(G.p.x+z,G.p.y-z,z,r)),F.push(new $u(G.p.x-z,G.p.y+z,z,r)),F.push(new $u(G.p.x+z,G.p.y+z,z,r)),$+=4)}return o&&(console.log(`num probes: ${$}`),console.log(`best distance: ${O.d}`)),O.p}function y2(r,t){return t.max-r.max}function $u(r,t,o,c){this.p=new ut(r,t),this.h=o,this.d=function(m,y){let x=!1,E=1/0;for(let k=0;k<y.length;k++){const z=y[k];for(let F=0,O=z.length,$=O-1;F<O;$=F++){const G=z[F],q=z[$];G.y>m.y!=q.y>m.y&&m.x<(q.x-G.x)*(m.y-G.y)/(q.y-G.y)+G.x&&(x=!x),E=Math.min(E,V_(m,G,q))}}return(x?1:-1)*Math.sqrt(E)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const Af=Number.POSITIVE_INFINITY;function Ay(r,t){return t[1]!==Af?function(o,c,m){let y=0,x=0;switch(c=Math.abs(c),m=Math.abs(m),o){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(o){case"top-right":case"bottom-right":case"right":y=-c;break;case"top-left":case"bottom-left":case"left":y=c}return[y,x]}(r,t[0],t[1]):function(o,c){let m=0,y=0;c<0&&(c=0);const x=c/Math.sqrt(2);switch(o){case"top-right":case"top-left":y=x-7;break;case"bottom-right":case"bottom-left":y=7-x;break;case"bottom":y=7-c;break;case"top":y=c-7}switch(o){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=c;break;case"right":m=-c}return[m,y]}(r,t[0])}function Mf(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function v2(r,t,o,c,m,y,x,E,k,z,F){let O=y.textMaxSize.evaluate(t,{});O===void 0&&(O=x);const $=r.layers[0].layout,G=$.get("icon-offset").evaluate(t,{},F),q=Ly(o.horizontal),ae=x/24,le=r.tilePixelRatio*ae,xe=r.tilePixelRatio*O/24,Ce=r.tilePixelRatio*E,Te=r.tilePixelRatio*$.get("symbol-spacing"),Re=$.get("text-padding")*r.tilePixelRatio,Ze=$.get("icon-padding")*r.tilePixelRatio,Ne=$.get("text-max-angle")/180*Math.PI,ct=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",vt=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",rt=$.get("symbol-placement"),ot=Te/2,Qe=$.get("icon-text-fit");let lt;c&&Qe!=="none"&&(r.allowVerticalPlacement&&o.vertical&&(lt=wy(c,o.vertical,Qe,$.get("icon-text-fit-padding"),G,ae)),q&&(c=wy(c,q,Qe,$.get("icon-text-fit-padding"),G,ae)));const st=(qe,Tt)=>{Tt.x<0||Tt.x>=Si||Tt.y<0||Tt.y>=Si||function(bt,on,vn,Vn,$n,Gi,gi,_i,Ci,Wi,nr,Rr,yi,qi,ir,_r,Br,Fr,qn,Ii,en,eo,Hi,rr,Vo){const ds=bt.addToLineVertexArray(on,vn);let ps,Ea,$o,xo,Or=0,Ta=0,Yc=0,Xy=0,$f=-1,Zf=-1;const Pa={};let Ky=Bc(""),jf=0,Gf=0;if(_i._unevaluatedLayout.getValue("text-radial-offset")===void 0?[jf,Gf]=_i.layout.get("text-offset").evaluate(en,{},rr).map(Nr=>Nr*Bi):(jf=_i.layout.get("text-radial-offset").evaluate(en,{},rr)*Bi,Gf=Af),bt.allowVerticalPlacement&&Vn.vertical){const Nr=_i.layout.get("text-rotate").evaluate(en,{},rr)+90;$o=new gd(Ci,on,Wi,nr,Rr,Vn.vertical,yi,qi,ir,Nr),gi&&(xo=new gd(Ci,on,Wi,nr,Rr,gi,Br,Fr,ir,Nr))}if($n){const Nr=_i.layout.get("icon-rotate").evaluate(en,{}),Gs=_i.layout.get("icon-text-fit")!=="none",Jc=Iy($n,Nr,Hi,Gs),Qc=gi?Iy(gi,Nr,Hi,Gs):void 0;Ea=new gd(Ci,on,Wi,nr,Rr,$n,Br,Fr,!1,Nr),Or=4*Jc.length;const Qy=bt.iconSizeData;let eu=null;Qy.kind==="source"?(eu=[Sa*_i.layout.get("icon-size").evaluate(en,{})],eu[0]>al&&De(`${bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Qy.kind==="composite"&&(eu=[Sa*eo.compositeIconSizes[0].evaluate(en,{},rr),Sa*eo.compositeIconSizes[1].evaluate(en,{},rr)],(eu[0]>al||eu[1]>al)&&De(`${bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),bt.addSymbols(bt.icon,Jc,eu,Ii,qn,en,u.WritingMode.none,on,ds.lineStartIndex,ds.lineLength,-1,rr),$f=bt.icon.placedSymbolArray.length-1,Qc&&(Ta=4*Qc.length,bt.addSymbols(bt.icon,Qc,eu,Ii,qn,en,u.WritingMode.vertical,on,ds.lineStartIndex,ds.lineLength,-1,rr),Zf=bt.icon.placedSymbolArray.length-1)}const Yy=Object.keys(Vn.horizontal);for(const Nr of Yy){const Gs=Vn.horizontal[Nr];if(!ps){Ky=Bc(Gs.text);const Qc=_i.layout.get("text-rotate").evaluate(en,{},rr);ps=new gd(Ci,on,Wi,nr,Rr,Gs,yi,qi,ir,Qc)}const Jc=Gs.positionedLines.length===1;if(Yc+=My(bt,on,Gs,Gi,_i,ir,en,_r,ds,Vn.vertical?u.WritingMode.horizontal:u.WritingMode.horizontalOnly,Jc?Yy:[Nr],Pa,$f,eo,rr),Jc)break}Vn.vertical&&(Xy+=My(bt,on,Vn.vertical,Gi,_i,ir,en,_r,ds,u.WritingMode.vertical,["vertical"],Pa,Zf,eo,rr));const M2=ps?ps.boxStartIndex:bt.collisionBoxArray.length,L2=ps?ps.boxEndIndex:bt.collisionBoxArray.length,D2=$o?$o.boxStartIndex:bt.collisionBoxArray.length,R2=$o?$o.boxEndIndex:bt.collisionBoxArray.length,B2=Ea?Ea.boxStartIndex:bt.collisionBoxArray.length,F2=Ea?Ea.boxEndIndex:bt.collisionBoxArray.length,O2=xo?xo.boxStartIndex:bt.collisionBoxArray.length,N2=xo?xo.boxEndIndex:bt.collisionBoxArray.length;let fs=-1;const wd=(Nr,Gs)=>Nr&&Nr.circleDiameter?Math.max(Nr.circleDiameter,Gs):Gs;fs=wd(ps,fs),fs=wd($o,fs),fs=wd(Ea,fs),fs=wd(xo,fs);const Jy=fs>-1?1:0;Jy&&(fs*=Vo/Bi),bt.glyphOffsetArray.length>=Zu.MAX_GLYPHS&&De("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),en.sortKey!==void 0&&bt.addToSortKeyRanges(bt.symbolInstances.length,en.sortKey),bt.symbolInstances.emplaceBack(on.x,on.y,Pa.right>=0?Pa.right:-1,Pa.center>=0?Pa.center:-1,Pa.left>=0?Pa.left:-1,Pa.vertical||-1,$f,Zf,Ky,M2,L2,D2,R2,B2,F2,O2,N2,Wi,Yc,Xy,Or,Ta,Jy,0,yi,jf,Gf,fs)}(r,Tt,qe,o,c,m,lt,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,le,Re,ct,k,Ce,Ze,vt,G,t,y,z,F,x)};if(rt==="line")for(const qe of Cy(t.geometry,0,0,Si,Si)){const Tt=f2(qe,Te,Ne,o.vertical||q,c,24,xe,r.overscaling,Si);for(const bt of Tt){const on=q;on&&x2(r,on.text,ot,bt)||st(qe,bt)}}else if(rt==="line-center"){for(const qe of t.geometry)if(qe.length>1){const Tt=p2(qe,Ne,o.vertical||q,c,24,xe);Tt&&st(qe,Tt)}}else if(t.type==="Polygon")for(const qe of vf(t.geometry,0)){const Tt=_2(qe,16);st(qe[0],new sl(Tt.x,Tt.y,0))}else if(t.type==="LineString")for(const qe of t.geometry)st(qe,new sl(qe[0].x,qe[0].y,0));else if(t.type==="Point")for(const qe of t.geometry)for(const Tt of qe)st([Tt],new sl(Tt.x,Tt.y,0))}const al=32640;function My(r,t,o,c,m,y,x,E,k,z,F,O,$,G,q){const ae=function(Ce,Te,Re,Ze,Ne,ct,vt,rt){const ot=Ze.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,Qe=[];for(const lt of Te.positionedLines)for(const st of lt.positionedGlyphs){if(!st.rect)continue;const qe=st.rect||{};let Tt=4,bt=!0,on=1,vn=0;const Vn=(Ne||rt)&&st.vertical,$n=st.metrics.advance*st.scale/2;if(rt&&Te.verticalizable){const qn=(st.scale-1)*Bi,Ii=(Bi-st.metrics.width*st.scale)/2;vn=lt.lineOffset/2-(st.imageName?-Ii:qn)}if(st.imageName){const qn=vt[st.imageName];bt=qn.sdf,on=qn.pixelRatio,Tt=1/on}const Gi=Ne?[st.x+$n,st.y]:[0,0];let gi=Ne?[0,0]:[st.x+$n+Re[0],st.y+Re[1]-vn],_i=[0,0];Vn&&(_i=gi,gi=[0,0]);const Ci=(st.metrics.left-Tt)*st.scale-$n+gi[0],Wi=(-st.metrics.top-Tt)*st.scale+gi[1],nr=Ci+qe.w*st.scale/on,Rr=Wi+qe.h*st.scale/on,yi=new ut(Ci,Wi),qi=new ut(nr,Wi),ir=new ut(Ci,Rr),_r=new ut(nr,Rr);if(Vn){const qn=new ut(-$n,$n-cd),Ii=-Math.PI/2,en=12-$n,eo=new ut(22-en,-(st.imageName?en:0)),Hi=new ut(..._i);yi._rotateAround(Ii,qn)._add(eo)._add(Hi),qi._rotateAround(Ii,qn)._add(eo)._add(Hi),ir._rotateAround(Ii,qn)._add(eo)._add(Hi),_r._rotateAround(Ii,qn)._add(eo)._add(Hi)}if(ot){const qn=Math.sin(ot),Ii=Math.cos(ot),en=[Ii,-qn,qn,Ii];yi._matMult(en),qi._matMult(en),ir._matMult(en),_r._matMult(en)}const Br=new ut(0,0),Fr=new ut(0,0);Qe.push({tl:yi,tr:qi,bl:ir,br:_r,tex:qe,writingMode:Te.writingMode,glyphOffset:Gi,sectionIndex:st.sectionIndex,isSDF:bt,pixelOffsetTL:Br,pixelOffsetBR:Fr,minFontScaleX:0,minFontScaleY:0})}return Qe}(0,o,E,m,y,x,c,r.allowVerticalPlacement),le=r.textSizeData;let xe=null;le.kind==="source"?(xe=[Sa*m.layout.get("text-size").evaluate(x,{})],xe[0]>al&&De(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):le.kind==="composite"&&(xe=[Sa*G.compositeTextSizes[0].evaluate(x,{},q),Sa*G.compositeTextSizes[1].evaluate(x,{},q)],(xe[0]>al||xe[1]>al)&&De(`${r.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),r.addSymbols(r.text,ae,xe,E,y,x,z,t,k.lineStartIndex,k.lineLength,$,q);for(const Ce of F)O[Ce]=r.text.placedSymbolArray.length-1;return 4*ae.length}function Ly(r){for(const t in r)return r[t];return null}function x2(r,t,o,c){const m=r.compareText;if(t in m){const y=m[t];for(let x=y.length-1;x>=0;x--)if(c.dist(y[x])<o)return!0}else m[t]=[];return m[t].push(c),!1}const w2=rl.VectorTileFeature.types,b2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _d(r,t,o,c,m,y,x,E,k,z,F,O,$){const G=E?Math.min(al,Math.round(E[0])):0,q=E?Math.min(al,Math.round(E[1])):0;r.emplaceBack(t,o,Math.round(32*c),Math.round(32*m),y,x,(G<<1)+(k?1:0),q,16*z,16*F,256*O,256*$)}function Lf(r,t,o){r.emplaceBack(t.x,t.y,o),r.emplaceBack(t.x,t.y,o),r.emplaceBack(t.x,t.y,o),r.emplaceBack(t.x,t.y,o)}function S2(r){for(const t of r.sections)if(fa(t.text))return!0;return!1}class Df{constructor(t){this.layoutVertexArray=new Ri,this.indexArray=new gr,this.programConfigurations=t,this.segments=new hn,this.dynamicLayoutVertexArray=new Lr,this.opacityVertexArray=new Jr,this.placedSymbolArray=new Ge}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,c,m){this.isEmpty()||(c&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wb.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,qb.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,b2,!0),this.opacityVertexBuffer.itemSize=1),(c||m)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}at("SymbolBuffers",Df);class Rf{constructor(t,o,c){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new c,this.segments=new hn,this.collisionVertexArray=new js}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Hb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}at("CollisionBuffers",Rf);class Zu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(x=>x.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=df([]),this.placementViewportMatrix=df([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=by(this.zoom,o["text-size"]),this.iconSizeData=by(this.zoom,o["icon-size"]);const c=this.layers[0].layout,m=c.get("symbol-sort-key"),y=c.get("symbol-z-order");this.canOverlap=Ff(c,"text-overlap","text-allow-overlap")!=="never"||Ff(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(x=>u.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=t.sourceID}createArrays(){this.text=new Df(new Kl(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Df(new Kl(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new pt,this.lineVertexArray=new tt,this.symbolInstances=new Be}calculateGlyphDependencies(t,o,c,m,y){for(let x=0;x<t.length;x++)if(o[t.charCodeAt(x)]=!0,(c||m)&&y){const E=qc[t.charAt(x)];E&&(o[E.charCodeAt(0)]=!0)}}populate(t,o,c){const m=this.layers[0],y=m.layout,x=y.get("text-font"),E=y.get("text-field"),k=y.get("icon-image"),z=(E.value.kind!=="constant"||E.value.value instanceof ne&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),F=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,O=y.get("symbol-sort-key");if(this.features=[],!z&&!F)return;const $=o.iconDependencies,G=o.glyphDependencies,q=o.availableImages,ae=new a(this.zoom);for(const{feature:le,id:xe,index:Ce,sourceLayerIndex:Te}of t){const Re=m._featureFilter.needGeometry,Ze=Jl(le,Re);if(!m._featureFilter.filter(ae,Ze,c))continue;let Ne,ct;if(Re||(Ze.geometry=Yl(le)),z){const rt=m.getValueAndResolveTokens("text-field",Ze,c,q),ot=ne.factory(rt);S2(ot)&&(this.hasRTLText=!0),(!this.hasRTLText||el()==="unavailable"||this.hasRTLText&&mr.isParsed())&&(Ne=Kb(ot,m,Ze))}if(F){const rt=m.getValueAndResolveTokens("icon-image",Ze,c,q);ct=rt instanceof pe?rt:pe.fromString(rt)}if(!Ne&&!ct)continue;const vt=this.sortFeaturesByKey?O.evaluate(Ze,{},c):void 0;if(this.features.push({id:xe,text:Ne,icon:ct,index:Ce,sourceLayerIndex:Te,geometry:Ze.geometry,properties:le.properties,type:w2[le.type],sortKey:vt}),ct&&($[ct.name]=!0),Ne){const rt=x.evaluate(Ze,{},c).join(","),ot=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.WritingMode.vertical)>=0;for(const Qe of Ne.sections)if(Qe.image)$[Qe.image.name]=!0;else{const lt=Gl(Ne.toString()),st=Qe.fontStack||rt,qe=G[st]=G[st]||{};this.calculateGlyphDependencies(Qe.text,qe,ot,this.allowVerticalPlacement,lt)}}}y.get("symbol-placement")==="line"&&(this.features=function(le){const xe={},Ce={},Te=[];let Re=0;function Ze(rt){Te.push(le[rt]),Re++}function Ne(rt,ot,Qe){const lt=Ce[rt];return delete Ce[rt],Ce[ot]=lt,Te[lt].geometry[0].pop(),Te[lt].geometry[0]=Te[lt].geometry[0].concat(Qe[0]),lt}function ct(rt,ot,Qe){const lt=xe[ot];return delete xe[ot],xe[rt]=lt,Te[lt].geometry[0].shift(),Te[lt].geometry[0]=Qe[0].concat(Te[lt].geometry[0]),lt}function vt(rt,ot,Qe){const lt=Qe?ot[0][ot[0].length-1]:ot[0][0];return`${rt}:${lt.x}:${lt.y}`}for(let rt=0;rt<le.length;rt++){const ot=le[rt],Qe=ot.geometry,lt=ot.text?ot.text.toString():null;if(!lt){Ze(rt);continue}const st=vt(lt,Qe),qe=vt(lt,Qe,!0);if(st in Ce&&qe in xe&&Ce[st]!==xe[qe]){const Tt=ct(st,qe,Qe),bt=Ne(st,qe,Te[Tt].geometry);delete xe[st],delete Ce[qe],Ce[vt(lt,Te[bt].geometry,!0)]=bt,Te[Tt].geometry=null}else st in Ce?Ne(st,qe,Qe):qe in xe?ct(st,qe,Qe):(Ze(rt),xe[st]=Re-1,Ce[qe]=Re-1)}return Te.filter(rt=>rt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((le,xe)=>le.sortKey-xe.sortKey)}update(t,o,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,c),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const c=this.lineVertexArray.length;if(t.segment!==void 0){let m=t.dist(o[t.segment+1]),y=t.dist(o[t.segment]);const x={};for(let E=t.segment+1;E<o.length;E++)x[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:m},E<o.length-1&&(m+=o[E+1].dist(o[E]));for(let E=t.segment||0;E>=0;E--)x[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:y},E>0&&(y+=o[E-1].dist(o[E]));for(let E=0;E<o.length;E++){const k=x[E];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(t,o,c,m,y,x,E,k,z,F,O,$){const G=t.indexArray,q=t.layoutVertexArray,ae=t.segments.prepareSegment(4*o.length,q,G,this.canOverlap?x.sortKey:void 0),le=this.glyphOffsetArray.length,xe=ae.vertexLength,Ce=this.allowVerticalPlacement&&E===u.WritingMode.vertical?Math.PI/2:0,Te=x.text&&x.text.sections;for(let Re=0;Re<o.length;Re++){const{tl:Ze,tr:Ne,bl:ct,br:vt,tex:rt,pixelOffsetTL:ot,pixelOffsetBR:Qe,minFontScaleX:lt,minFontScaleY:st,glyphOffset:qe,isSDF:Tt,sectionIndex:bt}=o[Re],on=ae.vertexLength,vn=qe[1];_d(q,k.x,k.y,Ze.x,vn+Ze.y,rt.x,rt.y,c,Tt,ot.x,ot.y,lt,st),_d(q,k.x,k.y,Ne.x,vn+Ne.y,rt.x+rt.w,rt.y,c,Tt,Qe.x,ot.y,lt,st),_d(q,k.x,k.y,ct.x,vn+ct.y,rt.x,rt.y+rt.h,c,Tt,ot.x,Qe.y,lt,st),_d(q,k.x,k.y,vt.x,vn+vt.y,rt.x+rt.w,rt.y+rt.h,c,Tt,Qe.x,Qe.y,lt,st),Lf(t.dynamicLayoutVertexArray,k,Ce),G.emplaceBack(on,on+1,on+2),G.emplaceBack(on+1,on+2,on+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qe[0]),Re!==o.length-1&&bt===o[Re+1].sectionIndex||t.programConfigurations.populatePaintArrays(q.length,x,x.index,{},$,Te&&Te[bt])}t.placedSymbolArray.emplaceBack(k.x,k.y,le,this.glyphOffsetArray.length-le,xe,z,F,k.segment,c?c[0]:0,c?c[1]:0,m[0],m[1],E,0,!1,0,O)}_addCollisionDebugVertex(t,o,c,m,y,x){return o.emplaceBack(0,0),t.emplaceBack(c.x,c.y,m,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(t,o,c,m,y,x,E){const k=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),z=k.vertexLength,F=y.layoutVertexArray,O=y.collisionVertexArray,$=E.anchorX,G=E.anchorY;this._addCollisionDebugVertex(F,O,x,$,G,new ut(t,o)),this._addCollisionDebugVertex(F,O,x,$,G,new ut(c,o)),this._addCollisionDebugVertex(F,O,x,$,G,new ut(c,m)),this._addCollisionDebugVertex(F,O,x,$,G,new ut(t,m)),k.vertexLength+=4;const q=y.indexArray;q.emplaceBack(z,z+1),q.emplaceBack(z+1,z+2),q.emplaceBack(z+2,z+3),q.emplaceBack(z+3,z),k.primitiveLength+=4}addDebugCollisionBoxes(t,o,c,m){for(let y=t;y<o;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Rf(Qr,ly.members,Fo),this.iconCollisionBox=new Rf(Qr,ly.members,Fo);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,c,m,y,x,E,k,z){const F={};for(let O=o;O<c;O++){const $=t.get(O);F.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.textFeatureIndex=$.featureIndex;break}for(let O=m;O<y;O++){const $=t.get(O);F.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.verticalTextFeatureIndex=$.featureIndex;break}for(let O=x;O<E;O++){const $=t.get(O);F.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.iconFeatureIndex=$.featureIndex;break}for(let O=k;O<z;O++){const $=t.get(O);F.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.verticalIconFeatureIndex=$.featureIndex;break}return F}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const c=t.placedSymbolArray.get(o),m=c.vertexStartIndex+4*c.numGlyphs;for(let y=c.vertexStartIndex;y<m;y+=4)t.indexArray.emplaceBack(y,y+1,y+2),t.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),c=Math.cos(t),m=[],y=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const k=this.symbolInstances.get(E);m.push(0|Math.round(o*k.anchorX+c*k.anchorY)),y.push(k.featureIndex)}return x.sort((E,k)=>m[E]-m[k]||y[k]-y[E]),x}addToSortKeyRanges(t,o){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===o?c.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const c=this.symbolInstances.get(o);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((m,y,x)=>{m>=0&&x.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}at("SymbolBucket",Zu,{omit:["layers","collisionBoxArray","features","compareText"]}),Zu.MAX_GLYPHS=65535,Zu.addDynamicAttributes=Lf;const E2=new Mn({"symbol-placement":new Se(Pe.layout_symbol["symbol-placement"]),"symbol-spacing":new Se(Pe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Se(Pe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new $e(Pe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Se(Pe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Se(Pe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Se(Pe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Se(Pe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Se(Pe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Se(Pe.layout_symbol["icon-rotation-alignment"]),"icon-size":new $e(Pe.layout_symbol["icon-size"]),"icon-text-fit":new Se(Pe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Se(Pe.layout_symbol["icon-text-fit-padding"]),"icon-image":new $e(Pe.layout_symbol["icon-image"]),"icon-rotate":new $e(Pe.layout_symbol["icon-rotate"]),"icon-padding":new Se(Pe.layout_symbol["icon-padding"]),"icon-keep-upright":new Se(Pe.layout_symbol["icon-keep-upright"]),"icon-offset":new $e(Pe.layout_symbol["icon-offset"]),"icon-anchor":new $e(Pe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Se(Pe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Se(Pe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Se(Pe.layout_symbol["text-rotation-alignment"]),"text-field":new $e(Pe.layout_symbol["text-field"]),"text-font":new $e(Pe.layout_symbol["text-font"]),"text-size":new $e(Pe.layout_symbol["text-size"]),"text-max-width":new $e(Pe.layout_symbol["text-max-width"]),"text-line-height":new Se(Pe.layout_symbol["text-line-height"]),"text-letter-spacing":new $e(Pe.layout_symbol["text-letter-spacing"]),"text-justify":new $e(Pe.layout_symbol["text-justify"]),"text-radial-offset":new $e(Pe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Se(Pe.layout_symbol["text-variable-anchor"]),"text-anchor":new $e(Pe.layout_symbol["text-anchor"]),"text-max-angle":new Se(Pe.layout_symbol["text-max-angle"]),"text-writing-mode":new Se(Pe.layout_symbol["text-writing-mode"]),"text-rotate":new $e(Pe.layout_symbol["text-rotate"]),"text-padding":new Se(Pe.layout_symbol["text-padding"]),"text-keep-upright":new Se(Pe.layout_symbol["text-keep-upright"]),"text-transform":new $e(Pe.layout_symbol["text-transform"]),"text-offset":new $e(Pe.layout_symbol["text-offset"]),"text-allow-overlap":new Se(Pe.layout_symbol["text-allow-overlap"]),"text-overlap":new Se(Pe.layout_symbol["text-overlap"]),"text-ignore-placement":new Se(Pe.layout_symbol["text-ignore-placement"]),"text-optional":new Se(Pe.layout_symbol["text-optional"])});var Bf={paint:new Mn({"icon-opacity":new $e(Pe.paint_symbol["icon-opacity"]),"icon-color":new $e(Pe.paint_symbol["icon-color"]),"icon-halo-color":new $e(Pe.paint_symbol["icon-halo-color"]),"icon-halo-width":new $e(Pe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $e(Pe.paint_symbol["icon-halo-blur"]),"icon-translate":new Se(Pe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Se(Pe.paint_symbol["icon-translate-anchor"]),"text-opacity":new $e(Pe.paint_symbol["text-opacity"]),"text-color":new $e(Pe.paint_symbol["text-color"],{runtimeType:Pi,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new $e(Pe.paint_symbol["text-halo-color"]),"text-halo-width":new $e(Pe.paint_symbol["text-halo-width"]),"text-halo-blur":new $e(Pe.paint_symbol["text-halo-blur"]),"text-translate":new Se(Pe.paint_symbol["text-translate"]),"text-translate-anchor":new Se(Pe.paint_symbol["text-translate-anchor"])}),layout:E2};class Dy{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:gn,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}at("FormatSectionOverride",Dy,{omit:["defaultValue"]});class yd extends Kn{constructor(t){super(t,Bf)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const m=[];for(const y of c)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,c,m){const y=this.layout.get(t).evaluate(o,{},c,m),x=this._unevaluatedLayout._values[t];return x.isDataDriven()||aa(x.value)||!y?y:function(E,k){return k.replace(/{([^{}]+)}/g,(z,F)=>F in E?String(E[F]):"")}(o.properties,y)}createBucket(t){return new Zu(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of Bf.paint.overridableProperties){if(!yd.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),c=new Dy(o),m=new Ul(c,o.property.specification);let y=null;y=o.value.kind==="constant"||o.value.kind==="source"?new Zi("source",m):new mo("composite",m,o.value.zoomStops,o.value._interpolationType),this.paint._values[t]=new be(o.property,y,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven())&&yd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const c=t.get("text-field"),m=Bf.paint.properties[o];let y=!1;const x=E=>{for(const k of E)if(m.overrides&&m.overrides.hasOverride(k))return void(y=!0)};if(c.value.kind==="constant"&&c.value.value instanceof ne)x(c.value.value.sections);else if(c.value.kind==="source"){const E=z=>{y||(z instanceof Ve&&fe(z.value)===kr?x(z.value.sections):z instanceof mt?x(z.sections):z.eachChild(E))},k=c.value;k._styleExpression&&E(k._styleExpression.expression)}return y}}function Ff(r,t,o){let c="never";const m=r.get(t);return m?c=m:r.get(o)&&(c="always"),c}var T2={paint:new Mn({"background-color":new Se(Pe.paint_background["background-color"]),"background-pattern":new Qt(Pe.paint_background["background-pattern"]),"background-opacity":new Se(Pe.paint_background["background-opacity"])})},P2={paint:new Mn({"raster-opacity":new Se(Pe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Se(Pe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Se(Pe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Se(Pe.paint_raster["raster-brightness-max"]),"raster-saturation":new Se(Pe.paint_raster["raster-saturation"]),"raster-contrast":new Se(Pe.paint_raster["raster-contrast"]),"raster-resampling":new Se(Pe.paint_raster["raster-resampling"]),"raster-fade-duration":new Se(Pe.paint_raster["raster-fade-duration"])})};class k2 extends Kn{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}}const C2={circle:class extends Kn{constructor(r){super(r,sb)}createBucket(r){return new uf(r)}queryRadius(r){const t=r;return Oc("circle-radius",this,t)+Oc("circle-stroke-width",this,t)+nd(this.paint.get("circle-translate"))}queryIntersectsFeature(r,t,o,c,m,y,x,E){const k=id(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,x),z=this.paint.get("circle-radius").evaluate(t,o)+this.paint.get("circle-stroke-width").evaluate(t,o),F=this.paint.get("circle-pitch-alignment")==="map",O=F?k:function(G,q){return G.map(ae=>j_(ae,q))}(k,E),$=F?z*x:z;for(const G of c)for(const q of G){const ae=F?q:j_(q,E);let le=$;const xe=rd([],[q.x,q.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?le*=xe[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(le*=y.cameraToCenterDistance/xe[3]),tb(O,ae,le))return!0}return!1}},heatmap:class extends Kn{constructor(r){super(r,lb),this._updateColorRamp()}createBucket(r){return new G_(r)}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=q_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Kn{constructor(r){super(r,ub)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Kn{constructor(r){super(r,Tb)}recalculate(r,t){super.recalculate(r,t);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new bf(r)}queryRadius(){return nd(this.paint.get("fill-translate"))}queryIntersectsFeature(r,t,o,c,m,y,x){return U_(id(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,x),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Kn{constructor(r){super(r,Ob)}createBucket(r){return new Ef(r)}queryRadius(){return nd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,t,o,c,m,y,x,E){const k=id(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,x),z=this.paint.get("fill-extrusion-height").evaluate(t,o),F=this.paint.get("fill-extrusion-base").evaluate(t,o),O=function(G,q,ae,le){const xe=[];for(const Ce of G){const Te=[Ce.x,Ce.y,0,1];rd(Te,Te,q),xe.push(new ut(Te[0]/Te[3],Te[1]/Te[3]))}return xe}(k,E),$=function(G,q,ae,le){const xe=[],Ce=[],Te=le[8]*q,Re=le[9]*q,Ze=le[10]*q,Ne=le[11]*q,ct=le[8]*ae,vt=le[9]*ae,rt=le[10]*ae,ot=le[11]*ae;for(const Qe of G){const lt=[],st=[];for(const qe of Qe){const Tt=qe.x,bt=qe.y,on=le[0]*Tt+le[4]*bt+le[12],vn=le[1]*Tt+le[5]*bt+le[13],Vn=le[2]*Tt+le[6]*bt+le[14],$n=le[3]*Tt+le[7]*bt+le[15],Gi=Vn+Ze,gi=$n+Ne,_i=on+ct,Ci=vn+vt,Wi=Vn+rt,nr=$n+ot,Rr=new ut((on+Te)/gi,(vn+Re)/gi);Rr.z=Gi/gi,lt.push(Rr);const yi=new ut(_i/nr,Ci/nr);yi.z=Wi/nr,st.push(yi)}xe.push(lt),Ce.push(st)}return[xe,Ce]}(c,F,z,E);return function(G,q,ae){let le=1/0;U_(ae,q)&&(le=iy(ae,q[0]));for(let xe=0;xe<q.length;xe++){const Ce=q[xe],Te=G[xe];for(let Re=0;Re<Ce.length-1;Re++){const Ze=Ce[Re],Ne=[Ze,Ce[Re+1],Te[Re+1],Te[Re],Ze];N_(ae,Ne)&&(le=Math.min(le,iy(ae,Ne)))}}return le!==1/0&&le}($[0],$[1],O)}},line:class extends Kn{constructor(r){super(r,oy),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(r){r==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Qo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,t){super.recalculate(r,t),this.paint._values["line-floorwidth"]=sy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Tf(r)}queryRadius(r){const t=r,o=ay(Oc("line-width",this,t),Oc("line-gap-width",this,t)),c=Oc("line-offset",this,t);return o/2+Math.abs(c)+nd(this.paint.get("line-translate"))}queryIntersectsFeature(r,t,o,c,m,y,x){const E=id(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,x),k=x/2*ay(this.paint.get("line-width").evaluate(t,o),this.paint.get("line-gap-width").evaluate(t,o)),z=this.paint.get("line-offset").evaluate(t,o);return z&&(c=function(F,O){const $=[];for(let G=0;G<F.length;G++){const q=F[G],ae=[];for(let le=0;le<q.length;le++){const xe=q[le-1],Ce=q[le],Te=q[le+1],Re=le===0?new ut(0,0):Ce.sub(xe)._unit()._perp(),Ze=le===q.length-1?new ut(0,0):Te.sub(Ce)._unit()._perp(),Ne=Re._add(Ze)._unit(),ct=Ne.x*Ze.x+Ne.y*Ze.y;ct!==0&&Ne._mult(1/ct),ae.push(Ne._mult(O)._add(Ce))}$.push(ae)}return $}(c,z*x)),function(F,O,$){for(let G=0;G<O.length;G++){const q=O[G];if(F.length>=3){for(let ae=0;ae<q.length;ae++)if(Ru(F,q[ae]))return!0}if(nb(F,q,$))return!0}return!1}(E,c,k)}isTileClipped(){return!0}},symbol:yd,background:class extends Kn{constructor(r){super(r,T2)}},raster:class extends Kn{constructor(r){super(r,P2)}}};class I2{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const Ry=63710088e-1;class ii{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ii(de(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,c=this.lat*o,m=t.lat*o,y=Math.sin(c)*Math.sin(m)+Math.cos(c)*Math.cos(m)*Math.cos((t.lng-this.lng)*o);return Ry*Math.acos(Math.min(y,1))}toBounds(t=0){const o=360*t/40075017,c=o/Math.cos(Math.PI/180*this.lat);return new Ql(new ii(this.lng-c,this.lat-o),new ii(this.lng+c,this.lat+o))}static convert(t){if(t instanceof ii)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new ii(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new ii(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ql{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof ii?new ii(t.lng,t.lat):ii.convert(t),this}setSouthWest(t){return this._sw=t instanceof ii?new ii(t.lng,t.lat):ii.convert(t),this}extend(t){const o=this._sw,c=this._ne;let m,y;if(t instanceof ii)m=t,y=t;else{if(!(t instanceof Ql))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Ql.convert(t)):this.extend(ii.convert(t)):this;if(m=t._sw,y=t._ne,!m||!y)return this}return o||c?(o.lng=Math.min(m.lng,o.lng),o.lat=Math.min(m.lat,o.lat),c.lng=Math.max(y.lng,c.lng),c.lat=Math.max(y.lat,c.lat)):(this._sw=new ii(m.lng,m.lat),this._ne=new ii(y.lng,y.lat)),this}getCenter(){return new ii((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ii(this.getWest(),this.getNorth())}getSouthEast(){return new ii(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:c}=ii.convert(t);let m=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&m}static convert(t){return t instanceof Ql?t:t&&new Ql(t)}}const By=2*Math.PI*Ry;function Fy(r){return By*Math.cos(r*Math.PI/180)}function Oy(r){return(180+r)/360}function Ny(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Uy(r,t){return r/Fy(t)}function Of(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class vd{constructor(t,o,c=0){this.x=+t,this.y=+o,this.z=+c}static fromLngLat(t,o=0){const c=ii.convert(t);return new vd(Oy(c.lng),Ny(c.lat),Uy(o,c.lat))}toLngLat(){return new ii(360*this.x-180,Of(this.y))}toAltitude(){return this.z*Fy(Of(this.y))}meterInMercatorCoordinateUnits(){return 1/By*(t=Of(this.y),1/Math.cos(t*Math.PI/180));var t}}function Vy(r,t,o){var c=2*Math.PI*6378137/256/Math.pow(2,o);return[r*c-2*Math.PI*6378137/2,t*c-2*Math.PI*6378137/2]}class Nf{constructor(t,o,c){this.z=t,this.x=o,this.y=c,this.key=Xc(0,t,t,o,c)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,c){const m=(x=this.y,E=this.z,k=Vy(256*(y=this.x),256*(x=Math.pow(2,E)-x-1),E),z=Vy(256*(y+1),256*(x+1),E),k[0]+","+k[1]+","+z[0]+","+z[1]);var y,x,E,k,z;const F=function(O,$,G){let q,ae="";for(let le=O;le>0;le--)q=1<<le-1,ae+=($&q?1:0)+(G&q?2:0);return ae}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,m)}getTilePoint(t){const o=Math.pow(2,this.z);return new ut((t.x*o-this.x)*Si,(t.y*o-this.y)*Si)}toString(){return`${this.z}/${this.x}/${this.y}`}}class $y{constructor(t,o){this.wrap=t,this.canonical=o,this.key=Xc(t,o.z,o.z,o.x,o.y)}}class Uo{constructor(t,o,c,m,y){this.overscaledZ=t,this.wrap=o,this.canonical=new Nf(c,+m,+y),this.key=Xc(o,t,c,m,y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const o=this.canonical.z-t;return t>this.canonical.z?new Uo(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uo(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){const c=this.canonical.z-t;return t>this.canonical.z?Xc(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):Xc(this.wrap*+o,t,t,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,c=2*this.canonical.x,m=2*this.canonical.y;return[new Uo(o,this.wrap,o,c,m),new Uo(o,this.wrap,o,c+1,m),new Uo(o,this.wrap,o,c,m+1),new Uo(o,this.wrap,o,c+1,m+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Uo(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new $y(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new vd(t.x-this.wrap,t.y))}}function Xc(r,t,o,c,m){(r*=2)<0&&(r=-1*r-1);const y=1<<o;return(y*y*r+y*m+c).toString(36)+o.toString(36)+t.toString(36)}at("CanonicalTileID",Nf),at("OverscaledTileID",Uo,{omit:["posMatrix"]});class Zy{constructor(t,o,c){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return void De(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const m=this.dim=o.height-2;this.data=new Uint32Array(o.data.buffer),this.encoding=c||"mapbox";for(let y=0;y<m;y++)this.data[this._idx(-1,y)]=this.data[this._idx(0,y)],this.data[this._idx(m,y)]=this.data[this._idx(m-1,y)],this.data[this._idx(y,-1)]=this.data[this._idx(y,0)],this.data[this._idx(y,m)]=this.data[this._idx(y,m-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(m,-1)]=this.data[this._idx(m-1,0)],this.data[this._idx(-1,m)]=this.data[this._idx(0,m-1)],this.data[this._idx(m,m)]=this.data[this._idx(m-1,m-1)]}get(t,o){const c=new Uint8Array(this.data.buffer),m=4*this._idx(t,o);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(c[m],c[m+1],c[m+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}_unpackMapbox(t,o,c){return(256*t*256+256*o+c)/10-1e4}_unpackTerrarium(t,o,c){return 256*t+o+c/256-32768}getPixels(){return new vo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,c){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let m=o*this.dim,y=o*this.dim+this.dim,x=c*this.dim,E=c*this.dim+this.dim;switch(o){case-1:m=y-1;break;case 1:y=m+1}switch(c){case-1:x=E-1;break;case 1:E=x+1}const k=-o*this.dim,z=-c*this.dim;for(let F=x;F<E;F++)for(let O=m;O<y;O++)this.data[this._idx(O,F)]=t.data[this._idx(O+k,F+z)]}}at("DEMData",Zy);class jy{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const c=t[o];this._stringToNumber[c]=o,this._numberToString[o]=c}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class Gy{constructor(t,o,c,m,y){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=c,t._y=m,this.properties=t.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class Wy{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ls(Si,16,0),this.grid3D=new ls(Si,16,0),this.featureIndexArray=new an,this.promoteId=o}insert(t,o,c,m,y,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,m,y);const k=x?this.grid3D:this.grid;for(let z=0;z<o.length;z++){const F=o[z],O=[1/0,1/0,-1/0,-1/0];for(let $=0;$<F.length;$++){const G=F[$];O[0]=Math.min(O[0],G.x),O[1]=Math.min(O[1],G.y),O[2]=Math.max(O[2],G.x),O[3]=Math.max(O[3],G.y)}O[0]<Si&&O[1]<Si&&O[2]>=0&&O[3]>=0&&k.insert(E,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new rl.VectorTile(new Pf(this.rawTileData)).layers,this.sourceLayerCoder=new jy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,c,m){this.loadVTLayers();const y=t.params||{},x=Si/t.tileSize/t.scale,E=qa(y.filter),k=t.queryGeometry,z=t.queryPadding*x,F=Hy(k),O=this.grid.query(F.minX-z,F.minY-z,F.maxX+z,F.maxY+z),$=Hy(t.cameraQueryGeometry),G=this.grid3D.query($.minX-z,$.minY-z,$.maxX+z,$.maxY+z,(le,xe,Ce,Te)=>function(Re,Ze,Ne,ct,vt){for(const ot of Re)if(Ze<=ot.x&&Ne<=ot.y&&ct>=ot.x&&vt>=ot.y)return!0;const rt=[new ut(Ze,Ne),new ut(Ze,vt),new ut(ct,vt),new ut(ct,Ne)];if(Re.length>2){for(const ot of rt)if(Ru(Re,ot))return!0}for(let ot=0;ot<Re.length-1;ot++)if(rb(Re[ot],Re[ot+1],rt))return!0;return!1}(t.cameraQueryGeometry,le-z,xe-z,Ce+z,Te+z));for(const le of G)O.push(le);O.sort(z2);const q={};let ae;for(let le=0;le<O.length;le++){const xe=O[le];if(xe===ae)continue;ae=xe;const Ce=this.featureIndexArray.get(xe);let Te=null;this.loadMatchingFeature(q,Ce.bucketIndex,Ce.sourceLayerIndex,Ce.featureIndex,E,y.layers,y.availableImages,o,c,m,(Re,Ze,Ne)=>(Te||(Te=Yl(Re)),Ze.queryIntersectsFeature(k,Re,Ne,Te,this.z,t.transform,x,t.pixelPosMatrix)))}return q}loadMatchingFeature(t,o,c,m,y,x,E,k,z,F,O){const $=this.bucketLayerIDs[o];if(x&&!function(le,xe){for(let Ce=0;Ce<le.length;Ce++)if(xe.indexOf(le[Ce])>=0)return!0;return!1}(x,$))return;const G=this.sourceLayerCoder.decode(c),q=this.vtLayers[G].feature(m);if(y.needGeometry){const le=Jl(q,!0);if(!y.filter(new a(this.tileID.overscaledZ),le,this.tileID.canonical))return}else if(!y.filter(new a(this.tileID.overscaledZ),q))return;const ae=this.getId(q,G);for(let le=0;le<$.length;le++){const xe=$[le];if(x&&x.indexOf(xe)<0)continue;const Ce=k[xe];if(!Ce)continue;let Te={};ae&&F&&(Te=F.getState(Ce.sourceLayer||"_geojsonTileLayer",ae));const Re=ye({},z[xe]);Re.paint=qy(Re.paint,Ce.paint,q,Te,E),Re.layout=qy(Re.layout,Ce.layout,q,Te,E);const Ze=!O||O(q,Ce,Te);if(!Ze)continue;const Ne=new Gy(q,this.z,this.x,this.y,ae);Ne.layer=Re;let ct=t[xe];ct===void 0&&(ct=t[xe]=[]),ct.push({featureIndex:m,feature:Ne,intersectionZ:Ze})}}lookupSymbolFeatures(t,o,c,m,y,x,E,k){const z={};this.loadVTLayers();const F=qa(y);for(const O of t)this.loadMatchingFeature(z,c,m,O,F,x,E,k,o);return z}hasLayer(t){for(const o of this.bucketLayerIDs)for(const c of o)if(t===c)return!0;return!1}getId(t,o){let c=t.id;return this.promoteId&&(c=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof c=="boolean"&&(c=Number(c))),c}}function qy(r,t,o,c,m){return ie(r,(y,x)=>{const E=t instanceof Me?t.get(x):null;return E&&E.evaluate?E.evaluate(o,c,m):E})}function Hy(r){let t=1/0,o=1/0,c=-1/0,m=-1/0;for(const y of r)t=Math.min(t,y.x),o=Math.min(o,y.y),c=Math.max(c,y.x),m=Math.max(m,y.y);return{minX:t,minY:o,maxX:c,maxY:m}}function z2(r,t){return t-r}var Uf;at("FeatureIndex",Wy,{omit:["rawTileData","sourceLayerCoder"]}),u.PerformanceMarkers=void 0,(Uf=u.PerformanceMarkers||(u.PerformanceMarkers={})).create="create",Uf.load="load",Uf.fullLoad="fullLoad";let xd=null,Kc=[];const Vf=1e3/30,A2={mark(r){performance.mark(r)},frame(r){const t=r;xd!=null&&Kc.push(t-xd),xd=t},clearMetrics(){xd=null,Kc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const r in u.PerformanceMarkers)performance.clearMarks(u.PerformanceMarkers[r])},getPerformanceMetrics(){performance.measure("loadTime",u.PerformanceMarkers.create,u.PerformanceMarkers.load),performance.measure("fullLoadTime",u.PerformanceMarkers.create,u.PerformanceMarkers.fullLoad);const r=performance.getEntriesByName("loadTime")[0].duration,t=performance.getEntriesByName("fullLoadTime")[0].duration,o=Kc.length,c=1/(Kc.reduce((y,x)=>y+x,0)/o/1e3),m=Kc.filter(y=>y>Vf).reduce((y,x)=>y+(x-Vf)/Vf,0);return{loadTime:r,fullLoadTime:t,fps:c,percentDroppedFrames:m/(o+m)*100}}};u.AJAXError=Fn,u.ARRAY_TYPE=Bu,u.Actor=class{constructor(r,t,o){this.target=r,this.parent=t,this.mapId=o,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ze(["receive","process"],this),this.invoker=new I2(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=We()?r:window}send(r,t,o,c,m=!1){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(this.callbacks[y]=o);const x=jn(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:r,hasCallback:!!o,targetMapId:c,mustQueue:m,sourceMapId:this.mapId,data:pa(t,x)},x),{cancel:()=>{o&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(r){const t=r.data,o=t.id;if(o&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){delete this.tasks[o];const c=this.cancelCallbacks[o];delete this.cancelCallbacks[o],c&&c()}else We()||t.mustQueue?(this.tasks[o]=t,this.taskQueue.push(o),this.invoker.trigger()):this.processTask(o,t)}process(){if(!this.taskQueue.length)return;const r=this.taskQueue.shift(),t=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(r,t)}processTask(r,t){if(t.type==="<response>"){const o=this.callbacks[r];delete this.callbacks[r],o&&(t.error?o(fr(t.error)):o(null,fr(t.data)))}else{let o=!1;const c=jn(this.globalScope)?void 0:[],m=t.hasCallback?(E,k)=>{o=!0,delete this.cancelCallbacks[r],this.target.postMessage({id:r,type:"<response>",sourceMapId:this.mapId,error:E?pa(E):null,data:pa(k,c)},c)}:E=>{o=!0};let y=null;const x=fr(t.data);if(this.parent[t.type])y=this.parent[t.type](t.sourceMapId,x,m);else if(this.parent.getWorkerSource){const E=t.type.split(".");y=this.parent.getWorkerSource(t.sourceMapId,E[0],x.source)[E[1]](x,m)}else m(new Error(`Could not find function ${t.type}`));!o&&y&&y.cancel&&(this.cancelCallbacks[r]=y.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},u.AlphaImage=Uc,u.CanonicalTileID=Nf,u.CollisionBoxArray=Ie,u.CollisionCircleLayoutArray=class extends R{},u.Color=B,u.DEMData=Zy,u.DataConstantProperty=Se,u.DictionaryCoder=jy,u.EXTENT=Si,u.ErrorEvent=mn,u.EvaluationParameters=a,u.Event=St,u.Evented=Rn,u.FeatureIndex=Wy,u.FillBucket=bf,u.FillExtrusionBucket=Ef,u.GeoJSONFeature=Gy,u.ImageAtlas=gy,u.ImagePosition=Cf,u.LineBucket=Tf,u.LineStripIndexArray=class extends we{},u.LngLat=ii,u.LngLatBounds=Ql,u.MercatorCoordinate=vd,u.ONE_EM=Bi,u.OverscaledTileID=Uo,u.PerformanceUtils=A2,u.PosArray=class extends $s{},u.Properties=Mn,u.QuadTriangleArray=class extends Z{},u.RGBAImage=vo,u.RasterBoundsArray=class extends Zs{},u.RequestPerformance=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},u.ResourceType=Ai,u.SegmentVector=hn,u.SymbolBucket=Zu,u.Transitionable=P,u.TriangleIndexArray=gr,u.Uniform1f=tl,u.Uniform1i=class extends No{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},u.Uniform2f=class extends No{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},u.Uniform3f=class extends No{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},u.Uniform4f=D_,u.UniformColor=R_,u.UniformMatrix4f=class extends No{constructor(r,t){super(r,t),this.current=Qw}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},u.UnwrappedTileID=$y,u.ValidationError=Je,u.ZoomHistory=Os,u.addDynamicAttributes=Lf,u.asyncAll=function(r,t,o){if(!r.length)return o(null,[]);let c=r.length;const m=new Array(r.length);let y=null;r.forEach((x,E)=>{t(x,(k,z)=>{k&&(y=k),m[E]=z,--c==0&&o(y,m)})})},u.bezier=W,u.bindAll=ze,u.cacheEntryPossiblyAdded=function(r){qt++,qt>fn&&(r.getActor().send("enforceCacheSizeLimit",jt),qt=0)},u.clamp=U,u.clearTileCache=function(r){const t=caches.delete(gt);r&&t.catch(r).then(()=>r())},u.clipLine=Cy,u.clone=function(r){var t=new Bu(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},u.clone$1=te,u.collisionCircleLayout=Xb,u.config=Oe,u.create=function(){var r=new Bu(16);return Bu!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},u.createExpression=ja,u.createFilter=qa,u.createLayout=ui,u.createStyleLayer=function(r){return r.type==="custom"?new k2(r):new C2[r.type](r)},u.dot=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]},u.ease=Y,u.emitValidationErrors=da,u.enforceCacheSizeLimit=function(r){Wt(),Ye&&Ye.then(t=>{t.keys().then(o=>{for(let c=0;c<o.length-r;c++)t.delete(o[c])})})},u.evaluateSizeForFeature=function(r,{uSize:t,uSizeT:o},{lowerSize:c,upperSize:m}){return r.kind==="source"?c/Sa:r.kind==="composite"?Nn(c/Sa,m/Sa,o):t},u.evaluateSizeForZoom=function(r,t){let o=0,c=0;if(r.kind==="constant")c=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:x}=r,E=m?U(Li.interpolationFactor(m,t,y,x),0,1):0;r.kind==="camera"?c=Nn(r.minSize,r.maxSize,E):o=E}return{uSizeT:o,uSize:c}},u.evaluateVariableOffset=Ay,u.evented=Vs,u.exported=Sn,u.exported$1=At,u.extend=ye,u.filterObject=ee,u.getAnchorAlignment=zf,u.getAnchorJustification=Mf,u.getArrayBuffer=ai,u.getImage=Po,u.getJSON=function(r,t){return Tr(ye(r,{type:"json"}),t)},u.getOverlapMode=Ff,u.getRTLTextPluginStatus=el,u.getReferrer=Er,u.getVideo=function(r,t){const o=window.document.createElement("video");o.muted=!0,o.onloadstart=function(){t(null,o)};for(let c=0;c<r.length;c++){const m=window.document.createElement("source");Pr(r[c])||(o.crossOrigin="Anonymous"),m.src=r[c],o.appendChild(m)}return{cancel:()=>{}}},u.identity=df,u.invert=function(r,t){var o=t[0],c=t[1],m=t[2],y=t[3],x=t[4],E=t[5],k=t[6],z=t[7],F=t[8],O=t[9],$=t[10],G=t[11],q=t[12],ae=t[13],le=t[14],xe=t[15],Ce=o*E-c*x,Te=o*k-m*x,Re=o*z-y*x,Ze=c*k-m*E,Ne=c*z-y*E,ct=m*z-y*k,vt=F*ae-O*q,rt=F*le-$*q,ot=F*xe-G*q,Qe=O*le-$*ae,lt=O*xe-G*ae,st=$*xe-G*le,qe=Ce*st-Te*lt+Re*Qe+Ze*ot-Ne*rt+ct*vt;return qe?(r[0]=(E*st-k*lt+z*Qe)*(qe=1/qe),r[1]=(m*lt-c*st-y*Qe)*qe,r[2]=(ae*ct-le*Ne+xe*Ze)*qe,r[3]=($*Ne-O*ct-G*Ze)*qe,r[4]=(k*ot-x*st-z*rt)*qe,r[5]=(o*st-m*ot+y*rt)*qe,r[6]=(le*Re-q*ct-xe*Te)*qe,r[7]=(F*ct-$*Re+G*Te)*qe,r[8]=(x*lt-E*ot+z*vt)*qe,r[9]=(c*ot-o*lt-y*vt)*qe,r[10]=(q*Ne-ae*Re+xe*Ce)*qe,r[11]=(O*Re-F*Ne-G*Ce)*qe,r[12]=(E*rt-x*Qe-k*vt)*qe,r[13]=(o*Qe-c*rt+m*vt)*qe,r[14]=(ae*Te-q*Ze-le*Ce)*qe,r[15]=(F*Ze-O*Te+$*Ce)*qe,r):null},u.isImageBitmap=Zt,u.isSafari=jn,u.keysDifference=function(r,t){const o=[];for(const c in r)c in t||o.push(c);return o},u.lazyLoadRTLTextPlugin=function(){mr.isLoading()||mr.isLoaded()||el()!=="deferred"||ga()},u.makeRequest=Tr,u.mapObject=ie,u.mercatorXfromLng=Oy,u.mercatorYfromLat=Ny,u.mercatorZfromAltitude=Uy,u.mul=ab,u.multiply=Z_,u.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},u.number=Nn,u.ortho=function(r,t,o,c,m,y,x){var E=1/(t-o),k=1/(c-m),z=1/(y-x);return r[0]=-2*E,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*k,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*z,r[11]=0,r[12]=(t+o)*E,r[13]=(m+c)*k,r[14]=(x+y)*z,r[15]=1,r},u.parseCacheControl=ht,u.parseGlyphPBF=function(r){return new Pf(r).readFields(s2,[])},u.pbf=Pf,u.performSymbolLayout=function(r,t,o,c,m,y,x){r.createArrays(),r.tilePixelRatio=Si/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;const E=r.layers[0].layout,k=r.layers[0]._unevaluatedLayout._values,z={layoutIconSize:k["icon-size"].possiblyEvaluate(new a(r.zoom+1),x),layoutTextSize:k["text-size"].possiblyEvaluate(new a(r.zoom+1),x),textMaxSize:k["text-size"].possiblyEvaluate(new a(18))};if(r.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:ae}=r.textSizeData;z.compositeTextSizes=[k["text-size"].possiblyEvaluate(new a(q),x),k["text-size"].possiblyEvaluate(new a(ae),x)]}if(r.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:ae}=r.iconSizeData;z.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new a(q),x),k["icon-size"].possiblyEvaluate(new a(ae),x)]}const F=E.get("text-line-height")*Bi,O=E.get("text-rotation-alignment")!=="viewport"&&E.get("symbol-placement")!=="point",$=E.get("text-keep-upright"),G=E.get("text-size");for(const q of r.features){const ae=E.get("text-font").evaluate(q,{},x).join(","),le=G.evaluate(q,{},x),xe=z.layoutTextSize.evaluate(q,{},x),Ce=z.layoutIconSize.evaluate(q,{},x),Te={horizontal:{},vertical:void 0},Re=q.text;let Ze,Ne=[0,0];if(Re){const rt=Re.toString(),ot=E.get("text-letter-spacing").evaluate(q,{},x)*Bi,Qe=Kr(rt)?ot:0,lt=E.get("text-anchor").evaluate(q,{},x),st=E.get("text-variable-anchor");if(!st){const vn=E.get("text-radial-offset").evaluate(q,{},x);Ne=vn?Ay(lt,[vn*Bi,Af]):E.get("text-offset").evaluate(q,{},x).map(Vn=>Vn*Bi)}let qe=O?"center":E.get("text-justify").evaluate(q,{},x);const Tt=E.get("symbol-placement"),bt=Tt==="point"?E.get("text-max-width").evaluate(q,{},x)*Bi:0,on=()=>{r.allowVerticalPlacement&&Gl(rt)&&(Te.vertical=hd(Re,t,o,m,ae,bt,F,lt,"left",Qe,Ne,u.WritingMode.vertical,!0,Tt,xe,le))};if(!O&&st){const vn=qe==="auto"?st.map($n=>Mf($n)):[qe];let Vn=!1;for(let $n=0;$n<vn.length;$n++){const Gi=vn[$n];if(!Te.horizontal[Gi])if(Vn)Te.horizontal[Gi]=Te.horizontal[0];else{const gi=hd(Re,t,o,m,ae,bt,F,"center",Gi,Qe,Ne,u.WritingMode.horizontal,!1,Tt,xe,le);gi&&(Te.horizontal[Gi]=gi,Vn=gi.positionedLines.length===1)}}on()}else{qe==="auto"&&(qe=Mf(lt));const vn=hd(Re,t,o,m,ae,bt,F,lt,qe,Qe,Ne,u.WritingMode.horizontal,!1,Tt,xe,le);vn&&(Te.horizontal[qe]=vn),on(),Gl(rt)&&O&&$&&(Te.vertical=hd(Re,t,o,m,ae,bt,F,lt,qe,Qe,Ne,u.WritingMode.vertical,!1,Tt,xe,le))}}let ct=!1;if(q.icon&&q.icon.name){const rt=c[q.icon.name];rt&&(Ze=d2(m[q.icon.name],E.get("icon-offset").evaluate(q,{},x),E.get("icon-anchor").evaluate(q,{},x)),ct=!!rt.sdf,r.sdfIcons===void 0?r.sdfIcons=ct:r.sdfIcons!==ct&&De("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==r.pixelRatio||E.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}const vt=Ly(Te.horizontal)||Te.vertical;r.iconsInText=!!vt&&vt.iconsInText,(vt||Ze)&&v2(r,q,Te,Ze,c,z,xe,Ce,Ne,ct,x)}y&&r.generateCollisionDebugBuffers()},u.perspective=function(r,t,o,c,m){var y,x=1/Math.tan(t/2);return r[0]=x/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,m!=null&&m!==1/0?(r[10]=(m+c)*(y=1/(c-m)),r[14]=2*m*c*y):(r[10]=-1,r[14]=-2*c),r},u.pick=function(r,t){const o={};for(let c=0;c<t.length;c++){const m=t[c];m in r&&(o[m]=r[m])}return o},u.plugin=mr,u.pointGeometry=ut,u.polygonIntersectsPolygon=N_,u.potpack=my,u.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],u.register=at,u.registerForPluginStateChange=function(r){return r({pluginStatus:Di,pluginURL:yo}),Vs.on("pluginStateChange",r),r},u.renderColorRamp=q_,u.rotateX=function(r,t,o){var c=Math.sin(o),m=Math.cos(o),y=t[4],x=t[5],E=t[6],k=t[7],z=t[8],F=t[9],O=t[10],$=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=y*m+z*c,r[5]=x*m+F*c,r[6]=E*m+O*c,r[7]=k*m+$*c,r[8]=z*m-y*c,r[9]=F*m-x*c,r[10]=O*m-E*c,r[11]=$*m-k*c,r},u.rotateZ=function(r,t,o){var c=Math.sin(o),m=Math.cos(o),y=t[0],x=t[1],E=t[2],k=t[3],z=t[4],F=t[5],O=t[6],$=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=y*m+z*c,r[1]=x*m+F*c,r[2]=E*m+O*c,r[3]=k*m+$*c,r[4]=z*m-y*c,r[5]=F*m-x*c,r[6]=O*m-E*c,r[7]=$*m-k*c,r},u.scale=function(r,t,o){var c=o[0],m=o[1],y=o[2];return r[0]=t[0]*c,r[1]=t[1]*c,r[2]=t[2]*c,r[3]=t[3]*c,r[4]=t[4]*m,r[5]=t[5]*m,r[6]=t[6]*m,r[7]=t[7]*m,r[8]=t[8]*y,r[9]=t[9]*y,r[10]=t[10]*y,r[11]=t[11]*y,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},u.scale$1=function(r,t,o){return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=t[3]*o,r},u.setCacheLimits=function(r,t){jt=r,fn=t},u.setRTLTextPlugin=function(r,t,o=!1){if(Di===ma||Di===Ya||Di===Wl)throw new Error("setRTLTextPlugin cannot be called multiple times.");yo=Sn.resolveURL(r),Di=ma,Ja=t,Qa(),o||ga()},u.spec=Pe,u.sphericalToCartesian=function([r,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:r*Math.cos(t)*Math.sin(o),y:r*Math.sin(t)*Math.sin(o),z:r*Math.cos(o)}},u.toEvaluationFeature=Jl,u.transformMat4=rd,u.translate=function(r,t,o){var c,m,y,x,E,k,z,F,O,$,G,q,ae=o[0],le=o[1],xe=o[2];return t===r?(r[12]=t[0]*ae+t[4]*le+t[8]*xe+t[12],r[13]=t[1]*ae+t[5]*le+t[9]*xe+t[13],r[14]=t[2]*ae+t[6]*le+t[10]*xe+t[14],r[15]=t[3]*ae+t[7]*le+t[11]*xe+t[15]):(m=t[1],y=t[2],x=t[3],E=t[4],k=t[5],z=t[6],F=t[7],O=t[8],$=t[9],G=t[10],q=t[11],r[0]=c=t[0],r[1]=m,r[2]=y,r[3]=x,r[4]=E,r[5]=k,r[6]=z,r[7]=F,r[8]=O,r[9]=$,r[10]=G,r[11]=q,r[12]=c*ae+E*le+O*xe+t[12],r[13]=m*ae+k*le+$*xe+t[13],r[14]=y*ae+z*le+G*xe+t[14],r[15]=x*ae+F*le+q*xe+t[15]),r},u.triggerPluginCompletionEvent=ql,u.unicodeBlockLookup=et,u.uniqueId=function(){return me++},u.validateCustomStyleLayer=function(r){const t=[],o=r.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),r.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},u.validateLight=Xr,u.validateStyle=as,u.vectorTile=rl,u.warnOnce=De,u.wrap=de}),v(["./shared"],function(u){function A(J){const M=typeof J;if(M==="number"||M==="boolean"||M==="string"||J==null)return JSON.stringify(J);if(Array.isArray(J)){let Q="[";for(const ne of J)Q+=`${A(ne)},`;return`${Q}]`}const B=Object.keys(J).sort();let H="{";for(let Q=0;Q<B.length;Q++)H+=`${JSON.stringify(B[Q])}:${A(J[B[Q]])},`;return`${H}}`}function V(J){let M="";for(const B of u.refProperties)M+=`/${A(J[B])}`;return M}class W{constructor(M){this.keyCache={},M&&this.replace(M)}replace(M){this._layerConfigs={},this._layers={},this.update(M,[])}update(M,B){for(const Q of M){this._layerConfigs[Q.id]=Q;const ne=this._layers[Q.id]=u.createStyleLayer(Q);ne._featureFilter=u.createFilter(ne.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(const Q of B)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};const H=function(Q,ne){const pe={};for(let he=0;he<Q.length;he++){const fe=ne&&ne[Q[he].id]||V(Q[he]);ne&&(ne[Q[he].id]=fe);let Ae=pe[fe];Ae||(Ae=pe[fe]=[]),Ae.push(Q[he])}const ce=[];for(const he in pe)ce.push(pe[he]);return ce}(Object.values(this._layerConfigs),this.keyCache);for(const Q of H){const ne=Q.map(Ve=>this._layers[Ve.id]),pe=ne[0];if(pe.visibility==="none")continue;const ce=pe.source||"";let he=this.familiesBySource[ce];he||(he=this.familiesBySource[ce]={});const fe=pe.sourceLayer||"_geojsonTileLayer";let Ae=he[fe];Ae||(Ae=he[fe]=[]),Ae.push(ne)}}}class Y{constructor(M){const B={},H=[];for(const ce in M){const he=M[ce],fe=B[ce]={};for(const Ae in he){const Ve=he[+Ae];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const ke={x:0,y:0,w:Ve.bitmap.width+2,h:Ve.bitmap.height+2};H.push(ke),fe[Ae]={rect:ke,metrics:Ve.metrics}}}const{w:Q,h:ne}=u.potpack(H),pe=new u.AlphaImage({width:Q||1,height:ne||1});for(const ce in M){const he=M[ce];for(const fe in he){const Ae=he[+fe];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const Ve=B[ce][fe].rect;u.AlphaImage.copy(Ae.bitmap,pe,{x:0,y:0},{x:Ve.x+1,y:Ve.y+1},Ae.bitmap)}}this.image=pe,this.positions=B}}u.register("GlyphAtlas",Y);class U{constructor(M){this.tileID=new u.OverscaledTileID(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId}parse(M,B,H,Q,ne){this.status="parsing",this.data=M,this.collisionBoxArray=new u.CollisionBoxArray;const pe=new u.DictionaryCoder(Object.keys(M.layers).sort()),ce=new u.FeatureIndex(this.tileID,this.promoteId);ce.bucketLayerIDs=[];const he={},fe={featureIndex:ce,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:H},Ae=B.familiesBySource[this.source];for(const Nt in Ae){const Ft=M.layers[Nt];if(!Ft)continue;Ft.version===1&&u.warnOnce(`Vector tile source "${this.source}" layer "${Nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Dt=pe.encode(Nt),An=[];for(let kt=0;kt<Ft.length;kt++){const Xt=Ft.feature(kt),ni=ce.getId(Xt,Nt);An.push({feature:Xt,id:ni,index:kt,sourceLayerIndex:Dt})}for(const kt of Ae[Nt]){const Xt=kt[0];Xt.minzoom&&this.zoom<Math.floor(Xt.minzoom)||Xt.maxzoom&&this.zoom>=Xt.maxzoom||Xt.visibility!=="none"&&(de(kt,this.zoom,H),(he[Xt.id]=Xt.createBucket({index:ce.bucketLayerIDs.length,layers:kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Dt,sourceID:this.source})).populate(An,fe,this.tileID.canonical),ce.bucketLayerIDs.push(kt.map(ni=>ni.id)))}}let Ve,ke,dt,it;const mt=u.mapObject(fe.glyphDependencies,Nt=>Object.keys(Nt).map(Number));Object.keys(mt).length?Q.send("getGlyphs",{uid:this.uid,stacks:mt},(Nt,Ft)=>{Ve||(Ve=Nt,ke=Ft,Gt.call(this))}):ke={};const Et=Object.keys(fe.iconDependencies);Et.length?Q.send("getImages",{icons:Et,source:this.source,tileID:this.tileID,type:"icons"},(Nt,Ft)=>{Ve||(Ve=Nt,dt=Ft,Gt.call(this))}):dt={};const sn=Object.keys(fe.patternDependencies);function Gt(){if(Ve)return ne(Ve);if(ke&&dt&&it){const Nt=new Y(ke),Ft=new u.ImageAtlas(dt,it);for(const Dt in he){const An=he[Dt];An instanceof u.SymbolBucket?(de(An.layers,this.zoom,H),u.performSymbolLayout(An,ke,Nt.positions,dt,Ft.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):An.hasPattern&&(An instanceof u.LineBucket||An instanceof u.FillBucket||An instanceof u.FillExtrusionBucket)&&(de(An.layers,this.zoom,H),An.addFeatures(fe,this.tileID.canonical,Ft.patternPositions))}this.status="done",ne(null,{buckets:Object.values(he).filter(Dt=>!Dt.isEmpty()),featureIndex:ce,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Nt.image,imageAtlas:Ft,glyphMap:this.returnDependencies?ke:null,iconMap:this.returnDependencies?dt:null,glyphPositions:this.returnDependencies?Nt.positions:null})}}sn.length?Q.send("getImages",{icons:sn,source:this.source,tileID:this.tileID,type:"patterns"},(Nt,Ft)=>{Ve||(Ve=Nt,it=Ft,Gt.call(this))}):it={},Gt.call(this)}}function de(J,M,B){const H=new u.EvaluationParameters(M);for(const Q of J)Q.recalculate(H,B)}function ye(J,M){const B=u.getArrayBuffer(J.request,(H,Q,ne,pe)=>{H?M(H):Q&&M(null,{vectorTile:new u.vectorTile.VectorTile(new u.pbf(Q)),rawData:Q,cacheControl:ne,expires:pe})});return()=>{B.cancel(),M()}}class me{constructor(M,B,H,Q){this.actor=M,this.layerIndex=B,this.availableImages=H,this.loadVectorData=Q||ye,this.loading={},this.loaded={}}loadTile(M,B){const H=M.uid;this.loading||(this.loading={});const Q=!!(M&&M.request&&M.request.collectResourceTiming)&&new u.RequestPerformance(M.request),ne=this.loading[H]=new U(M);ne.abort=this.loadVectorData(M,(pe,ce)=>{if(delete this.loading[H],pe||!ce)return ne.status="done",this.loaded[H]=ne,B(pe);const he=ce.rawData,fe={};ce.expires&&(fe.expires=ce.expires),ce.cacheControl&&(fe.cacheControl=ce.cacheControl);const Ae={};if(Q){const Ve=Q.finish();Ve&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ve)))}ne.vectorTile=ce.vectorTile,ne.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ve,ke)=>{if(Ve||!ke)return B(Ve);B(null,u.extend({rawTileData:he.slice(0)},ke,fe,Ae))}),this.loaded=this.loaded||{},this.loaded[H]=ne})}reloadTile(M,B){const H=this.loaded,Q=M.uid,ne=this;if(H&&H[Q]){const pe=H[Q];pe.showCollisionBoxes=M.showCollisionBoxes;const ce=(he,fe)=>{const Ae=pe.reloadCallback;Ae&&(delete pe.reloadCallback,pe.parse(pe.vectorTile,ne.layerIndex,this.availableImages,ne.actor,Ae)),B(he,fe)};pe.status==="parsing"?pe.reloadCallback=ce:pe.status==="done"&&(pe.vectorTile?pe.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,ce):ce())}}abortTile(M,B){const H=this.loading,Q=M.uid;H&&H[Q]&&H[Q].abort&&(H[Q].abort(),delete H[Q]),B()}removeTile(M,B){const H=this.loaded,Q=M.uid;H&&H[Q]&&delete H[Q],B()}}class ze{constructor(){this.loaded={}}loadTile(M,B){const{uid:H,encoding:Q,rawImageData:ne}=M,pe=u.isImageBitmap(ne)?this.getImageData(ne):ne,ce=new u.DEMData(H,pe,Q);this.loaded=this.loaded||{},this.loaded[H]=ce,B(null,ce)}getImageData(M){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(M.width,M.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=M.width,this.offscreenCanvas.height=M.height,this.offscreenCanvasContext.drawImage(M,0,0,M.width,M.height);const B=this.offscreenCanvasContext.getImageData(-1,-1,M.width+2,M.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new u.RGBAImage({width:B.width,height:B.height},B.data)}removeTile(M){const B=this.loaded,H=M.uid;B&&B[H]&&delete B[H]}}var ie=function J(M,B){var H,Q=M&&M.type;if(Q==="FeatureCollection")for(H=0;H<M.features.length;H++)J(M.features[H],B);else if(Q==="GeometryCollection")for(H=0;H<M.geometries.length;H++)J(M.geometries[H],B);else if(Q==="Feature")J(M.geometry,B);else if(Q==="Polygon")ee(M.coordinates,B);else if(Q==="MultiPolygon")for(H=0;H<M.coordinates.length;H++)ee(M.coordinates[H],B);return M};function ee(J,M){if(J.length!==0){te(J[0],M);for(var B=1;B<J.length;B++)te(J[B],!M)}}function te(J,M){for(var B=0,H=0,Q=0,ne=J.length,pe=ne-1;Q<ne;pe=Q++){var ce=(J[Q][0]-J[pe][0])*(J[pe][1]+J[Q][1]),he=B+ce;H+=Math.abs(B)>=Math.abs(ce)?B-he+ce:ce-he+B,B=he}B+H>=0!=!!M&&J.reverse()}const Ee=u.vectorTile.VectorTileFeature.prototype.toGeoJSON;class De{constructor(M){this._feature=M,this.extent=u.EXTENT,this.type=M.type,this.properties=M.tags,"id"in M&&!isNaN(M.id)&&(this.id=parseInt(M.id,10))}loadGeometry(){if(this._feature.type===1){const M=[];for(const B of this._feature.geometry)M.push([new u.pointGeometry(B[0],B[1])]);return M}{const M=[];for(const B of this._feature.geometry){const H=[];for(const Q of B)H.push(new u.pointGeometry(Q[0],Q[1]));M.push(H)}return M}}toGeoJSON(M,B,H){return Ee.call(this,M,B,H)}}class je{constructor(M){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.EXTENT,this.length=M.length,this._features=M}feature(M){return new De(this._features[M])}}var Ue={exports:{}},We=u.pointGeometry,ht=u.vectorTile.VectorTileFeature,ft=Ct;function Ct(J,M){this.options=M||{},this.features=J,this.length=J.length}function Ut(J,M){this.id=typeof J.id=="number"?J.id:void 0,this.type=J.type,this.rawGeometry=J.type===1?[J.geometry]:J.geometry,this.properties=J.tags,this.extent=M||4096}Ct.prototype.feature=function(J){return new Ut(this.features[J],this.options.extent)},Ut.prototype.loadGeometry=function(){var J=this.rawGeometry;this.geometry=[];for(var M=0;M<J.length;M++){for(var B=J[M],H=[],Q=0;Q<B.length;Q++)H.push(new We(B[Q][0],B[Q][1]));this.geometry.push(H)}return this.geometry},Ut.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var J=this.geometry,M=1/0,B=-1/0,H=1/0,Q=-1/0,ne=0;ne<J.length;ne++)for(var pe=J[ne],ce=0;ce<pe.length;ce++){var he=pe[ce];M=Math.min(M,he.x),B=Math.max(B,he.x),H=Math.min(H,he.y),Q=Math.max(Q,he.y)}return[M,H,B,Q]},Ut.prototype.toGeoJSON=ht.prototype.toGeoJSON;var jn=u.pbf,Zt=ft;function Sn(J){var M=new jn;return function(B,H){for(var Q in B.layers)H.writeMessage(3,ut,B.layers[Q])}(J,M),M.finish()}function ut(J,M){var B;M.writeVarintField(15,J.version||1),M.writeStringField(1,J.name||""),M.writeVarintField(5,J.extent||4096);var H={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<J.length;B++)H.feature=J.feature(B),M.writeMessage(2,Dn,H);var Q=H.keys;for(B=0;B<Q.length;B++)M.writeStringField(3,Q[B]);var ne=H.values;for(B=0;B<ne.length;B++)M.writeMessage(4,jt,ne[B])}function Dn(J,M){var B=J.feature;B.id!==void 0&&M.writeVarintField(1,B.id),M.writeMessage(2,Oe,J),M.writeVarintField(3,B.type),M.writeMessage(4,Pt,B)}function Oe(J,M){var B=J.feature,H=J.keys,Q=J.values,ne=J.keycache,pe=J.valuecache;for(var ce in B.properties){var he=B.properties[ce],fe=ne[ce];if(he!==null){fe===void 0&&(H.push(ce),ne[ce]=fe=H.length-1),M.writeVarint(fe);var Ae=typeof he;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(he=JSON.stringify(he));var Ve=Ae+":"+he,ke=pe[Ve];ke===void 0&&(Q.push(he),pe[Ve]=ke=Q.length-1),M.writeVarint(ke)}}}function gt(J,M){return(M<<3)+(7&J)}function Ye(J){return J<<1^J>>31}function Pt(J,M){for(var B=J.loadGeometry(),H=J.type,Q=0,ne=0,pe=B.length,ce=0;ce<pe;ce++){var he=B[ce],fe=1;H===1&&(fe=he.length),M.writeVarint(gt(1,fe));for(var Ae=H===3?he.length-1:he.length,Ve=0;Ve<Ae;Ve++){Ve===1&&H!==1&&M.writeVarint(gt(2,Ae-1));var ke=he[Ve].x-Q,dt=he[Ve].y-ne;M.writeVarint(Ye(ke)),M.writeVarint(Ye(dt)),Q+=ke,ne+=dt}H===3&&M.writeVarint(gt(7,1))}}function jt(J,M){var B=typeof J;B==="string"?M.writeStringField(1,J):B==="boolean"?M.writeBooleanField(7,J):B==="number"&&(J%1!=0?M.writeDoubleField(3,J):J<0?M.writeSVarintField(6,J):M.writeVarintField(5,J))}Ue.exports=Sn,Ue.exports.fromVectorTileJs=Sn,Ue.exports.fromGeojsonVt=function(J,M){M=M||{};var B={};for(var H in J)B[H]=new Zt(J[H].features,M),B[H].name=H,B[H].version=M.version,B[H].extent=M.extent;return Sn({layers:B})},Ue.exports.GeoJSONWrapper=Zt;var fn=Ue.exports;function Wt(J,M,B,H,Q,ne){if(Q-H<=B)return;const pe=H+Q>>1;qt(J,M,pe,H,Q,ne%2),Wt(J,M,B,H,pe-1,ne+1),Wt(J,M,B,pe+1,Q,ne+1)}function qt(J,M,B,H,Q,ne){for(;Q>H;){if(Q-H>600){const fe=Q-H+1,Ae=B-H+1,Ve=Math.log(fe),ke=.5*Math.exp(2*Ve/3),dt=.5*Math.sqrt(Ve*ke*(fe-ke)/fe)*(Ae-fe/2<0?-1:1);qt(J,M,B,Math.max(H,Math.floor(B-Ae*ke/fe+dt)),Math.min(Q,Math.floor(B+(fe-Ae)*ke/fe+dt)),ne)}const pe=M[2*B+ne];let ce=H,he=Q;for(At(J,M,H,B),M[2*Q+ne]>pe&&At(J,M,H,Q);ce<he;){for(At(J,M,ce,he),ce++,he--;M[2*ce+ne]<pe;)ce++;for(;M[2*he+ne]>pe;)he--}M[2*H+ne]===pe?At(J,M,H,he):(he++,At(J,M,he,Q)),he<=B&&(H=he+1),B<=he&&(Q=he-1)}}function At(J,M,B,H){zn(J,B,H),zn(M,2*B,2*H),zn(M,2*B+1,2*H+1)}function zn(J,M,B){const H=J[M];J[M]=J[B],J[B]=H}function si(J,M,B,H){const Q=J-B,ne=M-H;return Q*Q+ne*ne}const Gr=J=>J[0],Sr=J=>J[1];class ur{constructor(M,B=Gr,H=Sr,Q=64,ne=Float64Array){this.nodeSize=Q,this.points=M;const pe=M.length<65536?Uint16Array:Uint32Array,ce=this.ids=new pe(M.length),he=this.coords=new ne(2*M.length);for(let fe=0;fe<M.length;fe++)ce[fe]=fe,he[2*fe]=B(M[fe]),he[2*fe+1]=H(M[fe]);Wt(ce,he,Q,0,ce.length-1,0)}range(M,B,H,Q){return function(ne,pe,ce,he,fe,Ae,Ve){const ke=[0,ne.length-1,0],dt=[];let it,mt;for(;ke.length;){const Et=ke.pop(),sn=ke.pop(),Gt=ke.pop();if(sn-Gt<=Ve){for(let Dt=Gt;Dt<=sn;Dt++)it=pe[2*Dt],mt=pe[2*Dt+1],it>=ce&&it<=fe&&mt>=he&&mt<=Ae&&dt.push(ne[Dt]);continue}const Nt=Math.floor((Gt+sn)/2);it=pe[2*Nt],mt=pe[2*Nt+1],it>=ce&&it<=fe&&mt>=he&&mt<=Ae&&dt.push(ne[Nt]);const Ft=(Et+1)%2;(Et===0?ce<=it:he<=mt)&&(ke.push(Gt),ke.push(Nt-1),ke.push(Ft)),(Et===0?fe>=it:Ae>=mt)&&(ke.push(Nt+1),ke.push(sn),ke.push(Ft))}return dt}(this.ids,this.coords,M,B,H,Q,this.nodeSize)}within(M,B,H){return function(Q,ne,pe,ce,he,fe){const Ae=[0,Q.length-1,0],Ve=[],ke=he*he;for(;Ae.length;){const dt=Ae.pop(),it=Ae.pop(),mt=Ae.pop();if(it-mt<=fe){for(let Ft=mt;Ft<=it;Ft++)si(ne[2*Ft],ne[2*Ft+1],pe,ce)<=ke&&Ve.push(Q[Ft]);continue}const Et=Math.floor((mt+it)/2),sn=ne[2*Et],Gt=ne[2*Et+1];si(sn,Gt,pe,ce)<=ke&&Ve.push(Q[Et]);const Nt=(dt+1)%2;(dt===0?pe-he<=sn:ce-he<=Gt)&&(Ae.push(mt),Ae.push(Et-1),Ae.push(Nt)),(dt===0?pe+he>=sn:ce+he>=Gt)&&(Ae.push(Et+1),Ae.push(it),Ae.push(Nt))}return Ve}(this.ids,this.coords,M,B,H,this.nodeSize)}}const Ai={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:J=>J},Fn=Math.fround||(Er=new Float32Array(1),J=>(Er[0]=+J,Er[0]));var Er;class ao{constructor(M){this.options=Ht(Object.create(Ai),M),this.trees=new Array(this.options.maxZoom+1)}load(M){const{log:B,minZoom:H,maxZoom:Q,nodeSize:ne}=this.options;B&&console.time("total time");const pe=`prepare ${M.length} points`;B&&console.time(pe),this.points=M;let ce=[];for(let he=0;he<M.length;he++)M[he].geometry&&ce.push(ai(M[he],he));this.trees[Q+1]=new ur(ce,nt,St,ne,Float32Array),B&&console.timeEnd(pe);for(let he=Q;he>=H;he--){const fe=+Date.now();ce=this._cluster(ce,he),this.trees[he]=new ur(ce,nt,St,ne,Float32Array),B&&console.log("z%d: %d clusters in %dms",he,ce.length,+Date.now()-fe)}return B&&console.timeEnd("total time"),this}getClusters(M,B){let H=((M[0]+180)%360+360)%360-180;const Q=Math.max(-90,Math.min(90,M[1]));let ne=M[2]===180?180:((M[2]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)H=-180,ne=180;else if(H>ne){const Ae=this.getClusters([H,Q,180,pe],B),Ve=this.getClusters([-180,Q,ne,pe],B);return Ae.concat(Ve)}const ce=this.trees[this._limitZoom(B)],he=ce.range(Ti(H),Vi(pe),Ti(ne),Vi(Q)),fe=[];for(const Ae of he){const Ve=ce.points[Ae];fe.push(Ve.numPoints?Pr(Ve):this.points[Ve.index])}return fe}getChildren(M){const B=this._getOriginId(M),H=this._getOriginZoom(M),Q="No cluster with the specified id.",ne=this.trees[H];if(!ne)throw new Error(Q);const pe=ne.points[B];if(!pe)throw new Error(Q);const ce=this.options.radius/(this.options.extent*Math.pow(2,H-1)),he=ne.within(pe.x,pe.y,ce),fe=[];for(const Ae of he){const Ve=ne.points[Ae];Ve.parentId===M&&fe.push(Ve.numPoints?Pr(Ve):this.points[Ve.index])}if(fe.length===0)throw new Error(Q);return fe}getLeaves(M,B,H){const Q=[];return this._appendLeaves(Q,M,B=B||10,H=H||0,0),Q}getTile(M,B,H){const Q=this.trees[this._limitZoom(M)],ne=Math.pow(2,M),{extent:pe,radius:ce}=this.options,he=ce/pe,fe=(H-he)/ne,Ae=(H+1+he)/ne,Ve={features:[]};return this._addTileFeatures(Q.range((B-he)/ne,fe,(B+1+he)/ne,Ae),Q.points,B,H,ne,Ve),B===0&&this._addTileFeatures(Q.range(1-he/ne,fe,1,Ae),Q.points,ne,H,ne,Ve),B===ne-1&&this._addTileFeatures(Q.range(0,fe,he/ne,Ae),Q.points,-1,H,ne,Ve),Ve.features.length?Ve:null}getClusterExpansionZoom(M){let B=this._getOriginZoom(M)-1;for(;B<=this.options.maxZoom;){const H=this.getChildren(M);if(B++,H.length!==1)break;M=H[0].properties.cluster_id}return B}_appendLeaves(M,B,H,Q,ne){const pe=this.getChildren(B);for(const ce of pe){const he=ce.properties;if(he&&he.cluster?ne+he.point_count<=Q?ne+=he.point_count:ne=this._appendLeaves(M,he.cluster_id,H,Q,ne):ne<Q?ne++:M.push(ce),M.length===H)break}return ne}_addTileFeatures(M,B,H,Q,ne,pe){for(const ce of M){const he=B[ce],fe=he.numPoints;let Ae,Ve,ke;if(fe)Ae=Ui(he),Ve=he.x,ke=he.y;else{const mt=this.points[he.index];Ae=mt.properties,Ve=Ti(mt.geometry.coordinates[0]),ke=Vi(mt.geometry.coordinates[1])}const dt={type:1,geometry:[[Math.round(this.options.extent*(Ve*ne-H)),Math.round(this.options.extent*(ke*ne-Q))]],tags:Ae};let it;fe?it=he.id:this.options.generateId?it=he.index:this.points[he.index].id&&(it=this.points[he.index].id),it!==void 0&&(dt.id=it),pe.features.push(dt)}}_limitZoom(M){return Math.max(this.options.minZoom,Math.min(+M,this.options.maxZoom+1))}_cluster(M,B){const H=[],{radius:Q,extent:ne,reduce:pe,minPoints:ce}=this.options,he=Q/(ne*Math.pow(2,B));for(let fe=0;fe<M.length;fe++){const Ae=M[fe];if(Ae.zoom<=B)continue;Ae.zoom=B;const Ve=this.trees[B+1],ke=Ve.within(Ae.x,Ae.y,he),dt=Ae.numPoints||1;let it=dt;for(const mt of ke){const Et=Ve.points[mt];Et.zoom>B&&(it+=Et.numPoints||1)}if(it>dt&&it>=ce){let mt=Ae.x*dt,Et=Ae.y*dt,sn=pe&&dt>1?this._map(Ae,!0):null;const Gt=(fe<<5)+(B+1)+this.points.length;for(const Nt of ke){const Ft=Ve.points[Nt];if(Ft.zoom<=B)continue;Ft.zoom=B;const Dt=Ft.numPoints||1;mt+=Ft.x*Dt,Et+=Ft.y*Dt,Ft.parentId=Gt,pe&&(sn||(sn=this._map(Ae,!0)),pe(sn,this._map(Ft)))}Ae.parentId=Gt,H.push(Tr(mt/it,Et/it,Gt,it,sn))}else if(H.push(Ae),it>1)for(const mt of ke){const Et=Ve.points[mt];Et.zoom<=B||(Et.zoom=B,H.push(Et))}}return H}_getOriginId(M){return M-this.points.length>>5}_getOriginZoom(M){return(M-this.points.length)%32}_map(M,B){if(M.numPoints)return B?Ht({},M.properties):M.properties;const H=this.points[M.index].properties,Q=this.options.map(H);return B&&Q===H?Ht({},Q):Q}}function Tr(J,M,B,H,Q){return{x:Fn(J),y:Fn(M),zoom:1/0,id:B,parentId:-1,numPoints:H,properties:Q}}function ai(J,M){const[B,H]=J.geometry.coordinates;return{x:Fn(Ti(B)),y:Fn(Vi(H)),zoom:1/0,index:M,parentId:-1}}function Pr(J){return{type:"Feature",id:J.id,properties:Ui(J),geometry:{type:"Point",coordinates:[(M=J.x,360*(M-.5)),Po(J.y)]}};var M}function Ui(J){const M=J.numPoints,B=M>=1e4?`${Math.round(M/1e3)}k`:M>=1e3?Math.round(M/100)/10+"k":M;return Ht(Ht({},J.properties),{cluster:!0,cluster_id:J.id,point_count:M,point_count_abbreviated:B})}function Ti(J){return J/360+.5}function Vi(J){const M=Math.sin(J*Math.PI/180),B=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return B<0?0:B>1?1:B}function Po(J){const M=(180-360*J)*Math.PI/180;return 360*Math.atan(Math.exp(M))/Math.PI-90}function Ht(J,M){for(const B in M)J[B]=M[B];return J}function nt(J){return J.x}function St(J){return J.y}function mn(J,M,B,H){for(var Q,ne=H,pe=B-M>>1,ce=B-M,he=J[M],fe=J[M+1],Ae=J[B],Ve=J[B+1],ke=M+3;ke<B;ke+=3){var dt=Rn(J[ke],J[ke+1],he,fe,Ae,Ve);if(dt>ne)Q=ke,ne=dt;else if(dt===ne){var it=Math.abs(ke-pe);it<ce&&(Q=ke,ce=it)}}ne>H&&(Q-M>3&&mn(J,M,Q,H),J[Q+2]=ne,B-Q>3&&mn(J,Q,B,H))}function Rn(J,M,B,H,Q,ne){var pe=Q-B,ce=ne-H;if(pe!==0||ce!==0){var he=((J-B)*pe+(M-H)*ce)/(pe*pe+ce*ce);he>1?(B=Q,H=ne):he>0&&(B+=pe*he,H+=ce*he)}return(pe=J-B)*pe+(ce=M-H)*ce}function Pe(J,M,B,H){var Q={id:J===void 0?null:J,type:M,geometry:B,tags:H,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ne){var pe=ne.geometry,ce=ne.type;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")Je(ne,pe);else if(ce==="Polygon"||ce==="MultiLineString")for(var he=0;he<pe.length;he++)Je(ne,pe[he]);else if(ce==="MultiPolygon")for(he=0;he<pe.length;he++)for(var fe=0;fe<pe[he].length;fe++)Je(ne,pe[he][fe])}(Q),Q}function Je(J,M){for(var B=0;B<M.length;B+=3)J.minX=Math.min(J.minX,M[B]),J.minY=Math.min(J.minY,M[B+1]),J.maxX=Math.max(J.maxX,M[B]),J.maxY=Math.max(J.maxY,M[B+1])}function Mi(J,M,B,H){if(M.geometry){var Q=M.geometry.coordinates,ne=M.geometry.type,pe=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),ce=[],he=M.id;if(B.promoteId?he=M.properties[B.promoteId]:B.generateId&&(he=H||0),ne==="Point")$i(Q,ce);else if(ne==="MultiPoint")for(var fe=0;fe<Q.length;fe++)$i(Q[fe],ce);else if(ne==="LineString")ln(Q,ce,pe,!1);else if(ne==="MultiLineString"){if(B.lineMetrics){for(fe=0;fe<Q.length;fe++)ln(Q[fe],ce=[],pe,!1),J.push(Pe(he,"LineString",ce,M.properties));return}wi(Q,ce,pe,!1)}else if(ne==="Polygon")wi(Q,ce,pe,!0);else{if(ne!=="MultiPolygon"){if(ne==="GeometryCollection"){for(fe=0;fe<M.geometry.geometries.length;fe++)Mi(J,{id:he,geometry:M.geometry.geometries[fe],properties:M.properties},B,H);return}throw new Error("Input data is not a valid GeoJSON object.")}for(fe=0;fe<Q.length;fe++){var Ae=[];wi(Q[fe],Ae,pe,!0),ce.push(Ae)}}J.push(Pe(he,ne,ce,M.properties))}}function $i(J,M){M.push(Gn(J[0])),M.push(cr(J[1])),M.push(0)}function ln(J,M,B,H){for(var Q,ne,pe=0,ce=0;ce<J.length;ce++){var he=Gn(J[ce][0]),fe=cr(J[ce][1]);M.push(he),M.push(fe),M.push(0),ce>0&&(pe+=H?(Q*fe-he*ne)/2:Math.sqrt(Math.pow(he-Q,2)+Math.pow(fe-ne,2))),Q=he,ne=fe}var Ae=M.length-3;M[2]=1,mn(M,0,Ae,B),M[Ae+2]=1,M.size=Math.abs(pe),M.start=0,M.end=M.size}function wi(J,M,B,H){for(var Q=0;Q<J.length;Q++){var ne=[];ln(J[Q],ne,B,H),M.push(ne)}}function Gn(J){return J/360+.5}function cr(J){var M=Math.sin(J*Math.PI/180),B=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return B<0?0:B>1?1:B}function gn(J,M,B,H,Q,ne,pe,ce){if(H/=M,ne>=(B/=M)&&pe<H)return J;if(pe<B||ne>=H)return null;for(var he=[],fe=0;fe<J.length;fe++){var Ae=J[fe],Ve=Ae.geometry,ke=Ae.type,dt=Q===0?Ae.minX:Ae.minY,it=Q===0?Ae.maxX:Ae.maxY;if(dt>=B&&it<H)he.push(Ae);else if(!(it<B||dt>=H)){var mt=[];if(ke==="Point"||ke==="MultiPoint")He(Ve,mt,B,H,Q);else if(ke==="LineString")Rt(Ve,mt,B,H,Q,!1,ce.lineMetrics);else if(ke==="MultiLineString")Pi(Ve,mt,B,H,Q,!1);else if(ke==="Polygon")Pi(Ve,mt,B,H,Q,!0);else if(ke==="MultiPolygon")for(var Et=0;Et<Ve.length;Et++){var sn=[];Pi(Ve[Et],sn,B,H,Q,!0),sn.length&&mt.push(sn)}if(mt.length){if(ce.lineMetrics&&ke==="LineString"){for(Et=0;Et<mt.length;Et++)he.push(Pe(Ae.id,ke,mt[Et],Ae.tags));continue}ke!=="LineString"&&ke!=="MultiLineString"||(mt.length===1?(ke="LineString",mt=mt[0]):ke="MultiLineString"),ke!=="Point"&&ke!=="MultiPoint"||(ke=mt.length===3?"Point":"MultiPoint"),he.push(Pe(Ae.id,ke,mt,Ae.tags))}}}return he.length?he:null}function He(J,M,B,H,Q){for(var ne=0;ne<J.length;ne+=3){var pe=J[ne+Q];pe>=B&&pe<=H&&(M.push(J[ne]),M.push(J[ne+1]),M.push(J[ne+2]))}}function Rt(J,M,B,H,Q,ne,pe){for(var ce,he,fe=Lt(J),Ae=Q===0?Bt:Ko,Ve=J.start,ke=0;ke<J.length-3;ke+=3){var dt=J[ke],it=J[ke+1],mt=J[ke+2],Et=J[ke+3],sn=J[ke+4],Gt=Q===0?dt:it,Nt=Q===0?Et:sn,Ft=!1;pe&&(ce=Math.sqrt(Math.pow(dt-Et,2)+Math.pow(it-sn,2))),Gt<B?Nt>B&&(he=Ae(fe,dt,it,Et,sn,B),pe&&(fe.start=Ve+ce*he)):Gt>H?Nt<H&&(he=Ae(fe,dt,it,Et,sn,H),pe&&(fe.start=Ve+ce*he)):hr(fe,dt,it,mt),Nt<B&&Gt>=B&&(he=Ae(fe,dt,it,Et,sn,B),Ft=!0),Nt>H&&Gt<=H&&(he=Ae(fe,dt,it,Et,sn,H),Ft=!0),!ne&&Ft&&(pe&&(fe.end=Ve+ce*he),M.push(fe),fe=Lt(J)),pe&&(Ve+=ce)}var Dt=J.length-3;dt=J[Dt],it=J[Dt+1],mt=J[Dt+2],(Gt=Q===0?dt:it)>=B&&Gt<=H&&hr(fe,dt,it,mt),Dt=fe.length-3,ne&&Dt>=3&&(fe[Dt]!==fe[0]||fe[Dt+1]!==fe[1])&&hr(fe,fe[0],fe[1],fe[2]),fe.length&&M.push(fe)}function Lt(J){var M=[];return M.size=J.size,M.start=J.start,M.end=J.end,M}function Pi(J,M,B,H,Q,ne){for(var pe=0;pe<J.length;pe++)Rt(J[pe],M,B,H,Q,ne,!1)}function hr(J,M,B,H){J.push(M),J.push(B),J.push(H)}function Bt(J,M,B,H,Q,ne){var pe=(ne-M)/(H-M);return J.push(ne),J.push(B+(Q-B)*pe),J.push(1),pe}function Ko(J,M,B,H,Q,ne){var pe=(ne-B)/(Q-B);return J.push(M+(H-M)*pe),J.push(ne),J.push(1),pe}function kr(J,M){for(var B=[],H=0;H<J.length;H++){var Q,ne=J[H],pe=ne.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")Q=lo(ne.geometry,M);else if(pe==="MultiLineString"||pe==="Polygon"){Q=[];for(var ce=0;ce<ne.geometry.length;ce++)Q.push(lo(ne.geometry[ce],M))}else if(pe==="MultiPolygon")for(Q=[],ce=0;ce<ne.geometry.length;ce++){for(var he=[],fe=0;fe<ne.geometry[ce].length;fe++)he.push(lo(ne.geometry[ce][fe],M));Q.push(he)}B.push(Pe(ne.id,pe,Q,ne.tags))}return B}function lo(J,M){var B=[];B.size=J.size,J.start!==void 0&&(B.start=J.start,B.end=J.end);for(var H=0;H<J.length;H+=3)B.push(J[H]+M,J[H+1],J[H+2]);return B}function ei(J,M){if(J.transformed)return J;var B,H,Q,ne=1<<J.z,pe=J.x,ce=J.y;for(B=0;B<J.features.length;B++){var he=J.features[B],fe=he.geometry,Ae=he.type;if(he.geometry=[],Ae===1)for(H=0;H<fe.length;H+=2)he.geometry.push(wn(fe[H],fe[H+1],M,ne,pe,ce));else for(H=0;H<fe.length;H++){var Ve=[];for(Q=0;Q<fe[H].length;Q+=2)Ve.push(wn(fe[H][Q],fe[H][Q+1],M,ne,pe,ce));he.geometry.push(Ve)}}return J.transformed=!0,J}function wn(J,M,B,H,Q,ne){return[Math.round(B*(J*H-Q)),Math.round(B*(M*H-ne))]}function dr(J,M,B,H,Q){for(var ne=M===Q.maxZoom?0:Q.tolerance/((1<<M)*Q.extent),pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:H,z:M,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ce=0;ce<J.length;ce++){pe.numFeatures++,uo(pe,J[ce],ne,Q);var he=J[ce].minX,fe=J[ce].minY,Ae=J[ce].maxX,Ve=J[ce].maxY;he<pe.minX&&(pe.minX=he),fe<pe.minY&&(pe.minY=fe),Ae>pe.maxX&&(pe.maxX=Ae),Ve>pe.maxY&&(pe.maxY=Ve)}return pe}function uo(J,M,B,H){var Q=M.geometry,ne=M.type,pe=[];if(ne==="Point"||ne==="MultiPoint")for(var ce=0;ce<Q.length;ce+=3)pe.push(Q[ce]),pe.push(Q[ce+1]),J.numPoints++,J.numSimplified++;else if(ne==="LineString")li(pe,Q,J,B,!1,!1);else if(ne==="MultiLineString"||ne==="Polygon")for(ce=0;ce<Q.length;ce++)li(pe,Q[ce],J,B,ne==="Polygon",ce===0);else if(ne==="MultiPolygon")for(var he=0;he<Q.length;he++){var fe=Q[he];for(ce=0;ce<fe.length;ce++)li(pe,fe[ce],J,B,!0,ce===0)}if(pe.length){var Ae=M.tags||null;if(ne==="LineString"&&H.lineMetrics){for(var Ve in Ae={},M.tags)Ae[Ve]=M.tags[Ve];Ae.mapbox_clip_start=Q.start/Q.size,Ae.mapbox_clip_end=Q.end/Q.size}var ke={geometry:pe,type:ne==="Polygon"||ne==="MultiPolygon"?3:ne==="LineString"||ne==="MultiLineString"?2:1,tags:Ae};M.id!==null&&(ke.id=M.id),J.features.push(ke)}}function li(J,M,B,H,Q,ne){var pe=H*H;if(H>0&&M.size<(Q?pe:H))B.numPoints+=M.length/3;else{for(var ce=[],he=0;he<M.length;he+=3)(H===0||M[he+2]>pe)&&(B.numSimplified++,ce.push(M[he]),ce.push(M[he+1])),B.numPoints++;Q&&function(fe,Ae){for(var Ve=0,ke=0,dt=fe.length,it=dt-2;ke<dt;it=ke,ke+=2)Ve+=(fe[ke]-fe[it])*(fe[ke+1]+fe[it+1]);if(Ve>0===Ae)for(ke=0,dt=fe.length;ke<dt/2;ke+=2){var mt=fe[ke],Et=fe[ke+1];fe[ke]=fe[dt-2-ke],fe[ke+1]=fe[dt-1-ke],fe[dt-2-ke]=mt,fe[dt-1-ke]=Et}}(ce,ne),J.push(ce)}}function Cr(J,M){var B=(M=this.options=function(Q,ne){for(var pe in ne)Q[pe]=ne[pe];return Q}(Object.create(this.options),M)).debug;if(B&&console.time("preprocess data"),M.maxZoom<0||M.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(M.promoteId&&M.generateId)throw new Error("promoteId and generateId cannot be used together.");var H=function(Q,ne){var pe=[];if(Q.type==="FeatureCollection")for(var ce=0;ce<Q.features.length;ce++)Mi(pe,Q.features[ce],ne,ce);else Mi(pe,Q.type==="Feature"?Q:{geometry:Q},ne);return pe}(J,M);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",M.indexMaxZoom,M.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),H=function(Q,ne){var pe=ne.buffer/ne.extent,ce=Q,he=gn(Q,1,-1-pe,pe,0,-1,2,ne),fe=gn(Q,1,1-pe,2+pe,0,-1,2,ne);return(he||fe)&&(ce=gn(Q,1,-pe,1+pe,0,-1,2,ne)||[],he&&(ce=kr(he,1).concat(ce)),fe&&(ce=ce.concat(kr(fe,-1)))),ce}(H,M),H.length&&this.splitTile(H,0,0,0),B&&(H.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ti(J,M,B){return 32*((1<<J)*B+M)+J}function wt(J,M){const B=J.tileID.canonical;if(!this._geoJSONIndex)return M(null,null);const H=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!H)return M(null,null);const Q=new je(H.features);let ne=fn(Q);ne.byteOffset===0&&ne.byteLength===ne.buffer.byteLength||(ne=new Uint8Array(ne)),M(null,{vectorTile:Q,rawData:ne.buffer})}Cr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Cr.prototype.splitTile=function(J,M,B,H,Q,ne,pe){for(var ce=[J,M,B,H],he=this.options,fe=he.debug;ce.length;){H=ce.pop(),B=ce.pop(),M=ce.pop(),J=ce.pop();var Ae=1<<M,Ve=ti(M,B,H),ke=this.tiles[Ve];if(!ke&&(fe>1&&console.time("creation"),ke=this.tiles[Ve]=dr(J,M,B,H,he),this.tileCoords.push({z:M,x:B,y:H}),fe)){fe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",M,B,H,ke.numFeatures,ke.numPoints,ke.numSimplified),console.timeEnd("creation"));var dt="z"+M;this.stats[dt]=(this.stats[dt]||0)+1,this.total++}if(ke.source=J,Q){if(M===he.maxZoom||M===Q)continue;var it=1<<Q-M;if(B!==Math.floor(ne/it)||H!==Math.floor(pe/it))continue}else if(M===he.indexMaxZoom||ke.numPoints<=he.indexMaxPoints)continue;if(ke.source=null,J.length!==0){fe>1&&console.time("clipping");var mt,Et,sn,Gt,Nt,Ft,Dt=.5*he.buffer/he.extent,An=.5-Dt,kt=.5+Dt,Xt=1+Dt;mt=Et=sn=Gt=null,Nt=gn(J,Ae,B-Dt,B+kt,0,ke.minX,ke.maxX,he),Ft=gn(J,Ae,B+An,B+Xt,0,ke.minX,ke.maxX,he),J=null,Nt&&(mt=gn(Nt,Ae,H-Dt,H+kt,1,ke.minY,ke.maxY,he),Et=gn(Nt,Ae,H+An,H+Xt,1,ke.minY,ke.maxY,he),Nt=null),Ft&&(sn=gn(Ft,Ae,H-Dt,H+kt,1,ke.minY,ke.maxY,he),Gt=gn(Ft,Ae,H+An,H+Xt,1,ke.minY,ke.maxY,he),Ft=null),fe>1&&console.timeEnd("clipping"),ce.push(mt||[],M+1,2*B,2*H),ce.push(Et||[],M+1,2*B,2*H+1),ce.push(sn||[],M+1,2*B+1,2*H),ce.push(Gt||[],M+1,2*B+1,2*H+1)}}},Cr.prototype.getTile=function(J,M,B){var H=this.options,Q=H.extent,ne=H.debug;if(J<0||J>24)return null;var pe=1<<J,ce=ti(J,M=(M%pe+pe)%pe,B);if(this.tiles[ce])return ei(this.tiles[ce],Q);ne>1&&console.log("drilling down to z%d-%d-%d",J,M,B);for(var he,fe=J,Ae=M,Ve=B;!he&&fe>0;)fe--,Ae=Math.floor(Ae/2),Ve=Math.floor(Ve/2),he=this.tiles[ti(fe,Ae,Ve)];return he&&he.source?(ne>1&&console.log("found parent tile z%d-%d-%d",fe,Ae,Ve),ne>1&&console.time("drilling down"),this.splitTile(he.source,fe,Ae,Ve,J,M,B),ne>1&&console.timeEnd("drilling down"),this.tiles[ce]?ei(this.tiles[ce],Q):null):null};class Yo extends me{constructor(M,B,H,Q){super(M,B,H,wt),Q&&(this.loadGeoJSON=Q)}loadData(M,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=B,this._pendingLoadDataParams=M,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const M=this._pendingCallback,B=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const H=!!(B&&B.request&&B.request.collectResourceTiming)&&new u.RequestPerformance(B.request);this.loadGeoJSON(B,(Q,ne)=>{if(Q||!ne)return M(Q);if(typeof ne!="object")return M(new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`));{ie(ne,!0);try{if(B.filter){const ce=u.createExpression(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ce.result==="error")throw new Error(ce.value.map(fe=>`${fe.key}: ${fe.message}`).join(", "));const he=ne.features.filter(fe=>ce.value.evaluate({zoom:0},fe));ne={type:"FeatureCollection",features:he}}this._geoJSONIndex=B.cluster?new ao(function({superclusterOptions:ce,clusterProperties:he}){if(!he||!ce)return ce;const fe={},Ae={},Ve={accumulated:null,zoom:0},ke={properties:null},dt=Object.keys(he);for(const it of dt){const[mt,Et]=he[it],sn=u.createExpression(Et),Gt=u.createExpression(typeof mt=="string"?[mt,["accumulated"],["get",it]]:mt);fe[it]=sn.value,Ae[it]=Gt.value}return ce.map=it=>{ke.properties=it;const mt={};for(const Et of dt)mt[Et]=fe[Et].evaluate(Ve,ke);return mt},ce.reduce=(it,mt)=>{ke.properties=mt;for(const Et of dt)Ve.accumulated=it[Et],it[Et]=Ae[Et].evaluate(Ve,ke)},ce}(B)).load(ne.features):function(ce,he){return new Cr(ce,he)}(ne,B.geojsonVtOptions)}catch(ce){return M(ce)}this.loaded={};const pe={};if(H){const ce=H.finish();ce&&(pe.resourceTiming={},pe.resourceTiming[B.source]=JSON.parse(JSON.stringify(ce)))}M(null,pe)}})}coalesce(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())}reloadTile(M,B){const H=this.loaded;return H&&H[M.uid]?super.reloadTile(M,B):this.loadTile(M,B)}loadGeoJSON(M,B){if(M.request)u.getJSON(M.request,B);else{if(typeof M.data!="string")return B(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));try{return B(null,JSON.parse(M.data))}catch{return B(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`))}}}removeSource(M,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()}getClusterExpansionZoom(M,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(M.clusterId))}catch(H){B(H)}}getClusterChildren(M,B){try{B(null,this._geoJSONIndex.getChildren(M.clusterId))}catch(H){B(H)}}getClusterLeaves(M,B){try{B(null,this._geoJSONIndex.getLeaves(M.clusterId,M.limit,M.offset))}catch(H){B(H)}}}class Jo{constructor(M){this.self=M,this.actor=new u.Actor(M,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:me,geojson:Yo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,H)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=H},this.self.registerRTLTextPlugin=B=>{if(u.plugin.isParsed())throw new Error("RTL text plugin already registered.");u.plugin.applyArabicShaping=B.applyArabicShaping,u.plugin.processBidirectionalText=B.processBidirectionalText,u.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}}setReferrer(M,B){this.referrer=B}setImages(M,B,H){this.availableImages[M]=B;for(const Q in this.workerSources[M]){const ne=this.workerSources[M][Q];for(const pe in ne)ne[pe].availableImages=B}H()}setLayers(M,B,H){this.getLayerIndex(M).replace(B),H()}updateLayers(M,B,H){this.getLayerIndex(M).update(B.layers,B.removedIds),H()}loadTile(M,B,H){this.getWorkerSource(M,B.type,B.source).loadTile(B,H)}loadDEMTile(M,B,H){this.getDEMWorkerSource(M,B.source).loadTile(B,H)}reloadTile(M,B,H){this.getWorkerSource(M,B.type,B.source).reloadTile(B,H)}abortTile(M,B,H){this.getWorkerSource(M,B.type,B.source).abortTile(B,H)}removeTile(M,B,H){this.getWorkerSource(M,B.type,B.source).removeTile(B,H)}removeDEMTile(M,B){this.getDEMWorkerSource(M,B.source).removeTile(B)}removeSource(M,B,H){if(!this.workerSources[M]||!this.workerSources[M][B.type]||!this.workerSources[M][B.type][B.source])return;const Q=this.workerSources[M][B.type][B.source];delete this.workerSources[M][B.type][B.source],Q.removeSource!==void 0?Q.removeSource(B,H):H()}loadWorkerSource(M,B,H){try{this.self.importScripts(B.url),H()}catch(Q){H(Q.toString())}}syncRTLPluginState(M,B,H){try{u.plugin.setState(B);const Q=u.plugin.getPluginURL();if(u.plugin.isLoaded()&&!u.plugin.isParsed()&&Q!=null){this.self.importScripts(Q);const ne=u.plugin.isParsed();H(ne?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Q}`),ne)}}catch(Q){H(Q.toString())}}getAvailableImages(M){let B=this.availableImages[M];return B||(B=[]),B}getLayerIndex(M){let B=this.layerIndexes[M];return B||(B=this.layerIndexes[M]=new W),B}getWorkerSource(M,B,H){if(this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][B]||(this.workerSources[M][B]={}),!this.workerSources[M][B][H]){const Q={send:(ne,pe,ce)=>{this.actor.send(ne,pe,ce,M)}};this.workerSources[M][B][H]=new this.workerSourceTypes[B](Q,this.getLayerIndex(M),this.getAvailableImages(M))}return this.workerSources[M][B][H]}getDEMWorkerSource(M,B){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][B]||(this.demWorkerSources[M][B]=new ze),this.demWorkerSources[M][B]}enforceCacheSizeLimit(M,B){u.enforceCacheSizeLimit(B)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Jo(self)),Jo}),v(["./shared"],function(u){var A=V;function V(f){return!function(i){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,_,b=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(b);try{_=new Worker(T),p=!0}catch{p=!1}return _&&_.terminate(),URL.revokeObjectURL(T),p}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var p=document.createElement("canvas");p.width=p.height=1;var _=p.getContext("2d");if(!_)return!1;var b=_.getImageData(0,0,1,1);return b&&b.width===p.width}()?(W[l=i&&i.failIfMajorPerformanceCaveat]===void 0&&(W[l]=function(p){var _,b=function(T){var C=document.createElement("canvas"),I=Object.create(V.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=T,C.getContext("webgl",I)||C.getContext("experimental-webgl",I)}(p);if(!b)return!1;try{_=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!_||b.isContextLost())&&(b.shaderSource(_,"void main() {}"),b.compileShader(_),b.getShaderParameter(_,b.COMPILE_STATUS)===!0)}(l)),W[l]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var l}(f)}var W={};function Y(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let l=0;l<f.length;l++)if(!Y(f[l],i[l]))return!1;return!0}if(typeof f=="object"&&f!==null&&i!==null){if(typeof i!="object"||Object.keys(f).length!==Object.keys(i).length)return!1;for(const l in f)if(!Y(f[l],i[l]))return!1;return!0}return f===i}V.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class U{static testProp(i){if(!U.docStyle)return i[0];for(let l=0;l<i.length;l++)if(i[l]in U.docStyle)return i[l];return i[0]}static create(i,l,p){const _=window.document.createElement(i);return l!==void 0&&(_.className=l),p&&p.appendChild(_),_}static createNS(i,l){return window.document.createElementNS(i,l)}static disableDrag(){U.docStyle&&U.selectProp&&(U.userSelect=U.docStyle[U.selectProp],U.docStyle[U.selectProp]="none")}static enableDrag(){U.docStyle&&U.selectProp&&(U.docStyle[U.selectProp]=U.userSelect)}static setTransform(i,l){i.style[U.transformProp]=l}static addEventListener(i,l,p,_={}){i.addEventListener(l,p,"passive"in _?_:_.capture)}static removeEventListener(i,l,p,_={}){i.removeEventListener(l,p,"passive"in _?_:_.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",U.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",U.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",U.suppressClickInternal,!0)},0)}static mousePos(i,l){const p=i.getBoundingClientRect();return new u.pointGeometry(l.clientX-p.left-i.clientLeft,l.clientY-p.top-i.clientTop)}static touchPos(i,l){const p=i.getBoundingClientRect(),_=[];for(let b=0;b<l.length;b++)_.push(new u.pointGeometry(l[b].clientX-p.left-i.clientLeft,l[b].clientY-p.top-i.clientTop));return _}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}U.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,U.selectProp=U.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),U.transformProp=U.testProp(["transform","WebkitTransform"]);class de{constructor(i){this._transformRequestFn=i}transformRequest(i,l){return this._transformRequestFn&&this._transformRequestFn(i,l)||{url:i}}normalizeSpriteURL(i,l,p){const _=function(b){const T=b.match(ye);if(!T)throw new Error(`Unable to parse URL "${b}"`);return{protocol:T[1],authority:T[2],path:T[3]||"/",params:T[4]?T[4].split("&"):[]}}(i);return _.path+=`${l}${p}`,function(b){const T=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${T}`}(_)}setTransformRequest(i){this._transformRequestFn=i}}const ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function me(f){var i=new u.ARRAY_TYPE(3);return i[0]=f[0],i[1]=f[1],i[2]=f[2],i}var ze,ie=function(f,i,l){return f[0]=i[0]-l[0],f[1]=i[1]-l[1],f[2]=i[2]-l[2],f};ze=new u.ARRAY_TYPE(3),u.ARRAY_TYPE!=Float32Array&&(ze[0]=0,ze[1]=0,ze[2]=0);var ee=function(f){var i=f[0],l=f[1];return i*i+l*l};(function(){var f=new u.ARRAY_TYPE(2);u.ARRAY_TYPE!=Float32Array&&(f[0]=0,f[1]=0)})();class te{constructor(i,l,p,_){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(l,_)}update(i,l,p){const{width:_,height:b}=i,T=!(this.size&&this.size[0]===_&&this.size[1]===b||p),{context:C}=this,{gl:I}=C;if(this.useMipmap=Boolean(l&&l.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!l||l.premultiply!==!1)),T)this.size=[_,b],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,i):I.texImage2D(I.TEXTURE_2D,0,this.format,_,b,0,this.format,I.UNSIGNED_BYTE,i.data);else{const{x:R,y:N}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||u.isImageBitmap(i)?I.texSubImage2D(I.TEXTURE_2D,0,R,N,I.RGBA,I.UNSIGNED_BYTE,i):I.texSubImage2D(I.TEXTURE_2D,0,R,N,_,b,I.RGBA,I.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(i,l,p){const{context:_}=this,{gl:b}=_;b.bindTexture(b.TEXTURE_2D,this.texture),p!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=b.LINEAR),i!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,i),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p||i),this.filter=i),l!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,l),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Ee(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class De extends u.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:l,callback:p}of this.requestors)this._notify(l,p);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,l){this._validate(i,l)&&(this.images[i]=l)}_validate(i,l){let p=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(l.content,l)||(this.fire(new u.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,l){if(!i)return!0;let p=0;for(const _ of i){if(_[0]<p||_[1]<_[0]||l<_[1])return!1;p=_[1]}return!0}_validateContent(i,l){return!(i&&(i.length!==4||i[0]<0||l.data.width<i[0]||i[1]<0||l.data.height<i[1]||i[2]<0||l.data.width<i[2]||i[3]<0||l.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,l){l.version=this.images[i].version+1,this.images[i]=l,this.updatedImages[i]=!0}removeImage(i){const l=this.images[i];delete this.images[i],delete this.patterns[i],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,l){let p=!0;if(!this.isLoaded())for(const _ of i)this.images[_]||(p=!1);this.isLoaded()||p?this._notify(i,l):this.requestors.push({ids:i,callback:l})}_notify(i,l){const p={};for(const _ of i){this.images[_]||this.fire(new u.Event("styleimagemissing",{id:_}));const b=this.images[_];b?p[_]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:Boolean(b.userImage&&b.userImage.render)}:u.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,p)}getPixelSize(){const{width:i,height:l}=this.atlasImage;return{width:i,height:l}}getPattern(i){const l=this.patterns[i],p=this.getImage(i);if(!p)return null;if(l&&l.position.version===p.version)return l.position;if(l)l.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new u.ImagePosition(_,p);this.patterns[i]={bin:_,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const l=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new te(i,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:l,h:p}=u.potpack(i),_=this.atlasImage;_.resize({width:l||1,height:p||1});for(const b in this.patterns){const{bin:T}=this.patterns[b],C=T.x+1,I=T.y+1,R=this.images[b].data,N=R.width,Z=R.height;u.RGBAImage.copy(R,_,{x:0,y:0},{x:C,y:I},{width:N,height:Z}),u.RGBAImage.copy(R,_,{x:0,y:Z-1},{x:C,y:I-1},{width:N,height:1}),u.RGBAImage.copy(R,_,{x:0,y:0},{x:C,y:I+Z},{width:N,height:1}),u.RGBAImage.copy(R,_,{x:N-1,y:0},{x:C-1,y:I},{width:1,height:Z}),u.RGBAImage.copy(R,_,{x:0,y:0},{x:C+N,y:I},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const l of i){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const p=this.images[l];Ee(p)&&this.updateImage(l,p)}}}const je=1e20;function Ue(f,i,l,p,_,b,T,C,I){for(let R=i;R<i+p;R++)We(f,l*b+R,b,_,T,C,I);for(let R=l;R<l+_;R++)We(f,R*b+i,1,p,T,C,I)}function We(f,i,l,p,_,b,T){b[0]=0,T[0]=-je,T[1]=je,_[0]=f[i];for(let C=1,I=0,R=0;C<p;C++){_[C]=f[i+C*l];const N=C*C;do{const Z=b[I];R=(_[C]-_[Z]+N-Z*Z)/(C-Z)/2}while(R<=T[I]&&--I>-1);I++,b[I]=C,T[I]=R,T[I+1]=je}for(let C=0,I=0;C<p;C++){for(;T[I+1]<C;)I++;const R=b[I],N=C-R;f[i+C*l]=_[R]+N*N}}class ht{constructor(i,l){this.requestManager=i,this.localIdeographFontFamily=l,this.entries={}}setURL(i){this.url=i}getGlyphs(i,l){const p=[];for(const _ in i)for(const b of i[_])p.push({stack:_,id:b});u.asyncAll(p,({stack:_,id:b},T)=>{let C=this.entries[_];C||(C=this.entries[_]={glyphs:{},requests:{},ranges:{}});let I=C.glyphs[b];if(I!==void 0)return void T(null,{stack:_,id:b,glyph:I});if(I=this._tinySDF(C,_,b),I)return C.glyphs[b]=I,void T(null,{stack:_,id:b,glyph:I});const R=Math.floor(b/256);if(256*R>65535)return void T(new Error("glyphs > 65535 not supported"));if(C.ranges[R])return void T(null,{stack:_,id:b,glyph:I});let N=C.requests[R];N||(N=C.requests[R]=[],ht.loadGlyphRange(_,R,this.url,this.requestManager,(Z,X)=>{if(X){for(const se in X)this._doesCharSupportLocalGlyph(+se)||(C.glyphs[+se]=X[+se]);C.ranges[R]=!0}for(const se of N)se(Z,X);delete C.requests[R]})),N.push((Z,X)=>{Z?T(Z):X&&T(null,{stack:_,id:b,glyph:X[b]||null})})},(_,b)=>{if(_)l(_);else if(b){const T={};for(const{stack:C,id:I,glyph:R}of b)(T[C]||(T[C]={}))[I]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};l(null,T)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(u.unicodeBlockLookup["CJK Unified Ideographs"](i)||u.unicodeBlockLookup["Hangul Syllables"](i)||u.unicodeBlockLookup.Hiragana(i)||u.unicodeBlockLookup.Katakana(i))}_tinySDF(i,l,p){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let b=i.tinySDF;if(!b){let C="400";/bold/i.test(l)?C="900":/medium/i.test(l)?C="500":/light/i.test(l)&&(C="200"),b=i.tinySDF=new ht.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:_,fontWeight:C})}const T=b.draw(String.fromCharCode(p));return{id:p,bitmap:new u.AlphaImage({width:T.width||30,height:T.height||30},T.data),metrics:{width:T.glyphWidth||24,height:T.glyphHeight||24,left:T.glyphLeft||0,top:T.glyphTop-27||-8,advance:T.glyphAdvance||24}}}}ht.loadGlyphRange=function(f,i,l,p,_){const b=256*i,T=b+255,C=p.transformRequest(l.replace("{fontstack}",f).replace("{range}",`${b}-${T}`),u.ResourceType.Glyphs);u.getArrayBuffer(C,(I,R)=>{if(I)_(I);else if(R){const N={};for(const Z of u.parseGlyphPBF(R))N[Z.id]=Z;_(null,N)}})},ht.TinySDF=class{constructor({fontSize:f=24,buffer:i=3,radius:l=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:b="normal",fontStyle:T="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=l;const C=this.size=f+4*i,I=this._createCanvas(C),R=this.ctx=I.getContext("2d",{willReadFrequently:!0});R.font=`${T} ${b} ${f}px ${_}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(f){const i=document.createElement("canvas");return i.width=i.height=f,i}draw(f){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:b}=this.ctx.measureText(f),T=Math.ceil(l),C=Math.min(this.size-this.buffer,Math.ceil(b-_)),I=Math.min(this.size-this.buffer,T+Math.ceil(p)),R=C+2*this.buffer,N=I+2*this.buffer,Z=Math.max(R*N,0),X=new Uint8ClampedArray(Z),se={data:X,width:R,height:N,glyphWidth:C,glyphHeight:I,glyphTop:T,glyphLeft:0,glyphAdvance:i};if(C===0||I===0)return se;const{ctx:K,buffer:oe,gridInner:ge,gridOuter:_e}=this;K.clearRect(oe,oe,C,I),K.fillText(f,oe,oe+T);const we=K.getImageData(oe,oe,C,I);_e.fill(je,0,Z),ge.fill(0,0,Z);for(let ve=0;ve<I;ve++)for(let Fe=0;Fe<C;Fe++){const Ie=we.data[4*(ve*C+Fe)+3]/255;if(Ie===0)continue;const Le=(ve+oe)*R+Fe+oe;if(Ie===1)_e[Le]=0,ge[Le]=je;else{const Ge=.5-Ie;_e[Le]=Ge>0?Ge*Ge:0,ge[Le]=Ge<0?Ge*Ge:0}}Ue(_e,0,0,R,N,R,this.f,this.v,this.z),Ue(ge,oe,oe,C,I,R,this.f,this.v,this.z);for(let ve=0;ve<Z;ve++){const Fe=Math.sqrt(_e[ve])-Math.sqrt(ge[ve]);X[ve]=Math.round(255-255*(Fe/this.radius+this.cutoff))}return se}};const ft=new u.Properties({anchor:new u.DataConstantProperty(u.spec.light.anchor),position:new class{constructor(){this.specification=u.spec.light.position}possiblyEvaluate(f,i){return u.sphericalToCartesian(f.expression.evaluate(i))}interpolate(f,i,l){return{x:u.number(f.x,i.x,l),y:u.number(f.y,i.y,l),z:u.number(f.z,i.z,l)}}},color:new u.DataConstantProperty(u.spec.light.color),intensity:new u.DataConstantProperty(u.spec.light.intensity)}),Ct="-transition";class Ut extends u.Evented{constructor(i){super(),this._transitionable=new u.Transitionable(ft),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,l={}){if(!this._validate(u.validateLight,i,l))for(const p in i){const _=i[p];p.endsWith(Ct)?this._transitionable.setTransition(p.slice(0,-Ct.length),_):this._transitionable.setValue(p,_)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,p){return(!p||p.validate!==!1)&&u.emitValidationErrors(this,i.call(u.validateStyle,u.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:u.spec})))}}class jn{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,l){const p=i.join(",")+String(l);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,l)),this.dashEntry[p]}getDashRanges(i,l,p){const _=[];let b=i.length%2==1?-i[i.length-1]*p:0,T=i[0]*p,C=!0;_.push({left:b,right:T,isDash:C,zeroLength:i[0]===0});let I=i[0];for(let R=1;R<i.length;R++){C=!C;const N=i[R];b=I*p,I+=N,T=I*p,_.push({left:b,right:T,isDash:C,zeroLength:N===0})}return _}addRoundDash(i,l,p){const _=l/2;for(let b=-p;b<=p;b++){const T=this.width*(this.nextRow+p+b);let C=0,I=i[C];for(let R=0;R<this.width;R++){R/I.right>1&&(I=i[++C]);const N=Math.abs(R-I.left),Z=Math.abs(R-I.right),X=Math.min(N,Z);let se;const K=b/p*(_+1);if(I.isDash){const oe=_-Math.abs(K);se=Math.sqrt(X*X+oe*oe)}else se=_-Math.sqrt(X*X+K*K);this.data[T+R]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(i){for(let C=i.length-1;C>=0;--C){const I=i[C],R=i[C+1];I.zeroLength?i.splice(C,1):R&&R.isDash===I.isDash&&(R.left=I.left,i.splice(C,1))}const l=i[0],p=i[i.length-1];l.isDash===p.isDash&&(l.left=p.left-this.width,p.right=l.right+this.width);const _=this.width*this.nextRow;let b=0,T=i[b];for(let C=0;C<this.width;C++){C/T.right>1&&(T=i[++b]);const I=Math.abs(C-T.left),R=Math.abs(C-T.right),N=Math.min(I,R);this.data[_+C]=Math.max(0,Math.min(255,(T.isDash?N:-N)+128))}}addDash(i,l){const p=l?7:0,_=2*p+1;if(this.nextRow+_>this.height)return u.warnOnce("LineAtlas out of space"),null;let b=0;for(let C=0;C<i.length;C++)b+=i[C];if(b!==0){const C=this.width/b,I=this.getDashRanges(i,this.width,C);l?this.addRoundDash(I,C,p):this.addRegularDash(I)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:b};return this.nextRow+=_,this.dirty=!0,T}bind(i){const l=i.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}class Zt{constructor(i,l){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=u.uniqueId();const p=this.workerPool.acquire(this.id);for(let _=0;_<p.length;_++){const b=new Zt.Actor(p[_],l,this.id);b.name=`Worker ${_}`,this.actors.push(b)}}broadcast(i,l,p){u.asyncAll(this.actors,(_,b)=>{_.send(i,l,b)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Sn(f,i,l){const p=function(_,b){if(_)return l(_);if(b){const T=u.pick(u.extend(b,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(T.vectorLayers=b.vector_layers,T.vectorLayerIds=T.vectorLayers.map(C=>C.id)),l(null,T)}};return f.url?u.getJSON(i.transformRequest(f.url,u.ResourceType.Source),p):u.exported.frame(()=>p(null,f))}Zt.Actor=u.Actor;class ut{constructor(i,l,p){this.bounds=u.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=l||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const l=Math.pow(2,i.z),p=Math.floor(u.mercatorXfromLng(this.bounds.getWest())*l),_=Math.floor(u.mercatorYfromLat(this.bounds.getNorth())*l),b=Math.ceil(u.mercatorXfromLng(this.bounds.getEast())*l),T=Math.ceil(u.mercatorYfromLat(this.bounds.getSouth())*l);return i.x>=p&&i.x<b&&i.y>=_&&i.y<T}}class Dn extends u.Evented{constructor(i,l,p,_){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.extend(this,u.pick(l,["url","scheme","tileSize","promoteId"])),this._options=u.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Sn(this._options,this.map._requestManager,(i,l)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new u.ErrorEvent(i)):l&&(u.extend(this,l),l.bounds&&(this.tileBounds=new ut(l.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}loadTile(i,l){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),_={request:this.map._requestManager.transformRequest(p,u.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(T,C){return delete i.request,i.aborted?l(null):T&&T.status!==404?l(T):(C&&C.resourceTiming&&(i.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&i.setExpiryData(C),i.loadVectorData(C,this.map.painter),u.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}_.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=l:i.request=i.actor.send("reloadTile",_,b.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",_,b.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Oe extends u.Evented{constructor(i,l,p,_){super(),this.id=i,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.extend({type:"raster"},l),u.extend(this,u.pick(l,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Sn(this._options,this.map._requestManager,(i,l)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new u.ErrorEvent(i)):l&&(u.extend(this,l),l.bounds&&(this.tileBounds=new ut(l.bounds,this.minzoom,this.maxzoom)),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return u.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,l){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=u.getImage(this.map._requestManager.transformRequest(p,u.ResourceType.Tile),(_,b,T)=>{if(delete i.request,i.aborted)i.state="unloaded",l(null);else if(_)i.state="errored",l(_);else if(b){this.map._refreshExpiredTiles&&i.setExpiryData(T);const C=this.map.painter.context,I=C.gl;i.texture=this.map.painter.getTileTexture(b.width),i.texture?i.texture.update(b,{useMipmap:!0}):(i.texture=new te(C,b,I.RGBA,{useMipmap:!0}),i.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&I.texParameterf(I.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),i.state="loaded",u.cacheEntryPossiblyAdded(this.dispatcher),l(null)}})}abortTile(i,l){i.request&&(i.request.cancel(),delete i.request),l()}unloadTile(i,l){i.texture&&this.map.painter.saveTileTexture(i.texture),l()}hasTransition(){return!1}}let gt;class Ye extends Oe{constructor(i,l,p,_){super(i,l,p,_),this.type="raster-dem",this.maxzoom=22,this._options=u.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,l){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function _(b,T){b&&(i.state="errored",l(b)),T&&(i.dem=T,i.needsHillshadePrepare=!0,i.state="loaded",l(null))}i.request=u.getImage(this.map._requestManager.transformRequest(p,u.ResourceType.Tile),function(b,T){if(delete i.request,i.aborted)i.state="unloaded",l(null);else if(b)i.state="errored",l(b);else if(T){this.map._refreshExpiredTiles&&i.setExpiryData(T),delete T.cacheControl,delete T.expires;const C=u.isImageBitmap(T)&&(gt==null&&(gt=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),gt)?T:u.exported.getImageData(T,1),I={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:C,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",I,_.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const l=i.canonical,p=Math.pow(2,l.z),_=(l.x-1+p)%p,b=l.x===0?i.wrap-1:i.wrap,T=(l.x+1+p)%p,C=l.x+1===p?i.wrap+1:i.wrap,I={};return I[new u.OverscaledTileID(i.overscaledZ,b,l.z,_,l.y).key]={backfilled:!1},I[new u.OverscaledTileID(i.overscaledZ,C,l.z,T,l.y).key]={backfilled:!1},l.y>0&&(I[new u.OverscaledTileID(i.overscaledZ,b,l.z,_,l.y-1).key]={backfilled:!1},I[new u.OverscaledTileID(i.overscaledZ,i.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},I[new u.OverscaledTileID(i.overscaledZ,C,l.z,T,l.y-1).key]={backfilled:!1}),l.y+1<p&&(I[new u.OverscaledTileID(i.overscaledZ,b,l.z,_,l.y+1).key]={backfilled:!1},I[new u.OverscaledTileID(i.overscaledZ,i.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},I[new u.OverscaledTileID(i.overscaledZ,C,l.z,T,l.y+1).key]={backfilled:!1}),I}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Pt extends u.Evented{constructor(i,l,p,_){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(_),this._data=l.data,this._options=u.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const b=u.EXTENT/this.tileSize;this.workerOptions=u.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*b,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*b,extent:u.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:u.EXTENT,radius:(l.clusterRadius||50)*b,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},l),this}getClusterChildren(i,l){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},l),this}getClusterLeaves(i,l,p,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:l,offset:p},_),this}_updateWorkerData(i){const l=u.extend({},this.workerOptions),p=this._data;typeof p=="string"?(l.request=this.map._requestManager.transformRequest(u.exported.resolveURL(p),u.ResourceType.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(p),this._pendingLoads++,this.fire(new u.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,l,(_,b)=>{if(this._pendingLoads--,this._removed||b&&b.abandoned)return;let T=null;if(b&&b.resourceTiming&&b.resourceTiming[this.id]&&(T=b.resourceTiming[this.id].slice(0)),this.actor.send(`${this.type}.coalesce`,{source:l.source},null),_)return void this.fire(new u.ErrorEvent(_));const C={dataType:"source",sourceDataType:i};this._collectResourceTiming&&T&&T.length>0&&u.extend(C,{resourceTiming:T}),this.fire(new u.Event("data",C))})}loaded(){return this._pendingLoads===0}loadTile(i,l){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const _={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,_,(b,T)=>(delete i.request,i.unloadVectorData(),i.aborted?l(null):b?l(b):(i.loadVectorData(T,this.map.painter,p==="reloadTile"),l(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return u.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var jt=u.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class fn extends u.Evented{constructor(i,l,p,_){super(),this.id=i,this.dispatcher=p,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=l}load(i,l){this._loaded=!1,this.fire(new u.Event("dataloading",{dataType:"source"})),this.url=this.options.url,u.getImage(this.map._requestManager.transformRequest(this.url,u.ResourceType.Image),(p,_)=>{this._loaded=!0,p?this.fire(new u.ErrorEvent(p)):_&&(this.image=_,i&&(this.coordinates=i),l&&l(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const l=i.map(u.MercatorCoordinate.fromLngLat);this.tileID=function(_){let b=1/0,T=1/0,C=-1/0,I=-1/0;for(const X of _)b=Math.min(b,X.x),T=Math.min(T,X.y),C=Math.max(C,X.x),I=Math.max(I,X.y);const R=Math.max(C-b,I-T),N=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),Z=Math.pow(2,N);return new u.CanonicalTileID(N,Math.floor((b+C)/2*Z),Math.floor((T+I)/2*Z))}(l),this.minzoom=this.maxzoom=this.tileID.z;const p=l.map(_=>this.tileID.getTilePoint(_)._round());return this._boundsArray=new u.RasterBoundsArray,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,u.EXTENT,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,u.EXTENT),this._boundsArray.emplaceBack(p[2].x,p[2].y,u.EXTENT,u.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,l=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new te(i,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}loadTile(i,l){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},l(null)):(i.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Wt extends fn{constructor(i,l,p,_){super(i,l,p,_),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const l of i.urls)this.urls.push(this.map._requestManager.transformRequest(l,u.ResourceType.Source).url);u.getVideo(this.urls,(l,p)=>{this._loaded=!0,l?this.fire(new u.ErrorEvent(l)):p&&(this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const l=this.video.seekable;i<l.start(0)||i>l.end(0)?this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,l=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new te(i,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class qt extends fn{constructor(i,l,p,_){super(i,l,p,_),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(T=>typeof T!="number"))||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.ErrorEvent(new u.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,p=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,jt.members)),this.boundsSegments||(this.boundsSegments=u.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new te(l,this.canvas,p.RGBA,{premultiply:!0});for(const _ in this.tiles){const b=this.tiles[_];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const At={vector:Dn,raster:Oe,"raster-dem":Ye,geojson:Pt,video:Wt,image:fn,canvas:qt};function zn(f,i){const l=u.create();return u.translate(l,l,[1,1,0]),u.scale(l,l,[.5*f.width,.5*f.height,1]),u.multiply(l,l,f.calculatePosMatrix(i.toUnwrapped()))}function si(f,i,l,p,_,b){const T=function(Z,X,se){if(Z)for(const K of Z){const oe=X[K];if(oe&&oe.source===se&&oe.type==="fill-extrusion")return!0}else for(const K in X){const oe=X[K];if(oe.source===se&&oe.type==="fill-extrusion")return!0}return!1}(_&&_.layers,i,f.id),C=b.maxPitchScaleFactor(),I=f.tilesIn(p,C,T);I.sort(Gr);const R=[];for(const Z of I)R.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(i,l,f._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,_,b,C,zn(f.transform,Z.tileID))});const N=function(Z){const X={},se={};for(const K of Z){const oe=K.queryResults,ge=K.wrappedTileID,_e=se[ge]=se[ge]||{};for(const we in oe){const ve=oe[we],Fe=_e[we]=_e[we]||{},Ie=X[we]=X[we]||[];for(const Le of ve)Fe[Le.featureIndex]||(Fe[Le.featureIndex]=!0,Ie.push(Le))}}return X}(R);for(const Z in N)N[Z].forEach(X=>{const se=X.feature,K=f.getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=K});return N}function Gr(f,i){const l=f.tileID,p=i.tileID;return l.overscaledZ-p.overscaledZ||l.canonical.y-p.canonical.y||l.wrap-p.wrap||l.canonical.x-p.canonical.x}class Sr{constructor(i,l){this.tileID=i,this.uid=u.uniqueId(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const l=i+this.timeAdded;l<u.exported.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}loadVectorData(i,l,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(_,b){const T={};if(!b)return T;for(const C of _){const I=C.layerIds.map(R=>b.getLayer(R)).filter(Boolean);if(I.length!==0){C.layers=I,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(R=>I.filter(N=>N.id===R)[0]));for(const R of I)T[R.id]=C}}return T}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const b=this.buckets[_];if(b instanceof u.SymbolBucket){if(this.hasSymbolBuckets=!0,!p)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const b=this.buckets[_];if(b instanceof u.SymbolBucket&&b.hasRTLText){this.hasRTLText=!0,u.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const _ in this.buckets){const b=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(_).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new u.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new te(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new te(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,p,_,b,T,C,I,R,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:b,scale:T,tileSize:this.tileSize,pixelPosMatrix:N,transform:I,params:C,queryPadding:this.queryPadding*R},i,l,p):{}}querySourceFeatures(i,l){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),b=l?l.sourceLayer:"",T=_._geojsonTileLayer||_[b];if(!T)return;const C=u.createFilter(l&&l.filter),{z:I,x:R,y:N}=this.tileID.canonical,Z={z:I,x:R,y:N};for(let X=0;X<T.length;X++){const se=T.feature(X);if(C.needGeometry){const ge=u.toEvaluationFeature(se,!0);if(!C.filter(new u.EvaluationParameters(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!C.filter(new u.EvaluationParameters(this.tileID.overscaledZ),se))continue;const K=p.getId(se,b),oe=new u.GeoJSONFeature(se,I,R,N,K);oe.tile=Z,i.push(oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const p=u.parseCacheControl(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(l)if(this.expirationTime<l)_=!0;else{const b=this.expirationTime-l;b?this.expirationTime=p+Math.max(b,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!l.style.hasLayer(_))continue;const b=this.buckets[_],T=b.layers[0].sourceLayer||"_geojsonTileLayer",C=p[T],I=i[T];if(!C||!I||Object.keys(I).length===0)continue;b.update(I,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=l&&l.style&&l.style.getLayer(_);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<u.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=u.exported.now()+i}setDependencies(i,l){const p={};for(const _ of l)p[_]=!0;this.dependencies[i]=p}hasDependency(i,l){for(const p of i){const _=this.dependencies[p];if(_){for(const b of l)if(_[b])return!0}}return!1}}class ur{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,p){const _=i.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const b={value:l,timeout:void 0};if(p!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},p)),this.data[_].push(b),this.order.push(_),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const p=i.wrapped().key,_=l===void 0?0:this.data[p].indexOf(l),b=this.data[p][_];return this.data[p].splice(_,1),b.timeout&&clearTimeout(b.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(b.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const p in this.data)for(const _ of this.data[p])i(_.value)||l.push(_);for(const p of l)this.remove(p.value.tileID,p)}}class Ai{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,p){const _=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][_]=this.stateChanges[i][_]||{},u.extend(this.stateChanges[i][_],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==_&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][_]===null){this.deletedStates[i][_]={};for(const b in this.state[i][_])p[b]||(this.deletedStates[i][_][b]=null)}else for(const b in p)this.deletedStates[i]&&this.deletedStates[i][_]&&this.deletedStates[i][_][b]===null&&delete this.deletedStates[i][_][b]}removeFeatureState(i,l,p){if(this.deletedStates[i]===null)return;const _=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&l!==void 0)this.deletedStates[i][_]!==null&&(this.deletedStates[i][_]=this.deletedStates[i][_]||{},this.deletedStates[i][_][p]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][_])for(p in this.deletedStates[i][_]={},this.stateChanges[i][_])this.deletedStates[i][_][p]=null;else this.deletedStates[i][_]=null;else this.deletedStates[i]=null}getState(i,l){const p=String(l),_=u.extend({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][l];if(b===null)return{};for(const T in b)delete _[T]}return _}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const b={};for(const T in this.stateChanges[_])this.state[_][T]||(this.state[_][T]={}),u.extend(this.state[_][T],this.stateChanges[_][T]),b[T]=this.state[_][T];p[_]=b}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const b={};if(this.deletedStates[_]===null)for(const T in this.state[_])b[T]={},this.state[_][T]={};else for(const T in this.deletedStates[_]){if(this.deletedStates[_][T]===null)this.state[_][T]={};else for(const C of Object.keys(this.deletedStates[_][T]))delete this.state[_][T][C];b[T]=this.state[_][T]}p[_]=p[_]||{},u.extend(p[_],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const _ in i)i[_].setFeatureState(p,l)}}class Fn extends u.Evented{constructor(i,l,p){super(),this.id=i,this.dispatcher=p,this.on("data",_=>{_.dataType==="source"&&_.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&_.dataType==="source"&&_.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(_,b,T,C){const I=new At[b.type](_,b,T,C);if(I.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${I.id}`);return u.bindAll(["load","abort","unload","serialize","prepare"],I),I}(i,l,p,this),this._tiles={},this._cache=new ur(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ai}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new u.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const p=this._tiles[l];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Er).map(i=>i.key)}getRenderableIds(i){const l=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&l.push(this._tiles[p]);return i?l.sort((p,_)=>{const b=p.tileID,T=_.tileID,C=new u.pointGeometry(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),I=new u.pointGeometry(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-T.overscaledZ||I.y-C.y||I.x-C.x}).map(p=>p.tileID.key):l.map(p=>p.tileID).sort(Er).map(p=>p.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,l){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=l),this._loadTile(p,this._tileLoaded.bind(this,p,i,l)))}_tileLoaded(i,l,p,_){if(_)return i.state="errored",void(_.status!==404?this._source.fire(new u.ErrorEvent(_,{tile:i})):this.update(this.transform));i.timeAdded=u.exported.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new u.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const l=this.getRenderableIds();for(let _=0;_<l.length;_++){const b=l[_];if(i.neighboringTiles&&i.neighboringTiles[b]){const T=this.getTileByID(b);p(i,T),p(T,i)}}function p(_,b){_.needsHillshadePrepare=!0;let T=b.tileID.canonical.x-_.tileID.canonical.x;const C=b.tileID.canonical.y-_.tileID.canonical.y,I=Math.pow(2,_.tileID.canonical.z),R=b.tileID.key;T===0&&C===0||Math.abs(C)>1||(Math.abs(T)>1&&(Math.abs(T+I)===1?T+=I:Math.abs(T-I)===1&&(T-=I)),b.dem&&_.dem&&(_.dem.backfillBorder(b.dem,T,C),_.neighboringTiles&&_.neighboringTiles[R]&&(_.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,p,_){for(const b in this._tiles){let T=this._tiles[b];if(_[b]||!T.hasData()||T.tileID.overscaledZ<=l||T.tileID.overscaledZ>p)continue;let C=T.tileID;for(;T&&T.tileID.overscaledZ>l+1;){const R=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[R.key],T&&T.hasData()&&(C=R)}let I=C;for(;I.overscaledZ>l;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){_[C.key]=C;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=l?p:null}for(let p=i.overscaledZ-1;p>=l;p--){const _=i.scaledTo(p),b=this._getLoadedTile(_);if(b)return b}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const l=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,_=Math.floor(l*p*5),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(b)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const p={};for(const _ in this._tiles){const b=this._tiles[_];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+l),p[b.tileID.key]=b}this._tiles=p;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}update(i){if(this.transform=i,!this._sourceLoaded||this._paused)return;let l;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?l=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(I=>new u.OverscaledTileID(I.canonical.z,I.wrap,I.canonical.z,I.canonical.x,I.canonical.y)):(l=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(l=l.filter(I=>this._source.hasTile(I)))):l=[];const p=i.coveringZoomLevel(this._source),_=Math.max(p-Fn.maxOverzooming,this._source.minzoom),b=Math.max(p+Fn.maxUnderzooming,this._source.minzoom),T=this._updateRetainedTiles(l,p);if(ao(this._source.type)){const I={},R={},N=Object.keys(T);for(const Z of N){const X=T[Z],se=this._tiles[Z];if(!se||se.fadeEndTime&&se.fadeEndTime<=u.exported.now())continue;const K=this.findLoadedParent(X,_);K&&(this._addTile(K.tileID),I[K.tileID.key]=K.tileID),R[Z]=X}this._retainLoadedChildren(R,p,b,T);for(const Z in I)T[Z]||(this._coveredTiles[Z]=!0,T[Z]=I[Z])}for(const I in T)this._tiles[I].clearFadeHold();const C=u.keysDifference(this._tiles,T);for(const I of C){const R=this._tiles[I];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(I)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,l){const p={},_={},b=Math.max(l-Fn.maxOverzooming,this._source.minzoom),T=Math.max(l+Fn.maxUnderzooming,this._source.minzoom),C={};for(const I of i){const R=this._addTile(I);p[I.key]=I,R.hasData()||l<this._source.maxzoom&&(C[I.key]=I)}this._retainLoadedChildren(C,l,T,p);for(const I of i){let R=this._tiles[I.key];if(R.hasData())continue;if(l+1>this._source.maxzoom){const Z=I.children(this._source.maxzoom)[0],X=this.getTile(Z);if(X&&X.hasData()){p[Z.key]=Z;continue}}else{const Z=I.children(this._source.maxzoom);if(p[Z[0].key]&&p[Z[1].key]&&p[Z[2].key]&&p[Z[3].key])continue}let N=R.wasRequested();for(let Z=I.overscaledZ-1;Z>=b;--Z){const X=I.scaledTo(Z);if(_[X.key]||(_[X.key]=!0,R=this.getTile(X),!R&&N&&(R=this._addTile(X)),R&&(p[X.key]=X,N=R.wasRequested(),R.hasData())))break}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let p,_=this._tiles[i].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){p=this._loadedParentTiles[_.key];break}l.push(_.key);const b=_.scaledTo(_.overscaledZ-1);if(p=this._getLoadedTile(b),p)break;_=b}for(const b of l)this._loadedParentTiles[b]=p}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const p=l;return l||(l=new Sr(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))),l.uses++,this._tiles[i.key]=l,p||this._source.fire(new u.Event("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=l.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,l,p){const _=[],b=this.transform;if(!b)return _;const T=p?b.getCameraQueryGeometry(i):i,C=i.map(K=>b.pointCoordinate(K)),I=T.map(K=>b.pointCoordinate(K)),R=this.getIds();let N=1/0,Z=1/0,X=-1/0,se=-1/0;for(const K of I)N=Math.min(N,K.x),Z=Math.min(Z,K.y),X=Math.max(X,K.x),se=Math.max(se,K.y);for(let K=0;K<R.length;K++){const oe=this._tiles[R[K]];if(oe.holdingForFade())continue;const ge=oe.tileID,_e=Math.pow(2,b.zoom-oe.tileID.overscaledZ),we=l*oe.queryPadding*u.EXTENT/oe.tileSize/_e,ve=[ge.getTilePoint(new u.MercatorCoordinate(N,Z)),ge.getTilePoint(new u.MercatorCoordinate(X,se))];if(ve[0].x-we<u.EXTENT&&ve[0].y-we<u.EXTENT&&ve[1].x+we>=0&&ve[1].y+we>=0){const Fe=C.map(Le=>ge.getTilePoint(Le)),Ie=I.map(Le=>ge.getTilePoint(Le));_.push({tile:oe,tileID:ge,queryGeometry:Fe,cameraQueryGeometry:Ie,scale:_e})}}return _}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of l)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(ao(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=u.exported.now())return!0}return!1}setFeatureState(i,l,p){this._state.updateState(i=i||"_geojsonTileLayer",l,p)}removeFeatureState(i,l,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,p)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,p){const _=this._tiles[i];_&&_.setDependencies(l,p)}reloadTilesForDependencies(i,l){for(const p in this._tiles)this._tiles[p].hasDependency(i,l)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,l))}}function Er(f,i){const l=Math.abs(2*f.wrap)-+(f.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return f.overscaledZ-i.overscaledZ||p-l||i.canonical.y-f.canonical.y||i.canonical.x-f.canonical.x}function ao(f){return f==="raster"||f==="image"||f==="video"}Fn.maxOverzooming=10,Fn.maxUnderzooming=3;const Tr="mapboxgl_preloaded_worker_pool";class ai{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<ai.workerCount;)this.workers.push(new Worker(Zs.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Tr]}numActive(){return Object.keys(this.active).length}}const Pr=Math.floor(u.exported.hardwareConcurrency/2);let Ui;function Ti(){return Ui||(Ui=new ai),Ui}function Vi(f,i){const l={};for(const p in f)p!=="ref"&&(l[p]=f[p]);return u.refProperties.forEach(p=>{p in i&&(l[p]=i[p])}),l}function Po(f){f=f.slice();const i=Object.create(null);for(let l=0;l<f.length;l++)i[f[l].id]=f[l];for(let l=0;l<f.length;l++)"ref"in f[l]&&(f[l]=Vi(f[l],i[f[l].ref]));return f}ai.workerCount=Math.max(Math.min(Pr,6),1);const Ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function nt(f,i,l){l.push({command:Ht.addSource,args:[f,i[f]]})}function St(f,i,l){i.push({command:Ht.removeSource,args:[f]}),l[f]=!0}function mn(f,i,l,p){St(f,l,p),nt(f,i,l)}function Rn(f,i,l){let p;for(p in f[l])if(Object.prototype.hasOwnProperty.call(f[l],p)&&p!=="data"&&!Y(f[l][p],i[l][p]))return!1;for(p in i[l])if(Object.prototype.hasOwnProperty.call(i[l],p)&&p!=="data"&&!Y(f[l][p],i[l][p]))return!1;return!0}function Pe(f,i,l,p,_,b){let T;for(T in i=i||{},f=f||{})Object.prototype.hasOwnProperty.call(f,T)&&(Y(f[T],i[T])||l.push({command:b,args:[p,T,i[T],_]}));for(T in i)Object.prototype.hasOwnProperty.call(i,T)&&!Object.prototype.hasOwnProperty.call(f,T)&&(Y(f[T],i[T])||l.push({command:b,args:[p,T,i[T],_]}))}function Je(f){return f.id}function Mi(f,i){return f[i.id]=i,f}class $i{constructor(i,l){this.reset(i,l)}reset(i,l){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=u.clamp(i,0,1);let l=1,p=this._distances[l];const _=i*this.paddedLength+this.padding;for(;p<_&&l<this._distances.length;)p=this._distances[++l];const b=l-1,T=this._distances[b],C=p-T,I=C>0?(_-T)/C:0;return this.points[b].mult(1-I).add(this.points[l].mult(I))}}function ln(f,i){let l=!0;return f==="always"||f!=="never"&&i!=="never"||(l=!1),l}class wi{constructor(i,l,p){const _=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(l/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)_.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=l,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,l,p,_,b){this._forEachCell(l,p,_,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(b)}insertCircle(i,l,p,_){this._forEachCell(l-_,p-_,l+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(l),this.circles.push(p),this.circles.push(_)}_insertBoxCell(i,l,p,_,b,T){this.boxCells[b].push(T)}_insertCircleCell(i,l,p,_,b,T){this.circleCells[b].push(T)}_query(i,l,p,_,b,T,C){if(p<0||i>this.width||_<0||l>this.height)return[];const I=[];if(i<=0&&l<=0&&this.width<=p&&this.height<=_){if(b)return[{key:null,x1:i,y1:l,x2:p,y2:_}];for(let R=0;R<this.boxKeys.length;R++)I.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const N=this.circles[3*R],Z=this.circles[3*R+1],X=this.circles[3*R+2];I.push({key:this.circleKeys[R],x1:N-X,y1:Z-X,x2:N+X,y2:Z+X})}}else this._forEachCell(i,l,p,_,this._queryCell,I,{hitTest:b,overlapMode:T,seenUids:{box:{},circle:{}}},C);return I}query(i,l,p,_){return this._query(i,l,p,_,!1,null)}hitTest(i,l,p,_,b,T){return this._query(i,l,p,_,!0,b,T).length>0}hitTestCircle(i,l,p,_,b){const T=i-p,C=i+p,I=l-p,R=l+p;if(C<0||T>this.width||R<0||I>this.height)return!1;const N=[];return this._forEachCell(T,I,C,R,this._queryCellCircle,N,{hitTest:!0,overlapMode:_,circle:{x:i,y:l,radius:p},seenUids:{box:{},circle:{}}},b),N.length>0}_queryCell(i,l,p,_,b,T,C,I){const{seenUids:R,hitTest:N,overlapMode:Z}=C,X=this.boxCells[b];if(X!==null){const K=this.bboxes;for(const oe of X)if(!R.box[oe]){R.box[oe]=!0;const ge=4*oe,_e=this.boxKeys[oe];if(i<=K[ge+2]&&l<=K[ge+3]&&p>=K[ge+0]&&_>=K[ge+1]&&(!I||I(_e))&&(!N||!ln(Z,_e.overlapMode))&&(T.push({key:_e,x1:K[ge],y1:K[ge+1],x2:K[ge+2],y2:K[ge+3]}),N))return!0}}const se=this.circleCells[b];if(se!==null){const K=this.circles;for(const oe of se)if(!R.circle[oe]){R.circle[oe]=!0;const ge=3*oe,_e=this.circleKeys[oe];if(this._circleAndRectCollide(K[ge],K[ge+1],K[ge+2],i,l,p,_)&&(!I||I(_e))&&(!N||!ln(Z,_e.overlapMode))){const we=K[ge],ve=K[ge+1],Fe=K[ge+2];if(T.push({key:_e,x1:we-Fe,y1:ve-Fe,x2:we+Fe,y2:ve+Fe}),N)return!0}}}return!1}_queryCellCircle(i,l,p,_,b,T,C,I){const{circle:R,seenUids:N,overlapMode:Z}=C,X=this.boxCells[b];if(X!==null){const K=this.bboxes;for(const oe of X)if(!N.box[oe]){N.box[oe]=!0;const ge=4*oe,_e=this.boxKeys[oe];if(this._circleAndRectCollide(R.x,R.y,R.radius,K[ge+0],K[ge+1],K[ge+2],K[ge+3])&&(!I||I(_e))&&!ln(Z,_e.overlapMode))return T.push(!0),!0}}const se=this.circleCells[b];if(se!==null){const K=this.circles;for(const oe of se)if(!N.circle[oe]){N.circle[oe]=!0;const ge=3*oe,_e=this.circleKeys[oe];if(this._circlesCollide(K[ge],K[ge+1],K[ge+2],R.x,R.y,R.radius)&&(!I||I(_e))&&!ln(Z,_e.overlapMode))return T.push(!0),!0}}}_forEachCell(i,l,p,_,b,T,C,I){const R=this._convertToXCellCoord(i),N=this._convertToYCellCoord(l),Z=this._convertToXCellCoord(p),X=this._convertToYCellCoord(_);for(let se=R;se<=Z;se++)for(let K=N;K<=X;K++)if(b.call(this,i,l,p,_,this.xCellCount*K+se,T,C,I))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,l,p,_,b,T){const C=_-i,I=b-l,R=p+T;return R*R>C*C+I*I}_circleAndRectCollide(i,l,p,_,b,T,C){const I=(T-_)/2,R=Math.abs(i-(_+I));if(R>I+p)return!1;const N=(C-b)/2,Z=Math.abs(l-(b+N));if(Z>N+p)return!1;if(R<=I||Z<=N)return!0;const X=R-I,se=Z-N;return X*X+se*se<=p*p}}function Gn(f,i,l,p,_){const b=u.create();return i?(u.scale(b,b,[1/_,1/_,1]),l||u.rotateZ(b,b,p.angle)):u.multiply(b,p.labelPlaneMatrix,f),b}function cr(f,i,l,p,_){if(i){const b=u.clone(f);return u.scale(b,b,[_,_,1]),l||u.rotateZ(b,b,-p.angle),b}return p.glCoordMatrix}function gn(f,i){const l=[f.x,f.y,0,1];wn(l,l,i);const p=l[3];return{point:new u.pointGeometry(l[0]/p,l[1]/p),signedDistanceFromCamera:p}}function He(f,i){return .5+f/i*.5}function Rt(f,i){const l=f[0]/f[3],p=f[1]/f[3];return l>=-i[0]&&l<=i[0]&&p>=-i[1]&&p<=i[1]}function Lt(f,i,l,p,_,b,T,C,I){const R=p?f.textSizeData:f.iconSizeData,N=u.evaluateSizeForZoom(R,l.transform.zoom),Z=[256/l.width*2+1,256/l.height*2+1],X=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;X.clear();const se=f.lineVertexArray,K=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,oe=l.transform.width/l.transform.height;let ge=!1;for(let _e=0;_e<K.length;_e++){const we=K.get(_e);if(we.hidden||we.writingMode===u.WritingMode.vertical&&!ge){ei(we.numGlyphs,X);continue}ge=!1;const ve=[we.anchorX,we.anchorY,0,1];if(u.transformMat4(ve,ve,i),!Rt(ve,Z)){ei(we.numGlyphs,X);continue}const Fe=He(l.transform.cameraToCenterDistance,ve[3]),Ie=u.evaluateSizeForFeature(R,N,we),Le=T?Ie/Fe:Ie*Fe,Ge=new u.pointGeometry(we.anchorX,we.anchorY),Ke=gn(Ge,_).point,Be={},pt=Bt(we,Le,!1,C,i,_,b,f.glyphOffsetArray,se,X,Ke,Ge,Be,oe,I);ge=pt.useVertical,(pt.notEnoughRoom||ge||pt.needsFlipping&&Bt(we,Le,!0,C,i,_,b,f.glyphOffsetArray,se,X,Ke,Ge,Be,oe,I).notEnoughRoom)&&ei(we.numGlyphs,X)}p?f.text.dynamicLayoutVertexBuffer.updateData(X):f.icon.dynamicLayoutVertexBuffer.updateData(X)}function Pi(f,i,l,p,_,b,T,C,I,R,N,Z){const X=C.glyphStartIndex+C.numGlyphs,se=C.lineStartIndex,K=C.lineStartIndex+C.lineLength,oe=i.getoffsetX(C.glyphStartIndex),ge=i.getoffsetX(X-1),_e=kr(f*oe,l,p,_,b,T,C.segment,se,K,I,R,N,Z);if(!_e)return null;const we=kr(f*ge,l,p,_,b,T,C.segment,se,K,I,R,N,Z);return we?{first:_e,last:we}:null}function hr(f,i,l,p){return f===u.WritingMode.horizontal&&Math.abs(l.y-i.y)>Math.abs(l.x-i.x)*p?{useVertical:!0}:(f===u.WritingMode.vertical?i.y<l.y:i.x>l.x)?{needsFlipping:!0}:null}function Bt(f,i,l,p,_,b,T,C,I,R,N,Z,X,se,K){const oe=i/24,ge=f.lineOffsetX*oe,_e=f.lineOffsetY*oe;let we;if(f.numGlyphs>1){const ve=f.glyphStartIndex+f.numGlyphs,Fe=f.lineStartIndex,Ie=f.lineStartIndex+f.lineLength,Le=Pi(oe,C,ge,_e,l,N,Z,f,I,b,X,K);if(!Le)return{notEnoughRoom:!0};const Ge=gn(Le.first.point,T).point,Ke=gn(Le.last.point,T).point;if(p&&!l){const Be=hr(f.writingMode,Ge,Ke,se);if(Be)return Be}we=[Le.first];for(let Be=f.glyphStartIndex+1;Be<ve-1;Be++)we.push(kr(oe*C.getoffsetX(Be),ge,_e,l,N,Z,f.segment,Fe,Ie,I,b,X,K));we.push(Le.last)}else{if(p&&!l){const Fe=gn(Z,_).point,Ie=f.lineStartIndex+f.segment+1,Le=new u.pointGeometry(I.getx(Ie),I.gety(Ie)),Ge=gn(Le,_),Ke=Ge.signedDistanceFromCamera>0?Ge.point:Ko(Z,Le,Fe,1,_),Be=hr(f.writingMode,Fe,Ke,se);if(Be)return Be}const ve=kr(oe*C.getoffsetX(f.glyphStartIndex),ge,_e,l,N,Z,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,I,b,X,K);if(!ve)return{notEnoughRoom:!0};we=[ve]}for(const ve of we)u.addDynamicAttributes(R,ve.point,ve.angle);return{}}function Ko(f,i,l,p,_){const b=gn(f.add(f.sub(i)._unit()),_).point,T=l.sub(b);return l.add(T._mult(p/T.mag()))}function kr(f,i,l,p,_,b,T,C,I,R,N,Z,X){const se=p?f-i:f+i;let K=se>0?1:-1,oe=0;p&&(K*=-1,oe=Math.PI),K<0&&(oe+=Math.PI);let ge=K>0?C+T:C+T+1,_e=_,we=_,ve=0,Fe=0;const Ie=Math.abs(se),Le=[];for(;ve+Fe<=Ie;){if(ge+=K,ge<C||ge>=I)return null;if(we=_e,Le.push(_e),_e=Z[ge],_e===void 0){const tt=new u.pointGeometry(R.getx(ge),R.gety(ge)),zt=gn(tt,N);if(zt.signedDistanceFromCamera>0)_e=Z[ge]=zt.point;else{const an=ge-K;_e=Ko(ve===0?b:new u.pointGeometry(R.getx(an),R.gety(an)),tt,we,Ie-ve+1,N)}}ve+=Fe,Fe=we.dist(_e)}const Ge=(Ie-ve)/Fe,Ke=_e.sub(we),Be=Ke.mult(Ge)._add(we);Be._add(Ke._unit()._perp()._mult(l*K));const pt=oe+Math.atan2(_e.y-we.y,_e.x-we.x);return Le.push(Be),{point:Be,angle:X?pt:0,path:Le}}const lo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ei(f,i){for(let l=0;l<f;l++){const p=i.length;i.resize(p+4),i.float32.set(lo,3*p)}}function wn(f,i,l){const p=i[0],_=i[1];return f[0]=l[0]*p+l[4]*_+l[12],f[1]=l[1]*p+l[5]*_+l[13],f[3]=l[3]*p+l[7]*_+l[15],f}const dr=100;class uo{constructor(i,l=new wi(i.width+200,i.height+200,25),p=new wi(i.width+200,i.height+200,25)){this.transform=i,this.grid=l,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+dr,this.screenBottomBoundary=i.height+dr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200}placeCollisionBox(i,l,p,_,b){const T=this.projectAndGetPerspectiveRatio(_,i.anchorPointX,i.anchorPointY),C=p*T.perspectiveRatio,I=i.x1*C+T.point.x,R=i.y1*C+T.point.y,N=i.x2*C+T.point.x,Z=i.y2*C+T.point.y;return!this.isInsideGrid(I,R,N,Z)||l!=="always"&&this.grid.hitTest(I,R,N,Z,l,b)?{box:[],offscreen:!1}:{box:[I,R,N,Z],offscreen:this.isOffscreen(I,R,N,Z)}}placeCollisionCircles(i,l,p,_,b,T,C,I,R,N,Z,X,se){const K=[],oe=new u.pointGeometry(l.anchorX,l.anchorY),ge=gn(oe,T),_e=He(this.transform.cameraToCenterDistance,ge.signedDistanceFromCamera),we=(N?b/_e:b*_e)/u.ONE_EM,ve=gn(oe,C).point,Fe=Pi(we,_,l.lineOffsetX*we,l.lineOffsetY*we,!1,ve,oe,l,p,C,{},!1);let Ie=!1,Le=!1,Ge=!0;if(Fe){const Ke=.5*X*_e+se,Be=new u.pointGeometry(-100,-100),pt=new u.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),tt=new $i,zt=Fe.first,an=Fe.last;let Jt=[];for(let Ot=zt.path.length-1;Ot>=1;Ot--)Jt.push(zt.path[Ot]);for(let Ot=1;Ot<an.path.length;Ot++)Jt.push(an.path[Ot]);const rn=2.5*Ke;if(I){const Ot=Jt.map(cn=>gn(cn,I));Jt=Ot.some(cn=>cn.signedDistanceFromCamera<=0)?[]:Ot.map(cn=>cn.point)}let Yn=[];if(Jt.length>0){const Ot=Jt[0].clone(),cn=Jt[0].clone();for(let En=1;En<Jt.length;En++)Ot.x=Math.min(Ot.x,Jt[En].x),Ot.y=Math.min(Ot.y,Jt[En].y),cn.x=Math.max(cn.x,Jt[En].x),cn.y=Math.max(cn.y,Jt[En].y);Yn=Ot.x>=Be.x&&cn.x<=pt.x&&Ot.y>=Be.y&&cn.y<=pt.y?[Jt]:cn.x<Be.x||Ot.x>pt.x||cn.y<Be.y||Ot.y>pt.y?[]:u.clipLine([Jt],Be.x,Be.y,pt.x,pt.y)}for(const Ot of Yn){tt.reset(Ot,.25*Ke);let cn=0;cn=tt.length<=.5*Ke?1:Math.ceil(tt.paddedLength/rn)+1;for(let En=0;En<cn;En++){const Ri=En/Math.max(cn-1,1),Lr=tt.lerp(Ri),Jr=Lr.x+dr,Qr=Lr.y+dr;K.push(Jr,Qr,Ke,0);const js=Jr-Ke,gr=Qr-Ke,Fo=Jr+Ke,ya=Qr+Ke;if(Ge=Ge&&this.isOffscreen(js,gr,Fo,ya),Le=Le||this.isInsideGrid(js,gr,Fo,ya),i!=="always"&&this.grid.hitTestCircle(Jr,Qr,Ke,i,Z)&&(Ie=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ie}}}}return{circles:!R&&Ie||!Le?[]:K,offscreen:Ge,collisionDetected:Ie}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let p=1/0,_=1/0,b=-1/0,T=-1/0;for(const N of i){const Z=new u.pointGeometry(N.x+dr,N.y+dr);p=Math.min(p,Z.x),_=Math.min(_,Z.y),b=Math.max(b,Z.x),T=Math.max(T,Z.y),l.push(Z)}const C=this.grid.query(p,_,b,T).concat(this.ignoredGrid.query(p,_,b,T)),I={},R={};for(const N of C){const Z=N.key;if(I[Z.bucketInstanceId]===void 0&&(I[Z.bucketInstanceId]={}),I[Z.bucketInstanceId][Z.featureIndex])continue;const X=[new u.pointGeometry(N.x1,N.y1),new u.pointGeometry(N.x2,N.y1),new u.pointGeometry(N.x2,N.y2),new u.pointGeometry(N.x1,N.y2)];u.polygonIntersectsPolygon(l,X)&&(I[Z.bucketInstanceId][Z.featureIndex]=!0,R[Z.bucketInstanceId]===void 0&&(R[Z.bucketInstanceId]=[]),R[Z.bucketInstanceId].push(Z.featureIndex))}return R}insertCollisionBox(i,l,p,_,b,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:b,collisionGroupID:T,overlapMode:l},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,l,p,_,b,T){const C=p?this.ignoredGrid:this.grid,I={bucketInstanceId:_,featureIndex:b,collisionGroupID:T,overlapMode:l};for(let R=0;R<i.length;R+=4)C.insertCircle(I,i[R],i[R+1],i[R+2])}projectAndGetPerspectiveRatio(i,l,p){const _=[l,p,0,1];return wn(_,_,i),{point:new u.pointGeometry((_[0]/_[3]+1)/2*this.transform.width+dr,(-_[1]/_[3]+1)/2*this.transform.height+dr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,l,p,_){return p<dr||i>=this.screenRightBoundary||_<dr||l>this.screenBottomBoundary}isInsideGrid(i,l,p,_){return p>=0&&i<this.gridRightBoundary&&_>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const i=u.identity([]);return u.translate(i,i,[-100,-100,0]),i}}function li(f,i,l){return i*(u.EXTENT/(f.tileSize*Math.pow(2,l-f.tileID.overscaledZ)))}class Cr{constructor(i,l,p,_){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?l:-l))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class ti{constructor(i,l,p,_,b){this.text=new Cr(i?i.text:null,l,p,b),this.icon=new Cr(i?i.icon:null,l,_,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wt{constructor(i,l,p){this.text=i,this.icon=l,this.skipFade=p}}class Yo{constructor(){this.invProjMatrix=u.create(),this.viewportMatrix=u.create(),this.circles=[]}}class Jo{constructor(i,l,p,_,b){this.bucketInstanceId=i,this.featureIndex=l,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=b}}class J{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const l=++this.maxGroupID;this.collisionGroups[i]={ID:l,predicate:p=>p.collisionGroupID===l}}return this.collisionGroups[i]}}function M(f,i,l,p,_){const{horizontalAlign:b,verticalAlign:T}=u.getAnchorAlignment(f),C=-(b-.5)*i,I=-(T-.5)*l,R=u.evaluateVariableOffset(f,p);return new u.pointGeometry(C+R[0]*_,I+R[1]*_)}function B(f,i,l,p,_,b){const{x1:T,x2:C,y1:I,y2:R,anchorPointX:N,anchorPointY:Z}=f,X=new u.pointGeometry(i,l);return p&&X._rotate(_?b:-b),{x1:T+X.x,y1:I+X.y,x2:C+X.x,y2:R+X.y,anchorPointX:N,anchorPointY:Z}}class H{constructor(i,l,p,_){this.transform=i.clone(),this.collisionIndex=new uo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new J(p),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,l,p,_){const b=p.getBucket(l),T=p.latestFeatureIndex;if(!b||!T||l.id!==b.layerIds[0])return;const C=p.collisionBoxArray,I=b.layers[0].layout,R=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),N=p.tileSize/u.EXTENT,Z=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),X=I.get("text-pitch-alignment")==="map",se=I.get("text-rotation-alignment")==="map",K=li(p,1,this.transform.zoom),oe=Gn(Z,X,se,this.transform,K);let ge=null;if(X){const we=cr(Z,X,se,this.transform,K);ge=u.multiply([],this.transform.labelPlaneMatrix,we)}this.retainedQueryData[b.bucketInstanceId]=new Jo(b.bucketInstanceId,T,b.sourceLayerIndex,b.index,p.tileID);const _e={bucket:b,layout:I,posMatrix:Z,textLabelPlaneMatrix:oe,labelToScreenMatrix:ge,scale:R,textPixelRatio:N,holdingForFade:p.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:u.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(_)for(const we of b.sortKeyRanges){const{sortKey:ve,symbolInstanceStart:Fe,symbolInstanceEnd:Ie}=we;i.push({sortKey:ve,symbolInstanceStart:Fe,symbolInstanceEnd:Ie,parameters:_e})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:_e})}attemptAnchorPlacement(i,l,p,_,b,T,C,I,R,N,Z,X,se,K,oe){const ge=[X.textOffset0,X.textOffset1],_e=M(i,p,_,ge,b),we=this.collisionIndex.placeCollisionBox(B(l,_e.x,_e.y,T,C,this.transform.angle),Z,I,R,N.predicate);if((!oe||this.collisionIndex.placeCollisionBox(B(oe,_e.x,_e.y,T,C,this.transform.angle),Z,I,R,N.predicate).box.length!==0)&&we.box.length>0){let ve;return this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(ve=this.prevPlacement.variableOffsets[X.crossTileID].anchor),this.variableOffsets[X.crossTileID]={textOffset:ge,width:p,height:_,anchor:i,textBoxScale:b,prevAnchor:ve},this.markUsedJustification(se,i,X,K),se.allowVerticalPlacement&&(this.markUsedOrientation(se,K,X),this.placedOrientations[X.crossTileID]=K),{shift:_e,placedGlyphBoxes:we}}}placeLayerBucketPart(i,l,p){const{bucket:_,layout:b,posMatrix:T,textLabelPlaneMatrix:C,labelToScreenMatrix:I,textPixelRatio:R,holdingForFade:N,collisionBoxArray:Z,partiallyEvaluatedTextSize:X,collisionGroup:se}=i.parameters,K=b.get("text-optional"),oe=b.get("icon-optional"),ge=u.getOverlapMode(b,"text-overlap","text-allow-overlap"),_e=ge==="always",we=u.getOverlapMode(b,"icon-overlap","icon-allow-overlap"),ve=we==="always",Fe=b.get("text-rotation-alignment")==="map",Ie=b.get("text-pitch-alignment")==="map",Le=b.get("icon-text-fit")!=="none",Ge=b.get("symbol-z-order")==="viewport-y",Ke=_e&&(ve||!_.hasIconData()||oe),Be=ve&&(_e||!_.hasTextData()||K);!_.collisionArrays&&Z&&_.deserializeCollisionBoxes(Z);const pt=(tt,zt)=>{if(l[tt.crossTileID])return;if(N)return void(this.placements[tt.crossTileID]=new wt(!1,!1,!1));let an=!1,Jt=!1,rn=!0,Yn=null,Ot={box:null,offscreen:null},cn={box:null,offscreen:null},En=null,Ri=null,Lr=null,Jr=0,Qr=0,js=0;zt.textFeatureIndex?Jr=zt.textFeatureIndex:tt.useRuntimeCollisionCircles&&(Jr=tt.featureIndex),zt.verticalTextFeatureIndex&&(Qr=zt.verticalTextFeatureIndex);const gr=zt.textBox;if(gr){const Dr=yn=>{let mi=u.WritingMode.horizontal;if(_.allowVerticalPlacement&&!yn&&this.prevPlacement){const tr=this.prevPlacement.placedOrientations[tt.crossTileID];tr&&(this.placedOrientations[tt.crossTileID]=tr,mi=tr,this.markUsedOrientation(_,mi,tt))}return mi},hn=(yn,mi)=>{if(_.allowVerticalPlacement&&tt.numVerticalGlyphVertices>0&&zt.verticalTextBox){for(const tr of _.writingModes)if(tr===u.WritingMode.vertical?(Ot=mi(),cn=Ot):Ot=yn(),Ot&&Ot.box&&Ot.box.length)break}else Ot=yn()};if(b.get("text-variable-anchor")){let yn=b.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[tt.crossTileID]){const Un=this.prevPlacement.variableOffsets[tt.crossTileID];yn.indexOf(Un.anchor)>0&&(yn=yn.filter(va=>va!==Un.anchor),yn.unshift(Un.anchor))}const mi=(Un,va,Oo)=>{const Au=Un.x2-Un.x1,Bc=Un.y2-Un.y1,Mu=tt.textBoxScale,ed=Le&&we==="never"?va:null;let xa={box:[],offscreen:!1};const Lu=ge!=="never"?2*yn.length:yn.length;for(let No=0;No<Lu;++No){const tl=this.attemptAnchorPlacement(yn[No%yn.length],Un,Au,Bc,Mu,Fe,Ie,R,T,se,No>=yn.length?ge:"never",tt,_,Oo,ed);if(tl&&(xa=tl.placedGlyphBoxes,xa&&xa.box&&xa.box.length)){an=!0,Yn=tl.shift;break}}return xa};hn(()=>mi(gr,zt.iconBox,u.WritingMode.horizontal),()=>{const Un=zt.verticalTextBox;return _.allowVerticalPlacement&&!(Ot&&Ot.box&&Ot.box.length)&&tt.numVerticalGlyphVertices>0&&Un?mi(Un,zt.verticalIconBox,u.WritingMode.vertical):{box:null,offscreen:null}}),Ot&&(an=Ot.box,rn=Ot.offscreen);const tr=Dr(Ot&&Ot.box);if(!an&&this.prevPlacement){const Un=this.prevPlacement.variableOffsets[tt.crossTileID];Un&&(this.variableOffsets[tt.crossTileID]=Un,this.markUsedJustification(_,Un.anchor,tt,tr))}}else{const yn=(mi,tr)=>{const Un=this.collisionIndex.placeCollisionBox(mi,ge,R,T,se.predicate);return Un&&Un.box&&Un.box.length&&(this.markUsedOrientation(_,tr,tt),this.placedOrientations[tt.crossTileID]=tr),Un};hn(()=>yn(gr,u.WritingMode.horizontal),()=>{const mi=zt.verticalTextBox;return _.allowVerticalPlacement&&tt.numVerticalGlyphVertices>0&&mi?yn(mi,u.WritingMode.vertical):{box:null,offscreen:null}}),Dr(Ot&&Ot.box&&Ot.box.length)}}if(En=Ot,an=En&&En.box&&En.box.length>0,rn=En&&En.offscreen,tt.useRuntimeCollisionCircles){const Dr=_.text.placedSymbolArray.get(tt.centerJustifiedTextSymbolIndex),hn=u.evaluateSizeForFeature(_.textSizeData,X,Dr),yn=b.get("text-padding");Ri=this.collisionIndex.placeCollisionCircles(ge,Dr,_.lineVertexArray,_.glyphOffsetArray,hn,T,C,I,p,Ie,se.predicate,tt.collisionCircleDiameter,yn),an=_e||Ri.circles.length>0&&!Ri.collisionDetected,rn=rn&&Ri.offscreen}if(zt.iconFeatureIndex&&(js=zt.iconFeatureIndex),zt.iconBox){const Dr=hn=>{const yn=Le&&Yn?B(hn,Yn.x,Yn.y,Fe,Ie,this.transform.angle):hn;return this.collisionIndex.placeCollisionBox(yn,we,R,T,se.predicate)};cn&&cn.box&&cn.box.length&&zt.verticalIconBox?(Lr=Dr(zt.verticalIconBox),Jt=Lr.box.length>0):(Lr=Dr(zt.iconBox),Jt=Lr.box.length>0),rn=rn&&Lr.offscreen}const Fo=K||tt.numHorizontalGlyphVertices===0&&tt.numVerticalGlyphVertices===0,ya=oe||tt.numIconVertices===0;if(Fo||ya?ya?Fo||(Jt=Jt&&an):an=Jt&&an:Jt=an=Jt&&an,an&&En&&En.box&&this.collisionIndex.insertCollisionBox(En.box,ge,b.get("text-ignore-placement"),_.bucketInstanceId,cn&&cn.box&&Qr?Qr:Jr,se.ID),Jt&&Lr&&this.collisionIndex.insertCollisionBox(Lr.box,we,b.get("icon-ignore-placement"),_.bucketInstanceId,js,se.ID),Ri&&(an&&this.collisionIndex.insertCollisionCircles(Ri.circles,ge,b.get("text-ignore-placement"),_.bucketInstanceId,Jr,se.ID),p)){const Dr=_.bucketInstanceId;let hn=this.collisionCircleArrays[Dr];hn===void 0&&(hn=this.collisionCircleArrays[Dr]=new Yo);for(let yn=0;yn<Ri.circles.length;yn+=4)hn.circles.push(Ri.circles[yn+0]),hn.circles.push(Ri.circles[yn+1]),hn.circles.push(Ri.circles[yn+2]),hn.circles.push(Ri.collisionDetected?1:0)}this.placements[tt.crossTileID]=new wt(an||Ke,Jt||Be,rn||_.justReloaded),l[tt.crossTileID]=!0};if(Ge){const tt=_.getSortedSymbolIndexes(this.transform.angle);for(let zt=tt.length-1;zt>=0;--zt){const an=tt[zt];pt(_.symbolInstances.get(an),_.collisionArrays[an])}}else for(let tt=i.symbolInstanceStart;tt<i.symbolInstanceEnd;tt++)pt(_.symbolInstances.get(tt),_.collisionArrays[tt]);if(p&&_.bucketInstanceId in this.collisionCircleArrays){const tt=this.collisionCircleArrays[_.bucketInstanceId];u.invert(tt.invProjMatrix,T),tt.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}markUsedJustification(i,l,p,_){let b;b=_===u.WritingMode.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.getAnchorJustification(l)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const C of T)C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=b>=0&&C!==b?0:p.crossTileID)}markUsedOrientation(i,l,p){const _=l===u.WritingMode.horizontal||l===u.WritingMode.horizontalOnly?l:0,b=l===u.WritingMode.vertical?l:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const C of T)i.text.placedSymbolArray.get(C).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let p=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const _=l?l.symbolFadeChange(i):1,b=l?l.opacities:{},T=l?l.variableOffsets:{},C=l?l.placedOrientations:{};for(const I in this.placements){const R=this.placements[I],N=b[I];N?(this.opacities[I]=new ti(N,_,R.text,R.icon),p=p||R.text!==N.text.placed||R.icon!==N.icon.placed):(this.opacities[I]=new ti(null,_,R.text,R.icon,R.skipFade),p=p||R.text||R.icon)}for(const I in b){const R=b[I];if(!this.opacities[I]){const N=new ti(R,_,!1,!1);N.isHidden()||(this.opacities[I]=N,p=p||R.text.placed||R.icon.placed)}}for(const I in T)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=T[I]);for(const I in C)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=C[I]);p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:i)}updateLayerOpacities(i,l){const p={};for(const _ of l){const b=_.getBucket(i);b&&_.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,p,_.collisionBoxArray)}}updateBucketOpacities(i,l,p){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const _=i.layers[0].layout,b=new ti(null,0,!1,!1,!0),T=_.get("text-allow-overlap"),C=_.get("icon-allow-overlap"),I=_.get("text-variable-anchor"),R=_.get("text-rotation-alignment")==="map",N=_.get("text-pitch-alignment")==="map",Z=_.get("icon-text-fit")!=="none",X=new ti(null,0,T&&(C||!i.hasIconData()||_.get("icon-optional")),C&&(T||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const se=(K,oe,ge)=>{for(let _e=0;_e<oe/4;_e++)K.opacityVertexArray.emplaceBack(ge)};for(let K=0;K<i.symbolInstances.length;K++){const oe=i.symbolInstances.get(K),{numHorizontalGlyphVertices:ge,numVerticalGlyphVertices:_e,crossTileID:we}=oe;let ve=this.opacities[we];l[we]?ve=b:ve||(ve=X,this.opacities[we]=ve),l[we]=!0;const Fe=oe.numIconVertices>0,Ie=this.placedOrientations[oe.crossTileID],Le=Ie===u.WritingMode.vertical,Ge=Ie===u.WritingMode.horizontal||Ie===u.WritingMode.horizontalOnly;if(ge>0||_e>0){const Ke=ke(ve.text);se(i.text,ge,Le?dt:Ke),se(i.text,_e,Ge?dt:Ke);const Be=ve.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(zt=>{zt>=0&&(i.text.placedSymbolArray.get(zt).hidden=Be||Le?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=Be||Ge?1:0);const pt=this.variableOffsets[oe.crossTileID];pt&&this.markUsedJustification(i,pt.anchor,oe,Ie);const tt=this.placedOrientations[oe.crossTileID];tt&&(this.markUsedJustification(i,"left",oe,tt),this.markUsedOrientation(i,tt,oe))}if(Fe){const Ke=ke(ve.icon),Be=!(Z&&oe.verticalPlacedIconSymbolIndex&&Le);oe.placedIconSymbolIndex>=0&&(se(i.icon,oe.numIconVertices,Be?Ke:dt),i.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=ve.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(se(i.icon,oe.numVerticalIconVertices,Be?dt:Ke),i.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=ve.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Ke=i.collisionArrays[K];if(Ke){let Be=new u.pointGeometry(0,0);if(Ke.textBox||Ke.verticalTextBox){let tt=!0;if(I){const zt=this.variableOffsets[we];zt?(Be=M(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),R&&Be._rotate(N?this.transform.angle:-this.transform.angle)):tt=!1}Ke.textBox&&Q(i.textCollisionBox.collisionVertexArray,ve.text.placed,!tt||Le,Be.x,Be.y),Ke.verticalTextBox&&Q(i.textCollisionBox.collisionVertexArray,ve.text.placed,!tt||Ge,Be.x,Be.y)}const pt=Boolean(!Ge&&Ke.verticalIconBox);Ke.iconBox&&Q(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,pt,Z?Be.x:0,Z?Be.y:0),Ke.verticalIconBox&&Q(i.iconCollisionBox.collisionVertexArray,ve.icon.placed,!pt,Z?Be.x:0,Z?Be.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const K=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=K.invProjMatrix,i.placementViewportMatrix=K.viewportMatrix,i.collisionCircleArray=K.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,l){const p=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Q(f,i,l,p,_){f.emplaceBack(i?1:0,l?1:0,p||0,_||0),f.emplaceBack(i?1:0,l?1:0,p||0,_||0),f.emplaceBack(i?1:0,l?1:0,p||0,_||0),f.emplaceBack(i?1:0,l?1:0,p||0,_||0)}const ne=Math.pow(2,25),pe=Math.pow(2,24),ce=Math.pow(2,17),he=Math.pow(2,16),fe=Math.pow(2,9),Ae=Math.pow(2,8),Ve=Math.pow(2,1);function ke(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const i=f.placed?1:0,l=Math.floor(127*f.opacity);return l*ne+i*pe+l*ce+i*he+l*fe+i*Ae+l*Ve+i}const dt=0;class it{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,l,p,_,b){const T=this._bucketParts;for(;this._currentTileIndex<i.length;)if(l.getBucketParts(T,_,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((C,I)=>C.sortKey-I.sortKey));this._currentPartIndex<T.length;)if(l.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,b())return!0;return!1}}class mt{constructor(i,l,p,_,b,T,C){this.placement=new H(i,b,T,C),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,l,p){const _=u.exported.now(),b=()=>{const T=u.exported.now()-_;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=l[i[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=C)&&(!T.maxzoom||T.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new it(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Et=512/u.EXTENT/2;class sn{constructor(i,l,p){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=p;for(let _=0;_<l.length;_++){const b=l.get(_),T=b.key;this.indexedSymbolInstances[T]||(this.indexedSymbolInstances[T]=[]),this.indexedSymbolInstances[T].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,i)})}}getScaledCoordinates(i,l){const p=Et/Math.pow(2,l.canonical.z-this.tileID.canonical.z);return{x:Math.floor((l.canonical.x*u.EXTENT+i.anchorX)*p),y:Math.floor((l.canonical.y*u.EXTENT+i.anchorY)*p)}}findMatches(i,l,p){const _=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let b=0;b<i.length;b++){const T=i.get(b);if(T.crossTileID)continue;const C=this.indexedSymbolInstances[T.key];if(!C)continue;const I=this.getScaledCoordinates(T,l);for(const R of C)if(Math.abs(R.coord.x-I.x)<=_&&Math.abs(R.coord.y-I.y)<=_&&!p[R.crossTileID]){p[R.crossTileID]=!0,T.crossTileID=R.crossTileID;break}}}}class Gt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Nt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const l=Math.round((i-this.lng)/360);if(l!==0)for(const p in this.indexes){const _=this.indexes[p],b={};for(const T in _){const C=_[T];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+l),b[C.tileID.key]=C}this.indexes[p]=b}this.lng=i}addBucket(i,l,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<l.symbolInstances.length;b++)l.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const _=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const T=this.indexes[b];if(Number(b)>i.overscaledZ)for(const C in T){const I=T[C];I.tileID.isChildOf(i)&&I.findMatches(l.symbolInstances,i,_)}else{const C=T[i.scaledTo(Number(b)).key];C&&C.findMatches(l.symbolInstances,i,_)}}for(let b=0;b<l.symbolInstances.length;b++){const T=l.symbolInstances.get(b);T.crossTileID||(T.crossTileID=p.generate(),_[T.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new sn(i,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(i,l){for(const p in l.indexedSymbolInstances)for(const _ of l.indexedSymbolInstances[p])delete this.usedCrossTileIDs[i][_.crossTileID]}removeStaleBuckets(i){let l=!1;for(const p in this.indexes){const _=this.indexes[p];for(const b in _)i[_[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[b]),delete _[b],l=!0)}return l}}class Ft{constructor(){this.layerIndexes={},this.crossTileIDs=new Gt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,l,p){let _=this.layerIndexes[i.id];_===void 0&&(_=this.layerIndexes[i.id]=new Nt);let b=!1;const T={};_.handleWrapJump(p);for(const C of l){const I=C.getBucket(i);I&&i.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(C.tileID,I,this.crossTileIDs)&&(b=!0),T[I.bucketInstanceId]=!0)}return _.removeStaleBuckets(T)&&(b=!0),b}pruneUnusedLayers(i){const l={};i.forEach(p=>{l[p]=!0});for(const p in this.layerIndexes)l[p]||delete this.layerIndexes[p]}}const Dt=(f,i)=>u.emitValidationErrors(f,i&&i.filter(l=>l.identifier!=="source.canvas")),An=u.pick(Ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),kt=u.pick(Ht,["setCenter","setZoom","setBearing","setPitch"]),Xt=function(){const f={},i=u.spec.$version;for(const l in u.spec.$root){const p=u.spec.$root[l];if(p.required){let _=null;_=l==="version"?i:p.type==="array"?[]:{},_!=null&&(f[l]=_)}}return f}();class ni extends u.Evented{constructor(i,l={}){super(),this.map=i,this.dispatcher=new Zt(Ti(),this),this.imageManager=new De,this.imageManager.setEventedParent(this),this.glyphManager=new ht(i._requestManager,l.localIdeographFontFamily),this.lineAtlas=new jn(256,512),this.crossTileSymbolIndex=new Ft,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",u.getReferrer());const p=this;this._rtlTextPluginCallback=ni.registerForPluginStateChange(_=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(b,T)=>{if(u.triggerPluginCompletionEvent(b),T&&T.every(C=>C))for(const C in p.sourceCaches)p.sourceCaches[C].reload()})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const b=this.sourceCaches[_.sourceId];if(!b)return;const T=b.getSource();if(T&&T.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===T.id&&this._validateLayer(I)}})}loadURL(i,l={}){this.fire(new u.Event("dataloading",{dataType:"style"}));const p=typeof l.validate!="boolean"||l.validate,_=this.map._requestManager.transformRequest(i,u.ResourceType.Style);this._request=u.getJSON(_,(b,T)=>{this._request=null,b?this.fire(new u.ErrorEvent(b)):T&&this._load(T,p)})}loadJSON(i,l={}){this.fire(new u.Event("dataloading",{dataType:"style"})),this._request=u.exported.frame(()=>{this._request=null,this._load(i,l.validate!==!1)})}loadEmpty(){this.fire(new u.Event("dataloading",{dataType:"style"})),this._load(Xt,!1)}_load(i,l){if(l&&Dt(this,u.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const _ in i.sources)this.addSource(_,i.sources[_],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const p=Po(this.stylesheet.layers);this._order=p.map(_=>_.id),this._layers={},this._serializedLayers={};for(let _ of p)_=u.createStyleLayer(_),_.setEventedParent(this,{layer:{id:_.id}}),this._layers[_.id]=_,this._serializedLayers[_.id]=_.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ut(this.stylesheet.light),this.fire(new u.Event("data",{dataType:"style"})),this.fire(new u.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(l,p,_,b){let T,C,I;const R=_>1?"@2x":"";let N=u.getJSON(p.transformRequest(p.normalizeSpriteURL(l,R,".json"),u.ResourceType.SpriteJSON),(se,K)=>{N=null,I||(I=se,T=K,X())}),Z=u.getImage(p.transformRequest(p.normalizeSpriteURL(l,R,".png"),u.ResourceType.SpriteImage),(se,K)=>{Z=null,I||(I=se,C=K,X())});function X(){if(I)b(I);else if(T&&C){const se=u.exported.getImageData(C),K={};for(const oe in T){const{width:ge,height:_e,x:we,y:ve,sdf:Fe,pixelRatio:Ie,stretchX:Le,stretchY:Ge,content:Ke}=T[oe],Be=new u.RGBAImage({width:ge,height:_e});u.RGBAImage.copy(se,Be,{x:we,y:ve},{x:0,y:0},{width:ge,height:_e}),K[oe]={data:Be,pixelRatio:Ie,sdf:Fe,stretchX:Le,stretchY:Ge,content:Ke}}b(null,K)}}return{cancel(){N&&(N.cancel(),N=null),Z&&(Z.cancel(),Z=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(l,p)=>{if(this._spriteRequest=null,l)this.fire(new u.ErrorEvent(l));else if(p)for(const _ in p)this.imageManager.addImage(_,p[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))})}_validateLayer(i){const l=this.sourceCaches[i.source];if(!l)return;const p=i.sourceLayer;if(!p)return;const _=l.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const l=[];for(const p of i){const _=this._layers[p];_.type!=="custom"&&l.push(_.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const l=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(_.length||b.length)&&this._updateWorkerLayers(_,b);for(const T in this._updatedSources){const C=this._updatedSources[T];C==="reload"?this._reloadSource(T):C==="clear"&&this._clearSource(T)}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const _ in this.sourceCaches){const b=this.sourceCaches[_];p[_]=b.used,b.used=!1}for(const _ of this._order){const b=this._layers[_];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const _ in p){const b=this.sourceCaches[_];p[_]!==b.used&&b.fire(new u.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(i),this.z=i.zoom,l&&this.fire(new u.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),Dt(this,u.validateStyle(i)))return!1;(i=u.clone$1(i)).layers=Po(i.layers);const l=function(_,b){if(!_)return[{command:Ht.setStyle,args:[b]}];let T=[];try{if(!Y(_.version,b.version))return[{command:Ht.setStyle,args:[b]}];Y(_.center,b.center)||T.push({command:Ht.setCenter,args:[b.center]}),Y(_.zoom,b.zoom)||T.push({command:Ht.setZoom,args:[b.zoom]}),Y(_.bearing,b.bearing)||T.push({command:Ht.setBearing,args:[b.bearing]}),Y(_.pitch,b.pitch)||T.push({command:Ht.setPitch,args:[b.pitch]}),Y(_.sprite,b.sprite)||T.push({command:Ht.setSprite,args:[b.sprite]}),Y(_.glyphs,b.glyphs)||T.push({command:Ht.setGlyphs,args:[b.glyphs]}),Y(_.transition,b.transition)||T.push({command:Ht.setTransition,args:[b.transition]}),Y(_.light,b.light)||T.push({command:Ht.setLight,args:[b.light]});const C={},I=[];(function(N,Z,X,se){let K;for(K in Z=Z||{},N=N||{})Object.prototype.hasOwnProperty.call(N,K)&&(Object.prototype.hasOwnProperty.call(Z,K)||St(K,X,se));for(K in Z)Object.prototype.hasOwnProperty.call(Z,K)&&(Object.prototype.hasOwnProperty.call(N,K)?Y(N[K],Z[K])||(N[K].type==="geojson"&&Z[K].type==="geojson"&&Rn(N,Z,K)?X.push({command:Ht.setGeoJSONSourceData,args:[K,Z[K].data]}):mn(K,Z,X,se)):nt(K,Z,X))})(_.sources,b.sources,I,C);const R=[];_.layers&&_.layers.forEach(N=>{C[N.source]?T.push({command:Ht.removeLayer,args:[N.id]}):R.push(N)}),T=T.concat(I),function(N,Z,X){Z=Z||[];const se=(N=N||[]).map(Je),K=Z.map(Je),oe=N.reduce(Mi,{}),ge=Z.reduce(Mi,{}),_e=se.slice(),we=Object.create(null);let ve,Fe,Ie,Le,Ge,Ke,Be;for(ve=0,Fe=0;ve<se.length;ve++)Ie=se[ve],Object.prototype.hasOwnProperty.call(ge,Ie)?Fe++:(X.push({command:Ht.removeLayer,args:[Ie]}),_e.splice(_e.indexOf(Ie,Fe),1));for(ve=0,Fe=0;ve<K.length;ve++)Ie=K[K.length-1-ve],_e[_e.length-1-ve]!==Ie&&(Object.prototype.hasOwnProperty.call(oe,Ie)?(X.push({command:Ht.removeLayer,args:[Ie]}),_e.splice(_e.lastIndexOf(Ie,_e.length-Fe),1)):Fe++,Ke=_e[_e.length-ve],X.push({command:Ht.addLayer,args:[ge[Ie],Ke]}),_e.splice(_e.length-ve,0,Ie),we[Ie]=!0);for(ve=0;ve<K.length;ve++)if(Ie=K[ve],Le=oe[Ie],Ge=ge[Ie],!we[Ie]&&!Y(Le,Ge))if(Y(Le.source,Ge.source)&&Y(Le["source-layer"],Ge["source-layer"])&&Y(Le.type,Ge.type)){for(Be in Pe(Le.layout,Ge.layout,X,Ie,null,Ht.setLayoutProperty),Pe(Le.paint,Ge.paint,X,Ie,null,Ht.setPaintProperty),Y(Le.filter,Ge.filter)||X.push({command:Ht.setFilter,args:[Ie,Ge.filter]}),Y(Le.minzoom,Ge.minzoom)&&Y(Le.maxzoom,Ge.maxzoom)||X.push({command:Ht.setLayerZoomRange,args:[Ie,Ge.minzoom,Ge.maxzoom]}),Le)Object.prototype.hasOwnProperty.call(Le,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Pe(Le[Be],Ge[Be],X,Ie,Be.slice(6),Ht.setPaintProperty):Y(Le[Be],Ge[Be])||X.push({command:Ht.setLayerProperty,args:[Ie,Be,Ge[Be]]}));for(Be in Ge)Object.prototype.hasOwnProperty.call(Ge,Be)&&!Object.prototype.hasOwnProperty.call(Le,Be)&&Be!=="layout"&&Be!=="paint"&&Be!=="filter"&&Be!=="metadata"&&Be!=="minzoom"&&Be!=="maxzoom"&&(Be.indexOf("paint.")===0?Pe(Le[Be],Ge[Be],X,Ie,Be.slice(6),Ht.setPaintProperty):Y(Le[Be],Ge[Be])||X.push({command:Ht.setLayerProperty,args:[Ie,Be,Ge[Be]]}))}else X.push({command:Ht.removeLayer,args:[Ie]}),Ke=_e[_e.lastIndexOf(Ie)+1],X.push({command:Ht.addLayer,args:[Ge,Ke]})}(R,b.layers,T)}catch(C){console.warn("Unable to compute style diff:",C),T=[{command:Ht.setStyle,args:[b]}]}return T}(this.serialize(),i).filter(_=>!(_.command in kt));if(l.length===0)return!1;const p=l.filter(_=>!(_.command in An));if(p.length>0)throw new Error(`Unimplemented: ${p.map(_=>_.command).join(", ")}.`);return l.forEach(_=>{_.command!=="setTransition"&&this[_.command].apply(this,_.args)}),this.stylesheet=i,!0}addImage(i,l){if(this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,l),this._afterImageUpdated(i)}updateImage(i,l){this.imageManager.updateImage(i,l)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new u.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new u.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,l,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(u.validateStyle.source,`sources.${i}`,l,null,p))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const _=this.sourceCaches[i]=new Fn(i,l,this.dispatcher);_.style=this,_.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:_.serialize(),sourceId:i})),_.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new u.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const l=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],l.fire(new u.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,l){this._checkLoaded(),this.sourceCaches[i].getSource().setData(l),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,l,p={}){this._checkLoaded();const _=i.id;if(this.getLayer(_))return void this.fire(new u.ErrorEvent(new Error(`Layer "${_}" already exists on this map.`)));let b;if(i.type==="custom"){if(Dt(this,u.validateCustomStyleLayer(i)))return;b=u.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(_,i.source),i=u.clone$1(i),i=u.extend(i,{source:_})),this._validate(u.validateStyle.layer,`layers.${_}`,i,{arrayIndex:-1},p))return;b=u.createStyleLayer(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[b.id]=b.serialize()}const T=l?this._order.indexOf(l):this._order.length;if(l&&T===-1)this.fire(new u.ErrorEvent(new Error(`Cannot add layer "${_}" before non-existing layer "${l}".`)));else{if(this._order.splice(T,0,_),this._layerOrderChanged=!0,this._layers[_]=b,this._removedLayers[_]&&b.source&&b.type!=="custom"){const C=this._removedLayers[_];delete this._removedLayers[_],C.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,l){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new u.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===l)return;const p=this._order.indexOf(i);this._order.splice(p,1);const _=l?this._order.indexOf(l):this._order.length;l&&_===-1?this.fire(new u.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${l}".`))):(this._order.splice(_,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const l=this._layers[i];if(!l)return void this.fire(new u.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));l.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=l,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],l.onRemove&&l.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,l,p){this._checkLoaded();const _=this.getLayer(i);_?_.minzoom===l&&_.maxzoom===p||(l!=null&&(_.minzoom=l),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new u.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,l,p={}){this._checkLoaded();const _=this.getLayer(i);if(_){if(!Y(_.filter,l))return l==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(u.validateStyle.filter,`layers.${_.id}.filter`,l,null,p)||(_.filter=u.clone$1(l),this._updateLayer(_)))}else this.fire(new u.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return u.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,l,p,_={}){this._checkLoaded();const b=this.getLayer(i);b?Y(b.getLayoutProperty(l),p)||(b.setLayoutProperty(l,p,_),this._updateLayer(b)):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,l){const p=this.getLayer(i);if(p)return p.getLayoutProperty(l);this.fire(new u.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,l,p,_={}){this._checkLoaded();const b=this.getLayer(i);b?Y(b.getPaintProperty(l),p)||(b.setPaintProperty(l,p,_)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new u.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,l){return this.getLayer(i).getPaintProperty(l)}setFeatureState(i,l){this._checkLoaded();const p=i.source,_=i.sourceLayer,b=this.sourceCaches[p];if(b===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const T=b.getSource().type;T==="geojson"&&_?this.fire(new u.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||_?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),b.setFeatureState(_,i.id,l)):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,l){this._checkLoaded();const p=i.source,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new u.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const b=_.getSource().type,T=b==="vector"?i.sourceLayer:void 0;b!=="vector"||T?l&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new u.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(T,i.id,l):this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const l=i.source,p=i.sourceLayer,_=this.sourceCaches[l];if(_!==void 0)return _.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new u.ErrorEvent(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,i.id)):void this.fire(new u.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return u.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return u.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:u.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const l=T=>this._layers[T].type==="fill-extrusion",p={},_=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(l(C)){p[C]=T;for(const I of i){const R=I[C];if(R)for(const N of R)_.push(N)}}}_.sort((T,C)=>C.intersectionZ-T.intersectionZ);const b=[];for(let T=this._order.length-1;T>=0;T--){const C=this._order[T];if(l(C))for(let I=_.length-1;I>=0;I--){const R=_[I].feature;if(p[R.layer.id]<T)break;b.push(R),_.pop()}else for(const I of i){const R=I[C];if(R)for(const N of R)b.push(N.feature)}}return b}queryRenderedFeatures(i,l,p){l&&l.filter&&this._validate(u.validateStyle.filter,"queryRenderedFeatures.filter",l.filter,null,l);const _={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new u.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const T of l.layers){const C=this._layers[T];if(!C)return this.fire(new u.ErrorEvent(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];_[C.source]=!0}}const b=[];l.availableImages=this._availableImages;for(const T in this.sourceCaches)l.layers&&!_[T]||b.push(si(this.sourceCaches[T],this._layers,this._serializedLayers,i,l,p));return this.placement&&b.push(function(T,C,I,R,N,Z,X){const se={},K=Z.queryRenderedSymbols(R),oe=[];for(const ge of Object.keys(K).map(Number))oe.push(X[ge]);oe.sort(Gr);for(const ge of oe){const _e=ge.featureIndex.lookupSymbolFeatures(K[ge.bucketInstanceId],C,ge.bucketIndex,ge.sourceLayerIndex,N.filter,N.layers,N.availableImages,T);for(const we in _e){const ve=se[we]=se[we]||[],Fe=_e[we];Fe.sort((Ie,Le)=>{const Ge=ge.featureSortOrder;if(Ge){const Ke=Ge.indexOf(Ie.featureIndex);return Ge.indexOf(Le.featureIndex)-Ke}return Le.featureIndex-Ie.featureIndex});for(const Ie of Fe)ve.push(Ie)}}for(const ge in se)se[ge].forEach(_e=>{const we=_e.feature,ve=I[T[ge].source].getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=ve});return se}(this._layers,this._serializedLayers,this.sourceCaches,i,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,l){l&&l.filter&&this._validate(u.validateStyle.filter,"querySourceFeatures.filter",l.filter,null,l);const p=this.sourceCaches[i];return p?function(_,b){const T=_.getRenderableIds().map(R=>_.getTileByID(R)),C=[],I={};for(let R=0;R<T.length;R++){const N=T[R],Z=N.tileID.canonical.key;I[Z]||(I[Z]=!0,N.querySourceFeatures(C,b))}return C}(p,l):[]}addSourceType(i,l,p){return ni.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(ni.setSourceType(i,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:l.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,l={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const T in i)if(!Y(i[T],p[T])){_=!0;break}if(!_)return;const b={now:u.exported.now(),transition:u.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,l),this.light.updateTransitions(b)}_validate(i,l,p,_,b={}){return(!b||b.validate!==!1)&&Dt(this,i.call(u.validateStyle,u.extend({key:l,style:this.serialize(),value:p,styleSpec:u.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),u.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const l=this.sourceCaches[i];l.setEventedParent(null),l.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const l in this.sourceCaches)this.sourceCaches[l].update(i)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,l,p,_,b=!1){let T=!1,C=!1;const I={};for(const R of this._order){const N=this._layers[R];if(N.type!=="symbol")continue;if(!I[N.source]){const X=this.sourceCaches[N.source];I[N.source]=X.getRenderableIds(!0).map(se=>X.getTileByID(se)).sort((se,K)=>K.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(K.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(N,I[N.source],i.center.lng);T=T||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(u.exported.now(),i.zoom))&&(this.pauseablePlacement=new mt(i,this._order,b,l,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(u.exported.now()),C=!0),T&&this.pauseablePlacement.placement.setStale()),C||T)for(const R of this._order){const N=this._layers[R];N.type==="symbol"&&this.placement.updateLayerOpacities(N,I[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(u.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,l,p){this.imageManager.getImages(l.icons,p),this._updateTilesForChangedImages();const _=this.sourceCaches[l.source];_&&_.setDependencies(l.tileID.key,l.type,l.icons)}getGlyphs(i,l,p){this.glyphManager.getGlyphs(l.stacks,p)}getResource(i,l,p){return u.makeRequest(l,p)}}ni.getSourceType=function(f){return At[f]},ni.setSourceType=function(f,i){At[f]=i},ni.registerForPluginStateChange=u.registerForPluginStateChange;var ko=u.createLayout([{name:"a_pos",type:"Int16",components:2}]),Co={prelude:_n(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),background:_n(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:_n(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:_n(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:_n("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:_n(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:_n(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:_n("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:_n("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:_n("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),fill:_n(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:_n(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:_n(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:_n(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:_n(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:_n(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:_n(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),lineGradient:_n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),linePattern:_n(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:_n(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:_n(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:_n(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),symbolSDF:_n(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:_n(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`)};function _n(f,i){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),_=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=b?b.concat(_):_,C={};return{fragmentSource:f=f.replace(l,(I,R,N,Z,X)=>(C[X]=!0,R==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${N} ${Z} ${X};
#else
uniform ${N} ${Z} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${N} ${Z} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(l,(I,R,N,Z,X)=>{const se=Z==="float"?"vec2":"vec4",K=X.match(/color/)?"color":se;return C[X]?R==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${N} ${se} a_${X};
varying ${N} ${Z} ${X};
#else
uniform ${N} ${Z} u_${X};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${N} ${Z} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${K}(a_${X}, u_${X}_t);
#else
    ${N} ${Z} ${X} = u_${X};
#endif
`:R==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${N} ${se} a_${X};
#else
uniform ${N} ${Z} u_${X};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${N} ${Z} ${X} = a_${X};
#else
    ${N} ${Z} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${N} ${Z} ${X} = unpack_mix_${K}(a_${X}, u_${X}_t);
#else
    ${N} ${Z} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:T}}class Kt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,l,p,_,b,T,C,I){this.context=i;let R=this.boundPaintVertexBuffers.length!==_.length;for(let N=0;!R&&N<_.length;N++)this.boundPaintVertexBuffers[N]!==_[N]&&(R=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===l&&this.boundLayoutVertexBuffer===p&&!R&&this.boundIndexBuffer===b&&this.boundVertexOffset===T&&this.boundDynamicVertexBuffer===C&&this.boundDynamicVertexBuffer2===I?(i.bindVertexArrayOES.set(this.vao),C&&C.bind(),b&&b.dynamicDraw&&b.bind(),I&&I.bind()):this.freshBind(l,p,_,b,T,C,I)}freshBind(i,l,p,_,b,T,C){let I;const R=i.numAttributes,N=this.context,Z=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=i,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=C;else{I=N.currentNumAttributes||0;for(let X=R;X<I;X++)Z.disableVertexAttribArray(X)}l.enableAttributes(Z,i);for(const X of p)X.enableAttributes(Z,i);T&&T.enableAttributes(Z,i),C&&C.enableAttributes(Z,i),l.bind(),l.setVertexAttribPointers(Z,i,b);for(const X of p)X.bind(),X.setVertexAttribPointers(Z,i,b);T&&(T.bind(),T.setVertexAttribPointers(Z,i,b)),_&&_.bind(),C&&(C.bind(),C.setVertexAttribPointers(Z,i,b)),N.currentNumAttributes=R}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function On(f){const i=[];for(let l=0;l<f.length;l++){if(f[l]===null)continue;const p=f[l].split(" ");i.push(p.pop())}return i}class Il{constructor(i,l,p,_,b,T){const C=i.gl;this.program=C.createProgram();const I=On(p.staticAttributes),R=_?_.getBinderAttributes():[],N=I.concat(R),Z=p.staticUniforms?On(p.staticUniforms):[],X=_?_.getBinderUniforms():[],se=Z.concat(X),K=[];for(const Ie of se)K.indexOf(Ie)<0&&K.push(Ie);const oe=_?_.defines():[];T&&oe.push("#define OVERDRAW_INSPECTOR;");const ge=oe.concat(Co.prelude.fragmentSource,p.fragmentSource).join(`
`),_e=oe.concat(Co.prelude.vertexSource,p.vertexSource).join(`
`),we=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(we,ge),C.compileShader(we),C.attachShader(this.program,we);const ve=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);C.shaderSource(ve,_e),C.compileShader(ve),C.attachShader(this.program,ve),this.attributes={};const Fe={};this.numAttributes=N.length;for(let Ie=0;Ie<this.numAttributes;Ie++)N[Ie]&&(C.bindAttribLocation(this.program,Ie,N[Ie]),this.attributes[N[Ie]]=Ie);C.linkProgram(this.program),C.deleteShader(ve),C.deleteShader(we);for(let Ie=0;Ie<K.length;Ie++){const Le=K[Ie];if(Le&&!Fe[Le]){const Ge=C.getUniformLocation(this.program,Le);Ge&&(Fe[Le]=Ge)}}this.fixedUniforms=b(i,Fe),this.binderUniforms=_?_.getUniforms(i,Fe):[]}draw(i,l,p,_,b,T,C,I,R,N,Z,X,se,K,oe,ge){const _e=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(_),i.setColorMode(b),i.setCullFace(T);for(const ve in this.fixedUniforms)this.fixedUniforms[ve].set(C[ve]);K&&K.setUniforms(i,this.binderUniforms,X,{zoom:se});const we={[_e.LINES]:2,[_e.TRIANGLES]:3,[_e.LINE_STRIP]:1}[l];for(const ve of Z.get()){const Fe=ve.vaos||(ve.vaos={});(Fe[I]||(Fe[I]=new Kt)).bind(i,this,R,K?K.getPaintVertexBuffers():[],N,ve.vertexOffset,oe,ge),_e.drawElements(l,ve.primitiveLength*we,_e.UNSIGNED_SHORT,ve.primitiveOffset*we*2)}}}function Ss(f,i,l){const p=1/li(l,1,i.transform.tileZoom),_=Math.pow(2,l.tileID.overscaledZ),b=l.tileSize*Math.pow(2,i.transform.tileZoom)/_,T=b*(l.tileID.canonical.x+l.tileID.wrap*_),C=b*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[p,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[T>>16,C>>16],u_pixel_coord_lower:[65535&T,65535&C]}}const Ki=(f,i,l,p)=>{const _=i.style.light,b=_.properties.get("position"),T=[b.x,b.y,b.z],C=function(){var R=new u.ARRAY_TYPE(9);return u.ARRAY_TYPE!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}();_.properties.get("anchor")==="viewport"&&function(R,N){var Z=Math.sin(N),X=Math.cos(N);R[0]=X,R[1]=Z,R[2]=0,R[3]=-Z,R[4]=X,R[5]=0,R[6]=0,R[7]=0,R[8]=1}(C,-i.transform.angle),function(R,N,Z){var X=N[0],se=N[1],K=N[2];R[0]=X*Z[0]+se*Z[3]+K*Z[6],R[1]=X*Z[1]+se*Z[4]+K*Z[7],R[2]=X*Z[2]+se*Z[5]+K*Z[8]}(T,T,C);const I=_.properties.get("color");return{u_matrix:f,u_lightpos:T,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+l,u_opacity:p}},zl=(f,i,l,p,_,b,T)=>u.extend(Ki(f,i,l,p),Ss(b,i,T),{u_height_factor:-Math.pow(2,_.overscaledZ)/T.tileSize/8}),Es=f=>({u_matrix:f}),co=(f,i,l,p)=>u.extend(Es(f),Ss(l,i,p)),Xn=(f,i)=>({u_matrix:f,u_world:i}),Io=(f,i,l,p,_)=>u.extend(co(f,i,l,p),{u_world:_}),Ir=(f,i,l,p)=>{const _=f.transform;let b,T;if(p.paint.get("circle-pitch-alignment")==="map"){const C=li(l,1,_.zoom);b=!0,T=[C,C]}else b=!1,T=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(i.posMatrix,l,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:T}},zo=(f,i,l)=>{const p=li(l,1,i.zoom),_=Math.pow(2,i.zoom-l.tileID.overscaledZ),b=l.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*_),i.pixelsToGLUnits[1]/(p*_)],u_overscale_factor:b}},Ao=(f,i,l=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:l}),ho=f=>({u_matrix:f}),Ts=(f,i,l,p)=>({u_matrix:f,u_extrude_scale:li(i,1,l),u_intensity:p});function Ps(f,i){const l=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new u.MercatorCoordinate(0,p/l).toLngLat().lat,new u.MercatorCoordinate(0,(p+1)/l).toLngLat().lat]}const Mo=(f,i,l)=>{const p=f.transform;return{u_matrix:Qs(f,i,l),u_ratio:1/li(i,1,p.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},ks=(f,i,l,p)=>u.extend(Mo(f,i,l),{u_image:0,u_image_height:p}),Qo=(f,i,l,p)=>{const _=f.transform,b=Cs(i,_);return{u_matrix:Qs(f,i,l),u_texsize:i.imageAtlasTexture.size,u_ratio:1/li(i,1,_.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[b,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Nn=(f,i,l,p,_)=>{const b=f.lineAtlas,T=Cs(i,f.transform),C=l.layout.get("line-cap")==="round",I=b.getDash(p.from,C),R=b.getDash(p.to,C),N=I.width*_.fromScale,Z=R.width*_.toScale;return u.extend(Mo(f,i,l),{u_patternscale_a:[T/N,-I.height/2],u_patternscale_b:[T/Z,-R.height/2],u_sdfgamma:b.width/(256*Math.min(N,Z)*f.pixelRatio)/2,u_image:0,u_tex_y_a:I.y,u_tex_y_b:R.y,u_mix:_.t})};function Cs(f,i){return 1/li(f,1,i.tileZoom)}function Qs(f,i,l){return f.translatePosMatrix(i.tileID.posMatrix,i,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const xu=(f,i,l,p,_)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:l,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(T=_.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(b=_.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Vt(_.paint.get("raster-hue-rotate"))};var b,T};function Vt(f){f*=Math.PI/180;const i=Math.sin(f),l=Math.cos(f);return[(2*l+1)/3,(-Math.sqrt(3)*i-l+1)/3,(Math.sqrt(3)*i-l+1)/3]}const Yi=(f,i,l,p,_,b,T,C,I,R)=>{const N=_.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:N.cameraToCenterDistance,u_pitch:N.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:N.width/N.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:T,u_coord_matrix:C,u_is_text:+I,u_pitch_with_map:+p,u_texsize:R,u_texture:0}},bn=(f,i,l,p,_,b,T,C,I,R,N)=>{const Z=_.transform;return u.extend(Yi(f,i,l,p,_,b,T,C,I,R),{u_gamma_scale:p?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:_.pixelRatio,u_is_halo:+N})},wu=(f,i,l,p,_,b,T,C,I,R)=>u.extend(bn(f,i,l,p,_,b,T,C,!0,I,!0),{u_texsize_icon:R,u_texture_icon:1}),Al=(f,i,l)=>({u_matrix:f,u_opacity:i,u_color:l}),ea=(f,i,l,p,_,b)=>u.extend(function(T,C,I,R){const N=I.imageManager.getPattern(T.from.toString()),Z=I.imageManager.getPattern(T.to.toString()),{width:X,height:se}=I.imageManager.getPixelSize(),K=Math.pow(2,R.tileID.overscaledZ),oe=R.tileSize*Math.pow(2,I.transform.tileZoom)/K,ge=oe*(R.tileID.canonical.x+R.tileID.wrap*K),_e=oe*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[X,se],u_mix:C.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/li(R,1,I.transform.tileZoom),u_pixel_coord_upper:[ge>>16,_e>>16],u_pixel_coord_lower:[65535&ge,65535&_e]}}(p,b,l,_),{u_matrix:f,u_opacity:i}),ta={fillExtrusion:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_lightpos:new u.Uniform3f(f,i.u_lightpos),u_lightintensity:new u.Uniform1f(f,i.u_lightintensity),u_lightcolor:new u.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(f,i.u_vertical_gradient),u_opacity:new u.Uniform1f(f,i.u_opacity)}),fillExtrusionPattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_lightpos:new u.Uniform3f(f,i.u_lightpos),u_lightintensity:new u.Uniform1f(f,i.u_lightintensity),u_lightcolor:new u.Uniform3f(f,i.u_lightcolor),u_vertical_gradient:new u.Uniform1f(f,i.u_vertical_gradient),u_height_factor:new u.Uniform1f(f,i.u_height_factor),u_image:new u.Uniform1i(f,i.u_image),u_texsize:new u.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade),u_opacity:new u.Uniform1f(f,i.u_opacity)}),fill:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),fillPattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_image:new u.Uniform1i(f,i.u_image),u_texsize:new u.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade)}),fillOutline:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_world:new u.Uniform2f(f,i.u_world)}),fillOutlinePattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_world:new u.Uniform2f(f,i.u_world),u_image:new u.Uniform1i(f,i.u_image),u_texsize:new u.Uniform2f(f,i.u_texsize),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade)}),circle:(f,i)=>({u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_scale_with_map:new u.Uniform1i(f,i.u_scale_with_map),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_extrude_scale:new u.Uniform2f(f,i.u_extrude_scale),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),collisionBox:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pixels_to_tile_units:new u.Uniform1f(f,i.u_pixels_to_tile_units),u_extrude_scale:new u.Uniform2f(f,i.u_extrude_scale),u_overscale_factor:new u.Uniform1f(f,i.u_overscale_factor)}),collisionCircle:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_inv_matrix:new u.UniformMatrix4f(f,i.u_inv_matrix),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_viewport_size:new u.Uniform2f(f,i.u_viewport_size)}),debug:(f,i)=>({u_color:new u.UniformColor(f,i.u_color),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_overlay:new u.Uniform1i(f,i.u_overlay),u_overlay_scale:new u.Uniform1f(f,i.u_overlay_scale)}),clippingMask:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),heatmap:(f,i)=>({u_extrude_scale:new u.Uniform1f(f,i.u_extrude_scale),u_intensity:new u.Uniform1f(f,i.u_intensity),u_matrix:new u.UniformMatrix4f(f,i.u_matrix)}),heatmapTexture:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_world:new u.Uniform2f(f,i.u_world),u_image:new u.Uniform1i(f,i.u_image),u_color_ramp:new u.Uniform1i(f,i.u_color_ramp),u_opacity:new u.Uniform1f(f,i.u_opacity)}),hillshade:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_image:new u.Uniform1i(f,i.u_image),u_latrange:new u.Uniform2f(f,i.u_latrange),u_light:new u.Uniform2f(f,i.u_light),u_shadow:new u.UniformColor(f,i.u_shadow),u_highlight:new u.UniformColor(f,i.u_highlight),u_accent:new u.UniformColor(f,i.u_accent)}),hillshadePrepare:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_image:new u.Uniform1i(f,i.u_image),u_dimension:new u.Uniform2f(f,i.u_dimension),u_zoom:new u.Uniform1f(f,i.u_zoom),u_unpack:new u.Uniform4f(f,i.u_unpack)}),line:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels)}),lineGradient:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels),u_image:new u.Uniform1i(f,i.u_image),u_image_height:new u.Uniform1f(f,i.u_image_height)}),linePattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_texsize:new u.Uniform2f(f,i.u_texsize),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_image:new u.Uniform1i(f,i.u_image),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels),u_scale:new u.Uniform3f(f,i.u_scale),u_fade:new u.Uniform1f(f,i.u_fade)}),lineSDF:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_ratio:new u.Uniform1f(f,i.u_ratio),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_units_to_pixels:new u.Uniform2f(f,i.u_units_to_pixels),u_patternscale_a:new u.Uniform2f(f,i.u_patternscale_a),u_patternscale_b:new u.Uniform2f(f,i.u_patternscale_b),u_sdfgamma:new u.Uniform1f(f,i.u_sdfgamma),u_image:new u.Uniform1i(f,i.u_image),u_tex_y_a:new u.Uniform1f(f,i.u_tex_y_a),u_tex_y_b:new u.Uniform1f(f,i.u_tex_y_b),u_mix:new u.Uniform1f(f,i.u_mix)}),raster:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_tl_parent:new u.Uniform2f(f,i.u_tl_parent),u_scale_parent:new u.Uniform1f(f,i.u_scale_parent),u_buffer_scale:new u.Uniform1f(f,i.u_buffer_scale),u_fade_t:new u.Uniform1f(f,i.u_fade_t),u_opacity:new u.Uniform1f(f,i.u_opacity),u_image0:new u.Uniform1i(f,i.u_image0),u_image1:new u.Uniform1i(f,i.u_image1),u_brightness_low:new u.Uniform1f(f,i.u_brightness_low),u_brightness_high:new u.Uniform1f(f,i.u_brightness_high),u_saturation_factor:new u.Uniform1f(f,i.u_saturation_factor),u_contrast_factor:new u.Uniform1f(f,i.u_contrast_factor),u_spin_weights:new u.Uniform3f(f,i.u_spin_weights)}),symbolIcon:(f,i)=>({u_is_size_zoom_constant:new u.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(f,i.u_size_t),u_size:new u.Uniform1f(f,i.u_size),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(f,i.u_pitch),u_rotate_symbol:new u.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(f,i.u_fade_change),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new u.Uniform1i(f,i.u_is_text),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_texsize:new u.Uniform2f(f,i.u_texsize),u_texture:new u.Uniform1i(f,i.u_texture)}),symbolSDF:(f,i)=>({u_is_size_zoom_constant:new u.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(f,i.u_size_t),u_size:new u.Uniform1f(f,i.u_size),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(f,i.u_pitch),u_rotate_symbol:new u.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(f,i.u_fade_change),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new u.Uniform1i(f,i.u_is_text),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_texsize:new u.Uniform2f(f,i.u_texsize),u_texture:new u.Uniform1i(f,i.u_texture),u_gamma_scale:new u.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(f,i.u_is_halo)}),symbolTextAndIcon:(f,i)=>({u_is_size_zoom_constant:new u.Uniform1i(f,i.u_is_size_zoom_constant),u_is_size_feature_constant:new u.Uniform1i(f,i.u_is_size_feature_constant),u_size_t:new u.Uniform1f(f,i.u_size_t),u_size:new u.Uniform1f(f,i.u_size),u_camera_to_center_distance:new u.Uniform1f(f,i.u_camera_to_center_distance),u_pitch:new u.Uniform1f(f,i.u_pitch),u_rotate_symbol:new u.Uniform1i(f,i.u_rotate_symbol),u_aspect_ratio:new u.Uniform1f(f,i.u_aspect_ratio),u_fade_change:new u.Uniform1f(f,i.u_fade_change),u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_label_plane_matrix:new u.UniformMatrix4f(f,i.u_label_plane_matrix),u_coord_matrix:new u.UniformMatrix4f(f,i.u_coord_matrix),u_is_text:new u.Uniform1i(f,i.u_is_text),u_pitch_with_map:new u.Uniform1i(f,i.u_pitch_with_map),u_texsize:new u.Uniform2f(f,i.u_texsize),u_texsize_icon:new u.Uniform2f(f,i.u_texsize_icon),u_texture:new u.Uniform1i(f,i.u_texture),u_texture_icon:new u.Uniform1i(f,i.u_texture_icon),u_gamma_scale:new u.Uniform1f(f,i.u_gamma_scale),u_device_pixel_ratio:new u.Uniform1f(f,i.u_device_pixel_ratio),u_is_halo:new u.Uniform1i(f,i.u_is_halo)}),background:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_opacity:new u.Uniform1f(f,i.u_opacity),u_color:new u.UniformColor(f,i.u_color)}),backgroundPattern:(f,i)=>({u_matrix:new u.UniformMatrix4f(f,i.u_matrix),u_opacity:new u.Uniform1f(f,i.u_opacity),u_image:new u.Uniform1i(f,i.u_image),u_pattern_tl_a:new u.Uniform2f(f,i.u_pattern_tl_a),u_pattern_br_a:new u.Uniform2f(f,i.u_pattern_br_a),u_pattern_tl_b:new u.Uniform2f(f,i.u_pattern_tl_b),u_pattern_br_b:new u.Uniform2f(f,i.u_pattern_br_b),u_texsize:new u.Uniform2f(f,i.u_texsize),u_mix:new u.Uniform1f(f,i.u_mix),u_pattern_size_a:new u.Uniform2f(f,i.u_pattern_size_a),u_pattern_size_b:new u.Uniform2f(f,i.u_pattern_size_b),u_scale_a:new u.Uniform1f(f,i.u_scale_a),u_scale_b:new u.Uniform1f(f,i.u_scale_b),u_pixel_coord_upper:new u.Uniform2f(f,i.u_pixel_coord_upper),u_pixel_coord_lower:new u.Uniform2f(f,i.u_pixel_coord_lower),u_tile_units_to_pixels:new u.Uniform1f(f,i.u_tile_units_to_pixels)})};class po{constructor(i,l,p){this.context=i;const _=i.gl;this.buffer=_.createBuffer(),this.dynamicDraw=Boolean(p),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const na={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Is{constructor(i,l,p,_){this.length=l.length,this.attributes=p,this.itemSize=l.bytesPerElement,this.dynamicDraw=_,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,l){for(let p=0;p<this.attributes.length;p++){const _=l.attributes[this.attributes[p].name];_!==void 0&&i.enableVertexAttribArray(_)}}setVertexAttribPointers(i,l,p){for(let _=0;_<this.attributes.length;_++){const b=this.attributes[_],T=l.attributes[b.name];T!==void 0&&i.vertexAttribPointer(T,b.components,i[na[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class es extends Mt{getDefault(){return u.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class zs extends Mt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class ia extends Mt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ml extends Mt{getDefault(){return[!0,!0,!0,!0]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Li extends Mt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Ll extends Mt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ra extends Mt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const l=this.current;(i.func!==l.func||i.ref!==l.ref||i.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class nn extends Mt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Dl extends Mt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ji extends Mt{getDefault(){return[0,1]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Lo extends Mt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=i,this.dirty=!1}}class Va extends Mt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Rl extends Mt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.BLEND):l.disable(l.BLEND),this.current=i,this.dirty=!1}}class As extends Mt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class bu extends Mt{getDefault(){return u.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Bl extends Mt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ms extends Mt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=i,this.dirty=!1}}class zc extends Mt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Fl extends Mt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ac extends Mt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Wr extends Mt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Mc extends Mt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Su extends Mt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class qr extends Mt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class $a extends Mt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class ts extends Mt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Eu extends Mt{getDefault(){return null}set(i){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Tu extends Mt{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class oa extends Mt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ns extends Mt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ol extends Mt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Do extends Mt{constructor(i,l){super(i),this.context=i,this.parent=l}getDefault(){return null}}class fo extends Do{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ro extends Do{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Nl{constructor(i,l,p,_){this.context=i,this.width=l,this.height=p;const b=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new fo(i,b),_&&(this.depthAttachment=new Ro(i,b))}destroy(){const i=this.context.gl,l=this.colorAttachment.get();if(l&&i.deleteTexture(l),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class It{constructor(i,l,p){this.blendFunction=i,this.blendColor=l,this.mask=p}}It.Replace=[1,0],It.disabled=new It(It.Replace,u.Color.transparent,[!1,!1,!1,!1]),It.unblended=new It(It.Replace,u.Color.transparent,[!0,!0,!0,!0]),It.alphaBlended=new It([1,771],u.Color.transparent,[!0,!0,!0,!0]);class pr{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new es(this),this.clearDepth=new zs(this),this.clearStencil=new ia(this),this.colorMask=new Ml(this),this.depthMask=new Li(this),this.stencilMask=new Ll(this),this.stencilFunc=new ra(this),this.stencilOp=new nn(this),this.stencilTest=new Dl(this),this.depthRange=new Ji(this),this.depthTest=new Lo(this),this.depthFunc=new Va(this),this.blend=new Rl(this),this.blendFunc=new As(this),this.blendColor=new bu(this),this.blendEquation=new Bl(this),this.cullFace=new Ms(this),this.cullFaceSide=new zc(this),this.frontFace=new Fl(this),this.program=new Ac(this),this.activeTexture=new Wr(this),this.viewport=new Mc(this),this.bindFramebuffer=new Su(this),this.bindRenderbuffer=new qr(this),this.bindTexture=new $a(this),this.bindVertexBuffer=new ts(this),this.bindElementBuffer=new Eu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Tu(this),this.pixelStoreUnpack=new oa(this),this.pixelStoreUnpackPremultiplyAlpha=new ns(this),this.pixelStoreUnpackFlipY=new Ol(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,l){return new po(this,i,l)}createVertexBuffer(i,l,p){return new Is(this,i,l,p)}createRenderbuffer(i,l,p){const _=this.gl,b=_.createRenderbuffer();return this.bindRenderbuffer.set(b),_.renderbufferStorage(_.RENDERBUFFER,i,l,p),this.bindRenderbuffer.set(null),b}createFramebuffer(i,l,p){return new Nl(this,i,l,p)}clear({color:i,depth:l}){const p=this.gl;let _=0;i&&(_|=p.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(_|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),p.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){Y(i.blendFunction,It.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class un{constructor(i,l,p){this.func=i,this.mask=l,this.range=p}}un.ReadOnly=!1,un.ReadWrite=!0,un.disabled=new un(519,un.ReadOnly,[0,1]);const Za=7680;class kn{constructor(i,l,p,_,b,T){this.test=i,this.ref=l,this.mask=p,this.fail=_,this.depthFail=b,this.pass=T}}kn.disabled=new kn({func:519,mask:0},0,0,Za,Za,Za);class Wn{constructor(i,l,p){this.enable=i,this.mode=l,this.frontFace=p}}let Ls;function sa(f,i,l,p,_,b,T){const C=f.context,I=C.gl,R=f.useProgram("collisionBox"),N=[];let Z=0,X=0;for(let ve=0;ve<p.length;ve++){const Fe=p[ve],Ie=i.getTile(Fe),Le=Ie.getBucket(l);if(!Le)continue;let Ge=Fe.posMatrix;_[0]===0&&_[1]===0||(Ge=f.translatePosMatrix(Fe.posMatrix,Ie,_,b));const Ke=T?Le.textCollisionBox:Le.iconCollisionBox,Be=Le.collisionCircleArray;if(Be.length>0){const pt=u.create(),tt=Ge;u.mul(pt,Le.placementInvProjMatrix,f.transform.glCoordMatrix),u.mul(pt,pt,Le.placementViewportMatrix),N.push({circleArray:Be,circleOffset:X,transform:tt,invTransform:pt}),Z+=Be.length/4,X=Z}Ke&&R.draw(C,I.LINES,un.disabled,kn.disabled,f.colorModeForRenderPass(),Wn.disabled,zo(Ge,f.transform,Ie),l.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,f.transform.zoom,null,null,Ke.collisionVertexBuffer)}if(!T||!N.length)return;const se=f.useProgram("collisionCircle"),K=new u.CollisionCircleLayoutArray;K.resize(4*Z),K._trim();let oe=0;for(const ve of N)for(let Fe=0;Fe<ve.circleArray.length/4;Fe++){const Ie=4*Fe,Le=ve.circleArray[Ie+0],Ge=ve.circleArray[Ie+1],Ke=ve.circleArray[Ie+2],Be=ve.circleArray[Ie+3];K.emplace(oe++,Le,Ge,Ke,Be,0),K.emplace(oe++,Le,Ge,Ke,Be,1),K.emplace(oe++,Le,Ge,Ke,Be,2),K.emplace(oe++,Le,Ge,Ke,Be,3)}(!Ls||Ls.length<2*Z)&&(Ls=function(ve){const Fe=2*ve,Ie=new u.QuadTriangleArray;Ie.resize(Fe),Ie._trim();for(let Le=0;Le<Fe;Le++){const Ge=6*Le;Ie.uint16[Ge+0]=4*Le+0,Ie.uint16[Ge+1]=4*Le+1,Ie.uint16[Ge+2]=4*Le+2,Ie.uint16[Ge+3]=4*Le+2,Ie.uint16[Ge+4]=4*Le+3,Ie.uint16[Ge+5]=4*Le+0}return Ie}(Z));const ge=C.createIndexBuffer(Ls,!0),_e=C.createVertexBuffer(K,u.collisionCircleLayout.members,!0);for(const ve of N){const Fe={u_matrix:ve.transform,u_inv_matrix:ve.invTransform,u_camera_to_center_distance:(we=f.transform).cameraToCenterDistance,u_viewport_size:[we.width,we.height]};se.draw(C,I.TRIANGLES,un.disabled,kn.disabled,f.colorModeForRenderPass(),Wn.disabled,Fe,l.id,_e,ge,u.SegmentVector.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,f.transform.zoom,null,null,null)}var we;_e.destroy(),ge.destroy()}Wn.disabled=new Wn(!1,1029,2305),Wn.backCCW=new Wn(!0,1029,2305);const Lc=u.identity(new Float32Array(16));function Ul(f,i,l,p,_,b){const{horizontalAlign:T,verticalAlign:C}=u.getAnchorAlignment(f),I=-(T-.5)*i,R=-(C-.5)*l,N=u.evaluateVariableOffset(f,p);return new u.pointGeometry((I/_+N[0])*b,(R/_+N[1])*b)}function aa(f,i,l,p,_,b,T,C,I,R){const N=f.text.placedSymbolArray,Z=f.text.dynamicLayoutVertexArray,X=f.icon.dynamicLayoutVertexArray,se={};Z.clear();for(let K=0;K<N.length;K++){const oe=N.get(K),ge=f.allowVerticalPlacement&&!oe.placedOrientation,_e=oe.hidden||!oe.crossTileID||ge?null:p[oe.crossTileID];if(_e){const we=new u.pointGeometry(oe.anchorX,oe.anchorY),ve=gn(we,l?T:b),Fe=He(_.cameraToCenterDistance,ve.signedDistanceFromCamera);let Ie=u.evaluateSizeForFeature(f.textSizeData,I,oe)*Fe/u.ONE_EM;l&&(Ie*=f.tilePixelRatio/C);const{width:Le,height:Ge,anchor:Ke,textOffset:Be,textBoxScale:pt}=_e,tt=Ul(Ke,Le,Ge,Be,pt,Ie),zt=l?gn(we.add(tt),b).point:ve.point.add(i?tt.rotate(-_.angle):tt),an=f.allowVerticalPlacement&&oe.placedOrientation===u.WritingMode.vertical?Math.PI/2:0;for(let Jt=0;Jt<oe.numGlyphs;Jt++)u.addDynamicAttributes(Z,zt,an);R&&oe.associatedIconIndex>=0&&(se[oe.associatedIconIndex]={shiftedAnchor:zt,angle:an})}else ei(oe.numGlyphs,Z)}if(R){X.clear();const K=f.icon.placedSymbolArray;for(let oe=0;oe<K.length;oe++){const ge=K.get(oe);if(ge.hidden)ei(ge.numGlyphs,X);else{const _e=se[oe];if(_e)for(let we=0;we<ge.numGlyphs;we++)u.addDynamicAttributes(X,_e.shiftedAnchor,_e.angle);else ei(ge.numGlyphs,X)}}f.icon.dynamicLayoutVertexBuffer.updateData(X)}f.text.dynamicLayoutVertexBuffer.updateData(Z)}function ja(f,i,l){return l.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Zi(f,i,l,p,_,b,T,C,I,R,N,Z){const X=f.context,se=X.gl,K=f.transform,oe=C==="map",ge=I==="map",_e=C!=="viewport"&&l.layout.get("symbol-placement")!=="point",we=oe&&!ge&&!_e,ve=!l.layout.get("symbol-sort-key").isConstant();let Fe=!1;const Ie=f.depthModeForSublayer(0,un.ReadOnly),Le=l.layout.get("text-variable-anchor"),Ge=[];for(const Ke of p){const Be=i.getTile(Ke),pt=Be.getBucket(l);if(!pt)continue;const tt=_?pt.text:pt.icon;if(!tt||!tt.segments.get().length)continue;const zt=tt.programConfigurations.get(l.id),an=_||pt.sdfIcons,Jt=_?pt.textSizeData:pt.iconSizeData,rn=ge||K.pitch!==0,Yn=f.useProgram(ja(an,_,pt),zt),Ot=u.evaluateSizeForZoom(Jt,K.zoom);let cn,En,Ri,Lr,Jr=[0,0],Qr=null;if(_){if(En=Be.glyphAtlasTexture,Ri=se.LINEAR,cn=Be.glyphAtlasTexture.size,pt.iconsInText){Jr=Be.imageAtlasTexture.size,Qr=Be.imageAtlasTexture;const Oo=Jt.kind==="composite"||Jt.kind==="camera";Lr=rn||f.options.rotating||f.options.zooming||Oo?se.LINEAR:se.NEAREST}}else{const Oo=l.layout.get("icon-size").constantOr(0)!==1||pt.iconsNeedLinear;En=Be.imageAtlasTexture,Ri=an||f.options.rotating||f.options.zooming||Oo||rn?se.LINEAR:se.NEAREST,cn=Be.imageAtlasTexture.size}const js=li(Be,1,f.transform.zoom),gr=Gn(Ke.posMatrix,ge,oe,f.transform,js),Fo=cr(Ke.posMatrix,ge,oe,f.transform,js),ya=Le&&pt.hasTextData(),Dr=l.layout.get("icon-text-fit")!=="none"&&ya&&pt.hasIconData();if(_e){const Oo=l.layout.get("text-rotation-alignment")==="map";Lt(pt,Ke.posMatrix,f,_,gr,Fo,ge,R,Oo)}const hn=f.translatePosMatrix(Ke.posMatrix,Be,b,T),yn=_e||_&&Le||Dr?Lc:gr,mi=f.translatePosMatrix(Fo,Be,b,T,!0),tr=an&&l.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Un;Un=an?pt.iconsInText?wu(Jt.kind,Ot,we,ge,f,hn,yn,mi,cn,Jr):bn(Jt.kind,Ot,we,ge,f,hn,yn,mi,_,cn,!0):Yi(Jt.kind,Ot,we,ge,f,hn,yn,mi,_,cn);const va={program:Yn,buffers:tt,uniformValues:Un,atlasTexture:En,atlasTextureIcon:Qr,atlasInterpolation:Ri,atlasInterpolationIcon:Lr,isSDF:an,hasHalo:tr};if(ve&&pt.canOverlap){Fe=!0;const Oo=tt.segments.get();for(const Au of Oo)Ge.push({segments:new u.SegmentVector([Au]),sortKey:Au.sortKey,state:va})}else Ge.push({segments:tt.segments,sortKey:0,state:va})}Fe&&Ge.sort((Ke,Be)=>Ke.sortKey-Be.sortKey);for(const Ke of Ge){const Be=Ke.state;if(X.activeTexture.set(se.TEXTURE0),Be.atlasTexture.bind(Be.atlasInterpolation,se.CLAMP_TO_EDGE),Be.atlasTextureIcon&&(X.activeTexture.set(se.TEXTURE1),Be.atlasTextureIcon&&Be.atlasTextureIcon.bind(Be.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),Be.isSDF){const pt=Be.uniformValues;Be.hasHalo&&(pt.u_is_halo=1,mo(Be.buffers,Ke.segments,l,f,Be.program,Ie,N,Z,pt)),pt.u_is_halo=0}mo(Be.buffers,Ke.segments,l,f,Be.program,Ie,N,Z,Be.uniformValues)}}function mo(f,i,l,p,_,b,T,C,I){const R=p.context;_.draw(R,R.gl.TRIANGLES,b,T,C,Wn.disabled,I,l.id,f.layoutVertexBuffer,f.indexBuffer,i,l.paint,p.transform.zoom,f.programConfigurations.get(l.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function Vl(f,i,l,p,_,b,T){const C=f.context.gl,I=l.paint.get("fill-pattern"),R=I&&I.constantOr(1),N=l.getCrossfadeParameters();let Z,X,se,K,oe;T?(X=R&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=C.LINES):(X=R?"fillPattern":"fill",Z=C.TRIANGLES);for(const ge of p){const _e=i.getTile(ge);if(R&&!_e.patternsLoaded())continue;const we=_e.getBucket(l);if(!we)continue;const ve=we.programConfigurations.get(l.id),Fe=f.useProgram(X,ve);R&&(f.context.activeTexture.set(C.TEXTURE0),_e.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),ve.updatePaintBuffers(N));const Ie=I.constantOr(null);if(Ie&&_e.imageAtlas){const Ge=_e.imageAtlas,Ke=Ge.patternPositions[Ie.to.toString()],Be=Ge.patternPositions[Ie.from.toString()];Ke&&Be&&ve.setConstantPatternPositions(Ke,Be)}const Le=f.translatePosMatrix(ge.posMatrix,_e,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(T){K=we.indexBuffer2,oe=we.segments2;const Ge=[C.drawingBufferWidth,C.drawingBufferHeight];se=X==="fillOutlinePattern"&&R?Io(Le,f,N,_e,Ge):Xn(Le,Ge)}else K=we.indexBuffer,oe=we.segments,se=R?co(Le,f,N,_e):Es(Le);Fe.draw(f.context,Z,_,f.stencilModeForClipping(ge),b,Wn.disabled,se,l.id,we.layoutVertexBuffer,K,oe,l.paint,f.transform.zoom,ve)}}function zr(f,i,l,p,_,b,T){const C=f.context,I=C.gl,R=l.paint.get("fill-extrusion-pattern"),N=R.constantOr(1),Z=l.getCrossfadeParameters(),X=l.paint.get("fill-extrusion-opacity");for(const se of p){const K=i.getTile(se),oe=K.getBucket(l);if(!oe)continue;const ge=oe.programConfigurations.get(l.id),_e=f.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ge);N&&(f.context.activeTexture.set(I.TEXTURE0),K.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ge.updatePaintBuffers(Z));const we=R.constantOr(null);if(we&&K.imageAtlas){const Le=K.imageAtlas,Ge=Le.patternPositions[we.to.toString()],Ke=Le.patternPositions[we.from.toString()];Ge&&Ke&&ge.setConstantPatternPositions(Ge,Ke)}const ve=f.translatePosMatrix(se.posMatrix,K,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Fe=l.paint.get("fill-extrusion-vertical-gradient"),Ie=N?zl(ve,f,Fe,X,se,Z,K):Ki(ve,f,Fe,X);_e.draw(C,C.gl.TRIANGLES,_,b,T,Wn.backCCW,Ie,l.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,l.paint,f.transform.zoom,ge)}}function Ga(f,i,l,p,_,b){const T=f.context,C=T.gl,I=i.fbo;if(!I)return;const R=f.useProgram("hillshade");T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,I.colorAttachment.get());const N=((Z,X,se)=>{const K=se.paint.get("hillshade-shadow-color"),oe=se.paint.get("hillshade-highlight-color"),ge=se.paint.get("hillshade-accent-color");let _e=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(_e-=Z.transform.angle);const we=!Z.options.moving;return{u_matrix:Z.transform.calculatePosMatrix(X.tileID.toUnwrapped(),we),u_image:0,u_latrange:Ps(0,X.tileID),u_light:[se.paint.get("hillshade-exaggeration"),_e],u_shadow:K,u_highlight:oe,u_accent:ge}})(f,i,l);R.draw(T,C.TRIANGLES,p,_,b,Wn.disabled,N,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function ki(f,i,l,p,_,b){const T=f.context,C=T.gl,I=i.dem;if(I&&I.data){const R=I.dim,N=I.stride,Z=I.getPixels();if(T.activeTexture.set(C.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(N),i.demTexture){const se=i.demTexture;se.update(Z,{premultiply:!1}),se.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else i.demTexture=new te(T,Z,C.RGBA,{premultiply:!1}),i.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);T.activeTexture.set(C.TEXTURE0);let X=i.fbo;if(!X){const se=new te(T,{width:R,height:R,data:null},C.RGBA);se.bind(C.LINEAR,C.CLAMP_TO_EDGE),X=i.fbo=T.createFramebuffer(R,R,!0),X.colorAttachment.set(se.texture)}T.bindFramebuffer.set(X.framebuffer),T.viewport.set([0,0,R,R]),f.useProgram("hillshadePrepare").draw(T,C.TRIANGLES,p,_,b,Wn.disabled,((se,K)=>{const oe=K.stride,ge=u.create();return u.ortho(ge,0,u.EXTENT,-u.EXTENT,0,0,1),u.translate(ge,ge,[0,-u.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[oe,oe],u_zoom:se.overscaledZ,u_unpack:K.getUnpackVector()}})(i.tileID,I),l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Pu(f,i,l,p,_){const b=p.paint.get("raster-fade-duration");if(b>0){const T=u.exported.now(),C=(T-f.timeAdded)/b,I=i?(T-i.timeAdded)/b:-1,R=l.getSource(),N=_.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),Z=!i||Math.abs(i.tileID.overscaledZ-N)>Math.abs(f.tileID.overscaledZ-N),X=Z&&f.refreshedUponExpiration?1:u.clamp(Z?C:1-I,0,1);return f.refreshedUponExpiration&&C>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}const Ds=new u.Color(1,0,0,1),$l=new u.Color(0,1,0,1),go=new u.Color(0,0,1,1),Wa=new u.Color(1,0,1,1),Hr=new u.Color(0,1,1,1);function la(f,i,l,p){Rs(f,0,i+l/2,f.transform.width,l,p)}function qa(f,i,l,p){Rs(f,i-l/2,0,l,f.transform.height,p)}function Rs(f,i,l,p,_,b){const T=f.context,C=T.gl;C.enable(C.SCISSOR_TEST),C.scissor(i*f.pixelRatio,l*f.pixelRatio,p*f.pixelRatio,_*f.pixelRatio),T.clear({color:b}),C.disable(C.SCISSOR_TEST)}function ku(f,i,l){const p=f.context,_=p.gl,b=l.posMatrix,T=f.useProgram("debug"),C=un.disabled,I=kn.disabled,R=f.colorModeForRenderPass(),N="$debug";p.activeTexture.set(_.TEXTURE0),f.emptyTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),T.draw(p,_.LINE_STRIP,C,I,R,Wn.disabled,Ao(b,u.Color.red),N,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments);const Z=i.getTileByID(l.key).latestRawTileData,X=Math.floor((Z&&Z.byteLength||0)/1024),se=i.getTile(l).tileSize,K=512/Math.min(se,512)*(l.overscaledZ/f.transform.zoom)*.5;let oe=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(oe+=` => ${l.overscaledZ}`),function(ge,_e){ge.initDebugOverlayCanvas();const we=ge.debugOverlayCanvas,ve=ge.context.gl,Fe=ge.debugOverlayCanvas.getContext("2d");Fe.clearRect(0,0,we.width,we.height),Fe.shadowColor="white",Fe.shadowBlur=2,Fe.lineWidth=1.5,Fe.strokeStyle="white",Fe.textBaseline="top",Fe.font="bold 36px Open Sans, sans-serif",Fe.fillText(_e,5,5),Fe.strokeText(_e,5,5),ge.debugOverlayTexture.update(we),ge.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(f,`${oe} ${X}kb`),T.draw(p,_.TRIANGLES,C,I,It.alphaBlended,Wn.disabled,Ao(b,u.Color.transparent,K),N,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments)}const Qi={symbol:function(f,i,l,p,_){if(f.renderPass!=="translucent")return;const b=kn.disabled,T=f.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(C,I,R,N,Z,X,se){const K=I.transform,oe=Z==="map",ge=X==="map";for(const _e of C){const we=N.getTile(_e),ve=we.getBucket(R);if(!ve||!ve.text||!ve.text.segments.get().length)continue;const Fe=u.evaluateSizeForZoom(ve.textSizeData,K.zoom),Ie=li(we,1,I.transform.zoom),Le=Gn(_e.posMatrix,ge,oe,I.transform,Ie),Ge=R.layout.get("icon-text-fit")!=="none"&&ve.hasIconData();if(Fe){const Ke=Math.pow(2,K.zoom-we.tileID.overscaledZ);aa(ve,oe,ge,se,K,Le,_e.posMatrix,Ke,Fe,Ge)}}}(p,f,l,i,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),_),l.paint.get("icon-opacity").constantOr(1)!==0&&Zi(f,i,l,p,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),b,T),l.paint.get("text-opacity").constantOr(1)!==0&&Zi(f,i,l,p,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),b,T),i.map.showCollisionBoxes&&(sa(f,i,l,p,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),sa(f,i,l,p,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,l,p){if(f.renderPass!=="translucent")return;const _=l.paint.get("circle-opacity"),b=l.paint.get("circle-stroke-width"),T=l.paint.get("circle-stroke-opacity"),C=!l.layout.get("circle-sort-key").isConstant();if(_.constantOr(1)===0&&(b.constantOr(1)===0||T.constantOr(1)===0))return;const I=f.context,R=I.gl,N=f.depthModeForSublayer(0,un.ReadOnly),Z=kn.disabled,X=f.colorModeForRenderPass(),se=[];for(let K=0;K<p.length;K++){const oe=p[K],ge=i.getTile(oe),_e=ge.getBucket(l);if(!_e)continue;const we=_e.programConfigurations.get(l.id),ve={programConfiguration:we,program:f.useProgram("circle",we),layoutVertexBuffer:_e.layoutVertexBuffer,indexBuffer:_e.indexBuffer,uniformValues:Ir(f,oe,ge,l)};if(C){const Fe=_e.segments.get();for(const Ie of Fe)se.push({segments:new u.SegmentVector([Ie]),sortKey:Ie.sortKey,state:ve})}else se.push({segments:_e.segments,sortKey:0,state:ve})}C&&se.sort((K,oe)=>K.sortKey-oe.sortKey);for(const K of se){const{programConfiguration:oe,program:ge,layoutVertexBuffer:_e,indexBuffer:we,uniformValues:ve}=K.state;ge.draw(I,R.TRIANGLES,N,Z,X,Wn.disabled,ve,l.id,_e,we,K.segments,l.paint,f.transform.zoom,oe)}},heatmap:function(f,i,l,p){if(l.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const _=f.context,b=_.gl,T=kn.disabled,C=new It([b.ONE,b.ONE],u.Color.transparent,[!0,!0,!0,!0]);(function(I,R,N){const Z=I.gl;I.activeTexture.set(Z.TEXTURE1),I.viewport.set([0,0,R.width/4,R.height/4]);let X=N.heatmapFbo;if(X)Z.bindTexture(Z.TEXTURE_2D,X.colorAttachment.get()),I.bindFramebuffer.set(X.framebuffer);else{const se=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,se),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),X=N.heatmapFbo=I.createFramebuffer(R.width/4,R.height/4,!1),function(K,oe,ge,_e){const we=K.gl;we.texImage2D(we.TEXTURE_2D,0,we.RGBA,oe.width/4,oe.height/4,0,we.RGBA,K.extRenderToTextureHalfFloat?K.extTextureHalfFloat.HALF_FLOAT_OES:we.UNSIGNED_BYTE,null),_e.colorAttachment.set(ge)}(I,R,se,X)}})(_,f,l),_.clear({color:u.Color.transparent});for(let I=0;I<p.length;I++){const R=p[I];if(i.hasRenderableParent(R))continue;const N=i.getTile(R),Z=N.getBucket(l);if(!Z)continue;const X=Z.programConfigurations.get(l.id),se=f.useProgram("heatmap",X),{zoom:K}=f.transform;se.draw(_,b.TRIANGLES,un.disabled,T,C,Wn.disabled,Ts(R.posMatrix,N,K,l.paint.get("heatmap-intensity")),l.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,l.paint,f.transform.zoom,X)}_.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(_,b){const T=_.context,C=T.gl,I=b.heatmapFbo;if(!I)return;T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,I.colorAttachment.get()),T.activeTexture.set(C.TEXTURE1);let R=b.colorRampTexture;R||(R=b.colorRampTexture=new te(T,b.colorRamp,C.RGBA)),R.bind(C.LINEAR,C.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(T,C.TRIANGLES,un.disabled,kn.disabled,_.colorModeForRenderPass(),Wn.disabled,((N,Z,X,se)=>{const K=u.create();u.ortho(K,0,N.width,N.height,0,0,1);const oe=N.context.gl;return{u_matrix:K,u_world:[oe.drawingBufferWidth,oe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}})(_,b),b.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,b.paint,_.transform.zoom)}(f,l))},line:function(f,i,l,p){if(f.renderPass!=="translucent")return;const _=l.paint.get("line-opacity"),b=l.paint.get("line-width");if(_.constantOr(1)===0||b.constantOr(1)===0)return;const T=f.depthModeForSublayer(0,un.ReadOnly),C=f.colorModeForRenderPass(),I=l.paint.get("line-dasharray"),R=l.paint.get("line-pattern"),N=R.constantOr(1),Z=l.paint.get("line-gradient"),X=l.getCrossfadeParameters(),se=N?"linePattern":I?"lineSDF":Z?"lineGradient":"line",K=f.context,oe=K.gl;let ge=!0;for(const _e of p){const we=i.getTile(_e);if(N&&!we.patternsLoaded())continue;const ve=we.getBucket(l);if(!ve)continue;const Fe=ve.programConfigurations.get(l.id),Ie=f.context.program.get(),Le=f.useProgram(se,Fe),Ge=ge||Le.program!==Ie,Ke=R.constantOr(null);if(Ke&&we.imageAtlas){const pt=we.imageAtlas,tt=pt.patternPositions[Ke.to.toString()],zt=pt.patternPositions[Ke.from.toString()];tt&&zt&&Fe.setConstantPatternPositions(tt,zt)}const Be=N?Qo(f,we,l,X):I?Nn(f,we,l,I,X):Z?ks(f,we,l,ve.lineClipsArray.length):Mo(f,we,l);if(N)K.activeTexture.set(oe.TEXTURE0),we.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),Fe.updatePaintBuffers(X);else if(I&&(Ge||f.lineAtlas.dirty))K.activeTexture.set(oe.TEXTURE0),f.lineAtlas.bind(K);else if(Z){const pt=ve.gradients[l.id];let tt=pt.texture;if(l.gradientVersion!==pt.version){let zt=256;if(l.stepInterpolant){const an=i.getSource().maxzoom,Jt=_e.canonical.z===an?Math.ceil(1<<f.transform.maxZoom-_e.canonical.z):1;zt=u.clamp(u.nextPowerOfTwo(ve.maxLineLength/u.EXTENT*1024*Jt),256,K.maxTextureSize)}pt.gradient=u.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:zt,image:pt.gradient||void 0,clips:ve.lineClipsArray}),pt.texture?pt.texture.update(pt.gradient):pt.texture=new te(K,pt.gradient,oe.RGBA),pt.version=l.gradientVersion,tt=pt.texture}K.activeTexture.set(oe.TEXTURE0),tt.bind(l.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}Le.draw(K,oe.TRIANGLES,T,f.stencilModeForClipping(_e),C,Wn.disabled,Be,l.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,l.paint,f.transform.zoom,Fe,ve.layoutVertexBuffer2),ge=!1}},fill:function(f,i,l,p){const _=l.paint.get("fill-color"),b=l.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const T=f.colorModeForRenderPass(),C=l.paint.get("fill-pattern"),I=f.opaquePassEnabledForLayer()&&!C.constantOr(1)&&_.constantOr(u.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===I){const R=f.depthModeForSublayer(1,f.renderPass==="opaque"?un.ReadWrite:un.ReadOnly);Vl(f,i,l,p,R,T,!1)}if(f.renderPass==="translucent"&&l.paint.get("fill-antialias")){const R=f.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,un.ReadOnly);Vl(f,i,l,p,R,T,!0)}},"fill-extrusion":function(f,i,l,p){const _=l.paint.get("fill-extrusion-opacity");if(_!==0&&f.renderPass==="translucent"){const b=new un(f.context.gl.LEQUAL,un.ReadWrite,f.depthRangeFor3D);if(_!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))zr(f,i,l,p,b,kn.disabled,It.disabled),zr(f,i,l,p,b,f.stencilModeFor3D(),f.colorModeForRenderPass());else{const T=f.colorModeForRenderPass();zr(f,i,l,p,b,kn.disabled,T)}}},hillshade:function(f,i,l,p){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const _=f.context,b=f.depthModeForSublayer(0,un.ReadOnly),T=f.colorModeForRenderPass(),[C,I]=f.renderPass==="translucent"?f.stencilConfigForOverlap(p):[{},p];for(const R of I){const N=i.getTile(R);N.needsHillshadePrepare&&f.renderPass==="offscreen"?ki(f,N,l,b,kn.disabled,T):f.renderPass==="translucent"&&Ga(f,N,l,b,C[R.overscaledZ],T)}_.viewport.set([0,0,f.width,f.height])},raster:function(f,i,l,p){if(f.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!p.length)return;const _=f.context,b=_.gl,T=i.getSource(),C=f.useProgram("raster"),I=f.colorModeForRenderPass(),[R,N]=T instanceof fn?[{},p]:f.stencilConfigForOverlap(p),Z=N[N.length-1].overscaledZ,X=!f.options.moving;for(const se of N){const K=f.depthModeForSublayer(se.overscaledZ-Z,l.paint.get("raster-opacity")===1?un.ReadWrite:un.ReadOnly,b.LESS),oe=i.getTile(se),ge=f.transform.calculatePosMatrix(se.toUnwrapped(),X);oe.registerFadeDuration(l.paint.get("raster-fade-duration"));const _e=i.findLoadedParent(se,0),we=Pu(oe,_e,i,l,f.transform);let ve,Fe;const Ie=l.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;_.activeTexture.set(b.TEXTURE0),oe.texture.bind(Ie,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),_.activeTexture.set(b.TEXTURE1),_e?(_e.texture.bind(Ie,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),ve=Math.pow(2,_e.tileID.overscaledZ-oe.tileID.overscaledZ),Fe=[oe.tileID.canonical.x*ve%1,oe.tileID.canonical.y*ve%1]):oe.texture.bind(Ie,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);const Le=xu(ge,Fe||[0,0],ve||1,we,l);T instanceof fn?C.draw(_,b.TRIANGLES,K,kn.disabled,I,Wn.disabled,Le,l.id,T.boundsBuffer,f.quadTriangleIndexBuffer,T.boundsSegments):C.draw(_,b.TRIANGLES,K,R[se.overscaledZ],I,Wn.disabled,Le,l.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}},background:function(f,i,l){const p=l.paint.get("background-color"),_=l.paint.get("background-opacity");if(_===0)return;const b=f.context,T=b.gl,C=f.transform,I=C.tileSize,R=l.paint.get("background-pattern");if(f.isPatternMissing(R))return;const N=!R&&p.a===1&&_===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==N)return;const Z=kn.disabled,X=f.depthModeForSublayer(0,N==="opaque"?un.ReadWrite:un.ReadOnly),se=f.colorModeForRenderPass(),K=f.useProgram(R?"backgroundPattern":"background"),oe=C.coveringTiles({tileSize:I});R&&(b.activeTexture.set(T.TEXTURE0),f.imageManager.bind(f.context));const ge=l.getCrossfadeParameters();for(const _e of oe){const we=f.transform.calculatePosMatrix(_e.toUnwrapped()),ve=R?ea(we,_,f,R,{tileID:_e,tileSize:I},ge):Al(we,_,p);K.draw(b,T.TRIANGLES,X,Z,se,Wn.disabled,ve,l.id,f.tileExtentBuffer,f.quadTriangleIndexBuffer,f.tileExtentSegments)}},debug:function(f,i,l){for(let p=0;p<l.length;p++)ku(f,i,l[p])},custom:function(f,i,l){const p=f.context,_=l.implementation;if(f.renderPass==="offscreen"){const b=_.prerender;b&&(f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),b.call(_,p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState())}else if(f.renderPass==="translucent"){f.setCustomLayerDefaults(),p.setColorMode(f.colorModeForRenderPass()),p.setStencilMode(kn.disabled);const b=_.renderingMode==="3d"?new un(f.context.gl.LEQUAL,un.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,un.ReadOnly);p.setDepthMode(b),_.render(p.gl,f.transform.customLayerMatrix()),p.setDirty(),f.setBaseState(),p.bindFramebuffer.set(null)}}};class Zl{constructor(i,l){this.context=new pr(i),this.transform=l,this._tileTextures={},this.setup(),this.numSublayers=Fn.maxUnderzooming+Fn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ft,this.gpuTimers={}}resize(i,l,p){if(this.width=i*p,this.height=l*p,this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const i=this.context,l=new u.PosArray;l.emplaceBack(0,0),l.emplaceBack(u.EXTENT,0),l.emplaceBack(0,u.EXTENT),l.emplaceBack(u.EXTENT,u.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(l,ko.members),this.tileExtentSegments=u.SegmentVector.simpleSegment(0,0,4,2);const p=new u.PosArray;p.emplaceBack(0,0),p.emplaceBack(u.EXTENT,0),p.emplaceBack(0,u.EXTENT),p.emplaceBack(u.EXTENT,u.EXTENT),this.debugBuffer=i.createVertexBuffer(p,ko.members),this.debugSegments=u.SegmentVector.simpleSegment(0,0,4,5);const _=new u.RasterBoundsArray;_.emplaceBack(0,0,0,0),_.emplaceBack(u.EXTENT,0,u.EXTENT,0),_.emplaceBack(0,u.EXTENT,0,u.EXTENT),_.emplaceBack(u.EXTENT,u.EXTENT,u.EXTENT,u.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(_,jt.members),this.rasterBoundsSegments=u.SegmentVector.simpleSegment(0,0,4,2);const b=new u.PosArray;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(b,ko.members),this.viewportSegments=u.SegmentVector.simpleSegment(0,0,4,2);const T=new u.LineStripIndexArray;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(T);const C=new u.TriangleIndexArray;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(C),this.emptyTexture=new te(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const I=this.context.gl;this.stencilClearMode=new kn({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const i=this.context,l=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.create();u.ortho(p,0,this.width,this.height,0,0,1),u.scale(p,p,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,l.TRIANGLES,un.disabled,this.stencilClearMode,It.disabled,Wn.disabled,ho(p),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,l){if(this.currentStencilSource===i.source||!i.isTileClipped()||!l||!l.length)return;this.currentStencilSource=i.source;const p=this.context,_=p.gl;this.nextStencilID+l.length>256&&this.clearStencil(),p.setColorMode(It.disabled),p.setDepthMode(un.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of l){const C=this._tileClippingMaskIDs[T.key]=this.nextStencilID++;b.draw(p,_.TRIANGLES,un.disabled,new kn({func:_.ALWAYS,mask:0},C,255,_.KEEP,_.KEEP,_.REPLACE),It.disabled,Wn.disabled,ho(T.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,l=this.context.gl;return new kn({func:l.NOTEQUAL,mask:255},i,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(i){const l=this.context.gl;return new kn({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(i){const l=this.context.gl,p=i.sort((T,C)=>C.overscaledZ-T.overscaledZ),_=p[p.length-1].overscaledZ,b=p[0].overscaledZ-_+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const T={};for(let C=0;C<b;C++)T[C+_]=new kn({func:l.GEQUAL,mask:255},C+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=b,[T,p]}return[{[_]:kn.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new It([i.CONSTANT_COLOR,i.ONE],new u.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?It.unblended:It.alphaBlended}depthModeForSublayer(i,l,p){if(!this.opaquePassEnabledForLayer())return un.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new un(p||this.context.gl.LEQUAL,l,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,l){this.style=i,this.options=l,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(u.exported.now()),this.imageManager.beginFrame();const p=this.style._order,_=this.style.sourceCaches;for(const I in _){const R=_[I];R.used&&R.prepare(this.context)}const b={},T={},C={};for(const I in _){const R=_[I];b[I]=R.getVisibleCoordinates(),T[I]=b[I].slice().reverse(),C[I]=R.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<p.length;I++)if(this.style._layers[p[I]].is3D()){this.opaquePassCutoff=I;break}this.renderPass="offscreen";for(const I of p){const R=this.style._layers[I];if(!R.hasOffscreenPass()||R.isHidden(this.transform.zoom))continue;const N=T[R.source];(R.type==="custom"||N.length)&&this.renderLayer(this,_[R.source],R,N)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?u.Color.black:u.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[p[this.currentLayer]],R=_[I.source],N=b[I.source];this._renderTileClippingMasks(I,N),this.renderLayer(this,R,I,N)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const I=this.style._layers[p[this.currentLayer]],R=_[I.source],N=(I.type==="symbol"?C:T)[I.source];this._renderTileClippingMasks(I,b[I.source]),this.renderLayer(this,R,I,N)}if(this.options.showTileBoundaries){let I,R;Object.values(this.style._layers).forEach(N=>{N.source&&!N.isHidden(this.transform.zoom)&&(N.source!==(R&&R.id)&&(R=this.style.sourceCaches[N.source]),(!I||I.getSource().maxzoom<R.getSource().maxzoom)&&(I=R))}),I&&Qi.debug(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const R=I.transform.padding;la(I,I.transform.height-(R.top||0),3,Ds),la(I,R.bottom||0,3,$l),qa(I,R.left||0,3,go),qa(I,I.transform.width-(R.right||0),3,Wa);const N=I.transform.centerPoint;(function(Z,X,se,K){Rs(Z,X-1,se-10,2,20,K),Rs(Z,X-10,se-1,20,2,K)})(I,N.x,I.transform.height-N.y,Hr)}(this),this.context.setDefault()}renderLayer(i,l,p,_){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||_.length)&&(this.id=p.id,this.gpuTimingStart(p),Qi[p.type](i,l,p,_,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let p=this.gpuTimers[i.id];p||(p=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),p.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,p.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const l={};for(const p in i){const _=i[p],b=this.context.extTimerQuery,T=b.getQueryObjectEXT(_.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(_.query),l[p]=T}return l}translatePosMatrix(i,l,p,_,b){if(!p[0]&&!p[1])return i;const T=b?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(T){const R=Math.sin(T),N=Math.cos(T);p=[p[0]*N-p[1]*R,p[0]*R+p[1]*N]}const C=[b?p[0]:li(l,p[0],this.transform.zoom),b?p[1]:li(l,p[1],this.transform.zoom),0],I=new Float32Array(16);return u.translate(I,i,C),I}saveTileTexture(i){const l=this._tileTextures[i.size[0]];l?l.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const l=this._tileTextures[i];return l&&l.length>0?l.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const l=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!l||!p}useProgram(i,l){this.cache=this.cache||{};const p=`${i}${l?l.cacheKey:""}${this._showOverdrawInspector?"/overdraw":""}`;return this.cache[p]||(this.cache[p]=new Il(this.context,i,Co[i],l,ta[i],this._showOverdrawInspector)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new te(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class _o{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,p){const _=Math.pow(2,p),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>u.transformMat4([],C,i)).map(C=>u.scale$1([],C,1/C[3]/l*_)),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const I=function(X,se){var K=se[0],oe=se[1],ge=se[2],_e=K*K+oe*oe+ge*ge;return _e>0&&(_e=1/Math.sqrt(_e)),X[0]=se[0]*_e,X[1]=se[1]*_e,X[2]=se[2]*_e,X}([],function(X,se,K){var oe=se[0],ge=se[1],_e=se[2],we=K[0],ve=K[1],Fe=K[2];return X[0]=ge*Fe-_e*ve,X[1]=_e*we-oe*Fe,X[2]=oe*ve-ge*we,X}([],ie([],b[C[0]],b[C[1]]),ie([],b[C[2]],b[C[1]]))),R=-((N=I)[0]*(Z=b[C[1]])[0]+N[1]*Z[1]+N[2]*Z[2]);var N,Z;return I.concat(R)});return new _o(b,T)}}class Ha{constructor(i,l){this.min=i,this.max=l,this.center=function(p,_,b){return p[0]=.5*_[0],p[1]=.5*_[1],p[2]=.5*_[2],p}([],function(p,_,b){return p[0]=_[0]+b[0],p[1]=_[1]+b[1],p[2]=_[2]+b[2],p}([],this.min,this.max))}quadrant(i){const l=[i%2==0,i<2],p=me(this.min),_=me(this.max);for(let b=0;b<l.length;b++)p[b]=l[b]?this.min[b]:this.center[b],_[b]=l[b]?this.center[b]:this.max[b];return _[2]=this.max[2],new Ha(p,_)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const l=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]];let p=!0;for(let _=0;_<i.planes.length;_++){const b=i.planes[_];let T=0;for(let C=0;C<l.length;C++)u.dot(b,l[C])>=0&&T++;if(T===0)return 0;T!==l.length&&(p=!1)}if(p)return 2;for(let _=0;_<3;_++){let b=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const I=i.points[C][_]-this.min[_];b=Math.min(b,I),T=Math.max(T,I)}if(T<0||b>this.max[_]-this.min[_])return 0}return 1}}class ji{constructor(i=0,l=0,p=0,_=0){if(isNaN(i)||i<0||isNaN(l)||l<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=l,this.left=p,this.right=_}interpolate(i,l,p){return l.top!=null&&i.top!=null&&(this.top=u.number(i.top,l.top,p)),l.bottom!=null&&i.bottom!=null&&(this.bottom=u.number(i.bottom,l.bottom,p)),l.left!=null&&i.left!=null&&(this.left=u.number(i.left,l.left,p)),l.right!=null&&i.right!=null&&(this.right=u.number(i.right,l.right,p)),this}getCenter(i,l){const p=u.clamp((this.left+i-this.right)/2,0,i),_=u.clamp((this.top+l-this.bottom)/2,0,l);return new u.pointGeometry(p,_)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ji(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class is{constructor(i,l,p,_,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=i||0,this._maxZoom=l||22,this._minPitch=p==null?0:p,this._maxPitch=_==null?60:_,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ji,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new is(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const l=-u.wrap(i,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var p=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,_,b){var T=_[0],C=_[1],I=_[2],R=_[3],N=Math.sin(b),Z=Math.cos(b);p[0]=T*Z+I*N,p[1]=C*Z+R*N,p[2]=T*-N+I*Z,p[3]=C*-N+R*Z}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const l=u.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const l=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,l,p){this._unmodified=!1,this._edgeInsets.interpolate(i,l,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const l=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(i){const l=[new u.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new u.pointGeometry(0,0)),_=this.pointCoordinate(new u.pointGeometry(this.width,0)),b=this.pointCoordinate(new u.pointGeometry(this.width,this.height)),T=this.pointCoordinate(new u.pointGeometry(0,this.height)),C=Math.floor(Math.min(p.x,_.x,b.x,T.x)),I=Math.floor(Math.max(p.x,_.x,b.x,T.x)),R=1;for(let N=C-R;N<=I+R;N++)N!==0&&l.push(new u.UnwrappedTileID(N,i))}return l}coveringTiles(i){let l=this.coveringZoomLevel(i);const p=l;if(i.minzoom!==void 0&&l<i.minzoom)return[];i.maxzoom!==void 0&&l>i.maxzoom&&(l=i.maxzoom);const _=u.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,l),T=[b*_.x,b*_.y,0],C=_o.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l);let I=i.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=l);const R=K=>({aabb:new Ha([K*b,0,0],[(K+1)*b,b,0]),zoom:0,x:0,y:0,wrap:K,fullyVisible:!1}),N=[],Z=[],X=l,se=i.reparseOverscaled?p:l;if(this._renderWorldCopies)for(let K=1;K<=3;K++)N.push(R(-K)),N.push(R(K));for(N.push(R(0));N.length>0;){const K=N.pop(),oe=K.x,ge=K.y;let _e=K.fullyVisible;if(!_e){const Le=K.aabb.intersects(C);if(Le===0)continue;_e=Le===2}const we=K.aabb.distanceX(T),ve=K.aabb.distanceY(T),Fe=Math.max(Math.abs(we),Math.abs(ve)),Ie=3+(1<<X-K.zoom)-2;if(K.zoom===X||Fe>Ie&&K.zoom>=I)Z.push({tileID:new u.OverscaledTileID(K.zoom===X?se:K.zoom,K.wrap,K.zoom,oe,ge),distanceSq:ee([T[0]-.5-oe,T[1]-.5-ge])});else for(let Le=0;Le<4;Le++){const Ge=(oe<<1)+Le%2,Ke=(ge<<1)+(Le>>1);N.push({aabb:K.aabb.quadrant(Le),zoom:K.zoom+1,x:Ge,y:Ke,wrap:K.wrap,fullyVisible:_e})}}return Z.sort((K,oe)=>K.distanceSq-oe.distanceSq).map(K=>K.tileID)}resize(i,l){this.width=i,this.height=l,this.pixelsToGLUnits=[2/i,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const l=u.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new u.pointGeometry(u.mercatorXfromLng(i.lng)*this.worldSize,u.mercatorYfromLat(l)*this.worldSize)}unproject(i){return new u.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(i,l){const p=this.pointCoordinate(l),_=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(i),T=new u.MercatorCoordinate(b.x-(p.x-_.x),b.y-(p.y-_.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i){return this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}locationCoordinate(i){return u.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i.toLngLat()}pointCoordinate(i){const l=[i.x,i.y,0,1],p=[i.x,i.y,1,1];u.transformMat4(l,l,this.pixelMatrixInverse),u.transformMat4(p,p,this.pixelMatrixInverse);const _=l[3],b=p[3],T=l[1]/_,C=p[1]/b,I=l[2]/_,R=p[2]/b,N=I===R?0:(0-I)/(R-I);return new u.MercatorCoordinate(u.number(l[0]/_,p[0]/b,N)/this.worldSize,u.number(T,C,N)/this.worldSize)}coordinatePoint(i){const l=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix),new u.pointGeometry(l[0]/l[3],l[1]/l[3])}getBounds(){return new u.LngLatBounds().extend(this.pointLocation(new u.pointGeometry(0,0))).extend(this.pointLocation(new u.pointGeometry(this.width,0))).extend(this.pointLocation(new u.pointGeometry(this.width,this.height))).extend(this.pointLocation(new u.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new u.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,l=!1){const p=i.key,_=l?this._alignedPosMatrixCache:this._posMatrixCache;if(_[p])return _[p];const b=i.canonical,T=this.worldSize/this.zoomScale(b.z),C=b.x+Math.pow(2,b.z)*i.wrap,I=u.identity(new Float64Array(16));return u.translate(I,I,[C*T,b.y*T,0]),u.scale(I,I,[T/u.EXTENT,T/u.EXTENT,1]),u.multiply(I,l?this.alignedProjMatrix:this.projMatrix,I),_[p]=new Float32Array(I),_[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,l,p,_,b=-90,T=90,C=-180,I=180;const R=this.size,N=this._unmodified;if(this.latRange){const se=this.latRange;b=u.mercatorYfromLat(se[1])*this.worldSize,T=u.mercatorYfromLat(se[0])*this.worldSize,i=T-b<R.y?R.y/(T-b):0}if(this.lngRange){const se=this.lngRange;C=u.mercatorXfromLng(se[0])*this.worldSize,I=u.mercatorXfromLng(se[1])*this.worldSize,l=I-C<R.x?R.x/(I-C):0}const Z=this.point,X=Math.max(l||0,i||0);if(X)return this.center=this.unproject(new u.pointGeometry(l?(I+C)/2:Z.x,i?(T+b)/2:Z.y)),this.zoom+=this.scaleZoom(X),this._unmodified=N,void(this._constraining=!1);if(this.latRange){const se=Z.y,K=R.y/2;se-K<b&&(_=b+K),se+K>T&&(_=T-K)}if(this.lngRange){const se=Z.x,K=R.x/2;se-K<C&&(p=C+K),se+K>I&&(p=I-K)}p===void 0&&_===void 0||(this.center=this.unproject(new u.pointGeometry(p!==void 0?p:Z.x,_!==void 0?_:Z.y))),this._unmodified=N,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const l=Math.PI/2+this._pitch,p=this._fov*(.5+i.y/this.height),_=Math.sin(p)*this.cameraToCenterDistance/Math.sin(u.clamp(Math.PI-l-p,.01,Math.PI-.01)),b=this.point,T=b.x,C=b.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*_+this.cameraToCenterDistance),R=this.height/50;let N=new Float64Array(16);u.perspective(N,this._fov,this.width/this.height,R,I),N[8]=2*-i.x/this.width,N[9]=2*i.y/this.height,u.scale(N,N,[1,-1,1]),u.translate(N,N,[0,0,-this.cameraToCenterDistance]),u.rotateX(N,N,this._pitch),u.rotateZ(N,N,this.angle),u.translate(N,N,[-T,-C,0]),this.mercatorMatrix=u.scale([],N,[this.worldSize,this.worldSize,this.worldSize]),u.scale(N,N,[1,1,u.mercatorZfromAltitude(1,this.center.lat)*this.worldSize]),this.projMatrix=N,this.invProjMatrix=u.invert([],this.projMatrix);const Z=this.width%2/2,X=this.height%2/2,se=Math.cos(this.angle),K=Math.sin(this.angle),oe=T-Math.round(T)+se*Z+K*X,ge=C-Math.round(C)+se*X+K*Z,_e=new Float64Array(N);if(u.translate(_e,_e,[oe>.5?oe-1:oe,ge>.5?ge-1:ge,0]),this.alignedProjMatrix=_e,N=u.create(),u.scale(N,N,[this.width/2,-this.height/2,1]),u.translate(N,N,[1,-1,0]),this.labelPlaneMatrix=N,N=u.create(),u.scale(N,N,[1,-1,1]),u.translate(N,N,[-1,-1,0]),u.scale(N,N,[2/this.width,2/this.height,1]),this.glCoordMatrix=N,this.pixelMatrix=u.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),N=u.invert(new Float64Array(16),this.pixelMatrix),!N)throw new Error("failed to invert matrix");this.pixelMatrixInverse=N,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new u.pointGeometry(0,0)),l=[i.x*this.worldSize,i.y*this.worldSize,0,1];return u.transformMat4(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.pointGeometry(0,i))}getCameraQueryGeometry(i){const l=this.getCameraPoint();if(i.length===1)return[i[0],l];{let p=l.x,_=l.y,b=l.x,T=l.y;for(const C of i)p=Math.min(p,C.x),_=Math.min(_,C.y),b=Math.max(b,C.x),T=Math.max(T,C.y);return[new u.pointGeometry(p,_),new u.pointGeometry(b,_),new u.pointGeometry(b,T),new u.pointGeometry(p,T),new u.pointGeometry(p,_)]}}}class jl{constructor(i){this._hashName=i&&encodeURIComponent(i),u.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(l,p){let _=!1,b=null;const T=()=>{b=null,_&&(l(),b=setTimeout(T,300),_=!1)};return()=>(_=!0,b||T(),b)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const l=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,_),T=Math.round(l.lng*b)/b,C=Math.round(l.lat*b)/b,I=this._map.getBearing(),R=this._map.getPitch();let N="";if(N+=i?`/${T}/${C}/${p}`:`${p}/${C}/${T}`,(I||R)&&(N+="/"+Math.round(10*I)/10),R&&(N+=`/${Math.round(R)}`),this._hashName){const Z=this._hashName;let X=!1;const se=window.location.hash.slice(1).split("&").map(K=>{const oe=K.split("=")[0];return oe===Z?(X=!0,`${oe}=${N}`):K}).filter(K=>K);return X||se.push(`${Z}=${N}`),`#${se.join("&")}`}return`#${N}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let l;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(l=p)}),(l&&l[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(l=>isNaN(l))){const l=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:l,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const rs={linearity:.3,easing:u.bezier(0,0,.3,1)},ua=u.extend({deceleration:2500,maxSpeed:1400},rs),Xa=u.extend({deceleration:20,maxSpeed:1400},rs),ca=u.extend({deceleration:1e3,maxSpeed:360},rs),Ar=u.extend({deceleration:1e3,maxSpeed:90},rs);class ha{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:u.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,l=u.exported.now();for(;i.length>0&&l-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,pan:new u.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)l.zoom+=b.zoomDelta||0,l.bearing+=b.bearingDelta||0,l.pitch+=b.pitchDelta||0,b.panDelta&&l.pan._add(b.panDelta),b.around&&(l.around=b.around),b.pinchAround&&(l.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(l.pan.mag()){const b=Bs(l.pan.mag(),p,u.extend({},ua,i||{}));_.offset=l.pan.mult(b.amount/l.pan.mag()),_.center=this._map.transform.center,os(_,b)}if(l.zoom){const b=Bs(l.zoom,p,Xa);_.zoom=this._map.transform.zoom+b.amount,os(_,b)}if(l.bearing){const b=Bs(l.bearing,p,ca);_.bearing=this._map.transform.bearing+u.clamp(b.amount,-179,179),os(_,b)}if(l.pitch){const b=Bs(l.pitch,p,Ar);_.pitch=this._map.transform.pitch+b.amount,os(_,b)}if(_.zoom||_.bearing){const b=l.pinchAround===void 0?l.around:l.pinchAround;_.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),u.extend(_,{noMoveStart:!0})}}function os(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function Bs(f,i,l){const{maxSpeed:p,linearity:_,deceleration:b}=l,T=u.clamp(f*_/(i/1e3),-p,p),C=Math.abs(T)/(b*_);return{easing:l.easing,duration:1e3*C,amount:T*(C/2)}}class er extends u.Event{constructor(i,l,p,_={}){const b=U.mousePos(l.getCanvasContainer(),p),T=l.unproject(b);super(i,u.extend({point:b,lngLat:T,originalEvent:p},_)),this._defaultPrevented=!1,this.target=l}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class bi extends u.Event{constructor(i,l,p){const _=i==="touchend"?p.changedTouches:p.touches,b=U.touchPos(l.getCanvasContainer(),_),T=b.map(I=>l.unproject(I)),C=b.reduce((I,R,N,Z)=>I.add(R.div(Z.length)),new u.pointGeometry(0,0));super(i,{points:b,point:C,lngLats:T,lngLat:l.unproject(C),originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Dc extends u.Event{constructor(i,l,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Bo{constructor(i,l){this._map=i,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Dc(i.type,this._map,i))}mousedown(i,l){return this._mousedownPos=l,this._firePreventable(new er(i.type,this._map,i))}mouseup(i){this._map.fire(new er(i.type,this._map,i))}click(i,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new er(i.type,this._map,i))}dblclick(i){return this._firePreventable(new er(i.type,this._map,i))}mouseover(i){this._map.fire(new er(i.type,this._map,i))}mouseout(i){this._map.fire(new er(i.type,this._map,i))}touchstart(i){return this._firePreventable(new bi(i.type,this._map,i))}touchmove(i){this._map.fire(new bi(i.type,this._map,i))}touchend(i){this._map.fire(new bi(i.type,this._map,i))}touchcancel(i){this._map.fire(new bi(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cu{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(i){this._map.fire(new er(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new er("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new er(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ss{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,l){this.isEnabled()&&i.shiftKey&&i.button===0&&(U.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(i,l){if(!this._active)return;const p=l;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=U.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(_.x,p.x),T=Math.max(_.x,p.x),C=Math.min(_.y,p.y),I=Math.max(_.y,p.y);U.setTransform(this._box,`translate(${b}px,${C}px)`),this._box.style.width=T-b+"px",this._box.style.height=I-C+"px"}mouseupWindow(i,l){if(!this._active||i.button!==0)return;const p=this._startPos,_=l;if(this.reset(),U.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new u.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(p,_,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,l){return this._map.fire(new u.Event(i,{originalEvent:l}))}}function as(f,i){const l={};for(let p=0;p<f.length;p++)l[f[p].identifier]=i[p];return l}class Xr{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,l,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(_){const b=new u.pointGeometry(0,0);for(const T of _)b._add(T);return b.div(_.length)}(l),this.touches=as(p,l)))}touchmove(i,l,p){if(this.aborted||!this.centroid)return;const _=as(p,l);for(const b in this.touches){const T=this.touches[b],C=_[b];(!C||C.dist(T)>30)&&(this.aborted=!0)}}touchend(i,l,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Fs{constructor(i){this.singleTap=new Xr(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,l,p){this.singleTap.touchstart(i,l,p)}touchmove(i,l,p){this.singleTap.touchmove(i,l,p)}touchend(i,l,p){const _=this.singleTap.touchend(i,l,p);if(_){const b=i.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(_)<30;if(b&&T||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Rc{constructor(){this._zoomIn=new Fs({numTouches:1,numTaps:2}),this._zoomOut=new Fs({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,l,p){this._zoomIn.touchstart(i,l,p),this._zoomOut.touchstart(i,l,p)}touchmove(i,l,p){this._zoomIn.touchmove(i,l,p),this._zoomOut.touchmove(i,l,p)}touchend(i,l,p){const _=this._zoomIn.touchend(i,l,p),b=this._zoomOut.touchend(i,l,p);return _?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(_)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const da={0:1,2:2};class ls{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,l){return!1}_move(i,l){return{}}mousedown(i,l){if(this._lastPoint)return;const p=U.mouseButton(i);this._correctButton(i,p)&&(this._lastPoint=l,this._eventButton=p)}mousemoveWindow(i,l){const p=this._lastPoint;if(p){if(i.preventDefault(),function(_,b){const T=da[b];return _.buttons===void 0||(_.buttons&T)!==T}(i,this._eventButton))this.reset();else if(this._moved||!(l.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(p,l)}}mouseupWindow(i){this._lastPoint&&U.mouseButton(i)===this._eventButton&&(this._moved&&U.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class us extends ls{mousedown(i,l){super.mousedown(i,l),this._lastPoint&&(this._active=!0)}_correctButton(i,l){return l===0&&!i.ctrlKey}_move(i,l){return{around:l,panDelta:l.sub(i)}}}class at extends ls{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=.8*(l.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class cs extends ls{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=-.5*(l.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class pa{constructor(i){this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.pointGeometry(0,0)}touchstart(i,l,p){return this._calculateTransform(i,l,p)}touchmove(i,l,p){if(this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,l,p)}touchend(i,l,p){this._calculateTransform(i,l,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,l,p){p.length>0&&(this._active=!0);const _=as(p,l),b=new u.pointGeometry(0,0),T=new u.pointGeometry(0,0);let C=0;for(const R in _){const N=_[R],Z=this._touches[R];Z&&(b._add(N),T._add(N.sub(Z)),C++,_[R]=N)}if(this._touches=_,C<this._minTouches||!T.mag())return;const I=T.div(C);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(C),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fr{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,l,p){return{}}touchstart(i,l,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([l[0],l[1]]))}touchmove(i,l,p){if(!this._firstTwoTouches)return;i.preventDefault();const[_,b]=this._firstTwoTouches,T=Os(p,l,_),C=Os(p,l,b);if(!T||!C)return;const I=this._aroundCenter?null:T.add(C).div(2);return this._move([T,C],I,i)}touchend(i,l,p){if(!this._firstTwoTouches)return;const[_,b]=this._firstTwoTouches,T=Os(p,l,_),C=Os(p,l,b);T&&C||(this._active&&U.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Os(f,i,l){for(let p=0;p<f.length;p++)if(f[p].identifier===l)return i[p]}function et(f,i){return Math.log(f/i)/Math.LN2}class Gl extends fr{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,l){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(et(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:et(this._distance,p),pinchAround:l}}}function Kr(f,i){return 180*f.angleWith(i)/Math.PI}class Iu extends fr{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,l){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Kr(this._vector,p),pinchAround:l}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const l=25/(Math.PI*this._minDiameter)*360,p=Kr(i,this._startVector);return Math.abs(p)<l}}function Ns(f){return Math.abs(f.y)>Math.abs(f.x)}class Us extends fr{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(i){this._lastPoints=i,Ns(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,l,p){const _=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(_,b,p.timeStamp),this._valid)return this._lastPoints=i,this._active=!0,{pitchDelta:(_.y+b.y)/2*-.5}}gestureBeginsVertically(i,l,p){if(this._valid!==void 0)return this._valid;const _=i.mag()>=2,b=l.mag()>=2;if(!_&&!b)return;if(!_||!b)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=i.y>0==l.y>0;return Ns(i)&&Ns(l)&&T}}const zu={panStep:100,bearingStep:15,pitchStep:10};class Ka{constructor(){const i=zu;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let l=0,p=0,_=0,b=0,T=0;switch(i.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?_=1:(i.preventDefault(),T=-1);break;case 40:i.shiftKey?_=-1:(i.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:C=>{const I=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:fa,zoom:l?Math.round(I)+l*(i.shiftKey?2:1):I,bearing:C.getBearing()+p*this._bearingStep,pitch:C.getPitch()+_*this._pitchStep,offset:[-b*this._panStep,-T*this._panStep],center:C.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function fa(f){return f*(2-f)}const ma=4.000244140625;class Ya{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,u.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;let l=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=u.exported.now(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,l!==0&&l%ma==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(_*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),i.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=i,this._delta-=l,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=U.mousePos(this._el,i);this._around=u.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(l)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>ma?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&I!==0&&(I=1/I);const R=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(R*I))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,_=this._easing;let b,T=!1;if(this._type==="wheel"&&p&&_){const C=Math.min((u.exported.now()-this._lastWheelEventTime)/200,1),I=_(C);b=u.number(p,l,I),C<1?this._frameId||(this._frameId=!0):T=!0}else b=l,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let l=u.ease;if(this._prevEase){const p=this._prevEase,_=(u.exported.now()-p.start)/p.duration,b=p.easing(_+.01)-p.easing(_),T=.27/Math.sqrt(b*b+1e-4)*.01,C=Math.sqrt(.0729-T*T);l=u.bezier(T,C,.25,1)}return this._prevEase={start:u.exported.now(),duration:i,easing:l},l}reset(){this._active=!1}}class Wl{constructor(i,l){this._clickZoom=i,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ja{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,l){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(l)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Di{constructor(){this._tap=new Fs({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,l,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=l[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,l,p))}touchmove(i,l,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=l[0],b=_.y-this._swipePoint.y;return this._swipePoint=_,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,l,p)}touchend(i,l,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(i,l,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yo{constructor(i,l,p){this._el=i,this._mousePan=l,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ql{constructor(i,l,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=l,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Qa{constructor(i,l,p,_){this._el=i,this._touchZoom=l,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vs=f=>f.zoom||f.drag||f.pitch||f.rotate;class el extends u.Event{}function ga(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class mr{constructor(i,l){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ha(i),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l),u.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,b,T]of this._listeners)U.addEventListener(_,b,_===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[i,l,p]of this._listeners)U.removeEventListener(i,l,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const l=this._map,p=l.getCanvasContainer();this._add("mapEvent",new Bo(l,i));const _=l.boxZoom=new ss(l,i);this._add("boxZoom",_);const b=new Rc,T=new Ja;l.doubleClickZoom=new Wl(T,b),this._add("tapZoom",b),this._add("clickZoom",T);const C=new Di;this._add("tapDragZoom",C);const I=l.touchPitch=new Us;this._add("touchPitch",I);const R=new at(i),N=new cs(i);l.dragRotate=new ql(i,R,N),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);const Z=new us(i),X=new pa(i);l.dragPan=new yo(p,Z,X),this._add("mousePan",Z),this._add("touchPan",X,["touchZoom","touchRotate"]);const se=new Iu,K=new Gl;l.touchZoomRotate=new Qa(p,K,se,C),this._add("touchRotate",se,["touchPan","touchZoom"]),this._add("touchZoom",K,["touchPan","touchRotate"]);const oe=l.scrollZoom=new Ya(l,this);this._add("scrollZoom",oe,["mousePan"]);const ge=l.keyboard=new Ka;this._add("keyboard",ge),this._add("blockableMapEvent",new Cu(l));for(const _e of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[_e]&&l[_e].enable(i[_e])}_add(i,l,p){this._handlers.push({handlerName:i,handler:l,allowed:p}),this._handlersById[i]=l}stop(i){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Vs(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,l,p){for(const _ in i)if(_!==p&&(!l||l.indexOf(_)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const l=[];for(const p of i)this._el.contains(p.target)&&l.push(p);return l}handleEvent(i,l){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const p=i.type==="renderFrame"?void 0:i,_={needsRenderFrame:!1},b={},T={},C=i.touches,I=C?this._getMapTouches(C):void 0,R=I?U.touchPos(this._el,I):U.mousePos(this._el,i);for(const{handlerName:X,handler:se,allowed:K}of this._handlers){if(!se.isEnabled())continue;let oe;this._blockedByActive(T,K,X)?se.reset():se[l||i.type]&&(oe=se[l||i.type](i,R,I),this.mergeHandlerResult(_,b,oe,X,p),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||se.isActive())&&(T[X]=se)}const N={};for(const X in this._previousActiveHandlers)T[X]||(N[X]=p);this._previousActiveHandlers=T,(Object.keys(N).length||ga(_))&&(this._changes.push([_,b,N]),this._triggerRenderFrame()),(Object.keys(T).length||ga(_))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=_;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(i,l,p,_,b){if(!p)return;u.extend(i,p);const T={handlerName:_,originalEvent:p.originalEvent||b};p.zoomDelta!==void 0&&(l.zoom=T),p.panDelta!==void 0&&(l.drag=T),p.pitchDelta!==void 0&&(l.pitch=T),p.bearingDelta!==void 0&&(l.rotate=T)}_applyChanges(){const i={},l={},p={};for(const[_,b,T]of this._changes)_.panDelta&&(i.panDelta=(i.panDelta||new u.pointGeometry(0,0))._add(_.panDelta)),_.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(i.around=_.around),_.pinchAround!==void 0&&(i.pinchAround=_.pinchAround),_.noInertia&&(i.noInertia=_.noInertia),u.extend(l,b),u.extend(p,T);this._updateMapTransform(i,l,p),this._changes=[]}_updateMapTransform(i,l,p){const _=this._map,b=_.transform;if(!ga(i))return this._fireEvents(l,p,!0);let{panDelta:T,zoomDelta:C,bearingDelta:I,pitchDelta:R,around:N,pinchAround:Z}=i;Z!==void 0&&(N=Z),_._stop(!0),N=N||_.transform.centerPoint;const X=b.pointLocation(T?N.sub(T):N);I&&(b.bearing+=I),R&&(b.pitch+=R),C&&(b.zoom+=C),b.setLocationAtPoint(X,N),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(l,p,!0)}_fireEvents(i,l,p){const _=Vs(this._eventsInProgress),b=Vs(i),T={};for(const N in i){const{originalEvent:Z}=i[N];this._eventsInProgress[N]||(T[`${N}start`]=Z),this._eventsInProgress[N]=i[N]}!_&&b&&this._fireEvent("movestart",b.originalEvent);for(const N in T)this._fireEvent(N,T[N]);b&&this._fireEvent("move",b.originalEvent);for(const N in i){const{originalEvent:Z}=i[N];this._fireEvent(N,Z)}const C={};let I;for(const N in this._eventsInProgress){const{handlerName:Z,originalEvent:X}=this._eventsInProgress[N];this._handlersById[Z].isActive()||(delete this._eventsInProgress[N],I=l[Z]||X,C[`${N}end`]=I)}for(const N in C)this._fireEvent(N,C[N]);const R=Vs(this._eventsInProgress);if(p&&(_||b)&&!R){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;N?(Z(N.bearing||this._map.getBearing())&&(N.bearing=0),this._map.easeTo(N,{originalEvent:I})):(this._map.fire(new u.Event("moveend",{originalEvent:I})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,l){this._map.fire(new u.Event(i,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new el("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const a={extend:(f,...i)=>u.extend(f,...i),run(f){f()},logToElement(f,i=!1,l="log"){const p=window.document.getElementById(l);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${f}`)}};class d extends u.Evented{constructor(i,l){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=l.bearingSnap,u.bindAll(["_renderFrameCallback"],this)}getCenter(){return new u.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,l){return this.jumpTo({center:i},l)}panBy(i,l,p){return i=u.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,u.extend({offset:i},l),p)}panTo(i,l,p){return this.easeTo(u.extend({center:i},l),p)}getZoom(){return this.transform.zoom}setZoom(i,l){return this.jumpTo({zoom:i},l),this}zoomTo(i,l,p){return this.easeTo(u.extend({zoom:i},l),p)}zoomIn(i,l){return this.zoomTo(this.getZoom()+1,i,l),this}zoomOut(i,l){return this.zoomTo(this.getZoom()-1,i,l),this}getBearing(){return this.transform.bearing}setBearing(i,l){return this.jumpTo({bearing:i},l),this}getPadding(){return this.transform.padding}setPadding(i,l){return this.jumpTo({padding:i},l),this}rotateTo(i,l,p){return this.easeTo(u.extend({bearing:i},l),p)}resetNorth(i,l){return this.rotateTo(0,u.extend({duration:1e3},i),l),this}resetNorthPitch(i,l){return this.easeTo(u.extend({bearing:0,pitch:0,duration:1e3},i),l),this}snapToNorth(i,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,l):this}getPitch(){return this.transform.pitch}setPitch(i,l){return this.jumpTo({pitch:i},l),this}cameraForBounds(i,l){i=u.LngLatBounds.convert(i);const p=l&&l.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,l)}_cameraForBoxAndBearing(i,l,p,_){const b={top:0,bottom:0,right:0,left:0};if(typeof(_=u.extend({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const Ie=_.padding;_.padding={top:Ie,bottom:Ie,right:Ie,left:Ie}}_.padding=u.extend(b,_.padding);const T=this.transform,C=T.padding,I=T.project(u.LngLat.convert(i)),R=T.project(u.LngLat.convert(l)),N=I.rotate(-p*Math.PI/180),Z=R.rotate(-p*Math.PI/180),X=new u.pointGeometry(Math.max(N.x,Z.x),Math.max(N.y,Z.y)),se=new u.pointGeometry(Math.min(N.x,Z.x),Math.min(N.y,Z.y)),K=X.sub(se),oe=(T.width-(C.left+C.right+_.padding.left+_.padding.right))/K.x,ge=(T.height-(C.top+C.bottom+_.padding.top+_.padding.bottom))/K.y;if(ge<0||oe<0)return void u.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const _e=Math.min(T.scaleZoom(T.scale*Math.min(oe,ge)),_.maxZoom),we=u.pointGeometry.convert(_.offset),ve=new u.pointGeometry((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(p*Math.PI/180),Fe=we.add(ve).mult(T.scale/T.zoomScale(_e));return{center:T.unproject(I.add(R).div(2).sub(Fe)),zoom:_e,bearing:p}}fitBounds(i,l,p){return this._fitInternal(this.cameraForBounds(i,l),l,p)}fitScreenCoordinates(i,l,p,_,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.pointGeometry.convert(i)),this.transform.pointLocation(u.pointGeometry.convert(l)),p,_),_,b)}_fitInternal(i,l,p){return i?(delete(l=u.extend(i,l)).padding,l.linear?this.easeTo(l,p):this.flyTo(l,p)):this}jumpTo(i,l){this.stop();const p=this.transform;let _=!1,b=!1,T=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(_=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=u.LngLat.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(b=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(T=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this.fire(new u.Event("movestart",l)).fire(new u.Event("move",l)),_&&this.fire(new u.Event("zoomstart",l)).fire(new u.Event("zoom",l)).fire(new u.Event("zoomend",l)),b&&this.fire(new u.Event("rotatestart",l)).fire(new u.Event("rotate",l)).fire(new u.Event("rotateend",l)),T&&this.fire(new u.Event("pitchstart",l)).fire(new u.Event("pitch",l)).fire(new u.Event("pitchend",l)),this.fire(new u.Event("moveend",l))}easeTo(i,l){this._stop(!1,i.easeId),((i=u.extend({offset:[0,0],duration:500,easing:u.ease},i)).animate===!1||!i.essential&&u.exported.prefersReducedMotion)&&(i.duration=0);const p=this.transform,_=this.getZoom(),b=this.getBearing(),T=this.getPitch(),C=this.getPadding(),I="zoom"in i?+i.zoom:_,R="bearing"in i?this._normalizeBearing(i.bearing,b):b,N="pitch"in i?+i.pitch:T,Z="padding"in i?i.padding:p.padding,X=u.pointGeometry.convert(i.offset);let se=p.centerPoint.add(X);const K=p.pointLocation(se),oe=u.LngLat.convert(i.center||K);this._normalizeCenter(oe);const ge=p.project(K),_e=p.project(oe).sub(ge),we=p.zoomScale(I-_);let ve,Fe;i.around&&(ve=u.LngLat.convert(i.around),Fe=p.locationPoint(ve));const Ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||I!==_,this._rotating=this._rotating||b!==R,this._pitching=this._pitching||N!==T,this._padding=!p.isPaddingEqual(Z),this._easeId=i.easeId,this._prepareEase(l,i.noMoveStart,Ie),this._ease(Le=>{if(this._zooming&&(p.zoom=u.number(_,I,Le)),this._rotating&&(p.bearing=u.number(b,R,Le)),this._pitching&&(p.pitch=u.number(T,N,Le)),this._padding&&(p.interpolatePadding(C,Z,Le),se=p.centerPoint.add(X)),ve)p.setLocationAtPoint(ve,Fe);else{const Ge=p.zoomScale(p.zoom-_),Ke=I>_?Math.min(2,we):Math.max(.5,we),Be=Math.pow(Ke,1-Le),pt=p.unproject(ge.add(_e.mult(Le*Be)).mult(Ge));p.setLocationAtPoint(p.renderWorldCopies?pt.wrap():pt,se)}this._fireMoveEvents(l)},Le=>{this._afterEase(l,Le)},i),this}_prepareEase(i,l,p={}){this._moving=!0,l||p.moving||this.fire(new u.Event("movestart",i)),this._zooming&&!p.zooming&&this.fire(new u.Event("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new u.Event("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new u.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new u.Event("move",i)),this._zooming&&this.fire(new u.Event("zoom",i)),this._rotating&&this.fire(new u.Event("rotate",i)),this._pitching&&this.fire(new u.Event("pitch",i))}_afterEase(i,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const p=this._zooming,_=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new u.Event("zoomend",i)),_&&this.fire(new u.Event("rotateend",i)),b&&this.fire(new u.Event("pitchend",i)),this.fire(new u.Event("moveend",i))}flyTo(i,l){if(!i.essential&&u.exported.prefersReducedMotion){const rn=u.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(rn,l)}this.stop(),i=u.extend({offset:[0,0],speed:1.2,curve:1.42,easing:u.ease},i);const p=this.transform,_=this.getZoom(),b=this.getBearing(),T=this.getPitch(),C=this.getPadding(),I="zoom"in i?u.clamp(+i.zoom,p.minZoom,p.maxZoom):_,R="bearing"in i?this._normalizeBearing(i.bearing,b):b,N="pitch"in i?+i.pitch:T,Z="padding"in i?i.padding:p.padding,X=p.zoomScale(I-_),se=u.pointGeometry.convert(i.offset);let K=p.centerPoint.add(se);const oe=p.pointLocation(K),ge=u.LngLat.convert(i.center||oe);this._normalizeCenter(ge);const _e=p.project(oe),we=p.project(ge).sub(_e);let ve=i.curve;const Fe=Math.max(p.width,p.height),Ie=Fe/X,Le=we.mag();if("minZoom"in i){const rn=u.clamp(Math.min(i.minZoom,_,I),p.minZoom,p.maxZoom),Yn=Fe/p.zoomScale(rn-_);ve=Math.sqrt(Yn/Le*2)}const Ge=ve*ve;function Ke(rn){const Yn=(Ie*Ie-Fe*Fe+(rn?-1:1)*Ge*Ge*Le*Le)/(2*(rn?Ie:Fe)*Ge*Le);return Math.log(Math.sqrt(Yn*Yn+1)-Yn)}function Be(rn){return(Math.exp(rn)-Math.exp(-rn))/2}function pt(rn){return(Math.exp(rn)+Math.exp(-rn))/2}const tt=Ke(0);let zt=function(rn){return pt(tt)/pt(tt+ve*rn)},an=function(rn){return Fe*((pt(tt)*(Be(Yn=tt+ve*rn)/pt(Yn))-Be(tt))/Ge)/Le;var Yn},Jt=(Ke(1)-tt)/ve;if(Math.abs(Le)<1e-6||!isFinite(Jt)){if(Math.abs(Fe-Ie)<1e-6)return this.easeTo(i,l);const rn=Ie<Fe?-1:1;Jt=Math.abs(Math.log(Ie/Fe))/ve,an=function(){return 0},zt=function(Yn){return Math.exp(rn*ve*Yn)}}return i.duration="duration"in i?+i.duration:1e3*Jt/("screenSpeed"in i?+i.screenSpeed/ve:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=b!==R,this._pitching=N!==T,this._padding=!p.isPaddingEqual(Z),this._prepareEase(l,!1),this._ease(rn=>{const Yn=rn*Jt,Ot=1/zt(Yn);p.zoom=rn===1?I:_+p.scaleZoom(Ot),this._rotating&&(p.bearing=u.number(b,R,rn)),this._pitching&&(p.pitch=u.number(T,N,rn)),this._padding&&(p.interpolatePadding(C,Z,rn),K=p.centerPoint.add(se));const cn=rn===1?ge:p.unproject(_e.add(we.mult(an(Yn))).mult(Ot));p.setLocationAtPoint(p.renderWorldCopies?cn.wrap():cn,K),this._fireMoveEvents(l)},()=>this._afterEase(l),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,l)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,l,p){p.animate===!1||p.duration===0?(i(1),l()):(this._easeStart=u.exported.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((u.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,l){i=u.wrap(i,-180,180);const p=Math.abs(i-l);return Math.abs(i-360-l)<p&&(i-=360),Math.abs(i+360-l)<p&&(i+=360),i}_normalizeCenter(i){const l=this.transform;if(!l.renderWorldCopies||l.lngRange)return;const p=i.lng-l.center.lng;i.lng+=p>180?-360:p<-180?360:0}}class w{constructor(i={}){this.options=i,u.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=U.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,l){const p=this._map._getUIString(`AttributionControl.${l}`);i.title=p,i.setAttribute("aria-label",p)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(_=>typeof _!="string"?"":_)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const l=this._map.style.sourceCaches;for(const _ in l){const b=l[_];if(b.used){const T=b.getSource();T.attribution&&i.indexOf(T.attribution)<0&&i.push(T.attribution)}}i=i.filter(_=>String(_).trim()),i.sort((_,b)=>_.length-b.length),i=i.filter((_,b)=>{for(let T=b+1;T<i.length;T++)if(i[T].indexOf(_)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class P{constructor(i={}){this.options=i,u.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=U.create("div","maplibregl-ctrl mapboxgl-ctrl");const l=U.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){U.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const l=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&l.classList.add("maplibregl-compact","mapboxgl-compact"):l.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class D{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const l=++this._id;return this._queue.push({callback:i,id:l,cancelled:!1}),l}remove(i){const l=this._currentlyRunning,p=l?this._queue.concat(l):this._queue;for(const _ of p)if(_.id===i)return void(_.cancelled=!0)}run(i=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const p of l)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const j={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ue={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},be={showCompass:!0,showZoom:!0,visualizePitch:!1};class Me{constructor(i,l,p=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new at({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new cs({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),u.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),U.addEventListener(l,"mousedown",this.mousedown),U.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(l,"touchmove",this.touchmove),U.addEventListener(l,"touchend",this.touchend),U.addEventListener(l,"touchcancel",this.reset)}down(i,l){this.mouseRotate.mousedown(i,l),this.mousePitch&&this.mousePitch.mousedown(i,l),U.disableDrag()}move(i,l){const p=this.map,_=this.mouseRotate.mousemoveWindow(i,l);if(_&&_.bearingDelta&&p.setBearing(p.getBearing()+_.bearingDelta),this.mousePitch){const b=this.mousePitch.mousemoveWindow(i,l);b&&b.pitchDelta&&p.setPitch(p.getPitch()+b.pitchDelta)}}off(){const i=this.element;U.removeEventListener(i,"mousedown",this.mousedown),U.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(i,"touchmove",this.touchmove),U.removeEventListener(i,"touchend",this.touchend),U.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){U.enableDrag(),U.removeEventListener(window,"mousemove",this.mousemove),U.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(u.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),U.mousePos(this.element,i)),U.addEventListener(window,"mousemove",this.mousemove),U.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,U.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=U.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Se(f,i,l){if(f=new u.LngLat(f.lng,f.lat),i){const p=new u.LngLat(f.lng-360,f.lat),_=new u.LngLat(f.lng+360,f.lat),b=l.locationPoint(f).distSqr(i);l.locationPoint(p).distSqr(i)<b?f=p:l.locationPoint(_).distSqr(i)<b&&(f=_)}for(;Math.abs(f.lng-l.center.lng)>180;){const p=l.locationPoint(f);if(p.x>=0&&p.y>=0&&p.x<=l.width&&p.y<=l.height)break;f.lng>l.center.lng?f.lng-=360:f.lng+=360}return f}const $e={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function $t(f,i,l){const p=f.classList;for(const _ in $e)p.remove(`maplibregl-${l}-anchor-${_}`,`mapboxgl-${l}-anchor-${_}`);p.add(`maplibregl-${l}-anchor-${i}`,`mapboxgl-${l}-anchor-${i}`)}class Qt extends u.Evented{constructor(i,l){if(super(),(i instanceof HTMLElement||l)&&(i=u.extend({element:i},l)),u.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=u.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div"),this._element.setAttribute("aria-label","Map marker");const p=U.createNS("http://www.w3.org/2000/svg","svg"),_=41,b=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${_}px`),p.setAttributeNS(null,"width",`${b}px`),p.setAttributeNS(null,"viewBox",`0 0 ${b} ${_}`);const T=U.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const C=U.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=U.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const we of R){const ve=U.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",we.rx),ve.setAttributeNS(null,"ry",we.ry),I.appendChild(ve)}const N=U.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const Z=U.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(Z);const X=U.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const se=U.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(se);const K=U.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(6.0, 7.0)"),K.setAttributeNS(null,"fill","#FFFFFF");const oe=U.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ge=U.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");const _e=U.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#FFFFFF"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962"),oe.appendChild(ge),oe.appendChild(_e),C.appendChild(I),C.appendChild(N),C.appendChild(X),C.appendChild(K),C.appendChild(oe),p.appendChild(C),p.setAttributeNS(null,"height",_*this._scale+"px"),p.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(p),this._offset=u.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),$t(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=u.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const l=i.code,p=i.charCode||i.keyCode;l!=="Space"&&l!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(i){const l=i.originalEvent.target,p=this._element;this._popup&&(l===p||p.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Se(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let l="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?l=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(l=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let p="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?p="rotateX(0deg)":this._pitchAlignment==="map"&&(p=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),U.setTransform(this._element,`${$e[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${p} ${l}`)}getOffset(){return this._offset}setOffset(i){return this._offset=u.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const l=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=l}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.Event("dragstart"))),this.fire(new u.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Mr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Mn,Yr=0,Kn=!1;const Hl={maxWidth:100,unit:"metric"};function _a(f,i,l){const p=l&&l.maxWidth||100,_=f._container.clientHeight/2,b=f.unproject([0,_]),T=f.unproject([p,_]),C=b.distanceTo(T);if(l&&l.unit==="imperial"){const I=3.2808*C;I>5280?Cn(i,p,I/5280,f._getUIString("ScaleControl.Miles")):Cn(i,p,I,f._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Cn(i,p,C/1852,f._getUIString("ScaleControl.NauticalMiles")):C>=1e3?Cn(i,p,C/1e3,f._getUIString("ScaleControl.Kilometers")):Cn(i,p,C,f._getUIString("ScaleControl.Meters"))}function Cn(f,i,l,p){const _=function(b){const T=Math.pow(10,`${Math.floor(b)}`.length-1);let C=b/T;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(I){const R=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*R)/R}(C),T*C}(l);f.style.width=i*(_/l)+"px",f.innerHTML=`${_}&nbsp;${p}`}const ui={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Xl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function $s(f){if(f){if(typeof f=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(f,2)));return{center:new u.pointGeometry(0,0),top:new u.pointGeometry(0,f),"top-left":new u.pointGeometry(i,i),"top-right":new u.pointGeometry(-i,i),bottom:new u.pointGeometry(0,-f),"bottom-left":new u.pointGeometry(i,-i),"bottom-right":new u.pointGeometry(-i,-i),left:new u.pointGeometry(f,0),right:new u.pointGeometry(-f,0)}}if(f instanceof u.pointGeometry||Array.isArray(f)){const i=u.pointGeometry.convert(f);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:u.pointGeometry.convert(f.center||[0,0]),top:u.pointGeometry.convert(f.top||[0,0]),"top-left":u.pointGeometry.convert(f["top-left"]||[0,0]),"top-right":u.pointGeometry.convert(f["top-right"]||[0,0]),bottom:u.pointGeometry.convert(f.bottom||[0,0]),"bottom-left":u.pointGeometry.convert(f["bottom-left"]||[0,0]),"bottom-right":u.pointGeometry.convert(f["bottom-right"]||[0,0]),left:u.pointGeometry.convert(f.left||[0,0]),right:u.pointGeometry.convert(f.right||[0,0])}}return $s(new u.pointGeometry(0,0))}const Zs={supported:A,setRTLTextPlugin:u.setRTLTextPlugin,getRTLTextPluginStatus:u.getRTLTextPluginStatus,Map:class extends d{constructor(f){var i;if(u.PerformanceUtils.mark(u.PerformanceMarkers.create),(f=u.extend({},ue,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new is(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new D,this._controls=[],this._mapId=u.uniqueId(),this._locale=u.extend({},j,f.locale),this._clickTolerance=f.clickTolerance,this._pixelRatio=(i=f.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new de(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),u.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),typeof window!="undefined"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new mr(this,f),this._hash=f.hash&&new jl(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,u.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new w({customAttribution:f.customAttribution})),f.maplibreLogo&&this.addControl(new P,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new u.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new u.Event(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new u.Event("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(f,i){if(i===void 0&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new u.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}resize(f){const i=this._containerDimensions(),l=i[0],p=i[1];this._resizeCanvas(l,p,this.getPixelRatio()),this.transform.resize(l,p),this.painter.resize(l,p,this.getPixelRatio());const _=!this._moving;return _&&(this.stop(),this.fire(new u.Event("movestart",f)).fire(new u.Event("move",f))),this.fire(new u.Event("resize",f)),_&&this.fire(new u.Event("moveend",f)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(f){const[i,l]=this._containerDimensions();this._pixelRatio=f,this._resizeCanvas(i,l,f),this.painter.resize(i,l,f)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(u.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f==null?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f==null?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f==null?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f==null?60:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(u.LngLat.convert(f))}unproject(f){return this.transform.pointLocation(u.pointGeometry.convert(f))}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(f,i,l){if(f==="mouseenter"||f==="mouseover"){let p=!1;return{layer:i,listener:l,delegates:{mousemove:b=>{const T=this.getLayer(i)?this.queryRenderedFeatures(b.point,{layers:[i]}):[];T.length?p||(p=!0,l.call(this,new er(f,this,b.originalEvent,{features:T}))):p=!1},mouseout:()=>{p=!1}}}}if(f==="mouseleave"||f==="mouseout"){let p=!1;return{layer:i,listener:l,delegates:{mousemove:T=>{(this.getLayer(i)?this.queryRenderedFeatures(T.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,l.call(this,new er(f,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,l.call(this,new er(f,this,T.originalEvent)))}}}}{const p=_=>{const b=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];b.length&&(_.features=b,l.call(this,_),delete _.features)};return{layer:i,listener:l,delegates:{[f]:p}}}}on(f,i,l){if(l===void 0)return super.on(f,i);const p=this._createDelegatedListener(f,i,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const _ in p.delegates)this.on(_,p.delegates[_]);return this}once(f,i,l){if(l===void 0)return super.once(f,i);const p=this._createDelegatedListener(f,i,l);for(const _ in p.delegates)this.once(_,p.delegates[_]);return this}off(f,i,l){return l===void 0?super.off(f,i):(this._delegatedListeners&&this._delegatedListeners[f]&&(p=>{const _=this._delegatedListeners[f];for(let b=0;b<_.length;b++){const T=_[b];if(T.layer===i&&T.listener===l){for(const C in T.delegates)this.off(C,T.delegates[C]);return _.splice(b,1),this}}})(),this)}queryRenderedFeatures(f,i){if(!this.style)return[];let l;if(i!==void 0||f===void 0||f instanceof u.pointGeometry||Array.isArray(f)||(i=f,f=void 0),i=i||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof u.pointGeometry||typeof f[0]=="number")l=[u.pointGeometry.convert(f)];else{const p=u.pointGeometry.convert(f[0]),_=u.pointGeometry.convert(f[1]);l=[p,new u.pointGeometry(_.x,p.y),_,new u.pointGeometry(p.x,_.y),p]}return this.style.queryRenderedFeatures(l,i,this.transform)}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}setStyle(f,i){return(i=u.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(f,i))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const i=this._locale[f];if(i==null)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new ni(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ni(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if(typeof f=="string"){const l=this._requestManager.transformRequest(f,u.ResourceType.Style);u.getJSON(l,(p,_)=>{p?this.fire(new u.ErrorEvent(p)):_&&this._updateDiff(_,i)})}else typeof f=="object"&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(l){u.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.warnOnce("There is no style added to the map.")}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){const i=this.style&&this.style.sourceCaches[f];if(i!==void 0)return i.loaded();this.fire(new u.ErrorEvent(new Error(`There is no source with ID '${f}'`)))}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const i in f){const l=f[i]._tiles;for(const p in l){const _=l[p];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(f,i,l){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,l)}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:l=1,sdf:p=!1,stretchX:_,stretchY:b,content:T}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||u.isImageBitmap(i)){const{width:C,height:I,data:R}=u.exported.getImageData(i);this.style.addImage(f,{data:new u.RGBAImage({width:C,height:I},R),pixelRatio:l,stretchX:_,stretchY:b,content:T,sdf:p,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:C,height:I,data:R}=i,N=i;this.style.addImage(f,{data:new u.RGBAImage({width:C,height:I},new Uint8Array(R)),pixelRatio:l,stretchX:_,stretchY:b,content:T,sdf:p,version:0,userImage:N}),N.onAdd&&N.onAdd(this,f)}}}updateImage(f,i){const l=this.style.getImage(f);if(!l)return this.fire(new u.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||u.isImageBitmap(i)?u.exported.getImageData(i):i,{width:_,height:b,data:T}=p;if(_===void 0||b===void 0)return this.fire(new u.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==l.data.width||b!==l.data.height)return this.fire(new u.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(i instanceof HTMLImageElement||u.isImageBitmap(i));l.data.replace(T,C),this.style.updateImage(f,l)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new u.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){u.getImage(this._requestManager.transformRequest(f,u.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,l){return this.style.setLayerZoomRange(f,i,l),this._update(!0)}setFilter(f,i,l={}){return this.style.setFilter(f,i,l),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,l,p={}){return this.style.setPaintProperty(f,i,l,p),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,l,p={}){return this.style.setLayoutProperty(f,i,l,p),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,i=0;return this._container&&(f=this._container.clientWidth||400,i=this._container.clientHeight||300),[f,i]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=U.create("div","maplibregl-canvas-container mapboxgl-canvas-container",f);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=U.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const l=this._containerDimensions();this._resizeCanvas(l[0],l[1],this.getPixelRatio());const p=this._controlContainer=U.create("div","maplibregl-control-container mapboxgl-control-container",f),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=U.create("div",`maplibregl-ctrl-${b} mapboxgl-ctrl-${b}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i,l){this._canvas.width=l*f,this._canvas.height=l*i,this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const f=u.extend({},A.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);i?(this.painter=new Zl(i,this.transform),u.exported$1.testSupport(i)):this.fire(new u.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new u.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new u.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){let i,l=0;const p=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,i),l=u.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let _=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const T=this.transform.zoom,C=u.exported.now();this.style.zoomHistory.update(T,C);const I=new u.EvaluationParameters(T,{now:C,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),R=I.crossFadingFactor();R===1&&R===this._crossFadingFactor||(_=!0,this._crossFadingFactor=R),this.style.update(I)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new u.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.load),this.fire(new u.Event("load"))),this.style&&(this.style.hasTransitions()||_)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const T=u.exported.now()-l;p.endQueryEXT(p.TIME_ELAPSED_EXT,i),setTimeout(()=>{const C=p.getQueryObjectEXT(i,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(i),this.fire(new u.Event("gpu-timing-frame",{cpuTime:T,gpuTime:C}))},50)}if(this.listens("gpu-timing-layer")){const T=this.painter.collectGpuTimers();setTimeout(()=>{const C=this.painter.queryGpuTimers(T);this.fire(new u.Event("gpu-timing-layer",{layerTimes:C}))},50)}const b=this._sourcesDirty||this._styleDirty||this._placementDirty;return b||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.Event("idle")),!this._loaded||this._fullyLoaded||b||(this._fullyLoaded=!0,u.PerformanceUtils.mark(u.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),U.remove(this._canvasContainer),U.remove(this._controlContainer),this._container.classList.remove("maplibregl-map","mapboxgl-map"),u.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new u.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=u.exported.frame(f=>{u.PerformanceUtils.frame(f),this._frame=null,this._render(f)}))}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}_setCacheLimits(f,i){u.setCacheLimits(f,i)}},NavigationControl:class{constructor(f){this.options=u.extend({},be,f),this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(u.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(u.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map.getZoom(),i=f===this._map.getMaxZoom(),l=f===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=l,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",l.toString())}_rotateCompassArrow(){const f=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=f}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Me(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,i){const l=U.create("button",f,this._container);return l.type="button",l.addEventListener("click",i),l}_setButtonTitle(f,i){const l=this._map._getUIString(`NavigationControl.${i}`);f.title=l,f.setAttribute("aria-label",l)}},GeolocateControl:class extends u.Evented{constructor(f){super(),this.options=u.extend({},Mr,f),u.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(f){var i;return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Mn!==void 0?i(Mn):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(l=>{Mn=l.state!=="denied",i(Mn)}):(Mn=!!window.navigator.geolocation,i(Mn)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Yr=0,Kn=!1}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),l=f.coords;return i&&(l.longitude<i.getWest()||l.longitude>i.getEast()||l.latitude<i.getSouth()||l.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new u.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new u.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new u.LngLat(f.coords.longitude,f.coords.latitude),l=f.coords.accuracy,p=this._map.getBearing(),_=u.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(l),_,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new u.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map._container.clientHeight/2,i=this._map.unproject([0,f]),l=this._map.unproject([1,f]),p=i.distanceTo(l),_=Math.ceil(2*this._accuracy/p);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&Kn)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new u.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=U.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){u.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Qt(this._dotElement),this._circleElement=U.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Qt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new u.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return u.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Yr--,Kn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new u.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Yr++,Yr>1?(f={maximumAge:6e5,timeout:0},Kn=!0):(f=this.options.positionOptions,Kn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:w,LogoControl:P,ScaleControl:class{constructor(f){this.options=u.extend({},Hl,f),u.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){_a(this._map,this._container,this.options)}onAdd(f){return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(f){this.options.unit=f,_a(this._map,this._container,this.options)}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:u.warnOnce("Full screen control 'container' must be a DOM element.")),u.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",u.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){U.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=U.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);U.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends u.Evented{constructor(f){super(),this.options=u.extend(Object.create(ui),f),u.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new u.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new u.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=u.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const i=document.createDocumentFragment(),l=document.createElement("body");let p;for(l.innerHTML=f;p=l.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}_createCloseButton(){this.options.closeButton&&(this._closeButton=U.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(f){this._update(f.point)}_onMouseMove(f){this._update(f.point)}_onDrag(f){this._update(f.point)}_update(f){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=U.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=U.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(b=>this._container.classList.add(b)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Se(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!f))return;const i=this._pos=this._trackPointer&&f?f:this._map.project(this._lngLat);let l=this.options.anchor;const p=$s(this.options.offset);if(!l){const b=this._container.offsetWidth,T=this._container.offsetHeight;let C;C=i.y+p.bottom.y<T?["top"]:i.y>this._map.transform.height-T?["bottom"]:[],i.x<b/2?C.push("left"):i.x>this._map.transform.width-b/2&&C.push("right"),l=C.length===0?"bottom":C.join("-")}const _=i.add(p[l]).round();U.setTransform(this._container,`${$e[l]} translate(${_.x}px,${_.y}px)`),$t(this._container,l,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Xl);f&&f.focus()}_onClose(){this.remove()}},Marker:Qt,Style:ni,LngLat:u.LngLat,LngLatBounds:u.LngLatBounds,Point:u.pointGeometry,MercatorCoordinate:u.MercatorCoordinate,Evented:u.Evented,AJAXError:u.AJAXError,config:u.config,CanvasSource:qt,GeoJSONSource:Pt,ImageSource:fn,RasterDEMTileSource:Ye,RasterTileSource:Oe,VectorTileSource:Dn,VideoSource:Wt,prewarm:function(){Ti().acquire(Tr)},clearPrewarmedResources:function(){const f=Ui;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Tr),Ui=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get workerCount(){return ai.workerCount},set workerCount(f){ai.workerCount=f},get maxParallelImageRequests(){return u.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){u.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){u.clearTileCache(f)},workerUrl:"",addProtocol(f,i){u.config.REGISTERED_PROTOCOLS[f]=i},removeProtocol(f){delete u.config.REGISTERED_PROTOCOLS[f]}};return a.extend(Zs,{isSafari:u.isSafari,getPerformanceMetrics:u.PerformanceUtils.getPerformanceMetrics}),Zs});var S=g;return S})})(Mw);var xm=Mw.exports;const bC=In("div",{height:"calc(100vh - $4 - $4)"}),SC=e=>({version:8,sources:{source:{type:"raster",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],maxzoom:4}},layers:[{id:"raster",type:"raster",source:"source"}]}),EC=async e=>{let n=await e.metadata(),s=[];if(n.json){let h=JSON.parse(n.json);if(h.tilestats)for(let g of h.tilestats.layers)g.geometry==="Polygon"?s.push({id:g.layer+"_fill",type:"fill",source:"source","source-layer":g.layer,paint:{"fill-color":"white"}}):g.geometry==="LineString"?s.push({id:g.layer+"_stroke",type:"line",source:"source","source-layer":g.layer,paint:{"line-color":"steelblue","line-width":.5}}):s.push({id:g.layer+"_point",type:"circle",source:"source","source-layer":g.layer,paint:{"circle-color":"red"}})}return{version:8,sources:{source:{type:"vector",tiles:["pmtiles://"+e.source.getKey()+"/{z}/{x}/{y}"],maxzoom:10}},layers:s}};function TC(e){let n=re.exports.useRef(null),s;return re.exports.useEffect(()=>{let h=new KT;return xm.addProtocol("pmtiles",h.protocol),s=new xm.Map({container:n.current,zoom:0,center:[0,0],style:{version:8,sources:{},layers:[]}}),s.addControl(new xm.NavigationControl({})),s.on("load",s.resize),()=>{s.remove()}},[]),re.exports.useEffect(()=>{(async()=>{if(s){let v=(await e.file.metadata()).bounds.split(",");s.fitBounds([[+v[0],+v[1]],[+v[2],+v[3]]]);let S=await L_(e.file);if(S===_u.PNG||S==_u.JPG)s.setStyle(SC(e.file));else{let u=await EC(e.file);s.setStyle(u)}}})()},[]),_t(bC,{ref:n})}function Tl(e){const n=re.exports.useRef(e);return re.exports.useEffect(()=>{n.current=e}),re.exports.useMemo(()=>(...s)=>{var h;return(h=n.current)===null||h===void 0?void 0:h.call(n,...s)},[])}function Qh({prop:e,defaultProp:n,onChange:s=()=>{}}){const[h,g]=function({defaultProp:A,onChange:V}){const W=re.exports.useState(A),[Y]=W,U=re.exports.useRef(Y),de=Tl(V);return re.exports.useEffect(()=>{U.current!==Y&&(de(Y),U.current=Y)},[Y,U,de]),W}({defaultProp:n,onChange:s}),v=e!==void 0,S=v?e:h,u=Tl(s);return[S,re.exports.useCallback(A=>{if(v){const V=A,W=typeof A=="function"?V(e):A;W!==e&&u(W)}else g(A)},[v,e,g,u])]}function wr(e,n,{checkForDefaultPrevented:s=!0}={}){return function(h){if(e==null||e(h),s===!1||!h.defaultPrevented)return n==null?void 0:n(h)}}const PC=re.exports.forwardRef((e,n)=>{const A=e,{pressed:s,defaultPressed:h=!1,onPressedChange:g}=A,v=pn(A,["pressed","defaultPressed","onPressedChange"]),[S=!1,u]=Qh({prop:s,onChange:g,defaultProp:h});return re.exports.createElement(lr.button,Yt({type:"button","aria-pressed":S,"data-state":S?"on":"off","data-disabled":e.disabled?"":void 0},v,{ref:n,onClick:wr(e.onClick,()=>{e.disabled||u(!S)})}))});function kC(e){const n=e+"CollectionProvider",[s,h]=Jh(n),[g,v]=s(n,{collectionRef:{current:null},itemMap:new Map}),S=U=>{const{scope:de,children:ye}=U,me=tn.useRef(null),ze=tn.useRef(new Map).current;return tn.createElement(g,{scope:de,itemMap:ze,collectionRef:me},ye)},u=e+"CollectionSlot",A=tn.forwardRef((U,de)=>{const{scope:ye,children:me}=U,ze=v(u,ye),ie=Js(de,ze.collectionRef);return tn.createElement(Gh,{ref:ie},me)}),V=e+"CollectionItemSlot",W="data-radix-collection-item";return[{Provider:S,Slot:A,ItemSlot:tn.forwardRef((U,de)=>{const Ee=U,{scope:ye,children:me}=Ee,ze=pn(Ee,["scope","children"]),ie=tn.useRef(null),ee=Js(de,ie),te=v(V,ye);return tn.useEffect(()=>(te.itemMap.set(ie,ri({ref:ie},ze)),()=>{te.itemMap.delete(ie)})),tn.createElement(Gh,{[W]:"",ref:ee},me)})},function(U){const de=v(e+"CollectionConsumer",U);return tn.useCallback(()=>{const ye=de.collectionRef.current;if(!ye)return[];const me=Array.from(ye.querySelectorAll(`[${W}]`));return Array.from(de.itemMap.values()).sort((ze,ie)=>me.indexOf(ze.ref.current)-me.indexOf(ie.ref.current))},[de.collectionRef,de.itemMap])},h]}const CC={bubbles:!1,cancelable:!0},[zg,Dw,IC]=kC("RovingFocusGroup"),[zC,rf]=Jh("RovingFocusGroup",[IC]),[AC,MC]=zC("RovingFocusGroup"),LC=re.exports.forwardRef((e,n)=>re.exports.createElement(zg.Provider,{scope:e.__scopeRovingFocusGroup},re.exports.createElement(zg.Slot,{scope:e.__scopeRovingFocusGroup},re.exports.createElement(DC,Yt({},e,{ref:n}))))),DC=re.exports.forwardRef((e,n)=>{const Ee=e,{__scopeRovingFocusGroup:s,orientation:h,dir:g="ltr",loop:v=!1,currentTabStopId:S,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:A,onEntryFocus:V}=Ee,W=pn(Ee,["__scopeRovingFocusGroup","orientation","dir","loop","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus"]),Y=re.exports.useRef(null),U=Js(n,Y),[de=null,ye]=Qh({prop:S,defaultProp:u,onChange:A}),[me,ze]=re.exports.useState(!1),ie=Tl(V),ee=Dw(s),te=re.exports.useRef(!1);return re.exports.useEffect(()=>{const De=Y.current;if(De)return De.addEventListener("rovingFocusGroup.onEntryFocus",ie),()=>De.removeEventListener("rovingFocusGroup.onEntryFocus",ie)},[ie]),re.exports.createElement(AC,{scope:s,orientation:h,dir:g,loop:v,currentTabStopId:de,onItemFocus:re.exports.useCallback(De=>ye(De),[ye]),onItemShiftTab:re.exports.useCallback(()=>ze(!0),[])},re.exports.createElement(lr.div,Yt({tabIndex:me?-1:0,"data-orientation":h},W,{ref:U,style:ri({outline:"none"},e.style),onMouseDown:wr(e.onMouseDown,()=>{te.current=!0}),onFocus:wr(e.onFocus,De=>{const je=!te.current;if(De.target===De.currentTarget&&je&&!me){const Ue=new Event("rovingFocusGroup.onEntryFocus",CC);if(De.currentTarget.dispatchEvent(Ue),!Ue.defaultPrevented){const We=ee().filter(ht=>ht.focusable);Rw([We.find(ht=>ht.active),We.find(ht=>ht.id===de),...We].filter(Boolean).map(ht=>ht.ref.current))}}te.current=!1}),onBlur:wr(e.onBlur,()=>ze(!1))})))}),RC=re.exports.forwardRef((e,n)=>{const W=e,{__scopeRovingFocusGroup:s,focusable:h=!0,active:g=!1}=W,v=pn(W,["__scopeRovingFocusGroup","focusable","active"]),S=Ph(),u=MC("RovingFocusGroupItem",s),A=u.currentTabStopId===S,V=Dw(s);return re.exports.createElement(zg.ItemSlot,{scope:s,id:S,focusable:h,active:g},re.exports.createElement(lr.span,Yt({tabIndex:A?0:-1,"data-orientation":u.orientation},v,{ref:n,onMouseDown:wr(e.onMouseDown,Y=>{h?u.onItemFocus(S):Y.preventDefault()}),onFocus:wr(e.onFocus,()=>u.onItemFocus(S)),onKeyDown:wr(e.onKeyDown,Y=>{if(Y.key==="Tab"&&Y.shiftKey)return void u.onItemShiftTab();if(Y.target!==Y.currentTarget)return;const U=function(me,ze,ie){const ee=function(te,Ee){return Ee!=="rtl"?te:te==="ArrowLeft"?"ArrowRight":te==="ArrowRight"?"ArrowLeft":te}(me.key,ie);return ze==="vertical"&&["ArrowLeft","ArrowRight"].includes(ee)||ze==="horizontal"&&["ArrowUp","ArrowDown"].includes(ee)?void 0:BC[ee]}(Y,u.orientation,u.dir);if(U!==void 0){Y.preventDefault();let me=V().filter(ze=>ze.focusable).map(ze=>ze.ref.current);if(U==="last")me.reverse();else if(U==="prev"||U==="next"){U==="prev"&&me.reverse();const ze=me.indexOf(Y.currentTarget);me=u.loop?(ye=ze+1,(de=me).map((ie,ee)=>de[(ye+ee)%de.length])):me.slice(ze+1)}setTimeout(()=>Rw(me))}var de,ye})})))}),BC={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Rw(e){const n=document.activeElement;for(const s of e)if(s===n||(s.focus(),document.activeElement!==n))return}const Bw=LC,z_=RC,[Fw,Ow]=Jh("ToggleGroup",[rf]),Nw=rf(),FC=tn.forwardRef((e,n)=>{const g=e,{type:s}=g,h=pn(g,["type"]);if(s==="single"){const v=h;return tn.createElement(OC,Yt({},v,{ref:n}))}if(s==="multiple"){const v=h;return tn.createElement(NC,Yt({},v,{ref:n}))}throw new Error("Missing prop `type` expected on `ToggleGroup`")}),[Uw,Vw]=Fw("ToggleGroup"),OC=tn.forwardRef((e,n)=>{const A=e,{value:s,defaultValue:h,onValueChange:g=()=>{}}=A,v=pn(A,["value","defaultValue","onValueChange"]),[S,u]=Qh({prop:s,defaultProp:h,onChange:g});return tn.createElement(Uw,{scope:e.__scopeToggleGroup,type:"single",value:S?[S]:[],onItemActivate:u,onItemDeactivate:tn.useCallback(()=>u(""),[u])},tn.createElement($w,Yt({},v,{ref:n})))}),NC=tn.forwardRef((e,n)=>{const W=e,{value:s,defaultValue:h,onValueChange:g=()=>{}}=W,v=pn(W,["value","defaultValue","onValueChange"]),[S=[],u]=Qh({prop:s,defaultProp:h,onChange:g}),A=tn.useCallback(Y=>u((U=[])=>[...U,Y]),[u]),V=tn.useCallback(Y=>u((U=[])=>U.filter(de=>de!==Y)),[u]);return tn.createElement(Uw,{scope:e.__scopeToggleGroup,type:"multiple",value:S,onItemActivate:A,onItemDeactivate:V},tn.createElement($w,Yt({},v,{ref:n})))}),[UC,VC]=Fw("ToggleGroup"),$w=tn.forwardRef((e,n)=>{const Y=e,{__scopeToggleGroup:s,disabled:h=!1,rovingFocus:g=!0,orientation:v,dir:S="ltr",loop:u=!0}=Y,A=pn(Y,["__scopeToggleGroup","disabled","rovingFocus","orientation","dir","loop"]),V=Nw(s),W=ri({role:"group",dir:S},A);return tn.createElement(UC,{scope:s,rovingFocus:g,disabled:h},g?tn.createElement(Bw,Yt({asChild:!0},V,{orientation:v,dir:S,loop:u}),tn.createElement(lr.div,Yt({},W,{ref:n}))):tn.createElement(lr.div,Yt({},W,{ref:n})))}),$C=tn.forwardRef((e,n)=>{const s=Vw("ToggleGroupItem",e.__scopeToggleGroup),h=VC("ToggleGroupItem",e.__scopeToggleGroup),g=Nw(e.__scopeToggleGroup),v=s.value.includes(e.value),S=h.disabled||e.disabled,u=ka(ri({},e),{pressed:v,disabled:S}),A=tn.useRef(null);return h.rovingFocus?tn.createElement(z_,Yt({asChild:!0},g,{focusable:!S,active:v,ref:A}),tn.createElement(Fx,Yt({},u,{ref:n}))):tn.createElement(Fx,Yt({},u,{ref:n}))}),Fx=tn.forwardRef((e,n)=>{const A=e,{__scopeToggleGroup:s,value:h}=A,g=pn(A,["__scopeToggleGroup","value"]),v=Vw("ToggleGroupItem",s),S={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},u=v.type==="single"?S:void 0;return tn.createElement(PC,Yt({},u,g,{ref:n,onPressedChange:V=>{V?v.onItemActivate(h):v.onItemDeactivate(h)}}))}),ZC=FC,jC=$C,[GC,Fz]=Jh("Toolbar",[rf,Ow]),A_=rf(),Zw=Ow(),[WC,qC]=GC("Toolbar"),HC=re.exports.forwardRef((e,n)=>{const A=e,{__scopeToolbar:s,orientation:h="horizontal",dir:g="ltr",loop:v=!0}=A,S=pn(A,["__scopeToolbar","orientation","dir","loop"]),u=A_(s);return re.exports.createElement(WC,{scope:s,orientation:h},re.exports.createElement(Bw,Yt({asChild:!0},u,{orientation:h,dir:g,loop:v}),re.exports.createElement(lr.div,Yt({role:"toolbar","aria-orientation":h,dir:g},S,{ref:n}))))}),XC=re.exports.forwardRef((e,n)=>{const v=e,{__scopeToolbar:s}=v,h=pn(v,["__scopeToolbar"]),g=A_(s);return re.exports.createElement(z_,Yt({asChild:!0},g,{focusable:!e.disabled}),re.exports.createElement(lr.button,Yt({type:"button"},h,{ref:n})))}),KC=re.exports.forwardRef((e,n)=>{const v=e,{__scopeToolbar:s}=v,h=pn(v,["__scopeToolbar"]),g=A_(s);return re.exports.createElement(z_,Yt({asChild:!0},g,{focusable:!0}),re.exports.createElement(lr.a,Yt({},h,{ref:n,onKeyDown:wr(e.onKeyDown,S=>{S.key===" "&&S.currentTarget.click()})})))}),YC=re.exports.forwardRef((e,n)=>{const S=e,{__scopeToolbar:s}=S,h=pn(S,["__scopeToolbar"]),g=qC("ToolbarToggleGroup",s),v=Zw(s);return re.exports.createElement(ZC,Yt({"data-orientation":g.orientation},v,h,{ref:n,rovingFocus:!1}))}),JC=re.exports.forwardRef((e,n)=>{const v=e,{__scopeToolbar:s}=v,h=pn(v,["__scopeToolbar"]),g=Zw(s);return re.exports.createElement(XC,Yt({asChild:!0},e),re.exports.createElement(jC,Yt({},g,h,{ref:n})))}),QC=HC,eI=KC,tI=YC,nI=JC;var iI=function(e){if(typeof document=="undefined")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Hu=new WeakMap,jd=new WeakMap,Gd={},wm=0,rI=function(e,n,s){n===void 0&&(n=iI(e)),s===void 0&&(s="data-aria-hidden");var h=Array.isArray(e)?e:[e];Gd[s]||(Gd[s]=new WeakMap);var g=Gd[s],v=[],S=new Set,u=function(V){!V||S.has(V)||(S.add(V),u(V.parentNode))};h.forEach(u);var A=function(V){!V||h.indexOf(V)>=0||Array.prototype.forEach.call(V.children,function(W){if(S.has(W))A(W);else{var Y=W.getAttribute("aria-hidden"),U=Y!==null&&Y!=="false",de=(Hu.get(W)||0)+1,ye=(g.get(W)||0)+1;Hu.set(W,de),g.set(W,ye),v.push(W),de===1&&U&&jd.set(W,!0),ye===1&&W.setAttribute(s,"true"),U||W.setAttribute("aria-hidden","true")}})};return A(n),S.clear(),wm++,function(){v.forEach(function(V){var W=Hu.get(V)-1,Y=g.get(V)-1;Hu.set(V,W),g.set(V,Y),W||(jd.has(V)||V.removeAttribute("aria-hidden"),jd.delete(V)),Y||V.removeAttribute(s)}),wm--,wm||(Hu=new WeakMap,Hu=new WeakMap,jd=new WeakMap,Gd={})}},pl=function(){return pl=Object.assign||function(n){for(var s,h=1,g=arguments.length;h<g;h++){s=arguments[h];for(var v in s)Object.prototype.hasOwnProperty.call(s,v)&&(n[v]=s[v])}return n},pl.apply(this,arguments)};function oI(e,n){var s={};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&n.indexOf(h)<0&&(s[h]=e[h]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,h=Object.getOwnPropertySymbols(e);g<h.length;g++)n.indexOf(h[g])<0&&Object.prototype.propertyIsEnumerable.call(e,h[g])&&(s[h[g]]=e[h[g]]);return s}function sI(e,n,s){if(s||arguments.length===2)for(var h=0,g=n.length,v;h<g;h++)(v||!(h in n))&&(v||(v=Array.prototype.slice.call(n,0,h)),v[h]=n[h]);return e.concat(v||Array.prototype.slice.call(n))}var ap="right-scroll-bar-position",lp="width-before-scroll-bar",aI="with-scroll-bars-hidden",lI="--removed-body-scroll-bar-size";function uI(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function cI(e,n){var s=re.exports.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(h){var g=s.value;g!==h&&(s.value=h,s.callback(h,g))}}}})[0];return s.callback=n,s.facade}function hI(e,n){return cI(n||null,function(s){return e.forEach(function(h){return uI(h,s)})})}var Np=function(){return Np=Object.assign||function(n){for(var s,h=1,g=arguments.length;h<g;h++){s=arguments[h];for(var v in s)Object.prototype.hasOwnProperty.call(s,v)&&(n[v]=s[v])}return n},Np.apply(this,arguments)};function dI(e,n){var s={};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&n.indexOf(h)<0&&(s[h]=e[h]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,h=Object.getOwnPropertySymbols(e);g<h.length;g++)n.indexOf(h[g])<0&&Object.prototype.propertyIsEnumerable.call(e,h[g])&&(s[h[g]]=e[h[g]]);return s}function pI(e){return e}function fI(e,n){n===void 0&&(n=pI);var s=[],h=!1,g={read:function(){if(h)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(v){var S=n(v,h);return s.push(S),function(){s=s.filter(function(u){return u!==S})}},assignSyncMedium:function(v){for(h=!0;s.length;){var S=s;s=[],S.forEach(v)}s={push:function(u){return v(u)},filter:function(){return s}}},assignMedium:function(v){h=!0;var S=[];if(s.length){var u=s;s=[],u.forEach(v),S=s}var A=function(){var W=S;S=[],W.forEach(v)},V=function(){return Promise.resolve().then(A)};V(),s={push:function(W){S.push(W),V()},filter:function(W){return S=S.filter(W),s}}}};return g}function mI(e){e===void 0&&(e={});var n=fI(null);return n.options=Np({async:!0,ssr:!1},e),n}var jw=function(e){var n=e.sideCar,s=dI(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var h=n.read();if(!h)throw new Error("Sidecar medium not found");return re.exports.createElement(h,Np({},s))};jw.isSideCarExport=!0;function gI(e,n){return e.useMedium(n),jw}var Gw=mI(),bm=function(){},of=re.exports.forwardRef(function(e,n){var s=re.exports.useRef(null),h=re.exports.useState({onScrollCapture:bm,onWheelCapture:bm,onTouchMoveCapture:bm}),g=h[0],v=h[1],S=e.forwardProps,u=e.children,A=e.className,V=e.removeScrollBar,W=e.enabled,Y=e.shards,U=e.sideCar,de=e.noIsolation,ye=e.inert,me=e.allowPinchZoom,ze=e.as,ie=ze===void 0?"div":ze,ee=oI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),te=U,Ee=hI([s,n]),De=pl(pl({},ee),g);return re.exports.createElement(re.exports.Fragment,null,W&&re.exports.createElement(te,{sideCar:Gw,removeScrollBar:V,shards:Y,noIsolation:de,inert:ye,setCallbacks:v,allowPinchZoom:!!me,lockRef:s}),S?re.exports.cloneElement(re.exports.Children.only(u),pl(pl({},De),{ref:Ee})):re.exports.createElement(ie,pl({},De,{className:A,ref:Ee}),u))});of.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};of.classNames={fullWidth:lp,zeroRight:ap};var _I=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function yI(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=_I();return n&&e.setAttribute("nonce",n),e}function vI(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function xI(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var wI=function(){var e=0,n=null;return{add:function(s){e==0&&(n=yI())&&(vI(n,s),xI(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},bI=function(){var e=wI();return function(n){re.exports.useEffect(function(){return e.add(n),function(){e.remove()}},[n])}},Ww=function(){var e=bI(),n=function(s){var h=s.styles;return e(h),null};return n},SI={left:0,top:0,right:0,gap:0},Sm=function(e){return parseInt(e||"",10)||0},EI=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],h=n[e==="padding"?"paddingTop":"marginTop"],g=n[e==="padding"?"paddingRight":"marginRight"];return[Sm(s),Sm(h),Sm(g)]},Ox=function(e){if(e===void 0&&(e="margin"),typeof window=="undefined")return SI;var n=EI(e),s=document.documentElement.clientWidth,h=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,h-s+n[2]-n[0])}},TI=Ww(),PI=function(e,n,s,h){var g=e.left,v=e.top,S=e.right,u=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(aI,` {
   overflow: hidden `).concat(h,`;
   padding-right: `).concat(u,"px ").concat(h,`;
  }
  body {
    overflow: hidden `).concat(h,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(h,";"),s==="margin"&&`
    padding-left: `.concat(g,`px;
    padding-top: `).concat(v,`px;
    padding-right: `).concat(S,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(h,`;
    `),s==="padding"&&"padding-right: ".concat(u,"px ").concat(h,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ap,` {
    right: `).concat(u,"px ").concat(h,`;
  }
  
  .`).concat(lp,` {
    margin-right: `).concat(u,"px ").concat(h,`;
  }
  
  .`).concat(ap," .").concat(ap,` {
    right: 0 `).concat(h,`;
  }
  
  .`).concat(lp," .").concat(lp,` {
    margin-right: 0 `).concat(h,`;
  }
  
  body {
    `).concat(lI,": ").concat(u,`px;
  }
`)},kI=function(e){var n=re.exports.useState(Ox(e.gapMode)),s=n[0],h=n[1];re.exports.useEffect(function(){h(Ox(e.gapMode))},[e.gapMode]);var g=e.noRelative,v=e.noImportant,S=e.gapMode,u=S===void 0?"margin":S;return re.exports.createElement(TI,{styles:PI(s,!g,u,v?"":"!important")})},Ag=!1;if(typeof window!="undefined")try{var Wd=Object.defineProperty({},"passive",{get:function(){return Ag=!0,!0}});window.addEventListener("test",Wd,Wd),window.removeEventListener("test",Wd,Wd)}catch{Ag=!1}var Xu=Ag?{passive:!1}:!1,CI=function(e){var n=window.getComputedStyle(e);return n.overflowY!=="hidden"&&!(n.overflowY===n.overflowX&&n.overflowY==="visible")},II=function(e){var n=window.getComputedStyle(e);return n.overflowX!=="hidden"&&!(n.overflowY===n.overflowX&&n.overflowX==="visible")},Nx=function(e,n){var s=n;do{typeof ShadowRoot!="undefined"&&s instanceof ShadowRoot&&(s=s.host);var h=qw(e,s);if(h){var g=Hw(e,s),v=g[1],S=g[2];if(v>S)return!0}s=s.parentNode}while(s&&s!==document.body);return!1},zI=function(e){var n=e.scrollTop,s=e.scrollHeight,h=e.clientHeight;return[n,s,h]},AI=function(e){var n=e.scrollLeft,s=e.scrollWidth,h=e.clientWidth;return[n,s,h]},qw=function(e,n){return e==="v"?CI(n):II(n)},Hw=function(e,n){return e==="v"?zI(n):AI(n)},MI=function(e,n){return e==="h"&&n==="rtl"?-1:1},LI=function(e,n,s,h,g){var v=MI(e,window.getComputedStyle(n).direction),S=v*h,u=s.target,A=n.contains(u),V=!1,W=S>0,Y=0,U=0;do{var de=Hw(e,u),ye=de[0],me=de[1],ze=de[2],ie=me-ze-v*ye;(ye||ie)&&qw(e,u)&&(Y+=ie,U+=ye),u=u.parentNode}while(!A&&u!==document.body||A&&(n.contains(u)||n===u));return(W&&(g&&Y===0||!g&&S>Y)||!W&&(g&&U===0||!g&&-S>U))&&(V=!0),V},qd=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ux=function(e){return[e.deltaX,e.deltaY]},Vx=function(e){return e&&"current"in e?e.current:e},DI=function(e,n){return e[0]===n[0]&&e[1]===n[1]},RI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},BI=0,Ku=[];function FI(e){var n=re.exports.useRef([]),s=re.exports.useRef([0,0]),h=re.exports.useRef(),g=re.exports.useState(BI++)[0],v=re.exports.useState(function(){return Ww()})[0],S=re.exports.useRef(e);re.exports.useEffect(function(){S.current=e},[e]),re.exports.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(g));var me=sI([e.lockRef.current],(e.shards||[]).map(Vx),!0).filter(Boolean);return me.forEach(function(ze){return ze.classList.add("allow-interactivity-".concat(g))}),function(){document.body.classList.remove("block-interactivity-".concat(g)),me.forEach(function(ze){return ze.classList.remove("allow-interactivity-".concat(g))})}}},[e.inert,e.lockRef.current,e.shards]);var u=re.exports.useCallback(function(me,ze){if("touches"in me&&me.touches.length===2)return!S.current.allowPinchZoom;var ie=qd(me),ee=s.current,te="deltaX"in me?me.deltaX:ee[0]-ie[0],Ee="deltaY"in me?me.deltaY:ee[1]-ie[1],De,je=me.target,Ue=Math.abs(te)>Math.abs(Ee)?"h":"v";if("touches"in me&&Ue==="h"&&je.type==="range")return!1;var We=Nx(Ue,je);if(!We)return!0;if(We?De=Ue:(De=Ue==="v"?"h":"v",We=Nx(Ue,je)),!We)return!1;if(!h.current&&"changedTouches"in me&&(te||Ee)&&(h.current=De),!De)return!0;var ht=h.current||De;return LI(ht,ze,me,ht==="h"?te:Ee,!0)},[]),A=re.exports.useCallback(function(me){var ze=me;if(!(!Ku.length||Ku[Ku.length-1]!==v)){var ie="deltaY"in ze?Ux(ze):qd(ze),ee=n.current.filter(function(De){return De.name===ze.type&&De.target===ze.target&&DI(De.delta,ie)})[0];if(ee&&ee.should){ze.preventDefault();return}if(!ee){var te=(S.current.shards||[]).map(Vx).filter(Boolean).filter(function(De){return De.contains(ze.target)}),Ee=te.length>0?u(ze,te[0]):!S.current.noIsolation;Ee&&ze.preventDefault()}}},[]),V=re.exports.useCallback(function(me,ze,ie,ee){var te={name:me,delta:ze,target:ie,should:ee};n.current.push(te),setTimeout(function(){n.current=n.current.filter(function(Ee){return Ee!==te})},1)},[]),W=re.exports.useCallback(function(me){s.current=qd(me),h.current=void 0},[]),Y=re.exports.useCallback(function(me){V(me.type,Ux(me),me.target,u(me,e.lockRef.current))},[]),U=re.exports.useCallback(function(me){V(me.type,qd(me),me.target,u(me,e.lockRef.current))},[]);re.exports.useEffect(function(){return Ku.push(v),e.setCallbacks({onScrollCapture:Y,onWheelCapture:Y,onTouchMoveCapture:U}),document.addEventListener("wheel",A,Xu),document.addEventListener("touchmove",A,Xu),document.addEventListener("touchstart",W,Xu),function(){Ku=Ku.filter(function(me){return me!==v}),document.removeEventListener("wheel",A,Xu),document.removeEventListener("touchmove",A,Xu),document.removeEventListener("touchstart",W,Xu)}},[]);var de=e.removeScrollBar,ye=e.inert;return re.exports.createElement(re.exports.Fragment,null,ye?re.exports.createElement(v,{styles:RI(g)}):null,de?re.exports.createElement(kI,{gapMode:"margin"}):null)}var OI=gI(Gw,FI),Xw=re.exports.forwardRef(function(e,n){return re.exports.createElement(of,pl({},e,{ref:n,sideCar:OI}))});Xw.classNames=of.classNames;var NI=Xw;let Em=0;function UI(){re.exports.useEffect(()=>{var e,n;const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=s[0])!==null&&e!==void 0?e:$x()),document.body.insertAdjacentElement("beforeend",(n=s[1])!==null&&n!==void 0?n:$x()),Em++,()=>{Em===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(h=>h.remove()),Em--}},[])}function $x(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const sf=e=>{const{present:n,children:s}=e,h=function(S){const[u,A]=re.exports.useState(),V=re.exports.useRef({}),W=re.exports.useRef(S),Y=re.exports.useRef("none"),U=S?"mounted":"unmounted",[de,ye]=function(me,ze){return re.exports.useReducer((ie,ee)=>{const te=ze[ie][ee];return te!=null?te:ie},me)}(U,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return re.exports.useEffect(()=>{const me=Hd(V.current);Y.current=de==="mounted"?me:"none"},[de]),Op(()=>{const me=V.current,ze=W.current;if(ze!==S){const ie=Y.current,ee=Hd(me);S?ye("MOUNT"):ee==="none"||(me==null?void 0:me.display)==="none"?ye("UNMOUNT"):ye(ze&&ie!==ee?"ANIMATION_OUT":"UNMOUNT"),W.current=S}},[S,ye]),Op(()=>{if(u){const me=ie=>{const ee=Hd(V.current).includes(ie.animationName);ie.target===u&&ee&&ye("ANIMATION_END")},ze=ie=>{ie.target===u&&(Y.current=Hd(V.current))};return u.addEventListener("animationstart",ze),u.addEventListener("animationcancel",me),u.addEventListener("animationend",me),()=>{u.removeEventListener("animationstart",ze),u.removeEventListener("animationcancel",me),u.removeEventListener("animationend",me)}}ye("ANIMATION_END")},[u,ye]),{isPresent:["mounted","unmountSuspended"].includes(de),ref:re.exports.useCallback(me=>{me&&(V.current=getComputedStyle(me)),A(me)},[])}}(n),g=typeof s=="function"?s({present:h.isPresent}):re.exports.Children.only(s),v=Js(h.ref,g.ref);return typeof s=="function"||h.isPresent?re.exports.cloneElement(g,{ref:v}):null};function Hd(e){return(e==null?void 0:e.animationName)||"none"}sf.displayName="Presence";const VI=re.exports.forwardRef((e,n)=>{var s;const v=e,{container:h=globalThis==null||(s=globalThis.document)===null||s===void 0?void 0:s.body}=v,g=pn(v,["container"]);return h?lT.createPortal(re.exports.createElement(lr.div,Yt({},g,{ref:n})),h):null}),Zx={bubbles:!1,cancelable:!0},$I=re.exports.forwardRef((e,n)=>{const me=e,{loop:s=!1,trapped:h=!1,onMountAutoFocus:g,onUnmountAutoFocus:v}=me,S=pn(me,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[u,A]=re.exports.useState(null),V=Tl(g),W=Tl(v),Y=re.exports.useRef(null),U=Js(n,ze=>A(ze)),de=re.exports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;re.exports.useEffect(()=>{if(h){let ee=function(Ee){if(de.paused||!u)return;const De=Ee.target;u.contains(De)?Y.current=De:tu(Y.current,{select:!0})},te=function(Ee){!de.paused&&u&&(u.contains(Ee.relatedTarget)||tu(Y.current,{select:!0}))};var ze=ee,ie=te;return document.addEventListener("focusin",ee),document.addEventListener("focusout",te),()=>{document.removeEventListener("focusin",ee),document.removeEventListener("focusout",te)}}},[h,u,de.paused]),re.exports.useEffect(()=>{if(u){Wx.add(de);const ie=document.activeElement;if(!u.contains(ie)){const ee=new Event("focusScope.autoFocusOnMount",Zx);u.addEventListener("focusScope.autoFocusOnMount",V),u.dispatchEvent(ee),ee.defaultPrevented||(function(te,{select:Ee=!1}={}){const De=document.activeElement;for(const je of te)if(tu(je,{select:Ee}),document.activeElement!==De)return}((ze=jx(u),ze.filter(te=>te.tagName!=="A")),{select:!0}),document.activeElement===ie&&tu(u))}return()=>{u.removeEventListener("focusScope.autoFocusOnMount",V),setTimeout(()=>{const ee=new Event("focusScope.autoFocusOnUnmount",Zx);u.addEventListener("focusScope.autoFocusOnUnmount",W),u.dispatchEvent(ee),ee.defaultPrevented||tu(ie!=null?ie:document.body,{select:!0}),u.removeEventListener("focusScope.autoFocusOnUnmount",W),Wx.remove(de)},0)}}var ze},[u,V,W,de]);const ye=re.exports.useCallback(ze=>{if(!s&&!h||de.paused)return;const ie=ze.key==="Tab"&&!ze.altKey&&!ze.ctrlKey&&!ze.metaKey,ee=document.activeElement;if(ie&&ee){const te=ze.currentTarget,[Ee,De]=function(je){const Ue=jx(je),We=Gx(Ue,je),ht=Gx(Ue.reverse(),je);return[We,ht]}(te);Ee&&De?ze.shiftKey||ee!==De?ze.shiftKey&&ee===Ee&&(ze.preventDefault(),s&&tu(De,{select:!0})):(ze.preventDefault(),s&&tu(Ee,{select:!0})):ee===te&&ze.preventDefault()}},[s,h,de.paused]);return re.exports.createElement(lr.div,Yt({tabIndex:-1},S,{ref:U,onKeyDown:ye}))});function jx(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:h=>{const g=h.tagName==="INPUT"&&h.type==="hidden";return h.disabled||h.hidden||g?NodeFilter.FILTER_SKIP:h.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function Gx(e,n){for(const s of e)if(!ZI(s,{upTo:n}))return s}function ZI(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function tu(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&function(h){return h instanceof HTMLInputElement&&"select"in h}(e)&&n&&e.select()}}const Wx=function(){let e=[];return{add(n){const s=e[0];n!==s&&(s==null||s.pause()),e=qx(e,n),e.unshift(n)},remove(n){var s;e=qx(e,n),(s=e[0])===null||s===void 0||s.resume()}}}();function qx(e,n){const s=[...e],h=s.indexOf(n);return h!==-1&&s.splice(h,1),s}function jI(e){const n=Tl(e);re.exports.useEffect(()=>{const s=h=>{h.key==="Escape"&&n(h)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[n])}let Hx,Xd=0;function GI({disabled:e}){const n=re.exports.useRef(!1);Op(()=>{if(e){let g=function(){Xd--,Xd===0&&(document.body.style.pointerEvents=Hx)},v=function(S){n.current=S.pointerType!=="mouse"};var s=g,h=v;return Xd===0&&(Hx=document.body.style.pointerEvents),document.body.style.pointerEvents="none",Xd++,document.addEventListener("pointerup",v),()=>{n.current?document.addEventListener("click",g,{once:!0}):g(),document.removeEventListener("pointerup",v)}}},[e])}const WI=re.exports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qI=re.exports.forwardRef((e,n)=>{const je=e,{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:v,onInteractOutside:S,onDismiss:u}=je,A=pn(je,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),V=re.exports.useContext(WI),[W,Y]=re.exports.useState(null),[,U]=re.exports.useState({}),de=Js(n,Ue=>Y(Ue)),ye=Array.from(V.layers),[me]=[...V.layersWithOutsidePointerEventsDisabled].slice(-1),ze=ye.indexOf(me),ie=W?ye.indexOf(W):-1,ee=V.layersWithOutsidePointerEventsDisabled.size>0,te=ie>=ze,Ee=function(Ue){const We=Tl(Ue),ht=re.exports.useRef(!1);return re.exports.useEffect(()=>{const ft=Ut=>{Ut.target&&!ht.current&&Kx("dismissableLayer.pointerDownOutside",We,{originalEvent:Ut}),ht.current=!1},Ct=window.setTimeout(()=>{document.addEventListener("pointerdown",ft)},0);return()=>{window.clearTimeout(Ct),document.removeEventListener("pointerdown",ft)}},[We]),{onPointerDownCapture:()=>ht.current=!0}}(Ue=>{const We=Ue.target,ht=[...V.branches].some(ft=>ft.contains(We));te&&!ht&&(g==null||g(Ue),S==null||S(Ue),Ue.defaultPrevented||u==null||u())}),De=function(Ue){const We=Tl(Ue),ht=re.exports.useRef(!1);return re.exports.useEffect(()=>{const ft=Ct=>{Ct.target&&!ht.current&&Kx("dismissableLayer.focusOutside",We,{originalEvent:Ct})};return document.addEventListener("focusin",ft),()=>document.removeEventListener("focusin",ft)},[We]),{onFocusCapture:()=>ht.current=!0,onBlurCapture:()=>ht.current=!1}}(Ue=>{const We=Ue.target;[...V.branches].some(ht=>ht.contains(We))||(v==null||v(Ue),S==null||S(Ue),Ue.defaultPrevented||u==null||u())});return jI(Ue=>{ie===V.layers.size-1&&(h==null||h(Ue),Ue.defaultPrevented||u==null||u())}),GI({disabled:s}),re.exports.useEffect(()=>{W&&(s&&V.layersWithOutsidePointerEventsDisabled.add(W),V.layers.add(W),Xx())},[W,s,V]),re.exports.useEffect(()=>()=>{W&&(V.layers.delete(W),V.layersWithOutsidePointerEventsDisabled.delete(W),Xx())},[W,V]),re.exports.useEffect(()=>{const Ue=()=>U({});return document.addEventListener("dismissableLayer.update",Ue),()=>document.removeEventListener("dismissableLayer.update",Ue)},[]),re.exports.createElement(lr.div,Yt({},A,{ref:de,style:ri({pointerEvents:ee?te?"auto":"none":void 0},e.style),onFocusCapture:wr(e.onFocusCapture,De.onFocusCapture),onBlurCapture:wr(e.onBlurCapture,De.onBlurCapture),onPointerDownCapture:wr(e.onPointerDownCapture,Ee.onPointerDownCapture)}))});function Xx(){const e=new Event("dismissableLayer.update");document.dispatchEvent(e)}function Kx(e,n,s){const h=s.originalEvent.target,g=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});return n&&h.addEventListener(e,n,{once:!0}),!h.dispatchEvent(g)}const[HI,Oz]=Jh("Dialog"),[XI,bs]=HI("Dialog"),KI=e=>{const{__scopeDialog:n,children:s,open:h,defaultOpen:g,onOpenChange:v,modal:S=!0,allowPinchZoom:u}=e,A=re.exports.useRef(null),V=re.exports.useRef(null),[W=!1,Y]=Qh({prop:h,defaultProp:g,onChange:v});return re.exports.createElement(XI,{scope:n,triggerRef:A,contentRef:V,contentId:Ph(),titleId:Ph(),descriptionId:Ph(),open:W,onOpenChange:Y,onOpenToggle:re.exports.useCallback(()=>Y(U=>!U),[Y]),modal:S,allowPinchZoom:u},s)},YI=re.exports.forwardRef((e,n)=>{const S=e,{__scopeDialog:s}=S,h=pn(S,["__scopeDialog"]),g=bs("DialogTrigger",s),v=Js(n,g.triggerRef);return re.exports.createElement(lr.button,Yt({type:"button","aria-haspopup":"dialog","aria-expanded":g.open,"aria-controls":g.contentId,"data-state":M_(g.open)},h,{ref:v,onClick:wr(e.onClick,g.onOpenToggle)}))}),JI=e=>{const{__scopeDialog:n,forceMount:s,children:h,container:g}=e,v=bs("DialogPortal",n);return re.exports.createElement(re.exports.Fragment,null,re.exports.Children.map(h,S=>re.exports.createElement(sf,{present:s||v.open},re.exports.createElement(VI,{asChild:!0,container:g},S))))},QI=re.exports.forwardRef((e,n)=>{const v=e,{forceMount:s}=v,h=pn(v,["forceMount"]),g=bs("DialogOverlay",e.__scopeDialog);return g.modal?re.exports.createElement(sf,{present:s||g.open},re.exports.createElement(ez,Yt({},h,{ref:n}))):null}),ez=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:s}=v,h=pn(v,["__scopeDialog"]),g=bs("DialogOverlay",s);return re.exports.createElement(NI,{as:Gh,allowPinchZoom:g.allowPinchZoom,shards:[g.contentRef]},re.exports.createElement(lr.div,Yt({"data-state":M_(g.open)},h,{ref:n,style:ri({pointerEvents:"auto"},h.style)})))}),tz=re.exports.forwardRef((e,n)=>{const v=e,{forceMount:s}=v,h=pn(v,["forceMount"]),g=bs("DialogContent",e.__scopeDialog);return re.exports.createElement(sf,{present:s||g.open},g.modal?re.exports.createElement(nz,Yt({},h,{ref:n})):re.exports.createElement(iz,Yt({},h,{ref:n})))}),nz=re.exports.forwardRef((e,n)=>{const s=bs("DialogContent",e.__scopeDialog),h=re.exports.useRef(null),g=Js(n,s.contentRef,h);return re.exports.useEffect(()=>{const v=h.current;if(v)return rI(v)},[]),re.exports.createElement(Kw,Yt({},e,{ref:g,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:wr(e.onCloseAutoFocus,v=>{var S;v.preventDefault(),(S=s.triggerRef.current)===null||S===void 0||S.focus()}),onPointerDownOutside:wr(e.onPointerDownOutside,v=>{const S=v.detail.originalEvent,u=S.button===0&&S.ctrlKey===!0;(S.button===2||u)&&v.preventDefault()}),onFocusOutside:wr(e.onFocusOutside,v=>v.preventDefault())}))}),iz=re.exports.forwardRef((e,n)=>{const s=bs("DialogContent",e.__scopeDialog),h=re.exports.useRef(!1);return re.exports.createElement(Kw,Yt({},e,{ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var v,S;(v=e.onCloseAutoFocus)===null||v===void 0||v.call(e,g),g.defaultPrevented||(h.current||(S=s.triggerRef.current)===null||S===void 0||S.focus(),g.preventDefault()),h.current=!1},onInteractOutside:g=>{var v,S;(v=e.onInteractOutside)===null||v===void 0||v.call(e,g),g.defaultPrevented||(h.current=!0);const u=g.target;!((S=s.triggerRef.current)===null||S===void 0)&&S.contains(u)&&g.preventDefault()}}))}),Kw=re.exports.forwardRef((e,n)=>{const W=e,{__scopeDialog:s,trapFocus:h,onOpenAutoFocus:g,onCloseAutoFocus:v}=W,S=pn(W,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),u=bs("DialogContent",s),A=re.exports.useRef(null),V=Js(n,A);return UI(),re.exports.createElement(re.exports.Fragment,null,re.exports.createElement($I,{asChild:!0,loop:!0,trapped:h,onMountAutoFocus:g,onUnmountAutoFocus:v},re.exports.createElement(qI,Yt({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":M_(u.open)},S,{ref:V,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),rz=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:s}=v,h=pn(v,["__scopeDialog"]),g=bs("DialogTitle",s);return re.exports.createElement(lr.h2,Yt({id:g.titleId},h,{ref:n}))}),oz=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:s}=v,h=pn(v,["__scopeDialog"]),g=bs("DialogDescription",s);return re.exports.createElement(lr.p,Yt({id:g.descriptionId},h,{ref:n}))}),sz=re.exports.forwardRef((e,n)=>{const v=e,{__scopeDialog:s}=v,h=pn(v,["__scopeDialog"]),g=bs("DialogClose",s);return re.exports.createElement(lr.button,Yt({type:"button"},h,{ref:n,onClick:wr(e.onClick,()=>g.onOpenChange(!1))}))});function M_(e){return e?"open":"closed"}Cw("DialogTitleWarning",{contentName:"DialogContent",titleName:"DialogTitle",docsSlug:"dialog"});const az=KI,lz=YI,uz=JI,cz=QI,hz=tz,dz=rz,pz=oz,fz=sz;var _u=(e=>(e[e.UNKNOWN=1]="UNKNOWN",e[e.PNG=2]="PNG",e[e.JPG=3]="JPG",e[e.MVT=4]="MVT",e[e.MVT_GZ=5]="MVT_GZ",e))(_u||{});const mz=In(QC,{display:"flex",height:"$4",width:"100%",boxSizing:"border-box",minWidth:"max-content",backgroundColor:"white",boxShadow:'0 2px 10px "black"'}),Yw={all:"unset",flex:"0 0 auto",color:"$black",display:"inline-flex",padding:"0 $1 0 $1",fontSize:"$2",alignItems:"center","&:hover":{backgroundColor:"$hover",color:"$white"},"&:focus":{position:"relative",boxShadow:"0 0 0 2px blue"}},gz=In(eI,ka(ri({},Yw),{backgroundColor:"transparent",color:"black",display:"inline-flex",justifyContent:"center",alignItems:"center"}),{"&:hover":{backgroundColor:"$hover",color:"$white",cursor:"pointer"}}),_z=In(tI,{display:"inline-flex",borderRadius:4}),yz=In(nI,ka(ri({},Yw),{boxShadow:0,backgroundColor:"white",marginLeft:2,cursor:"pointer","&:first-child":{marginLeft:0},"&[data-state=on]":{backgroundColor:"$primary",color:"$primaryText"}})),vz=In(lz,{backgroundColor:"$primary",color:"$primaryText",padding:"$1",cursor:"pointer"}),xz=In(cz,{backgroundColor:"black",position:"fixed",inset:0,opacity:"40%",zIndex:3}),wz=In(hz,{backgroundColor:"#222",padding:"$1",borderRadius:6,position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90vw",zIndex:4,"&:focus":{outline:"none"}}),bz=In("table",{tableLayout:"fixed",width:"100%"}),Sz=In("td",{padding:"0 $1"}),Jw=In("td",{fontFamily:"monospace"}),Ez=In(Jw,{overflowX:"scroll"}),L_=async e=>{let n=await e.source.getBytes(512e3,4),s=n.getUint8(0),h=n.getUint8(1),g=n.getUint8(2),v=n.getUint8(3);return s==137&&h==80&&g==78&&v==71?2:s==255&&h==216&&g==255&&v==224?3:s==31&&h==139?5:4},Tz=mz,Pz=gz,kz=_z,Tm=yz;function Cz(e){let[n,s]=re.exports.useState("inspector");re.exports.useState(1);let[h,g]=re.exports.useState([]),[v,S]=re.exports.useState(!1),u;n==="leaflet"?u=_t(wC,{file:e.file}):n==="maplibre"?u=_t(TC,{file:e.file}):u=_t(yC,{file:e.file}),re.exports.useEffect(()=>{let W=e.file;(async()=>{let U=await W.metadata(),de=[];for(var ye in U)de.push([ye,U[ye]]);g(de)})()},[e.file]);const A=h.map((W,Y)=>{let U=W[0]==="json"?Ez:Jw;return vi("tr",{children:[_t(Sz,{children:W[0]}),_t(U,{children:W[1]})]},Y)}),V=()=>{S(!1)};return vi(Sw,{children:[vi(Tz,{"aria-label":"Formatting options",children:[vi(kz,{type:"single",defaultValue:"center","aria-label":"Text alignment",value:n,onValueChange:s,children:[vi(Tm,{value:"inspector","aria-label":"Left aligned",children:[_t(eP,{})," Tile Inspector"]}),_t(Tm,{value:"leaflet","aria-label":"Center aligned",children:"Leaflet"}),_t(Tm,{value:"maplibre","aria-label":"Right aligned",children:"MapLibre"})]}),_t(Pz,{href:"#",target:"_blank",css:{marginRight:10},children:e.file.source.getKey()}),vi(az,{open:v,children:[_t(vz,{onClick:()=>S(!0),children:"Metadata"}),vi(uz,{children:[_t(xz,{}),vi(wz,{onEscapeKeyDown:V,onPointerDownOutside:V,children:[_t(dz,{}),_t(pz,{}),vi(bz,{children:[_t("thead",{children:vi("tr",{children:[_t("th",{children:"key"}),_t("th",{children:"value"})]})}),_t("tbody",{children:A})]}),_t(fz,{})]})]})]})]}),u]})}const Iz=In("div",{height:"$4",display:"flex",alignItems:"center",padding:"0 $2 0 $2"}),zz=In("span",{fontWeight:500,cursor:"pointer"}),Az=In("a",{color:"white",textDecoration:"none",fontSize:"$1"}),Mz=In("span",{marginLeft:"auto"}),Lz="cbc5f19".substr(0,8);function Dz(){OT();let e;const n=new URLSearchParams(location.search).get("url");n&&(e=new Th(n));let[s,h]=re.exports.useState(e);return re.exports.useEffect(()=>{if(s){const v=new URL(window.location.href);v.searchParams.set("url",s.source.getKey()),history.pushState(null,"",v.toString())}},[s]),vi("div",{children:[vi(Iz,{children:[_t(zz,{onClick:()=>{h(void 0)},children:"PMTiles Viewer"}),_t(Mz,{children:vi(Az,{href:"https://github.com/protomaps/PMTiles",target:"_blank",children:[_t(JT,{})," ",Lz]})})]}),s?_t(Cz,{file:s}):_t(bk,{setFile:h})]})}Pm.createRoot(document.getElementById("root")).render(_t(tn.StrictMode,{children:_t(Dz,{})}));
